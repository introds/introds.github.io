(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"1SRF":function(t,e,n){"use strict";function i(t,e){var n=this;this.location=o(t),this.label=o(e),this.updateLocation=function(t){var e=t.filter(function(t){return t.label()==n.label()});e.length>0&&n.location(function(t){var e=t[0].location().map(function(){return 0});return t.map(function(t){return t.location()}).reduce(function(t,e){return function(t,e){return t.map(function(t,n){return t+e[n]})}(t,e)},e).map(function(e){return e/t.length})}(e))}}function o(t,e){var n=t,i=e||function(t){return!0};return function(t){if(void 0===t)return n;i(t)&&(n=t)}}t.exports={data:o([],function(t){var e=t[0].length;return t.map(function(t){return t.length==e}).reduce(function(t,e){return t&e},!0)}),clusters:function(){var t=function(t,e){for(var n=e.k||Math.round(Math.sqrt(t.length/2)),r=e.iterations,s=t.map(function(t){return new function(e){var n=this;this.location=o(t),this.label=o(),this.updateLabel=function(t){var e,i,o=t.map(function(t){return e=n.location(),i=t.location(),e.map(function(t,e){return Math.pow(t-i[e],2)}).reduce(function(t,e){return t+e},0);var e,i});n.label((i=(e=o).reduce(function(t,e){return Math.min(t,e)}),e.indexOf(i)))}}(0)}),a=[],l=0;l<n;l++)a.push(new i(s[l%s.length].location(),l));for(var u=0;u<r;u++)s.forEach(function(t){t.updateLabel(a)}),a.forEach(function(t){t.updateLocation(s)});return{points:s,centroids:a}}(this.data(),{k:this.k(),iterations:this.iterations()}),e=t.points;return t.centroids.map(function(t){return{centroid:t.location(),points:e.filter(function(e){return e.label()==t.label()}).map(function(t){return t.location()})}})},k:o(void 0,function(t){return t%1==0&t>0}),iterations:o(Math.pow(10,3),function(t){return t%1==0&t>0})}},"A1R+":function(t,e,n){"use strict";t.exports=o,t.exports.default=o;var i=n("YcpW");function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,o){o||(o=g(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,s=e;s<n;s++)r=t.children[s],l(o,t.leaf?i(r):r);return o}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,n,o,r){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=o||(s=e+Math.ceil((n-e)/o/2)*o,i(t,s,e,n,r),a.push(e,s,s,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!f(t,e))return n;for(var o,r,s,a,l=[];e;){for(o=0,r=e.children.length;o<r;o++)s=e.children[o],f(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!f(t,e))return!1;for(var i,o,r,s,a=[];e;){for(i=0,o=e.children.length;i<o;i++)if(r=e.children[i],f(t,s=e.leaf?n(r):r)){if(e.leaf||p(t,s))return!0;a.push(r)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var o=this.data;this.data=i,i=o}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,o,s,a=this.data,l=this.toBBox(t),u=[],h=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],n=h.pop(),s=!0),a.leaf&&-1!==(o=r(t,a.children,e)))return a.children.splice(o,1),u.push(a),this._condense(u),this;s||a.leaf||!p(a,l)?i?(a=i.children[++n],s=!1):a=null:(u.push(a),h.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var o,r=n-e+1,a=this._maxEntries;if(r<=a)return s(o=g(t.slice(e,n+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,i-1))),(o=g([])).leaf=!1,o.height=i;var l,u,h,c,d=Math.ceil(r/a),p=d*Math.ceil(Math.sqrt(a));for(_(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(_(t,l,h=Math.min(l+p-1,n),d,this.compareMinY),u=l;u<=h;u+=d)c=Math.min(u+d-1,h),o.children.push(this._build(t,u,c,i-1));return s(o,this.toBBox),o},_chooseSubtree:function(t,e,n,i){for(var o,r,s,a,l,u,h,d,p,f;i.push(e),!e.leaf&&i.length-1!==n;){for(h=d=1/0,o=0,r=e.children.length;o<r;o++)l=c(s=e.children[o]),p=t,f=s,(u=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l)<d?(d=u,h=l<h?l:h,a=s):u===d&&l<h&&(h=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),o=[],r=this._chooseSubtree(i,this.data,e,o);for(r.children.push(t),l(r,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);var r=this._chooseSplitIndex(n,o,i),a=g(n.children.splice(r,n.children.length-r));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,o,r,s,l,u,h,d,p,f,g,_,y,m;for(u=h=1/0,i=e;i<=n-e;i++)p=o=a(t,0,i,this.toBBox),f=r=a(t,i,n,this.toBBox),g=Math.max(p.minX,f.minX),_=Math.max(p.minY,f.minY),y=Math.min(p.maxX,f.maxX),m=Math.min(p.maxY,f.maxY),s=Math.max(0,y-g)*Math.max(0,m-_),l=c(o)+c(r),s<u?(u=s,d=i,h=l<h?l:h):s===u&&l<h&&(h=l,d=i);return d},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,o)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var o,r,s=this.toBBox,u=a(t,0,e,s),h=a(t,n-e,n,s),c=d(u)+d(h);for(o=e;o<n-e;o++)r=t.children[o],l(u,t.leaf?s(r):r),c+=d(u);for(o=n-e-1;o>=e;o--)r=t.children[o],l(h,t.leaf?s(r):r),c+=d(h);return c},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},"W8A/":function(t,e){t.exports='.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 2px solid blue;\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: rgba(0,60,136,0.3);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid #eee;\n  border-top: none;\n  color: #eee;\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n}\n\n.ol-overlay-container {\n  will-change: left,right,top,bottom;\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport, .ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: rgba(255,255,255,0.4);\n  border-radius: 4px;\n  padding: 2px;\n}\n\n.ol-control:hover {\n  background-color: rgba(255,255,255,0.6);\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n@media print {\n  .ol-control {\n    display: none;\n  }\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: white;\n  font-size: 1.14em;\n  font-weight: bold;\n  text-decoration: none;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: rgba(0,60,136,0.5);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  font-size: 1.2em;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  background-color: rgba(0,60,136,0.7);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 0 .5em;\n  font-size: .7rem;\n  line-height: 1.375em;\n  color: #000;\n  text-shadow: 0 0 2px #fff;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n  line-height: inherit;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution ul, .ol-attribution button {\n  display: inline-block;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n  height: 1.1em;\n  line-height: 1em;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: inline-block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid #7b98bc;\n  height: 150px;\n  margin: 2px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button{\n  bottom: 1px;\n  left: 2px;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n\n.ol-overviewmap-box {\n  border: 2px dotted rgba(0,60,136,0.7);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n'},YcpW:function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function e(t,e){return t<e?-1:t>e?1:0}return function(n,i,o,r,s){!function e(n,i,o,r,s){for(;r>o;){if(r-o>600){var a=r-o+1,l=i-o+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1);e(n,i,Math.max(o,Math.floor(i-l*h/a+c)),Math.min(r,Math.floor(i+(a-l)*h/a+c)),s)}var d=n[i],p=o,f=r;for(t(n,o,i),s(n[r],d)>0&&t(n,o,r);p<f;){for(t(n,p,f),p++,f--;s(n[p],d)<0;)p++;for(;s(n[f],d)>0;)f--}0===s(n[o],d)?t(n,o,f):t(n,++f,r),f<=i&&(o=f+1),i<=f&&(r=f-1)}}(n,i,o||0,r||n.length-1,s||e)}}()},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},zUnb:function(t,e,n){"use strict";n.r(e);var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e){return function(n,i){e(n,i,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}var d=Array.isArray||function(t){return t&&"number"==typeof t.length};function p(t){return null!=t&&"object"==typeof t}function f(t){return"function"==typeof t}var g,_={e:{}};function y(){try{return g.apply(this,arguments)}catch(t){return _.e=t,_}}function m(t){return g=t,y}var v=function(t){function e(n){var i=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return i.errors=n,i.name="UnsubscriptionError",Object.setPrototypeOf(i,e.prototype),i}return o(e,t),e}(Error),x=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,i=this._parents,o=this._unsubscribe,r=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=i?i.length:0;n;)n.remove(this),n=++s<a&&i[s]||null;if(f(o)&&m(o).call(this)===_&&(e=!0,t=t||(_.e instanceof v?b(_.e.errors):[_.e])),d(r))for(s=-1,a=r.length;++s<a;){var l=r[s];if(p(l)&&m(l.unsubscribe).call(l)===_){e=!0,t=t||[];var u=_.e;u instanceof v?t=t.concat(b(u.errors)):t.push(u)}}if(e)throw new v(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function b(t){return t.reduce(function(t,e){return t.concat(e instanceof v?e.errors:e)},[])}var w=!1,C={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){w=t},get useDeprecatedSynchronousErrorHandling(){return w}};function E(t){setTimeout(function(){throw t})}var T={closed:!0,next:function(t){},error:function(t){if(C.useDeprecatedSynchronousErrorHandling)throw t;E(t)},complete:function(){}},S="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",I=function(t){function e(e,n,i){var o,r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=T;break;case 1:if(!e){r.destination=T;break}if("object"==typeof e){if((o=e)instanceof I||"syncErrorThrowable"in o&&o[S]){var s=e[S]();r.syncErrorThrowable=s.syncErrorThrowable,r.destination=s,s.add(r)}else r.syncErrorThrowable=!0,r.destination=new R(r,e);break}default:r.syncErrorThrowable=!0,r.destination=new R(r,e,n,i)}return r}return o(e,t),e.prototype[S]=function(){return this},e.create=function(t,n,i){var o=new e(t,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(x),R=function(t){function e(e,n,i,o){var r,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return f(n)?r=n:n&&(r=n.next,i=n.error,o=n.complete,n!==T&&(f((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=r,s._error=i,s._complete=o,s}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=C.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):E(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;E(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),C.useDeprecatedSynchronousErrorHandling)throw t;E(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!C.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return C.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(E(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(I),P="function"==typeof Symbol&&Symbol.observable||"@@observable";var M=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,o=function(t,e,n){if(t){if(t instanceof I)return t;if(t[S])return t[S]()}return t||e||n?new I(t,e,n):new I(T)}(t,e,n);if(i?i.call(o,this.source):o.add(this.source||C.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),C.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){C.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=k(e))(function(e,i){var o;o=n.subscribe(function(e){try{t(e)}catch(t){i(t),o&&o.unsubscribe()}},i,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[P]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce(function(t,e){return e(t)},t)}:function(){})(this);var n},t.prototype.toPromise=function(t){var e=this;return new(t=k(t))(function(t,n){var i;e.subscribe(function(t){return i=t},function(t){return n(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}();function k(t){if(t||(t=C.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var L=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error),F=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(x),D=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return o(e,t),e}(I),O=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[S]=function(){return new D(this)},e.prototype.lift=function(t){var e=new A(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new L;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new L;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new L;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new L;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new L;return this.hasError?(t.error(this.thrownError),x.EMPTY):this.isStopped?(t.complete(),x.EMPTY):(this.observers.push(t),new F(this,t))},e.prototype.asObservable=function(){var t=new M;return t.source=this,t},e.create=function(t,e){return new A(t,e)},e}(M),A=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):x.EMPTY},e}(O);function N(t){return t&&"function"==typeof t.schedule}var G=function(t){function e(e,n,i){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(I),V=function(t){return function(e){for(var n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},j=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,E),e}},B=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),z=function(t){return function(e){for(var n=t[B]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},H=function(t){return function(e){var n=t[P]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},W=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function U(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Y=function(t){if(t instanceof M)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[P])return H(t);if(W(t))return V(t);if(U(t))return j(t);if(t&&"function"==typeof t[B])return z(t);var e=p(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function K(t,e,n,i){var o=new G(t,n,i);return Y(e)(o)}var X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(I);function Z(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new q(t,e))}}var q=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Q(t,this.project,this.thisArg))},t}(),Q=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(I);function J(t,e){return new M(e?function(n){var i=new x,o=0;return i.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||i.add(this.schedule())):n.complete()})),i}:V(t))}function $(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(i){return i.pipe($(function(n,i){return(o=t(n,i),o instanceof M?o:new M(Y(o))).pipe(Z(function(t,o){return e(n,t,i,o)}));var o},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new tt(t,n))})}var tt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.project,this.concurrent))},t}(),et=function(t){function e(e,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(K(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(X);function nt(t){return t}function it(){return function(t){return t.lift(new ot(t))}}var ot=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new rt(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},t}(),rt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.connectable=n,i}return o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},e}(I),st=function(t){function e(e,n){var i=t.call(this)||this;return i.source=e,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return o(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new x).add(this.source.subscribe(new lt(this.getSubject(),this))),t.closed?(this._connection=null,t=x.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return it()(this)},e}(M).prototype,at={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:st._subscribe},_isComplete:{value:st._isComplete,writable:!0},getSubject:{value:st.getSubject},connect:{value:st.connect},refCount:{value:st.refCount}},lt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.connectable=n,i}return o(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(D);function ut(){return new O}function ht(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}var ct=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?ht({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),dt="__parameters__";function pt(t,e,n){var i=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,c(e));for(var o in i)this[o]=i[o]}}}(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var r=new((t=o).bind.apply(t,c([void 0],e)));return s.annotation=r,s;function s(t,e,n){for(var i=t.hasOwnProperty(dt)?t[dt]:Object.defineProperty(t,dt,{value:[]})[dt];i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(r),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}Function;var ft="undefined"!=typeof window&&window,gt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_t="undefined"!=typeof global&&global||ft||gt,yt=Promise.resolve(0),mt=null;function vt(){if(!mt){var t=_t.Symbol;if(t&&t.iterator)mt=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(mt=i)}}return mt}function xt(t){"undefined"==typeof Zone?yt.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function bt(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function wt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ct(t){return t.__forward_ref__=Ct,t.toString=function(){return wt(this())},t}function Et(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===Ct?t():t}var Tt=pt("Inject",function(t){return{token:t}}),St=pt("Optional"),It=pt("Self"),Rt=pt("SkipSelf"),Pt=pt("Host"),Mt="__source",kt=new Object,Lt=kt,Ft=new ct("INJECTOR"),Dt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=kt),e===kt)throw new Error("NullInjectorError: No provider for "+wt(t)+"!");return e},t}(),Ot=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new Ut(t,e):new Ut(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=kt,t.NULL=new Dt,t.ngInjectableDef=ht({providedIn:"any",factory:function(){return Qt(Ft)}}),t}(),At=function(t){return t},Nt=[],Gt=At,Vt=function(){return Array.prototype.slice.call(arguments)},jt={},Bt=function(t){for(var e in t)if(t[e]===jt)return e;throw Error("!prop")}({provide:String,useValue:jt}),zt=Ot.NULL,Ht=/\n/gm,Wt="\u0275",Ut=function(){function t(t,e,n){void 0===e&&(e=zt),void 0===n&&(n=null),this.parent=e,this.source=n;var i=this._records=new Map;i.set(Ot,{token:Ot,fn:At,deps:Nt,value:this,useNew:!1}),i.set(Ft,{token:Ft,fn:At,deps:Nt,value:this,useNew:!1}),function t(e,n){if(n)if((n=Et(n))instanceof Array)for(var i=0;i<n.length;i++)t(e,n[i]);else{if("function"==typeof n)throw Xt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Xt("Unexpected provider",n);var o=Et(n.provide),r=function(t){var e=function(t){var e=Nt,n=t.deps;if(n&&n.length){e=[];for(var i=0;i<n.length;i++){var o=6;if((l=Et(n[i]))instanceof Array)for(var r=0,s=l;r<s.length;r++){var a=s[r];a instanceof St||a==St?o|=1:a instanceof Rt||a==Rt?o&=-3:a instanceof It||a==It?o&=-5:l=a instanceof Tt?a.token:Et(a)}e.push({token:l,options:o})}}else if(t.useExisting){var l;e=[{token:l=Et(t.useExisting),options:6}]}else if(!(n||Bt in t))throw Xt("'deps' required",t);return e}(t),n=At,i=Nt,o=!1,r=Et(t.provide);if(Bt in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)o=!0,n=Et(t.useClass);else{if("function"!=typeof r)throw Xt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);o=!0,n=r}return{deps:e,fn:n,useNew:o,value:i}}(n);if(!0===n.multi){var s=e.get(o);if(s){if(s.fn!==Vt)throw Yt(o)}else e.set(o,s={token:n.provide,deps:[],useNew:!1,fn:Vt,value:Nt});s.deps.push({token:o=n,options:6})}var a=e.get(o);if(a&&a.fn==Vt)throw Yt(o);e.set(o,r)}}(i,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=0);var i=this._records.get(t);try{return function t(e,n,i,o,r,s){try{return function(e,n,i,o,r,s){var a,l;if(!n||4&s)2&s||(l=o.get(e,r,0));else{if((l=n.value)==Gt)throw Error(Wt+"Circular dependency");if(l===Nt){n.value=Gt;var u=n.useNew,h=n.fn,d=n.deps,p=Nt;if(d.length){p=[];for(var f=0;f<d.length;f++){var g=d[f],_=g.options,y=2&_?i.get(g.token):void 0;p.push(t(g.token,y,i,y||4&_?o:zt,1&_?null:Ot.THROW_IF_NOT_FOUND,0))}}n.value=l=u?new((a=h).bind.apply(a,c([void 0],p))):h.apply(void 0,p)}}return l}(e,n,i,o,r,s)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==Gt&&(n.value=Nt),t}}(t,i,this._records,this.parent,e,n)}catch(e){var o=e.ngTempTokenPath;throw t[Mt]&&o.unshift(t[Mt]),e.message=Kt("\n"+e.message,o,this.source),e.ngTokenPath=o,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(wt(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Yt(t){return Xt("Cannot mix multi providers and regular providers",t)}function Kt(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Wt?t.substr(2):t;var i=wt(e);if(e instanceof Array)i=e.map(wt).join(" -> ");else if("object"==typeof e){var o=[];for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];o.push(r+":"+("string"==typeof s?JSON.stringify(s):wt(s)))}i="{"+o.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+i+"]: "+t.replace(Ht,"\n  ")}function Xt(t,e){return new Error(Kt(t,e))}var Zt=void 0;function qt(t){var e=Zt;return Zt=t,e}function Qt(t,e){if(void 0===e&&(e=0),void 0===Zt)throw new Error("inject() must be called from an injection context");if(null===Zt){var n=t.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&e)return null;throw new Error("Injector: NOT_FOUND ["+wt(t)+"]")}return Zt.get(t,8&e?null:void 0,e)}function Jt(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,r=0,s=0;s<i.length;s++){var a=i[s];a instanceof St||"Optional"===a.ngMetadataName?r|=8:a instanceof Rt||"SkipSelf"===a.ngMetadataName?r|=4:a instanceof It||"Self"===a.ngMetadataName?r|=2:o=a instanceof Tt?a.token:a}e.push(Qt(o,r))}else e.push(Qt(i))}return e}String;var $t=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),te=new function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("6.1.10"),ee="ngDebugContext",ne="ngOriginalError",ie="ngErrorLogger";function oe(t){return t[ee]}function re(t){return t[ne]}function se(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,c(e))}var ae=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t[ie]||se}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?oe(t)?oe(t):this._findContext(re(t)):null},t.prototype._findOriginalError=function(t){for(var e=re(t);e&&re(e);)e=re(e);return e},t}(),le=new ct("The presence of this token marks an injector as being the root injector."),ue={},he={},ce=[],de=void 0;function pe(){return void 0===de&&(de=new Dt),de}var fe=function(){function t(t,e,n){var i=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,ye([t],function(t){return i.processInjectorType(t,new Set)}),e&&ye(e,function(t){return i.processProvider(t)}),this.records.set(Ft,_e(void 0,this)),this.isRootInjector=this.records.has(le),this.injectorDefTypes.forEach(function(t){return i.get(t)})}return t.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},t.prototype.get=function(t,e,n){void 0===e&&(e=Lt),void 0===n&&(n=0),this.assertNotDestroyed();var i,o=qt(this);try{if(!(4&n)){var r=this.records.get(t);if(void 0===r){var s=("function"==typeof(i=t)||"object"==typeof i&&i instanceof ct)&&t.ngInjectableDef||void 0;void 0!==s&&this.injectableDefInScope(s)&&(r=ge(t),this.records.set(t,r))}if(void 0!==r)return this.hydrate(t,r)}return 2&n&&pe(),this.parent.get(t,e)}finally{qt(o)}},t.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},t.prototype.processInjectorType=function(t,e){var n=this,i=(t=Et(t)).ngInjectorDef,o=null==i&&t.ngModule||void 0,r=void 0===o?t:o,s=void 0!==o&&t.providers||ce;if(void 0!==o&&(i=o.ngInjectorDef),null!=i){if(e.has(r))throw new Error("Circular dependency: type "+wt(r)+" ends up importing itself.");if(this.injectorDefTypes.add(r),this.records.set(r,_e(i.factory)),null!=i.imports){e.add(r);try{ye(i.imports,function(t){return n.processInjectorType(t,e)})}finally{e.delete(r)}}null!=i.providers&&ye(i.providers,function(t){return n.processProvider(t)}),ye(s,function(t){return n.processProvider(t)})}},t.prototype.processProvider=function(t){var e=me(t=Et(t))?t:Et(t.provide),n=function(t){var e=Et(t),n=ue,i=void 0;if(me(t))return ge(t);if(e=Et(t.provide),Bt in t)n=t.useValue;else if(t.useExisting)i=function(){return Qt(t.useExisting)};else if(t.useFactory)i=function(){return t.useFactory.apply(t,c(Jt(t.deps||[])))};else{var o=t.useClass||e;if(!t.deps)return ge(o);i=function(){return new(o.bind.apply(o,c([void 0],Jt(t.deps))))}}return _e(i,n)}(t);if(me(t)||!0!==t.multi){var i=this.records.get(e);if(i&&void 0!==i.multi)throw new Error("Mixed multi-provider for "+wt(e))}else{var o=this.records.get(e);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+e+".")}else(o=_e(void 0,ue,!0)).factory=function(){return Jt(o.multi)},this.records.set(e,o);e=t,o.multi.push(t)}this.records.set(e,n)},t.prototype.hydrate=function(t,e){if(e.value===he)throw new Error("Circular dep for "+wt(t));var n;return e.value===ue&&(e.value=he,e.value=e.factory()),"object"==typeof e.value&&e.value&&"object"==typeof(n=e.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value},t.prototype.injectableDefInScope=function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))},t}();function ge(t){var e=t.ngInjectableDef;if(void 0===e){if(t instanceof ct)throw new Error("Token "+wt(t)+" is missing an ngInjectableDef definition.");return _e(function(){return new t})}return _e(e.factory)}function _e(t,e,n){return void 0===e&&(e=ue),void 0===n&&(n=!1),{factory:t,value:e,multi:n?[]:void 0}}function ye(t,e){t.forEach(function(t){return Array.isArray(t)?ye(t,e):e(t)})}function me(t){return"function"==typeof t}function ve(t){return!!t&&"function"==typeof t.then}var xe=new ct("Application Initializer"),be=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var o=this.appInits[i]();ve(o)&&e.push(o)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},s([a(0,Tt(xe)),a(0,St())],t)}(),we=new ct("AppId");function Ce(){return""+Ee()+Ee()+Ee()}function Ee(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Te=new ct("Platform Initializer"),Se=new ct("Platform ID"),Ie=new ct("appBootstrapListener"),Re=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Pe(){throw new Error("Runtime compiler is not loaded")}var Me=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw Pe()},t.prototype.compileModuleAsync=function(t){throw Pe()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw Pe()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw Pe()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),ke=function(){},Le=function(){},Fe=function(){};function De(t){var e=Error("No component factory found for "+wt(t)+". Did you add it to @NgModule.entryComponents?");return e[Ne]=t,e}var Oe,Ae,Ne="ngComponent",Ge=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw De(t)},t}(),Ve=function(){function t(){}return t.NULL=new Ge,t}(),je=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var i=0;i<t.length;i++){var o=t[i];this._factories.set(o.componentType,o)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw De(t);return new Be(e,this._ngModule)},t}(),Be=function(t){function e(e,n){var i=t.call(this)||this;return i.factory=e,i.ngModule=n,i.selector=e.selector,i.componentType=e.componentType,i.ngContentSelectors=e.ngContentSelectors,i.inputs=e.inputs,i.outputs=e.outputs,i}return o(e,t),e.prototype.create=function(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)},e}(Fe),ze=function(){},He=function(){},We=function(){var t=_t.wtf;return!(!t||!(Oe=t.trace)||(Ae=Oe.events,0))}();function Ue(t,e){return null}var Ye=We?function(t,e){return void 0===e&&(e=null),Ae.createScope(t,e)}:function(t,e){return Ue},Ke=We?function(t,e){return Oe.leaveScope(t,e),e}:function(t,e){return e},Xe=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return o(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,i){var o,r=function(t){return null},s=function(){return null};e&&"object"==typeof e?(o=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(r=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(r=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),i&&(s=this.__isAsync?function(){setTimeout(function(){return i()})}:function(){i()}));var a=t.prototype.subscribe.call(this,o,r,s);return e instanceof x&&e.add(a),a},e}(O),Ze=function(){function t(t){var e,n=t.enableLongStackTrace,i=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,i,o,r,s){try{return $e(e),t.invokeTask(i,o,r,s)}finally{tn(e)}},onInvoke:function(t,n,i,o,r,s,a){try{return $e(e),t.invoke(i,o,r,s,a)}finally{tn(e)}},onHasTask:function(t,n,i,o){t.hasTask(i,o),n===i&&("microTask"==o.change?(e.hasPendingMicrotasks=o.microTask,Je(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:function(t,n,i,o){return t.handleError(i,o),e.runOutsideAngular(function(){return e.onError.emit(o)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,i){var o=this._inner,r=o.scheduleEventTask("NgZoneEvent: "+i,t,Qe,qe,qe);try{return o.runTask(r,e,n)}finally{o.cancelTask(r)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function qe(){}var Qe={};function Je(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function $e(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tn(t){t._nesting--,Je(t)}var en,nn=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),on=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Ze.assertNotInAngularZone(),xt(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())xt(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,isPeriodic:t.data.isPeriodic,delay:t.data.delay,creationLocation:t.creationLocation,xhr:t.data.target}}):[]},t.prototype.addCallback=function(t,e,n){var i=this,o=-1;e&&e>0&&(o=setTimeout(function(){i._callbacks=i._callbacks.filter(function(t){return t.timeoutId!==o}),t(i._didWork,i.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),rn=function(){function t(){this._applications=new Map,sn.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),sn.findTestabilityInTree(this,t,e)},s([l("design:paramtypes",[])],t)}(),sn=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),an=!0,ln=!1,un=new ct("AllowMultipleToken");function hn(){return ln=!0,an}var cn=function(t,e){this.name=t,this.token=e};function dn(t,e,n){void 0===n&&(n=[]);var i="Platform: "+e,o=new ct(i);return function(e){void 0===e&&(e=[]);var r=pn();if(!r||r.injector.get(un,!1))if(t)t(n.concat(e).concat({provide:o,useValue:!0}));else{var s=n.concat(e).concat({provide:o,useValue:!0});!function(t){if(en&&!en.destroyed&&!en.injector.get(un,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");en=t.get(fn);var e=t.get(Te,null);e&&e.forEach(function(t){return t()})}(Ot.create({providers:s,name:i}))}return function(t){var e=pn();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(o)}}function pn(){return en&&!en.destroyed?en:null}var fn=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,i=this,o="noop"===(n=e?e.ngZone:void 0)?new nn:("zone.js"===n?void 0:n)||new Ze({enableLongStackTrace:hn()}),r=[{provide:Ze,useValue:o}];return o.run(function(){var e=Ot.create({providers:r,parent:i.injector,name:t.moduleType.name}),n=t.create(e),s=n.injector.get(ae,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return yn(i._modules,n)}),o.runOutsideAngular(function(){return o.onError.subscribe({next:function(t){s.handleError(t)}})}),function(t,e,o){try{var r=((s=n.injector.get(be)).runInitializers(),s.donePromise.then(function(){return i._moduleDoBootstrap(n),n}));return ve(r)?r.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):r}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var s}(s,o)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var i=this.injector.get(ke),o=gn({},e);return i.createCompiler([o]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,o)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(_n);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+wt(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function gn(t,e){return Array.isArray(e)?e.reduce(gn,t):r({},t,e)}var _n=function(){function t(t,e,n,i,o,r){var s=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=hn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run(function(){s.tick()})}});var a=new M(function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular(function(){t.next(s._stable),t.complete()})}),l=new M(function(t){var e;s._zone.runOutsideAngular(function(){e=s._zone.onStable.subscribe(function(){Ze.assertNotInAngularZone(),xt(function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))})})});var n=s._zone.onUnstable.subscribe(function(){Ze.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return N(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof M?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),$(nt,t)}(n)(J(t,i))}(a,l.pipe(function(t){return it()((e=ut,function(t){var n;n="function"==typeof e?e:function(){return e};var i=Object.create(t,at);return i.source=t,i.subjectFactory=n,i})(t));var e}))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Fe?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var o=n instanceof Be?null:this._injector.get(ze),r=n.create(Ot.NULL,[],e||n.selector,o);r.onDestroy(function(){i._unloadComponent(r)});var s=r.injector.get(on,null);return s&&r.injector.get(rn).registerApplication(r.location.nativeElement,s),this._loadComponent(r),hn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,Ke(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;yn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ie,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),yn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Ye("ApplicationRef#tick()"),t}();function yn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var mn=function(){},vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),xn=function(){},bn=function(t){this.nativeElement=t},wn=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Xe,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[vt()]=function(){return this._results[vt()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var i=Array.isArray(n)?t(n):n;return e.concat(i)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),Cn=function(){},En=function(){},Tn=function(){},Sn=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof In?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),In=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=e,o}return o(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,c([o+1,0],e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,i){e.childNodes.forEach(function(e){e instanceof In&&(n(e)&&i.push(e),t(e,n,i))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,i){e instanceof In&&e.childNodes.forEach(function(e){n(e)&&i.push(e),e instanceof In&&t(e,n,i)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Sn),Rn=new Map;function Pn(t){return Rn.get(t)||null}function Mn(t){Rn.set(t.nativeNode,t)}function kn(t,e){var n=Dn(t),i=Dn(e);return n&&i?function(t,e,n){for(var i=t[vt()](),o=e[vt()]();;){var r=i.next(),s=o.next();if(r.done&&s.done)return!0;if(r.done||s.done)return!1;if(!n(r.value,s.value))return!1}}(t,e,kn):!(n||!t||"object"!=typeof t&&"function"!=typeof t||i||!e||"object"!=typeof e&&"function"!=typeof e)||bt(t,e)}var Ln=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Fn=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Dn(t){return!!On(t)&&(Array.isArray(t)||!(t instanceof Map)&&vt()in t)}function On(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var An=function(){function t(){}return t.prototype.supports=function(t){return Dn(t)},t.prototype.create=function(t){return new Gn(t)},t}(),Nn=function(t,e){return e},Gn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Nn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,i=0,o=null;e||n;){var r=!n||e&&e.currentIndex<zn(n,i,o)?e:n,s=zn(r,i,o),a=r.currentIndex;if(r===n)i--,n=n._nextRemoved;else if(e=e._next,null==r.previousIndex)i++;else{o||(o=[]);var l=s-i,u=a-i;if(l!=u){for(var h=0;h<l;h++){var c=h<o.length?o[h]:o[h]=0,d=c+h;u<=d&&d<l&&(o[h]=c+1)}o[r.previousIndex]=u-l}}s!==a&&t(r,s,a)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Dn(t))throw new Error("Error trying to diff '"+wt(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,i,o,r=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)o=this._trackByFn(a,i=t[a]),null!==r&&bt(r.trackById,o)?(s&&(r=this._verifyReinsertion(r,i,o,a)),bt(r.item,i)||this._addIdentityChange(r,i)):(r=this._mismatch(r,i,o,a),s=!0),r=r._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var i=t[vt()](),o=void 0;!(o=i.next()).done;)e(o.value)}(t,function(t){o=e._trackByFn(n,t),null!==r&&bt(r.trackById,o)?(s&&(r=e._verifyReinsertion(r,t,o,n)),bt(r.item,t)||e._addIdentityChange(r,t)):(r=e._mismatch(r,t,o,n),s=!0),r=r._next,n++}),this.length=n;return this._truncate(r),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,i){var o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(bt(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(bt(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):t=this._addAfter(new Vn(e,n),o,i),t},t.prototype._verifyReinsertion=function(t,e,n,i){var o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Bn),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Vn=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},jn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&bt(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Bn=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new jn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function zn(t,e,n){var i=t.previousIndex;if(null===i)return i;var o=0;return n&&i<n.length&&(o=n[i]),i+e+o}var Hn=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||On(t)},t.prototype.create=function(){return new Wn},t}(),Wn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||On(t)))throw new Error("Error trying to diff '"+wt(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,i){if(n&&n.key===i)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var o=e._getOrCreateRecordForKey(i,t);n=e._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var i=n._prev,o=n._next;return i&&(i._next=o),o&&(o._prev=i),n._next=null,n._prev=null,n}var r=new Un(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){bt(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Un=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Yn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var i=n.factories.slice();e=e.concat(i)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Rt,new St]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=ht({providedIn:"root",factory:function(){return new t([new An])}}),t}(),Kn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var i=n.factories.slice();e=e.concat(i)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Rt,new St]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Xn=[new Hn],Zn=new Yn([new An]),qn=new Kn(Xn),Qn=dn(null,"core",[{provide:Se,useValue:"unknown"},{provide:fn,deps:[Ot]},{provide:rn,deps:[]},{provide:Re,deps:[]}]),Jn=new ct("LocaleId");function $n(){return Zn}function ti(){return qn}function ei(t){return t||"en-US"}var ni=function(t){},ii=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var i=e.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||t.removeAttribute(i)}for(var o=t.firstChild;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling},t}(),oi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ri=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function si(t){return(t=String(t)).match(oi)||t.match(ri)?t:(hn()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function ai(t){var e,n,i={};try{for(var o=u(t.split(",")),r=o.next();!r.done;r=o.next())i[r.value]=!0}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function li(){for(var t,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var r=u(n),s=r.next();!s.done;s=r.next()){var a=s.value;for(var l in a)a.hasOwnProperty(l)&&(o[l]=!0)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return o}var ui,hi=ai("area,br,col,hr,img,wbr"),ci=ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),di=ai("rp,rt"),pi=li(di,ci),fi=li(hi,li(ci,ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),li(di,ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pi),gi=ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_i=ai("srcset"),yi=li(gi,_i,ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),mi=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(e.nodeType===Node.ELEMENT_NODE?this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var n=this.checkClobberedElement(e,e.nextSibling);if(n){e=n;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e=t.nodeName.toLowerCase();if(fi.hasOwnProperty(e)){this.buf.push("<"),this.buf.push(e);for(var n,i=t.attributes,o=0;o<i.length;o++){var r=i.item(o),s=r.name,a=s.toLowerCase();if(yi.hasOwnProperty(a)){var l=r.value;gi[a]&&(l=si(l)),_i[a]&&(n=l,l=(n=String(n)).split(",").map(function(t){return si(t.trim())}).join(", ")),this.buf.push(" ",s,'="',bi(l),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();fi.hasOwnProperty(e)&&!hi.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(bi(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),vi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xi=/([^\#-~ |!])/g;function bi(t){return t.replace(/&/g,"&amp;").replace(vi,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(xi,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function wi(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ci=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Ei=/^url\(([^)]+)\)$/,Ti=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),Si=function(){};function Ii(t,e,n){var i=t.state,o=1792&i;return o===e?(t.state=-1793&i|n,t.initIndex=-1,!0):o===n}function Ri(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Pi(t,e){return t.nodes[e]}function Mi(t,e){return t.nodes[e]}function ki(t,e){return t.nodes[e]}function Li(t,e){return t.nodes[e]}function Fi(t,e){return t.nodes[e]}var Di={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Oi(t,e,n,i){var o="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return i&&(o+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Ai(n,e),n}(o,t)}function Ai(t,e){t[ee]=e,t[ie]=e.logError.bind(e)}function Ni(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Gi=function(){},Vi=new Map;function ji(t){var e=Vi.get(t);return e||(e=wt(t)+"_"+Vi.size,Vi.set(t,e)),e}var Bi="$$undefined",zi="$$empty";function Hi(t){return{id:Bi,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Wi=0;function Ui(t,e,n,i){return!(!(2&t.state)&&bt(t.oldValues[e.bindingIndex+n],i))}function Yi(t,e,n,i){return!!Ui(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function Ki(t,e,n,i){var o=t.oldValues[e.bindingIndex+n];if(1&t.state||!kn(o,i)){var r=e.bindings[n].name;throw Oi(Di.createDebugContext(t,e.nodeIndex),r+": "+o,r+": "+i,0!=(1&t.state))}}function Xi(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Zi(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function qi(t,e,n,i){try{return Xi(33554432&t.def.nodes[e].flags?Mi(t,e).componentView:t),Di.handleEvent(t,e,n,i)}catch(e){t.root.errorHandler.handleError(e)}}function Qi(t){return t.parent?Mi(t.parent,t.parentNodeDef.nodeIndex):null}function Ji(t){return t.parent?t.parentNodeDef.parent:null}function $i(t,e){switch(201347067&e.flags){case 1:return Mi(t,e.nodeIndex).renderElement;case 2:return Pi(t,e.nodeIndex).renderText}}function to(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function eo(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function no(t){return 1<<t%32}function io(t){var e={},n=0,i={};return t&&t.forEach(function(t){var o=h(t,2),r=o[0],s=o[1];"number"==typeof r?(e[r]=s,n|=no(r)):i[r]=s}),{matchedQueries:e,references:i,matchedQueryIds:n}}function oo(t,e){return t.map(function(t){var n,i,o;return Array.isArray(t)?(o=(n=h(t,2))[0],i=n[1]):(o=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,Mt,{value:e,configurable:!0}),{flags:o,token:i,tokenKey:ji(i)}})}function ro(t,e,n){var i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===$t.Native?Mi(t,n.renderParent.nodeIndex).renderElement:void 0:e}var so=new WeakMap;function ao(t){var e=so.get(t);return e||((e=t(function(){return Gi})).factory=t,so.set(t,e)),e}function lo(t,e,n,i,o){3===e&&(n=t.renderer.parentNode($i(t,t.def.lastRenderRootNode))),uo(t,e,0,t.def.nodes.length-1,n,i,o)}function uo(t,e,n,i,o,r,s){for(var a=n;a<=i;a++){var l=t.def.nodes[a];11&l.flags&&co(t,l,e,o,r,s),a+=l.childCount}}function ho(t,e,n,i,o,r){for(var s=t;s&&!to(s);)s=s.parent;for(var a=s.parent,l=Ji(s),u=l.nodeIndex+l.childCount,h=l.nodeIndex+1;h<=u;h++){var c=a.def.nodes[h];c.ngContentIndex===e&&co(a,c,n,i,o,r),h+=c.childCount}if(!a.parent){var d=t.root.projectableNodes[e];if(d)for(h=0;h<d.length;h++)po(t,d[h],n,i,o,r)}}function co(t,e,n,i,o,r){if(8&e.flags)ho(t,e.ngContent.index,n,i,o,r);else{var s=$i(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&po(t,s,n,i,o,r),32&e.bindingFlags&&po(Mi(t,e.nodeIndex).componentView,s,n,i,o,r)):po(t,s,n,i,o,r),16777216&e.flags)for(var a=Mi(t,e.nodeIndex).viewContainer._embeddedViews,l=0;l<a.length;l++)lo(a[l],n,i,o,r);1&e.flags&&!e.element.name&&uo(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,o,r)}}function po(t,e,n,i,o,r){var s=t.renderer;switch(n){case 1:s.appendChild(i,e);break;case 2:s.insertBefore(i,e,o);break;case 3:s.removeChild(i,e);break;case 0:r.push(e)}}var fo=/^:([^:]+):(.+)$/;function go(t){if(":"===t[0]){var e=t.match(fo);return[e[1],e[2]]}return["",t]}function _o(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function yo(t,e,n,i,o,r,s,a,l,u,h,c,d,p,f,g,_,y,m,v){switch(t){case 1:return e+mo(n)+i;case 2:return e+mo(n)+i+mo(o)+r;case 3:return e+mo(n)+i+mo(o)+r+mo(s)+a;case 4:return e+mo(n)+i+mo(o)+r+mo(s)+a+mo(l)+u;case 5:return e+mo(n)+i+mo(o)+r+mo(s)+a+mo(l)+u+mo(h)+c;case 6:return e+mo(n)+i+mo(o)+r+mo(s)+a+mo(l)+u+mo(h)+c+mo(d)+p;case 7:return e+mo(n)+i+mo(o)+r+mo(s)+a+mo(l)+u+mo(h)+c+mo(d)+p+mo(f)+g;case 8:return e+mo(n)+i+mo(o)+r+mo(s)+a+mo(l)+u+mo(h)+c+mo(d)+p+mo(f)+g+mo(_)+y;case 9:return e+mo(n)+i+mo(o)+r+mo(s)+a+mo(l)+u+mo(h)+c+mo(d)+p+mo(f)+g+mo(_)+y+mo(m)+v;default:throw new Error("Does not support more than 9 expressions")}}function mo(t){return null!=t?t.toString():""}function vo(t,e,n,i,o,r){t|=1;var s=io(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s.matchedQueries,matchedQueryIds:s.matchedQueryIds,references:s.references,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:r?ao(r):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:o||Gi},provider:null,text:null,query:null,ngContent:null}}function xo(t,e,n,i,o,r,s,a,l,u,c,d){var p;void 0===s&&(s=[]),u||(u=Gi);var f=io(n),g=f.matchedQueries,_=f.references,y=f.matchedQueryIds,m=null,v=null;r&&(m=(p=h(go(r),2))[0],v=p[1]),a=a||[];for(var x=new Array(a.length),b=0;b<a.length;b++){var w=h(a[b],3),C=w[0],E=w[2],T=h(go(w[1]),2),S=T[0],I=T[1],R=void 0,P=void 0;switch(15&C){case 4:P=E;break;case 1:case 8:R=E}x[b]={flags:C,ns:S,name:I,nonMinifiedName:I,securityContext:R,suffix:P}}l=l||[];var M=new Array(l.length);for(b=0;b<l.length;b++){var k=h(l[b],2);M[b]={type:0,target:k[0],eventName:k[1],propName:null}}var L=(s=s||[]).map(function(t){var e=h(t,2),n=e[1],i=h(go(e[0]),2);return[i[0],i[1],n]});return d=function(t){if(t&&t.id===Bi){var e=null!=t.encapsulation&&t.encapsulation!==$t.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Wi++:zi}return t&&t.id===zi&&(t=null),t||null}(d),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:g,matchedQueryIds:y,references:_,ngContentIndex:i,childCount:o,bindings:x,bindingFlags:_o(x),outputs:M,element:{ns:m,name:v,attrs:L,template:null,componentProvider:null,componentView:c||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:u||Gi},provider:null,text:null,query:null,ngContent:null}}function bo(t,e,n){var i,o=n.element,r=t.root.selectorOrNode,s=t.renderer;if(t.parent||!r){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var a=ro(t,e,n);a&&s.appendChild(a,i)}else i=s.selectRootElement(r);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var u=h(o.attrs[l],3);s.setAttribute(i,u[1],u[2],u[0])}return i}function wo(t,e,n,i){for(var o=0;o<n.outputs.length;o++){var r=n.outputs[o],s=Co(t,n.nodeIndex,(c=r.eventName,(h=r.target)?h+":"+c:c)),a=r.target,l=t;"component"===r.target&&(a=null,l=e);var u=l.renderer.listen(a||i,r.eventName,s);t.disposables[n.outputIndex+o]=u}var h,c}function Co(t,e,n){return function(i){return qi(t,e,n,i)}}function Eo(t,e,n,i){if(!Yi(t,e,n,i))return!1;var o=e.bindings[n],r=Mi(t,e.nodeIndex),s=r.renderElement,a=o.name;switch(15&o.flags){case 1:!function(t,e,n,i,o,r){var s=e.securityContext,a=s?t.root.sanitizer.sanitize(s,r):r;a=null!=a?a.toString():null;var l=t.renderer;null!=r?l.setAttribute(n,o,a,i):l.removeAttribute(n,o,i)}(t,o,s,o.ns,a,i);break;case 2:!function(t,e,n,i){var o=t.renderer;i?o.addClass(e,n):o.removeClass(e,n)}(t,s,a,i);break;case 4:!function(t,e,n,i,o){var r=t.root.sanitizer.sanitize(Ti.STYLE,o);if(null!=r){r=r.toString();var s=e.suffix;null!=s&&(r+=s)}else r=null;var a=t.renderer;null!=r?a.setStyle(n,i,r):a.removeStyle(n,i)}(t,o,s,a,i);break;case 8:!function(t,e,n,i,o){var r=e.securityContext,s=r?t.root.sanitizer.sanitize(r,o):o;t.renderer.setProperty(n,i,s)}(33554432&e.flags&&32&o.flags?r.componentView:t,o,s,a,i)}return!0}var To=new Object,So=ji(Ot),Io=ji(Ft),Ro=ji(ze);function Po(t,e,n,i){return n=Et(n),{index:-1,deps:oo(i,wt(e)),flags:t,token:e,value:n}}function Mo(t,e,n){void 0===n&&(n=Ot.THROW_IF_NOT_FOUND);var i,o,r=qt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var s=e.tokenKey;switch(s){case So:case Io:case Ro:return t}var a=t._def.providersByKey[s];if(a){var l=t._providers[a.index];return void 0===l&&(l=t._providers[a.index]=ko(t,a)),l===To?void 0:l}if(e.token.ngInjectableDef&&(i=t,null!=(o=e.token.ngInjectableDef).providedIn&&(function(t,e){return t._def.modules.indexOf(o.providedIn)>-1}(i)||"root"===o.providedIn&&i._def.isRoot))){var u=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:e.token.ngInjectableDef.factory,deps:[],index:u,token:e.token},t._providers[u]=To,t._providers[u]=ko(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{qt(r)}}function ko(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(Mo(t,n[0]));case 2:return new e(Mo(t,n[0]),Mo(t,n[1]));case 3:return new e(Mo(t,n[0]),Mo(t,n[1]),Mo(t,n[2]));default:for(var o=new Array(i),r=0;r<i;r++)o[r]=Mo(t,n[r]);return new(e.bind.apply(e,c([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(Mo(t,n[0]));case 2:return e(Mo(t,n[0]),Mo(t,n[1]));case 3:return e(Mo(t,n[0]),Mo(t,n[1]),Mo(t,n[2]));default:for(var o=Array(i),r=0;r<i;r++)o[r]=Mo(t,n[r]);return e.apply(void 0,c(o))}}(t,e.value,e.deps);break;case 2048:n=Mo(t,e.deps[0]);break;case 256:n=e.value}return n===To||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?To:n}function Lo(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var i=n[e];return i.viewContainerParent=null,Ao(n,e),Di.dirtyParentQueries(i),Do(i),i}function Fo(t,e,n){var i=e?$i(e,e.def.lastRenderRootNode):t.renderElement;lo(n,2,n.renderer.parentNode(i),n.renderer.nextSibling(i),void 0)}function Do(t){lo(t,3,null,null,void 0)}function Oo(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ao(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var No=new Object;function Go(t,e,n,i,o,r){return new Vo(t,e,n,i,o,r)}var Vo=function(t){function e(e,n,i,o,r,s){var a=t.call(this)||this;return a.selector=e,a.componentType=n,a._inputs=o,a._outputs=r,a.ngContentSelectors=s,a.viewDefFactory=i,a}return o(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,i){if(!i)throw new Error("ngModule should be provided");var o=ao(this.viewDefFactory),r=o.nodes[0].element.componentProvider.nodeIndex,s=Di.createRootView(t,e||[],n,o,i,No),a=ki(s,r).instance;return n&&s.renderer.setAttribute(Mi(s,0).renderElement,"ng-version",te.full),new jo(s,new Wo(s),a)},e}(Fe),jo=function(t){function e(e,n,i){var o=t.call(this)||this;return o._view=e,o._viewRef=n,o._component=i,o._elDef=o._view.def.nodes[0],o.hostView=n,o.changeDetectorRef=n,o.instance=i,o}return o(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new bn(Mi(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Xo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Le);function Bo(t,e,n){return new zo(t,e,n)}var zo=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new bn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Xo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=Ji(t),t=t.parent;return t?new Xo(t,e):new Xo(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Lo(this._data,t);Di.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Wo(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var i=t.createEmbeddedView(e||{});return this.insert(i,n),i},t.prototype.createComponent=function(t,e,n,i,o){var r=n||this.parentInjector;o||t instanceof Be||(o=r.get(ze));var s=t.create(r,i,void 0,o);return this.insert(s.hostView,e),s},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,i,o,r,s=t;return o=s._view,r=(n=this._data).viewContainer._embeddedViews,null!==(i=e)&&void 0!==i||(i=r.length),o.viewContainerParent=this._view,Oo(r,i,o),function(t,e){var n=Qi(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var i=n.parent;i;)i.childFlags|=4,i=i.parent}}(0,e.parentNodeDef)}}(n,o),Di.dirtyParentQueries(o),Fo(n,i>0?r[i-1]:null,o),s.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,i,o,r,s,a=this._embeddedViews.indexOf(t._view);return o=e,s=(r=(n=this._data).viewContainer._embeddedViews)[i=a],Ao(r,i),null==o&&(o=r.length),Oo(r,o,s),Di.dirtyParentQueries(s),Do(s),Fo(n,o>0?r[o-1]:null,s),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Lo(this._data,t);e&&Di.destroyView(e)},t.prototype.detach=function(t){var e=Lo(this._data,t);return e?new Wo(e):null},t}();function Ho(t){return new Wo(t)}var Wo=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return lo(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Xi(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Di.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Di.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Di.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Do(this._view),Di.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Uo(t,e){return new Yo(t,e)}var Yo=function(t){function e(e,n){var i=t.call(this)||this;return i._parentView=e,i._def=n,i}return o(e,t),e.prototype.createEmbeddedView=function(t){return new Wo(Di.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new bn(Mi(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Cn);function Ko(t,e){return new Xo(t,e)}var Xo=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=Ot.THROW_IF_NOT_FOUND),Di.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:ji(t)},e)},t}();function Zo(t,e){var n=t.def.nodes[e];if(1&n.flags){var i=Mi(t,n.nodeIndex);return n.element.template?i.template:i.renderElement}if(2&n.flags)return Pi(t,n.nodeIndex).renderText;if(20240&n.flags)return ki(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function qo(t){return new Qo(t.renderer)}var Qo=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=h(go(e),2),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t),o=0;o<e.length;o++)this.delegate.insertBefore(n,e[o],i)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=h(go(e),2),o=i[0],r=i[1];null!=n?this.delegate.setAttribute(t,r,n,o):this.delegate.removeAttribute(t,r,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Jo(t,e,n,i){return new $o(t,e,n,i)}var $o=function(){function t(t,e,n,i){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),i=0;i<e.providers.length;i++){var o=e.providers[i];4096&o.flags||void 0===n[i]&&(n[i]=ko(t,o))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=Ot.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var i=0;return 4&n?i|=1:2&n&&(i|=4),Mo(this,{token:t,tokenKey:ji(t),flags:i},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Ve)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+wt(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,i=new Set,o=0;o<n.providers.length;o++)if(131072&n.providers[o].flags){var r=t._providers[o];if(r&&r!==To){var s=r.ngOnDestroy;"function"!=typeof s||i.has(r)||(s.apply(r),i.add(r))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),tr=ji(function(){}),er=ji(xn),nr=ji(bn),ir=ji(En),or=ji(Cn),rr=ji(Tn),sr=ji(Ot),ar=ji(Ft);function lr(t,e,n,i,o,r,s,a){var l=[];if(s)for(var u in s){var c=h(s[u],2);l[c[0]]={flags:8,name:u,nonMinifiedName:c[1],ns:null,securityContext:null,suffix:null}}var d=[];if(a)for(var p in a)d.push({type:1,propName:p,target:null,eventName:a[p]});return hr(t,e|=16384,n,i,o,o,r,l,d)}function ur(t,e,n,i,o){return hr(-1,t,e,0,n,i,o)}function hr(t,e,n,i,o,r,s,a,l){var u=io(n),h=u.matchedQueries,c=u.references,d=u.matchedQueryIds;l||(l=[]),a||(a=[]),r=Et(r);var p=oo(s,wt(o));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:h,matchedQueryIds:d,references:c,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:_o(a),outputs:l,element:null,provider:{token:o,value:r,deps:p},text:null,query:null,ngContent:null}}function cr(t,e){return gr(t,e)}function dr(t,e){for(var n=t;n.parent&&!to(n);)n=n.parent;return _r(n.parent,Ji(n),!0,e.provider.value,e.provider.deps)}function pr(t,e){var n=_r(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var o=e.outputs[i],r=n[o.propName].subscribe(fr(t,e.parent.nodeIndex,o.eventName));t.disposables[e.outputIndex+i]=r.unsubscribe.bind(r)}return n}function fr(t,e,n){return function(i){return qi(t,e,n,i)}}function gr(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return _r(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,o){var r=o.length;switch(r){case 0:return i();case 1:return i(mr(t,e,n,o[0]));case 2:return i(mr(t,e,n,o[0]),mr(t,e,n,o[1]));case 3:return i(mr(t,e,n,o[0]),mr(t,e,n,o[1]),mr(t,e,n,o[2]));default:for(var s=Array(r),a=0;a<r;a++)s[a]=mr(t,e,n,o[a]);return i.apply(void 0,c(s))}}(t,e.parent,n,i.value,i.deps);case 2048:return mr(t,e.parent,n,i.deps[0]);case 256:return i.value}}function _r(t,e,n,i,o){var r=o.length;switch(r){case 0:return new i;case 1:return new i(mr(t,e,n,o[0]));case 2:return new i(mr(t,e,n,o[0]),mr(t,e,n,o[1]));case 3:return new i(mr(t,e,n,o[0]),mr(t,e,n,o[1]),mr(t,e,n,o[2]));default:for(var s=new Array(r),a=0;a<r;a++)s[a]=mr(t,e,n,o[a]);return new(i.bind.apply(i,c([void 0],s)))}}var yr={};function mr(t,e,n,i,o){if(void 0===o&&(o=Ot.THROW_IF_NOT_FOUND),8&i.flags)return i.token;var r=t;2&i.flags&&(o=null);var s=i.tokenKey;s===rr&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);for(var a=t;a;){if(e)switch(s){case tr:return qo(vr(a,e,n));case er:return vr(a,e,n).renderer;case nr:return new bn(Mi(a,e.nodeIndex).renderElement);case ir:return Mi(a,e.nodeIndex).viewContainer;case or:if(e.element.template)return Mi(a,e.nodeIndex).template;break;case rr:return Ho(vr(a,e,n));case sr:case ar:return Ko(a,e);default:var l=(n?e.element.allProviders:e.element.publicProviders)[s];if(l){var u=ki(a,l.nodeIndex);return u||(u={instance:gr(a,l)},a.nodes[l.nodeIndex]=u),u.instance}}n=to(a),e=Ji(a),a=a.parent,4&i.flags&&(a=null)}var h=r.root.injector.get(i.token,yr);return h!==yr||o===yr?h:r.root.ngModule.injector.get(i.token,o)}function vr(t,e,n){var i;if(n)i=Mi(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!to(i);)i=i.parent;return i}function xr(t,e,n,i,o,r){if(32768&n.flags){var s=Mi(t,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(e.instance[n.bindings[i].name]=o,524288&n.flags){r=r||{};var a=Ln.unwrap(t.oldValues[n.bindingIndex+i]);r[n.bindings[i].nonMinifiedName]=new Fn(a,o,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=o,r}function br(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,i=0,o=0;o<n.length;o++){var r=n[o],s=r.parent;for(!s&&r.flags&e&&Cr(t,o,r.flags&e,i++),0==(r.childFlags&e)&&(o+=r.childCount);s&&1&s.flags&&o===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(i=wr(t,s,e,i)),s=s.parent}}function wr(t,e,n,i){for(var o=e.nodeIndex+1;o<=e.nodeIndex+e.childCount;o++){var r=t.def.nodes[o];r.flags&n&&Cr(t,o,r.flags&n,i++),o+=r.childCount}return i}function Cr(t,e,n,i){var o=ki(t,e);if(o){var r=o.instance;r&&(Di.setCurrentNode(t,e),1048576&n&&Ri(t,512,i)&&r.ngAfterContentInit(),2097152&n&&r.ngAfterContentChecked(),4194304&n&&Ri(t,768,i)&&r.ngAfterViewInit(),8388608&n&&r.ngAfterViewChecked(),131072&n&&r.ngOnDestroy())}}function Er(t){for(var e=t.def.nodeMatchedQueries;t.parent&&eo(t);){var n=t.parentNodeDef;t=t.parent;for(var i=n.nodeIndex+n.childCount,o=0;o<=i;o++)67108864&(r=t.def.nodes[o]).flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&Fi(t,o).setDirty(),!(1&r.flags&&o+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(o+=r.childCount)}if(134217728&t.def.nodeFlags)for(o=0;o<t.def.nodes.length;o++){var r;134217728&(r=t.def.nodes[o]).flags&&536870912&r.flags&&Fi(t,o).setDirty(),o+=r.childCount}}function Tr(t,e){var n=Fi(t,e.nodeIndex);if(n.dirty){var i,o=void 0;if(67108864&e.flags){var r=e.parent.parent;o=Sr(t,r.nodeIndex,r.nodeIndex+r.childCount,e.query,[]),i=ki(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(o=Sr(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(o);for(var s=e.query.bindings,a=!1,l=0;l<s.length;l++){var u=s[l],h=void 0;switch(u.bindingType){case 0:h=n.first;break;case 1:h=n,a=!0}i[u.propName]=h}a&&n.notifyOnChanges()}}function Sr(t,e,n,i,o){for(var r=e;r<=n;r++){var s=t.def.nodes[r],a=s.matchedQueries[i.id];if(null!=a&&o.push(Ir(t,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&i.filterId)===i.filterId){var l=Mi(t,r);if((s.childMatchedQueries&i.filterId)===i.filterId&&(Sr(t,r+1,r+s.childCount,i,o),r+=s.childCount),16777216&s.flags)for(var u=l.viewContainer._embeddedViews,h=0;h<u.length;h++){var c=u[h],d=Qi(c);d&&d===l&&Sr(c,0,c.def.nodes.length-1,i,o)}var p=l.template._projectedViews;if(p)for(h=0;h<p.length;h++){var f=p[h];Sr(f,0,f.def.nodes.length-1,i,o)}}(s.childMatchedQueries&i.filterId)!==i.filterId&&(r+=s.childCount)}return o}function Ir(t,e,n){if(null!=n)switch(n){case 1:return Mi(t,e.nodeIndex).renderElement;case 0:return new bn(Mi(t,e.nodeIndex).renderElement);case 2:return Mi(t,e.nodeIndex).template;case 3:return Mi(t,e.nodeIndex).viewContainer;case 4:return ki(t,e.nodeIndex).instance}}function Rr(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Pr(t,e,n){var i=ro(t,e,n);i&&ho(t,n.ngContent.index,1,i,null,void 0)}function Mr(t,e,n){for(var i=new Array(n.length-1),o=1;o<n.length;o++)i[o-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[o]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function kr(t,e,n){var i,o=t.renderer;i=o.createText(n.text.prefix);var r=ro(t,e,n);return r&&o.appendChild(r,i),{renderText:i}}function Lr(t,e){return(null!=t?t.toString():"")+e.suffix}function Fr(t,e,n,i){for(var o=0,r=0,s=0,a=0,l=0,u=null,h=null,c=!1,d=!1,p=null,f=0;f<e.length;f++){var g=e[f];if(g.nodeIndex=f,g.parent=u,g.bindingIndex=o,g.outputIndex=r,g.renderParent=h,s|=g.flags,l|=g.matchedQueryIds,g.element){var _=g.element;_.publicProviders=u?u.element.publicProviders:Object.create(null),_.allProviders=_.publicProviders,c=!1,d=!1,g.element.template&&(l|=g.element.template.nodeMatchedQueries)}if(Or(u,g,e.length),o+=g.bindings.length,r+=g.outputs.length,!h&&3&g.flags&&(p=g),20224&g.flags){c||(c=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);var y=0!=(32768&g.flags);0==(8192&g.flags)||y?u.element.publicProviders[ji(g.provider.token)]=g:(d||(d=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[ji(g.provider.token)]=g),y&&(u.element.componentProvider=g)}if(u?(u.childFlags|=g.flags,u.directChildFlags|=g.flags,u.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(u.childMatchedQueries|=g.element.template.nodeMatchedQueries)):a|=g.flags,g.childCount>0)u=g,Dr(g)||(h=g);else for(;u&&f===u.nodeIndex+u.childCount;){var m=u.parent;m&&(m.childFlags|=u.childFlags,m.childMatchedQueries|=u.childMatchedQueries),h=(u=m)&&Dr(u)?u.renderParent:u}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||Gi,updateRenderer:i||Gi,handleEvent:function(t,n,i,o){return e[n].element.handleEvent(t,i,o)},bindingCount:o,outputCount:r,lastRenderRootNode:p}}function Dr(t){return 0!=(1&t.flags)&&null===t.element.name}function Or(t,e,n){var i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var o=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=o&&e.nodeIndex+e.childCount>o)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Ar(t,e,n,i){var o=Vr(t.root,t.renderer,t,e,n);return jr(o,t.component,i),Br(o),o}function Nr(t,e,n){var i=Vr(t,t.renderer,null,null,e);return jr(i,n,n),Br(i),i}function Gr(t,e,n,i){var o,r=e.element.componentRendererType;return o=r?t.root.rendererFactory.createRenderer(i,r):t.root.renderer,Vr(t.root,o,t,e.element.componentProvider,n)}function Vr(t,e,n,i,o){var r=new Array(o.nodes.length),s=o.outputCount?new Array(o.outputCount):null;return{def:o,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:r,state:13,root:t,renderer:e,oldValues:new Array(o.bindingCount),disposables:s,initIndex:-1}}function jr(t,e,n){t.component=e,t.context=n}function Br(t){var e;to(t)&&(e=Mi(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,i=t.nodes,o=0;o<n.nodes.length;o++){var r=n.nodes[o];Di.setCurrentNode(t,o);var s=void 0;switch(201347067&r.flags){case 1:var a=bo(t,e,r),l=void 0;if(33554432&r.flags){var u=ao(r.element.componentView);l=Di.createComponentView(t,r,u,a)}wo(t,l,r,a),s={renderElement:a,componentView:l,viewContainer:null,template:r.element.template?Uo(t,r):void 0},16777216&r.flags&&(s.viewContainer=Bo(t,r,s));break;case 2:s=kr(t,e,r);break;case 512:case 1024:case 2048:case 256:(s=i[o])||4096&r.flags||(s={instance:cr(t,r)});break;case 16:s={instance:dr(t,r)};break;case 16384:(s=i[o])||(s={instance:pr(t,r)}),32768&r.flags&&jr(Mi(t,r.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new wn;break;case 8:Pr(t,e,r),s=void 0}i[o]=s}qr(t,Zr.CreateViewNodes),ts(t,201326592,268435456,0)}function zr(t){Ur(t),Di.updateDirectives(t,1),Qr(t,Zr.CheckNoChanges),Di.updateRenderer(t,1),qr(t,Zr.CheckNoChanges),t.state&=-97}function Hr(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Ii(t,0,256),Ur(t),Di.updateDirectives(t,0),Qr(t,Zr.CheckAndUpdate),ts(t,67108864,536870912,0);var e=Ii(t,256,512);br(t,2097152|(e?1048576:0)),Di.updateRenderer(t,0),qr(t,Zr.CheckAndUpdate),ts(t,134217728,536870912,0),br(t,8388608|((e=Ii(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Ii(t,768,1024)}function Wr(t,e,n,i,o,r,s,a,l,u,h,d,p){return 0===n?function(t,e,n,i,o,r,s,a,l,u,h,c){switch(201347067&e.flags){case 1:return function(t,e,n,i,o,r,s,a,l,u,h,c){var d=e.bindings.length,p=!1;return d>0&&Eo(t,e,0,n)&&(p=!0),d>1&&Eo(t,e,1,i)&&(p=!0),d>2&&Eo(t,e,2,o)&&(p=!0),d>3&&Eo(t,e,3,r)&&(p=!0),d>4&&Eo(t,e,4,s)&&(p=!0),d>5&&Eo(t,e,5,a)&&(p=!0),d>6&&Eo(t,e,6,l)&&(p=!0),d>7&&Eo(t,e,7,u)&&(p=!0),d>8&&Eo(t,e,8,h)&&(p=!0),d>9&&Eo(t,e,9,c)&&(p=!0),p}(t,e,n,i,o,r,s,a,l,u,h,c);case 2:return function(t,e,n,i,o,r,s,a,l,u,h,c){var d=!1,p=e.bindings,f=p.length;if(f>0&&Yi(t,e,0,n)&&(d=!0),f>1&&Yi(t,e,1,i)&&(d=!0),f>2&&Yi(t,e,2,o)&&(d=!0),f>3&&Yi(t,e,3,r)&&(d=!0),f>4&&Yi(t,e,4,s)&&(d=!0),f>5&&Yi(t,e,5,a)&&(d=!0),f>6&&Yi(t,e,6,l)&&(d=!0),f>7&&Yi(t,e,7,u)&&(d=!0),f>8&&Yi(t,e,8,h)&&(d=!0),f>9&&Yi(t,e,9,c)&&(d=!0),d){var g=e.text.prefix;f>0&&(g+=Lr(n,p[0])),f>1&&(g+=Lr(i,p[1])),f>2&&(g+=Lr(o,p[2])),f>3&&(g+=Lr(r,p[3])),f>4&&(g+=Lr(s,p[4])),f>5&&(g+=Lr(a,p[5])),f>6&&(g+=Lr(l,p[6])),f>7&&(g+=Lr(u,p[7])),f>8&&(g+=Lr(h,p[8])),f>9&&(g+=Lr(c,p[9]));var _=Pi(t,e.nodeIndex).renderText;t.renderer.setValue(_,g)}return d}(t,e,n,i,o,r,s,a,l,u,h,c);case 16384:return function(t,e,n,i,o,r,s,a,l,u,h,c){var d=ki(t,e.nodeIndex),p=d.instance,f=!1,g=void 0,_=e.bindings.length;return _>0&&Ui(t,e,0,n)&&(f=!0,g=xr(t,d,e,0,n,g)),_>1&&Ui(t,e,1,i)&&(f=!0,g=xr(t,d,e,1,i,g)),_>2&&Ui(t,e,2,o)&&(f=!0,g=xr(t,d,e,2,o,g)),_>3&&Ui(t,e,3,r)&&(f=!0,g=xr(t,d,e,3,r,g)),_>4&&Ui(t,e,4,s)&&(f=!0,g=xr(t,d,e,4,s,g)),_>5&&Ui(t,e,5,a)&&(f=!0,g=xr(t,d,e,5,a,g)),_>6&&Ui(t,e,6,l)&&(f=!0,g=xr(t,d,e,6,l,g)),_>7&&Ui(t,e,7,u)&&(f=!0,g=xr(t,d,e,7,u,g)),_>8&&Ui(t,e,8,h)&&(f=!0,g=xr(t,d,e,8,h,g)),_>9&&Ui(t,e,9,c)&&(f=!0,g=xr(t,d,e,9,c,g)),g&&p.ngOnChanges(g),65536&e.flags&&Ri(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,i,o,r,s,a,l,u,h,c);case 32:case 64:case 128:return function(t,e,n,i,o,r,s,a,l,u,h,c){var d=e.bindings,p=!1,f=d.length;if(f>0&&Yi(t,e,0,n)&&(p=!0),f>1&&Yi(t,e,1,i)&&(p=!0),f>2&&Yi(t,e,2,o)&&(p=!0),f>3&&Yi(t,e,3,r)&&(p=!0),f>4&&Yi(t,e,4,s)&&(p=!0),f>5&&Yi(t,e,5,a)&&(p=!0),f>6&&Yi(t,e,6,l)&&(p=!0),f>7&&Yi(t,e,7,u)&&(p=!0),f>8&&Yi(t,e,8,h)&&(p=!0),f>9&&Yi(t,e,9,c)&&(p=!0),p){var g=Li(t,e.nodeIndex),_=void 0;switch(201347067&e.flags){case 32:_=new Array(d.length),f>0&&(_[0]=n),f>1&&(_[1]=i),f>2&&(_[2]=o),f>3&&(_[3]=r),f>4&&(_[4]=s),f>5&&(_[5]=a),f>6&&(_[6]=l),f>7&&(_[7]=u),f>8&&(_[8]=h),f>9&&(_[9]=c);break;case 64:_={},f>0&&(_[d[0].name]=n),f>1&&(_[d[1].name]=i),f>2&&(_[d[2].name]=o),f>3&&(_[d[3].name]=r),f>4&&(_[d[4].name]=s),f>5&&(_[d[5].name]=a),f>6&&(_[d[6].name]=l),f>7&&(_[d[7].name]=u),f>8&&(_[d[8].name]=h),f>9&&(_[d[9].name]=c);break;case 128:var y=n;switch(f){case 1:_=y.transform(n);break;case 2:_=y.transform(i);break;case 3:_=y.transform(i,o);break;case 4:_=y.transform(i,o,r);break;case 5:_=y.transform(i,o,r,s);break;case 6:_=y.transform(i,o,r,s,a);break;case 7:_=y.transform(i,o,r,s,a,l);break;case 8:_=y.transform(i,o,r,s,a,l,u);break;case 9:_=y.transform(i,o,r,s,a,l,u,h);break;case 10:_=y.transform(i,o,r,s,a,l,u,h,c)}}g.value=_}return p}(t,e,n,i,o,r,s,a,l,u,h,c);default:throw"unreachable"}}(t,e,i,o,r,s,a,l,u,h,d,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var i=!1,o=0;o<n.length;o++)Eo(t,e,o,n[o])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){for(var i=e.bindings,o=!1,r=0;r<n.length;r++)Yi(t,e,r,n[r])&&(o=!0);if(o){var s="";for(r=0;r<n.length;r++)s+=Lr(n[r],i[r]);s=e.text.prefix+s;var a=Pi(t,e.nodeIndex).renderText;t.renderer.setValue(a,s)}return o}(t,e,n);case 16384:return function(t,e,n){for(var i=ki(t,e.nodeIndex),o=i.instance,r=!1,s=void 0,a=0;a<n.length;a++)Ui(t,e,a,n[a])&&(r=!0,s=xr(t,i,e,a,n[a],s));return s&&o.ngOnChanges(s),65536&e.flags&&Ri(t,256,e.nodeIndex)&&o.ngOnInit(),262144&e.flags&&o.ngDoCheck(),r}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,o=!1,r=0;r<n.length;r++)Yi(t,e,r,n[r])&&(o=!0);if(o){var s=Li(t,e.nodeIndex),a=void 0;switch(201347067&e.flags){case 32:a=n;break;case 64:for(a={},r=0;r<n.length;r++)a[i[r].name]=n[r];break;case 128:var l=n[0],u=n.slice(1);a=l.transform.apply(l,c(u))}s.value=a}return o}(t,e,n);default:throw"unreachable"}}(t,e,i)}function Ur(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(4&i.flags){var o=Mi(t,n).template._projectedViews;if(o)for(var r=0;r<o.length;r++){var s=o[r];s.state|=32,Zi(s,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function Yr(t,e,n,i,o,r,s,a,l,u,h,c,d){return 0===n?function(t,e,n,i,o,r,s,a,l,u,h,c){var d=e.bindings.length;d>0&&Ki(t,e,0,n),d>1&&Ki(t,e,1,i),d>2&&Ki(t,e,2,o),d>3&&Ki(t,e,3,r),d>4&&Ki(t,e,4,s),d>5&&Ki(t,e,5,a),d>6&&Ki(t,e,6,l),d>7&&Ki(t,e,7,u),d>8&&Ki(t,e,8,h),d>9&&Ki(t,e,9,c)}(t,e,i,o,r,s,a,l,u,h,c,d):function(t,e,n){for(var i=0;i<n.length;i++)Ki(t,e,i,n[i])}(t,e,i),!1}function Kr(t,e){if(Fi(t,e.nodeIndex).dirty)throw Oi(Di.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function Xr(t){if(!(128&t.state)){if(Qr(t,Zr.Destroy),qr(t,Zr.Destroy),br(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Qi(t);if(e){var n=e.template._projectedViews;n&&(Ao(n,n.indexOf(t)),Di.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var i=t.def.nodes[n];1&i.flags?t.renderer.destroyNode(Mi(t,n).renderElement):2&i.flags?t.renderer.destroyNode(Pi(t,n).renderText):(67108864&i.flags||134217728&i.flags)&&Fi(t,n).destroy()}}(t),to(t)&&t.renderer.destroy(),t.state|=128}}var Zr=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function qr(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var o=n.nodes[i];33554432&o.flags?Jr(Mi(t,i).componentView,e):0==(33554432&o.childFlags)&&(i+=o.childCount)}}function Qr(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var o=n.nodes[i];if(16777216&o.flags)for(var r=Mi(t,i).viewContainer._embeddedViews,s=0;s<r.length;s++)Jr(r[s],e);else 0==(16777216&o.childFlags)&&(i+=o.childCount)}}function Jr(t,e){var n=t.state;switch(e){case Zr.CheckNoChanges:0==(128&n)&&(12==(12&n)?zr(t):64&n&&$r(t,Zr.CheckNoChangesProjectedViews));break;case Zr.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?zr(t):64&n&&$r(t,e));break;case Zr.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Hr(t):64&n&&$r(t,Zr.CheckAndUpdateProjectedViews));break;case Zr.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Hr(t):64&n&&$r(t,e));break;case Zr.Destroy:Xr(t);break;case Zr.CreateViewNodes:Br(t)}}function $r(t,e){Qr(t,e),qr(t,e)}function ts(t,e,n,i){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var o=t.def.nodes.length,r=0;r<o;r++){var s=t.def.nodes[r];if(s.flags&e&&s.flags&n)switch(Di.setCurrentNode(t,s.nodeIndex),i){case 0:Tr(t,s);break;case 1:Kr(t,s)}s.childFlags&e&&s.childFlags&n||(r+=s.childCount)}}var es=!1;function ns(t,e,n,i,o,r){return Nr(os(t,o,o.injector.get(mn),e,n),i,r)}function is(t,e,n,i,o,r){var s=o.injector.get(mn),a=os(t,o,new Gs(s),e,n),l=fs(i);return As(Cs.create,Nr,null,[a,l,r])}function os(t,e,n,i,o){var r=e.injector.get(Si),s=e.injector.get(ae);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:o,sanitizer:r,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:s}}function rs(t,e,n,i){var o=fs(n);return As(Cs.create,Ar,null,[t,e,o,i])}function ss(t,e,n,i){return n=hs.get(e.element.componentProvider.provider.token)||fs(n),As(Cs.create,Gr,null,[t,e,n,i])}function as(t,e,n,i){return Jo(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===ls.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var i=ls.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)}),t.modules.forEach(function(t){us.forEach(function(i,o){o.ngInjectableDef.providedIn===t&&(e=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var i=t.providers[e];n&&(i.flags|=4096);var o=ls.get(i.token);o&&(i.flags=-3841&i.flags|o.flags,i.deps=oo(o.deps),i.value=o.value)}if(us.size>0){var r=new Set(t.modules);us.forEach(function(e,i){if(r.has(i.ngInjectableDef.providedIn)){var o={token:i,flags:e.flags|(n?4096:0),deps:oo(e.deps),value:e.value,index:t.providers.length};t.providers.push(o),t.providersByKey[ji(i)]=o}})}}(t=t.factory(function(){return Gi})),t):t}(i))}var ls=new Map,us=new Map,hs=new Map;function cs(t){ls.set(t.token,t),"function"==typeof t.token&&t.token.ngInjectableDef&&"function"==typeof t.token.ngInjectableDef.providedIn&&us.set(t.token,t)}function ds(t,e){var n=ao(ao(e.viewDefFactory).nodes[0].element.componentView);hs.set(t,n)}function ps(){ls.clear(),us.clear(),hs.clear()}function fs(t){if(0===ls.size)return t;var e=function(t){for(var e=[],n=null,i=0;i<t.nodes.length;i++){var o=t.nodes[i];1&o.flags&&(n=o),n&&3840&o.flags&&ls.has(o.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Gi});for(var n=0;n<e.length;n++)i(t,e[n]);return t;function i(t,e){for(var n=e+1;n<t.nodes.length;n++){var i=t.nodes[n];if(1&i.flags)return;if(3840&i.flags){var o=i.provider,r=ls.get(o.token);r&&(i.flags=-3841&i.flags|r.flags,o.deps=oo(r.deps),o.value=r.value)}}}}function gs(t,e,n,i,o,r,s,a,l,u,h,c,d){var p=t.def.nodes[e];return Wr(t,p,n,i,o,r,s,a,l,u,h,c,d),224&p.flags?Li(t,e).value:void 0}function _s(t,e,n,i,o,r,s,a,l,u,h,c,d){var p=t.def.nodes[e];return Yr(t,p,n,i,o,r,s,a,l,u,h,c,d),224&p.flags?Li(t,e).value:void 0}function ys(t){return As(Cs.detectChanges,Hr,null,[t])}function ms(t){return As(Cs.checkNoChanges,zr,null,[t])}function vs(t){return As(Cs.destroy,Xr,null,[t])}var xs,bs,ws,Cs=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Es(t,e){bs=t,ws=e}function Ts(t,e,n,i){return Es(t,e),As(Cs.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function Ss(t,e){if(128&t.state)throw Ni(Cs[xs]);return Es(t,Ls(t,0)),t.def.updateDirectives(function(t,n,i){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var s=t.def.nodes[n];return 0===e?Rs(t,s,i,o):Ps(t,s,i,o),16384&s.flags&&Es(t,Ls(t,n)),224&s.flags?Li(t,s.nodeIndex).value:void 0},t)}function Is(t,e){if(128&t.state)throw Ni(Cs[xs]);return Es(t,Fs(t,0)),t.def.updateRenderer(function(t,n,i){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var s=t.def.nodes[n];return 0===e?Rs(t,s,i,o):Ps(t,s,i,o),3&s.flags&&Es(t,Fs(t,n)),224&s.flags?Li(t,s.nodeIndex).value:void 0},t)}function Rs(t,e,n,i){if(Wr.apply(void 0,c([t,e,n],i))){var o=1===n?i[0]:i;if(16384&e.flags){for(var r={},s=0;s<e.bindings.length;s++){var a=e.bindings[s],l=o[s];8&a.flags&&(r[(p=a.nonMinifiedName,"ng-reflect-"+(p=p.replace(/[$@]/g,"_").replace(Ms,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=ks(l))}var u=e.parent,h=Mi(t,u.nodeIndex).renderElement;if(u.element.name)for(var d in r)null!=(l=r[d])?t.renderer.setAttribute(h,d,l):t.renderer.removeAttribute(h,d);else t.renderer.setValue(h,"bindings="+JSON.stringify(r,null,2))}}var p}function Ps(t,e,n,i){Yr.apply(void 0,c([t,e,n],i))}var Ms=/([A-Z])/g;function ks(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Ls(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(16384&i.flags&&i.bindings&&i.bindings.length)return n}return null}function Fs(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(3&i.flags&&i.bindings&&i.bindings.length)return n}return null}var Ds=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,i=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=Ji(i),i=i.parent;this.elDef=n,this.elView=i}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Mi(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Ko(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Os(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Os(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!to(t);)t=t.parent;return t.parent?Mi(t.parent,Ji(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?$i(this.view,this.nodeDef):$i(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var r=function(t,e){for(var n=-1,i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(e,n),s=-1;e.factory(function(){var e;return++s===r?(e=t.error).bind.apply(e,c([t],i)):Gi}),s<r&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,c(i)))},t}();function Os(t,e,n){for(var i in e.references)n[i]=Ir(t,e,e.references[i])}function As(t,e,n,i){var o=xs,r=bs,s=ws;try{xs=t;var a=e.apply(n,i);return bs=r,ws=s,xs=o,a}catch(t){if(oe(t)||!bs)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Ai(t,e),t}(t,Ns())}}function Ns(){return bs?new Ds(bs,ws):null}var Gs=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new Vs(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),Vs=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){Rn.delete(t.nativeNode)}(Pn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),i=Ns();if(i){var o=new In(n,null,i);o.name=t,Mn(o)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Ns();return n&&Mn(new Sn(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Ns();return n&&Mn(new Sn(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Pn(t),i=Pn(e);n&&i&&n instanceof In&&n.addChild(i),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var i=Pn(t),o=Pn(e),r=Pn(n);i&&o&&i instanceof In&&i.insertBefore(r,o),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Pn(t),i=Pn(e);n&&i&&n instanceof In&&n.removeChild(i),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Ns();return n&&Mn(new In(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,i){var o=Pn(t);o&&o instanceof In&&(o.attributes[i?i+":"+e:e]=n),this.delegate.setAttribute(t,e,n,i)},t.prototype.removeAttribute=function(t,e,n){var i=Pn(t);i&&i instanceof In&&(i.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Pn(t);n&&n instanceof In&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Pn(t);n&&n instanceof In&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,i){var o=Pn(t);o&&o instanceof In&&(o.styles[e]=n),this.delegate.setStyle(t,e,n,i)},t.prototype.removeStyle=function(t,e,n){var i=Pn(t);i&&i instanceof In&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var i=Pn(t);i&&i instanceof In&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var i=Pn(t);i&&i.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}(),js=function(t){function e(e,n,i){var o=t.call(this)||this;return o.moduleType=e,o._bootstrapComponents=n,o._ngModuleDefFactory=i,o}return o(e,t),e.prototype.create=function(t){!function(){if(!es){es=!0;var t=hn()?{setCurrentNode:Es,createRootView:is,createEmbeddedView:rs,createComponentView:ss,createNgModuleRef:as,overrideProvider:cs,overrideComponentView:ds,clearOverrides:ps,checkAndUpdateView:ys,checkNoChangesView:ms,destroyView:vs,createDebugContext:function(t,e){return new Ds(t,e)},handleEvent:Ts,updateDirectives:Ss,updateRenderer:Is}:{setCurrentNode:function(){},createRootView:ns,createEmbeddedView:Ar,createComponentView:Gr,createNgModuleRef:Jo,overrideProvider:Gi,overrideComponentView:Gi,clearOverrides:Gi,checkAndUpdateView:Hr,checkNoChangesView:zr,destroyView:Xr,createDebugContext:function(t,e){return new Ds(t,e)},handleEvent:function(t,e,n,i){return t.def.handleEvent(t,e,n,i)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?gs:_s,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?gs:_s,t)}};Di.setCurrentNode=t.setCurrentNode,Di.createRootView=t.createRootView,Di.createEmbeddedView=t.createEmbeddedView,Di.createComponentView=t.createComponentView,Di.createNgModuleRef=t.createNgModuleRef,Di.overrideProvider=t.overrideProvider,Di.overrideComponentView=t.overrideComponentView,Di.clearOverrides=t.clearOverrides,Di.checkAndUpdateView=t.checkAndUpdateView,Di.checkNoChangesView=t.checkNoChangesView,Di.destroyView=t.destroyView,Di.resolveDep=mr,Di.createDebugContext=t.createDebugContext,Di.handleEvent=t.handleEvent,Di.updateDirectives=t.updateDirectives,Di.updateRenderer=t.updateRenderer,Di.dirtyParentQueries=Er}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),i={};for(var o in t.providersByKey)i[o]=t.providersByKey[o];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:i}}(ao(this._ngModuleDefFactory));return Di.createNgModuleRef(this.moduleType,t||Ot.NULL,this._bootstrapComponents,e)},e}(He),Bs=16,zs=0,Hs=1,Ws=2,Us=3,Ys=4,Ks=5,Xs=6,Zs=7,qs=8,Qs=9,Js=10,$s=11,ta=14;function ea(t,e,n){t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked))}function na(t,e,n){t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked))}function ia(t,e,n){null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}function oa(t,e,n){16&t[Ys]&&(ra(t[Zs],e.initHooks,e.checkHooks,n),t[Ys]&=-17)}function ra(t,e,n,i){var o=i?e:n;o&&sa(t,o)}function sa(t,e){for(var n=0;n<e.length;n+=2)e[n+1].call(t[e[n]])}var aa=0,la=4,ua="ngProjectAs";function ha(t){return!!t.listen}var ca={createRenderer:function(t,e){return document}};function da(t){return Array.isArray(t)?t[0]:t}function pa(t){if(2===t.tNode.type){var e=t.data;return e[Ws]?e[Ws][Ks]:null}return t.tNode.next?t.view[t.tNode.next.index]:null}function fa(t){return t.tNode.child?da((2===t.tNode.type?t.data:t.view)[t.tNode.child.index]):null}function ga(t){if(-1===t.tNode.index&&2===t.tNode.type){var e=t.data[ta];return-1===e?null:t.view[e].dynamicLContainerNode}var n=t.tNode.parent;return da(n?t.view[n.index]:t.view[Ks])}var _a=[];function ya(t){for(var e=t[Ks];2===e.tNode.type;)e=(t=t[Hs])[Ks];return e}function ma(t,e,n,i,o){0===t?ha(e)?e.insertBefore(n,i,o):n.insertBefore(i,o,!0):1===t?ha(e)?e.removeChild(n,i):n.removeChild(i):2===t&&e.destroyNode(i)}function va(t){if(-1===t[zs].childIndex)return null;var e=t[t[zs].childIndex];return e.data?e.data:e.dynamicLContainerNode.data}function xa(t,e){var n;return(n=t[Ks])&&2===n.tNode.type?ga(n).data:t[Hs]===e?null:t[Hs]}function ba(t){if(t[zs]){var e=t;!function(t){var e=t[zs].cleanup;if(null!=e){for(var n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(da(t[e[n+1]]).native.removeEventListener(e[n],t[qs][e[n+2]],e[n+3]),n+=2):"number"==typeof e[n]?(0,t[qs][e[n]])():e[n].call(t[qs][e[n+1]]);t[qs]=null}}(e),function(t){var e,n=t[zs];null!=n&&null!=(e=n.destroyHooks)&&sa(t[Zs],e)}(e),(i=(n=e)[zs]&&n[zs].pipeDestroyHooks)&&sa(n,i),-1===e[zs].id&&ha(e[$s])&&e[$s].destroy()}var n,i}var wa,Ca,Ea,Ta,Sa,Ia,Ra,Pa,Ma,ka="__ngHostLNode__",La=Promise.resolve(null),Fa=[0,0],Da=new Array(Bs).fill(null),Oa=!1,Aa=!0;function Na(t,e){var n=Pa;return Ma=t&&t[Zs],Sa=t&&t[zs],Ra=t&&1==(1&t[Ys]),Aa=t&&Sa.firstTemplatePass,wa=t&&t[$s],null!=e&&(Ea=e,Ta=!0),Pa=t,Ia=t&&t[Us],n}function Ga(t,e){e||(Oa||ra(Ma,Sa.viewHooks,Sa.viewCheckHooks,Ra),Pa[Ys]&=-6),Pa[Ys]|=16,Pa[Xs]=-1,Na(t,null)}function Va(){Oa||oa(Pa,Sa,Ra),function(t){for(var e=va(Pa);null!==e;e=e[Ws])if(e.length<Bs&&null===e[aa])for(var n=e,i=0;i<n[la].length;i++){var o=n[la][i],r=o.data;Ha(o,r[zs],r[Qs],2)}}(),Oa||ra(Ma,Sa.contentHooks,Sa.contentCheckHooks,Ra),Sa.firstTemplatePass=Aa=!1,ja(Sa.hostBindings),function(t){if(null!=t.contentQueries)for(var e=0;e<t.contentQueries.length;e+=2){var n=t.contentQueries[e];t.directives[n].contentQueriesRefresh(n,t.contentQueries[e+1])}}(Sa),function(t){if(null!=t)for(var e=0;e<t.length;e+=2)Qa(t[e],t[e+1])}(Sa.components)}function ja(t){if(null!=t)for(var e=Sa.directives,n=0;n<t.length;n+=2){var i=t[n],o=e[i];o.hostBindings&&o.hostBindings(i,t[n+1])}}function Ba(t,e,n,i,o){return[e,Pa,null,null,25|i,null,-1,null,null,n,Pa&&Pa[Js],t,o||null,null,-1,null]}function za(t,e,n,i,o,r){var s=Ta?Ea:Ea&&ga(Ea),a=s&&s.view===Pa?s.tNode:null,l=(Ta?Ia:Ea&&Ea.queries)||s&&s.queries&&s.queries.child(),u=null!=r,h=function(t,e,n,i,o,r){return{native:i,view:Pa,nodeInjector:n?n.nodeInjector:null,data:o,queries:r,tNode:null,dynamicLContainerNode:null}}(0,0,s,n,u?r:null,l);if(-1===t||2===e)h.tNode=(r?r[zs].node:null)||qa(e,t,null,null,a,null);else{var c=t+Bs,d=Sa.data;if(Pa[c]=h,c>=d.length){var p=d[c]=qa(e,c,i,o,a,null);if(!Ta&&Ea){var f=Ea.tNode;f.next=p,f.dynamicContainerNode&&(f.dynamicContainerNode.next=p)}}h.tNode=d[c],Ta&&(Ia=null,(null==Ea.tNode.child&&Ea.view===Pa||2===Ea.tNode.type)&&(Ea.tNode.child=h.tNode))}if(2==(2&e)&&u){var g=r;g[Ks]=h,Aa&&(g[zs].node=h.tNode)}return Ea=h,Ta=!0,h}function Ha(t,e,n,i){var o,r=Ta,s=Ea;if(null==t.data[Hs]&&t.data[Qs]&&!e.template)$a(t.data[Qs]);else try{Ta=!0,Ea=null,o=Na(t.data,t),Ka(),e.template(i,n),2&i?Va():t.data[zs].firstTemplatePass=Aa=!1}finally{Ga(o,1==(1&i)),Ta=r,Ea=s}return t}function Wa(t,e,n,i){var o=Na(e,t);try{Ca.begin&&Ca.begin(),i?(Ka(),i(Ua(e),n),Va()):(Oa||(oa(Pa,Sa,Ra),ra(Ma,Sa.contentHooks,Sa.contentCheckHooks,Ra)),ja(Fa),Qa(0,Bs))}finally{Ca.end&&Ca.end(),Ga(o)}}function Ua(t){return 1&t[Ys]?3:2}var Ya=null;function Ka(){Ya=null}function Xa(t,e,n,i,o){return{id:t,template:e,viewQuery:o,node:null,data:Da.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof i?i():i,currentMatches:null}}function Za(t,e){Ca=t;var n=t.createRenderer(null,null);return"string"==typeof e?ha(n)?n.selectRootElement(e):n.querySelector(e):e}function qa(t,e,n,i,o,r){return{type:t,index:e,flags:0,tagName:n,attrs:i,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:r,next:null,child:null,parent:o,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function Qa(t,e){var n=Pa[e],i=n.data;Ja(i)&&6&i[Ys]&&nl(i,n,Ma[t])}function Ja(t){return 8==(8&t[Ys])}function $a(t){for(var e=0;e<t.components.length;e++){var n=t.components[e];Wa(il(n),tl(n),n)}}function tl(t){for(var e=il(t).view;e[Hs];)e=e[Hs];return e}function el(t){var e=il(t);nl(e.data,e,t)}function nl(t,e,n){var i=Na(t,e),o=t[zs],r=o.template,s=o.viewQuery;try{Ka(),function(e,n,i){e&&1&t[Ys]&&e(1,i)}(s,0,n),r(Ua(t),n),Va(),function(t,e){t&&t(2,e)}(s,n)}finally{Ga(i)}}function il(t){return t[ka]}var ol=La;function rl(t){return{components:[],scheduler:t,clean:ol}}var sl=function(){function t(t,e){this._view=t,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=e}return t.prototype._setComponentContext=function(t,e){this._view=t,this.context=e},Object.defineProperty(t.prototype,"destroyed",{get:function(){return 32==(32&this._view[Ys])},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t,e;this._viewContainerRef&&Ja(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),ha(e=(t=this._view)[$s])&&e.destroyNode&&function(e,n,i,o,r,s){for(var a=t[Ks],l=-1;a;){var u=null,h=a.tNode.type;if(3===h)ma(2,o,null,a.native,s),a.dynamicLContainerNode&&ma(2,o,null,a.dynamicLContainerNode.native,s);else if(0===h){ma(2,o,null,a.native,s);var c=a,d=c.dynamicLContainerNode?c.dynamicLContainerNode.data:c.data;(u=d[la].length?fa(d[la][0]):null)&&(s=c.dynamicLContainerNode?c.dynamicLContainerNode.native:c.native)}else if(1===h){var p=ya(a.view),f=p.tNode.projection[a.tNode.projection];_a[++l]=a,u=f?p.data[Hs][f.index]:null}else u=fa(a);if(null===u)for(null===(u=pa(a))&&8192&a.tNode.flags&&(u=pa(_a[l--]));a&&!u;){if(null===(a=ga(a))||a===n)return null;a.tNode.next||0!==h||(s=a.native),u=pa(a)}a=u}}(0,t[Ks],0,e),function(t){if(-1===t[zs].childIndex)return ba(t);for(var e=va(t);e;){var n=null;if(e.length>=Bs?e[zs].childIndex>-1&&(n=va(e)):e[la].length&&(n=e[la][0].data),null==n){for(;e&&!e[Ws]&&e!==t;)ba(e),e=xa(e,t);ba(e||t),n=e&&e[Ws]}e=n}}(t),t[Ys]|=32},t.prototype.onDestroy=function(t){var e,n;n=t,function(t){return t[qs]||(t[qs]=[])}(e=this._view).push(n),e[zs].firstTemplatePass&&function(t){return t[zs].cleanup||(t[zs].cleanup=[])}(e).push(e[qs].length-1,null)},t.prototype.markForCheck=function(){!function(t){for(var e=t;null!=e[Hs];)e[Ys]|=4,e=e[Hs];var n,i;e[Ys]|=4,(n=e[Qs]).clean==La&&(n.clean=new Promise(function(t){return i=t}),n.scheduler(function(){$a(n),i(null),n.clean=La}))}(this._view)},t.prototype.detach=function(){this._view[Ys]&=-9},t.prototype.reattach=function(){this._view[Ys]|=8},t.prototype.detectChanges=function(){el(this.context)},t.prototype.checkNoChanges=function(){!function(t){Oa=!0;try{el(t)}finally{Oa=!1}}(this.context)},t.prototype.attachToViewContainerRef=function(t){this._viewContainerRef=t},t.prototype.detachFromAppRef=function(){this._appRef=null},t.prototype.attachToAppRef=function(t){this._appRef=t},t}(),al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.resolveComponentFactory=function(t){return new cl(t.ngComponentDef)},e}(Ve);function ll(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var ul=new ct("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return rl(Qt(hl))}}),hl=new ct("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),cl=function(t){function e(e){var n=t.call(this)||this;return n.componentDef=e,n.componentType=e.type,n.selector=e.selectors[0][0],n.ngContentSelectors=[],n}return o(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return ll(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return ll(this.componentDef.outputs)},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,i){var o,r,s=void 0===n,a=i?i.injector.get(mn):ca,l=s?(o=this.selector,ha(r=a.createRenderer(null,this.componentDef.rendererType)||wa)?r.createElement(o,Ya):null===Ya?r.createElement(o):r.createElementNS(Ya,o)):Za(a,n),u=i&&!s?i.injector.get(ul):rl(requestAnimationFrame.bind(window)),h=Ba(a.createRenderer(l,this.componentDef.rendererType),Xa(-1,null,null,null,null),u,this.componentDef.onPush?4:2);h[Js]=i&&i.injector||null;var c,d,p=Na(h,null);try{if(a.begin&&a.begin(),d=function(t,e,n,i){Ta=!1,Ea=null;var o,r=za(0,3,e,null,null,Ba(wa,(o=n.template).ngPrivateData||(o.ngPrivateData=Xa(-1,o,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,i));return Aa&&(r.tNode.flags=4096,n.diPublic&&n.diPublic(n),Sa.directives=[n]),r}(0,l,this.componentDef),u.components.push(c=function(t,e,n){if(Object.defineProperty(e,ka,{enumerable:!1,value:Ea}),null==Ma&&(Pa[Zs]=Ma=[]),Ma[t]=e,Aa){var i=Ea.tNode.flags;0==(4095&i)?Ea.tNode.flags=t<<14|4096&i|1:Ea.tNode.flags++}else{var o=n.diPublic;o&&o(n)}return null!=n.attributes&&3==Ea.tNode.type&&function(t,e){for(var n=ha(wa),i=0;i<e.length;){var o=e[i];if(1===o)break;if(o===ua)i+=2;else if(0===o){var r=e[i+1],s=e[i+2],a=e[i+3];n?wa.setAttribute(t,s,a,r):t.setAttributeNS(r,s,a),i+=4}else a=e[i+1],n?wa.setAttribute(t,o,a):t.setAttribute(o,a),i+=2}}(Ea.native,n.attributes),e}(0,this.componentDef.factory(),this.componentDef)),function(t,e,n){t&&null!=t.changeDetectorRef&&t.changeDetectorRef._setComponentContext(d.data,c)}(d.nodeInjector),function(t,e){var n=il(t),i=n.view[zs];(function(t,e,n,i){e&&(i.initHooks||(i.initHooks=[])).push(0,e),n&&((i.initHooks||(i.initHooks=[])).push(0,n),(i.checkHooks||(i.checkHooks=[])).push(0,n))})(0,e.onInit,e.doCheck,i),function(t,e){if(e.firstTemplatePass)for(var n=t>>14,i=n+(4095&t),o=n;o<i;o++){var r=e.directives[o];ea(r,e,o),na(r,e,o),ia(r,e,o)}}(n.tNode.flags,i)}(c,this.componentDef),e)for(var f=0,g=d.tNode.projection=[],_=0;_<e.length;_++){for(var y=e[_],m=null,v=null,x=0;x<y.length;x++){var b=za(++f,3,y[x],null,null);v?v.next=b.tNode:m=b.tNode,v=b.tNode}g.push(m)}Ha(d,d.data[zs],c,1),d.data[Ys]&=-2}finally{Na(p,null),a.end&&a.end()}var w=new dl(this.componentType,c,h,t,l);return s&&(w.hostView._lViewNode.tNode.child=d.tNode),w},e}(Fe),dl=function(t){function e(e,n,i,o,r){var s=t.call(this)||this;return s.destroyCbs=[],s.instance=n,s.hostView=s.changeDetectorRef=new sl(i,n),s.hostView._lViewNode=za(-1,2,null,null,null,i),s.injector=o,s.location=new bn(r),s.componentType=e,s}return o(e,t),e.prototype.destroy=function(){this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){this.destroyCbs.push(t)},e}(Le),pl={provide:Ve,useFactory:function(){return new al},deps:[]},fl=function(t){function e(e,n){var i=t.call(this)||this;return i._bootstrapComponents=[],i.destroyCbs=[],i._bootstrapComponents=e.ngModuleDef.bootstrap,i.injector=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),e=e||pe(),new fe(t,n,e)}(e,n,[pl,{provide:ze,useValue:i}]),i.instance=i.injector.get(e),i.componentFactoryResolver=new al,i}return o(e,t),e.prototype.destroy=function(){this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){this.destroyCbs.push(t)},e}(ze);!function(t){function e(e){var n=t.call(this)||this;return n.moduleType=e,n}o(e,t),e.prototype.create=function(t){return new fl(this.moduleType,t)}}(He);var gl=function(){};function _l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}n("W8A/");let yl=0;function ml(t){return t.ol_uid||(t.ol_uid=++yl)}const vl=function(t){const e="5.0.0".split("-")[0];this.message="Assertion failed. See https://openlayers.org/en/"+e+"/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"};_l(vl,Error);var xl=vl;const bl="function"==typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");const n=Object(t);for(let i=1,o=arguments.length;i<o;++i){const t=arguments[i];if(void 0!==t&&null!==t)for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}return n};function wl(t){for(const e in t)delete t[e]}function Cl(t){const e=[];for(const n in t)e.push(t[n]);return e}function El(t){let e;for(e in t)return!1;return!e}function Tl(t,e,n,i){let o;for(let r=0,s=t.length;r<s;++r)if((o=t[r]).listener===e&&o.bindTo===n)return i&&(o.deleteIndex=r),o}function Sl(t,e){const n=t.ol_lm;return n?n[e]:void 0}function Il(t){let e=t.ol_lm;return e||(e=t.ol_lm={}),e}function Rl(t,e){const n=Sl(t,e);if(n){for(let o=0,r=n.length;o<r;++o)t.removeEventListener(e,n[o].boundListener),wl(n[o]);n.length=0;const i=t.ol_lm;i&&(delete i[e],0===Object.keys(i).length&&delete t.ol_lm)}}function Pl(t,e,n,i,o){const r=Il(t);let s=r[e];s||(s=r[e]=[]);let a=Tl(s,n,i,!1);return a?o||(a.callOnce=!1):(t.addEventListener(e,function(t){const e=function(e){const n=t.listener,i=t.bindTo||t.target;return t.callOnce&&Ll(t),n.call(i,e)};return t.boundListener=e,e}(a={bindTo:i,callOnce:!!o,listener:n,target:t,type:e})),s.push(a)),a}function Ml(t,e,n,i){return Pl(t,e,n,i,!0)}function kl(t,e,n,i){const o=Sl(t,e);if(o){const t=Tl(o,n,i,!0);t&&Ll(t)}}function Ll(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);const e=Sl(t.target,t.type);if(e){const n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&Rl(t.target,t.type)}wl(t)}}function Fl(t){const e=Il(t);for(const n in e)Rl(t,n)}function Dl(){return!0}function Ol(){return!1}function Al(){}const Nl=function(){};Nl.prototype.disposed_=!1,Nl.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},Nl.prototype.disposeInternal=Al;var Gl=Nl;const Vl=function(t){this.type=t,this.target=null};function jl(t){t.stopPropagation()}Vl.prototype.preventDefault=Vl.prototype.stopPropagation=function(){this.propagationStopped=!0};var Bl=Vl;const zl=function(){Gl.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}};_l(zl,Gl),zl.prototype.addEventListener=function(t,e){let n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},zl.prototype.dispatchEvent=function(t){const e="string"==typeof t?new Bl(t):t,n=e.type;e.target=this;const i=this.listeners_[n];let o;if(i){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(let t=0,n=i.length;t<n;++t)if(!1===i[t].call(this,e)||e.propagationStopped){o=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){let t=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];t--;)this.removeEventListener(n,Al);delete this.dispatching_[n]}return o}},zl.prototype.disposeInternal=function(){Fl(this)},zl.prototype.getListeners=function(t){return this.listeners_[t]},zl.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},zl.prototype.removeEventListener=function(t,e){const n=this.listeners_[t];if(n){const i=n.indexOf(e);t in this.pendingRemovals_?(n[i]=Al,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t])}};var Hl=zl,Wl={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};const Ul=function(){Hl.call(this),this.revision_=0};_l(Ul,Hl),Ul.prototype.changed=function(){++this.revision_,this.dispatchEvent(Wl.CHANGE)},Ul.prototype.getRevision=function(){return this.revision_},Ul.prototype.on=function(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Pl(this,t[o],e);return i}return Pl(this,t,e)},Ul.prototype.once=function(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Ml(this,t[o],e);return i}return Ml(this,t,e)},Ul.prototype.un=function(t,e){if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)kl(this,t[n],e);else kl(this,t,e)};var Yl=Ul;const Kl=function(t,e,n){Bl.call(this,t),this.key=e,this.oldValue=n};_l(Kl,Bl);const Xl=function(t){Yl.call(this),ml(this),this.values_={},void 0!==t&&this.setProperties(t)};_l(Xl,Yl);const Zl={};function ql(t){return Zl.hasOwnProperty(t)?Zl[t]:Zl[t]="change:"+t}Xl.prototype.get=function(t){let e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},Xl.prototype.getKeys=function(){return Object.keys(this.values_)},Xl.prototype.getProperties=function(){return bl({},this.values_)},Xl.prototype.notify=function(t,e){let n;n=ql(t),this.dispatchEvent(new Kl(n,t,e)),this.dispatchEvent(new Kl(n="propertychange",t,e))},Xl.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{const n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},Xl.prototype.setProperties=function(t,e){for(const n in t)this.set(n,t[n],e)},Xl.prototype.unset=function(t,e){if(t in this.values_){const n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}};var Ql=Xl;const Jl=function(t,e){Bl.call(this,t),this.element=e};_l(Jl,Bl);const $l=function(t,e){if(Ql.call(this),this.unique_=!!(e||{}).unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()};_l($l,Ql),$l.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},$l.prototype.extend=function(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this},$l.prototype.forEach=function(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)},$l.prototype.getArray=function(){return this.array_},$l.prototype.item=function(t){return this.array_[t]},$l.prototype.getLength=function(){return this.get("length")},$l.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Jl("add",e))},$l.prototype.pop=function(){return this.removeAt(this.getLength()-1)},$l.prototype.push=function(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()},$l.prototype.remove=function(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},$l.prototype.removeAt=function(t){const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Jl("remove",e)),e},$l.prototype.setAt=function(t,e){const n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Jl("remove",n)),this.dispatchEvent(new Jl("add",e))}else{for(let e=n;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,e)}},$l.prototype.updateLength_=function(){this.set("length",this.array_.length)},$l.prototype.assertUnique_=function(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new xl(58)};var tu=$l;function eu(t,e){if(!t)throw new xl(e)}var nu={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},iu={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ou(t){const e=[1/0,1/0,-1/0,-1/0];for(let n=0,i=t.length;n<i;++n)mu(e,t[n]);return e}function ru(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function su(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function au(t,e,n){let i,o;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*o}function lu(t,e){return hu(t,e[0],e[1])}function uu(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function hu(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function cu(t,e){const n=e[0],i=e[1];let o=iu.UNKNOWN;return n<t[0]?o|=iu.LEFT:n>t[2]&&(o|=iu.RIGHT),i<t[1]?o|=iu.BELOW:i>t[3]&&(o|=iu.ABOVE),o===iu.UNKNOWN&&(o=iu.INTERSECTING),o}function du(t,e,n,i,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=i,o):[t,e,n,i]}function pu(t){return du(1/0,1/0,-1/0,-1/0,t)}function fu(t,e){const n=t[0],i=t[1];return du(n,i,n,i,e)}function gu(t,e,n,i,o){return vu(pu(o),t,e,n,i)}function _u(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function yu(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function mu(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function vu(t,e,n,i,o){for(;n<i;n+=o)xu(t,e[n],e[n+1]);return t}function xu(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function bu(t,e,n){let i;return(i=e.call(n,Cu(t)))?i:(i=e.call(n,Eu(t)))?i:(i=e.call(n,Mu(t)))?i:(i=e.call(n,Pu(t)))||!1}function wu(t){let e=0;return Fu(t)||(e=ku(t)*Iu(t)),e}function Cu(t){return[t[0],t[1]]}function Eu(t){return[t[2],t[1]]}function Tu(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Su(t,e,n,i,o){const r=e*i[0]/2,s=e*i[1]/2,a=Math.cos(n),l=Math.sin(n),u=r*a,h=r*l,c=s*a,d=s*l,p=t[0],f=t[1],g=p-u+d,_=p-u-d,y=p+u-d,m=p+u+d,v=f-h-c,x=f-h+c,b=f+h+c,w=f+h-c;return du(Math.min(g,_,y,m),Math.min(v,x,b,w),Math.max(g,_,y,m),Math.max(v,x,b,w),o)}function Iu(t){return t[3]-t[1]}function Ru(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return Lu(t,e)?(i[0]=t[0]>e[0]?t[0]:e[0],i[1]=t[1]>e[1]?t[1]:e[1],i[2]=t[2]<e[2]?t[2]:e[2],i[3]=t[3]<e[3]?t[3]:e[3]):pu(i),i}function Pu(t){return[t[0],t[3]]}function Mu(t){return[t[2],t[3]]}function ku(t){return t[2]-t[0]}function Lu(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Fu(t){return t[2]<t[0]||t[3]<t[1]}function Du(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function Ou(t,e,n,i,o,r){const s=r||[];let a=0;for(let l=e;l<n;l+=i){const e=t[l],n=t[l+1];s[a++]=o[0]*e+o[2]*n+o[4],s[a++]=o[1]*e+o[3]*n+o[5]}return r&&s.length!=a&&(s.length=a),s}function Au(t,e,n,i,o,r,s){const a=s||[];let l=0;for(let u=e;u<n;u+=i){a[l++]=t[u]+o,a[l++]=t[u+1]+r;for(let e=u+2;e<u+i;++e)a[l++]=t[e]}return s&&a.length!=l&&(a.length=l),a}function Nu(t,e,n){return Math.min(Math.max(t,e),n)}const Gu="cosh"in Math?Math.cosh:function(t){const e=Math.exp(t);return(e+1/e)/2};function Vu(t,e,n,i,o,r){const s=o-n,a=r-i;if(0!==s||0!==a){const l=((t-n)*s+(e-i)*a)/(s*s+a*a);l>1?(n=o,i=r):l>0&&(n+=s*l,i+=a*l)}return ju(t,e,n,i)}function ju(t,e,n,i){const o=n-t,r=i-e;return o*o+r*r}function Bu(t){return 180*t/Math.PI}function zu(t){return t*Math.PI/180}function Hu(t,e){const n=t%e;return n*e<0?n+e:n}function Wu(t,e,n){return t+n*(e-t)}var Uu={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};const Yu=6371008.8;function Ku(t,e,n){const i=n||Yu,o=zu(t[1]),r=zu(e[1]),s=(r-o)/2,a=zu(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(o)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function Xu(t,e,n,i){const o=i||Yu,r=zu(t[1]),s=zu(t[0]),a=e/o,l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(n));return[Bu(s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l))),Bu(l)]}const Zu={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},qu={};qu[Zu.DEGREES]=2*Math.PI*6370997/360,qu[Zu.FEET]=.3048,qu[Zu.METERS]=1,qu[Zu.USFEET]=1200/3937;var Qu=Zu;const Ju=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};Ju.prototype.canWrapX=function(){return this.canWrapX_},Ju.prototype.getCode=function(){return this.code_},Ju.prototype.getExtent=function(){return this.extent_},Ju.prototype.getUnits=function(){return this.units_},Ju.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||qu[this.units_]},Ju.prototype.getWorldExtent=function(){return this.worldExtent_},Ju.prototype.getAxisOrientation=function(){return this.axisOrientation_},Ju.prototype.isGlobal=function(){return this.global_},Ju.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Ju.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Ju.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Ju.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Ju.prototype.setWorldExtent=function(t){this.worldExtent_=t},Ju.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Ju.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var $u=Ju;const th=6378137,eh=Math.PI*th,nh=[-eh,-eh,eh,eh],ih=[-180,-85,180,85];function oh(t){$u.call(this,{code:t,units:Qu.METERS,extent:nh,global:!0,worldExtent:ih,getPointResolution:function(t,e){return t/Gu(e[1]/th)}})}_l(oh,$u);const rh=[new oh("EPSG:3857"),new oh("EPSG:102100"),new oh("EPSG:102113"),new oh("EPSG:900913"),new oh("urn:ogc:def:crs:EPSG:6.18:3:3857"),new oh("urn:ogc:def:crs:EPSG::3857"),new oh("http://www.opengis.net/gml/srs/epsg.xml#3857")],sh=[-180,-90,180,90],ah=6378137*Math.PI/180;function lh(t,e){$u.call(this,{code:t,units:Qu.DEGREES,extent:sh,axisOrientation:e,global:!0,metersPerUnit:ah,worldExtent:sh})}_l(lh,$u);const uh=[new lh("CRS:84"),new lh("EPSG:4326","neu"),new lh("urn:ogc:def:crs:EPSG::4326","neu"),new lh("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new lh("urn:ogc:def:crs:OGC:1.3:CRS84"),new lh("urn:ogc:def:crs:OGC:2:84"),new lh("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new lh("urn:x-ogc:def:crs:EPSG:4326","neu")];let hh={},ch={};function dh(t,e,n){const i=t.getCode(),o=e.getCode();i in ch||(ch[i]={}),ch[i][o]=n}function ph(t,e,n){let i;if(void 0!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];i=e}else i=t.slice();return i}function fh(t,e,n){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function gh(t){!function(t,e){hh[t]=e}(t.getCode(),t),dh(t,t,ph)}function _h(t){let e=null;return t instanceof $u?e=t:"string"==typeof t&&(e=hh[t]||null),e}function yh(t,e,n,i){let o;const r=(t=_h(t)).getPointResolutionFunc();if(r)o=r(e,n);else if(t.getUnits()==Qu.DEGREES&&!i||i==Qu.DEGREES)o=e;else{const r=bh(t,_h("EPSG:4326"));let s=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];o=(Ku((s=r(s,s,2)).slice(0,2),s.slice(2,4))+Ku(s.slice(4,6),s.slice(6,8)))/2;const a=i?qu[i]:t.getMetersPerUnit();void 0!==a&&(o/=a)}return o}function mh(t){!function(t){t.forEach(gh)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&dh(e,t,ph)})})}function vh(t,e){return t?"string"==typeof t?_h(t):t:_h(e)}function xh(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?n:bh(t,e)===ph&&n}function bh(t,e){let n=function(t,e){let n;return t in ch&&e in ch[t]&&(n=ch[t][e]),n}(t.getCode(),e.getCode());return n||(n=fh),n}function wh(t,e){return bh(_h(t),_h(e))}function Ch(t,e,n){return wh(e,n)(t,void 0,t.length)}function Eh(t,e,n){return function(t,e,n){const i=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(i,i,2),o=[i[0],i[2],i[4],i[6]],r=[i[1],i[3],i[5],i[7]],du(Math.min.apply(null,o),Math.min.apply(null,r),Math.max.apply(null,o),Math.max.apply(null,r),void 0);var o,r}(t,wh(e,n))}var Th,Sh,Ih;mh(rh),mh(uh),Th=rh,Sh=function(t,e,n){const i=t.length,o=n>1?n:2;let r=e;void 0===r&&(r=o>2?t.slice():new Array(i));const s=eh;for(let a=0;a<i;a+=o){r[a]=s*t[a]/180;let e=th*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));e>s?e=s:e<-s&&(e=-s),r[a+1]=e}return r},Ih=function(t,e,n){const i=t.length,o=n>1?n:2;let r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(let s=0;s<i;s+=o)r[s]=180*t[s]/eh,r[s+1]=360*Math.atan(Math.exp(t[s+1]/th))/Math.PI-90;return r},uh.forEach(function(t){Th.forEach(function(e){dh(t,e,Sh),dh(e,t,Ih)})});const Rh=new Array(6);function Ph(t){return kh(t,1,0,0,1,0,0)}function Mh(t,e){const n=t[0],i=t[1],o=t[2],r=t[3],s=t[4],a=t[5],l=e[0],u=e[1],h=e[2],c=e[3],d=e[4],p=e[5];return t[0]=n*l+o*u,t[1]=i*l+r*u,t[2]=n*h+o*c,t[3]=i*h+r*c,t[4]=n*d+o*p+s,t[5]=i*d+r*p+a,t}function kh(t,e,n,i,o,r,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=s,t}function Lh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Fh(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Dh(t,e){const n=Math.cos(e),i=Math.sin(e);return Mh(t,kh(Rh,n,i,-i,n,0,0))}function Oh(t,e,n){return Mh(t,kh(Rh,e,0,0,n,0,0))}function Ah(t,e,n){return Mh(t,kh(Rh,1,0,0,1,e,n))}function Nh(t,e,n,i,o,r,s,a){const l=Math.sin(r),u=Math.cos(r);return t[0]=i*u,t[1]=o*l,t[2]=-i*l,t[3]=o*u,t[4]=s*i*u-a*i*l+e,t[5]=s*o*l+a*o*u+n,t}function Gh(t){const e=(n=t)[0]*n[3]-n[1]*n[2];var n;eu(0!==e,32);const i=t[0],o=t[1],r=t[2],s=t[3],a=t[4],l=t[5];return t[0]=s/e,t[1]=-o/e,t[2]=-r/e,t[3]=i/e,t[4]=(r*l-s*a)/e,t[5]=-(i*l-o*a)/e,t}const Vh=function(){Ql.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0};_l(Vh,Ql);const jh=[1,0,0,1,0,0];Vh.prototype.clone=function(){},Vh.prototype.closestPointXY=function(t,e,n,i){},Vh.prototype.getClosestPoint=function(t,e){const n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},Vh.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},Vh.prototype.computeExtent=function(t){},Vh.prototype.containsXY=Ol,Vh.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},Vh.prototype.rotate=function(t,e){},Vh.prototype.scale=function(t,e,n){},Vh.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},Vh.prototype.getSimplifiedGeometry=function(t){},Vh.prototype.getType=function(){},Vh.prototype.applyTransform=function(t){},Vh.prototype.intersectsExtent=function(t){},Vh.prototype.translate=function(t,e){},Vh.prototype.transform=function(t,e){const n=(t=_h(t)).getUnits()==Qu.TILE_PIXELS?function(n,i,o){const r=t.getExtent(),s=t.getWorldExtent(),a=Iu(s)/Iu(r);return Nh(jh,s[0],s[3],a,-a,0,0,0),Ou(n,0,n.length,o,jh,i),wh(t,e)(n,i,o)}:wh(t,e);return this.applyTransform(n),this};var Bh=Vh;const zh=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Hh=/^([a-z]*)$/i;function Wh(t){return"string"==typeof t?t:Xh(t)}const Uh=function(){const t={};let e=0;return function(n){let i;if(t.hasOwnProperty(n))i=t[n];else{if(e>=1024){let n=0;for(const i in t)0==(3&n++)&&(delete t[i],--e)}i=function(t){let e,n,i,o,r;if(Hh.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t)),zh.exec(t)){const s=t.length-1;let a;a=s<=4?1:2;const l=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),n=parseInt(t.substr(1+1*a,a),16),i=parseInt(t.substr(1+2*a,a),16),o=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,n=(n<<4)+n,i=(i<<4)+i,l&&(o=(o<<4)+o)),r=[e,n,i,o/255]}else 0==t.indexOf("rgba(")?Kh(r=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((r=t.slice(4,-1).split(",").map(Number)).push(1),Kh(r)):eu(!1,14);return r}(n),t[n]=i,++e}return i}}();function Yh(t){return Array.isArray(t)?t:Uh(t)}function Kh(t){return t[0]=Nu(t[0]+.5|0,0,255),t[1]=Nu(t[1]+.5|0,0,255),t[2]=Nu(t[2]+.5|0,0,255),t[3]=Nu(t[3],0,1),t}function Xh(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:t[3])+")"}function Zh(t){return function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}(t)?t:Xh(t)}function qh(t,e){const n=document.createElement("CANVAS");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function Qh(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function Jh(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function $h(t){for(;t.lastChild;)t.removeChild(t.lastChild)}const tc=10242,ec=10243,nc=3553,ic=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function oc(t,e){const n=ic.length;for(let i=0;i<n;++i)try{const n=t.getContext(ic[i],e);if(n)return n}catch(t){}return null}let rc,sc,ac=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{const t=oc(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});t&&(ac=!0,rc=t.getParameter(t.MAX_TEXTURE_SIZE),sc=t.getSupportedExtensions())}catch(t){}const lc="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",uc=-1!==lc.indexOf("firefox"),hc=-1!==lc.indexOf("safari")&&-1==lc.indexOf("chrom"),cc=-1!==lc.indexOf("webkit")&&-1==lc.indexOf("edge"),dc=-1!==lc.indexOf("macintosh"),pc=window.devicePixelRatio||1,fc=function(){let t=!1;try{t=!!document.createElement("CANVAS").getContext("2d").setLineDash}catch(t){}return t}(),gc="geolocation"in navigator,_c="ontouchstart"in window,yc="PointerEvent"in window,mc=!!navigator.msPointerEnabled;var vc={IDLE:0,LOADING:1,LOADED:2,ERROR:3};const xc="ol-hidden",bc=function(){let t;const e={};return function(n){if(t||(t=document.createElement("div").style),!(n in e)){t.font=n;const i=t.fontFamily;if(t.font="",!i)return null;e[n]=i.split(/,\s?/)}return e[n]}}(),wc=function(t){Hl.call(this),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null};_l(wc,Hl),wc.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},wc.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(Wl.CLEAR)},wc.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},wc.prototype.forEach=function(t,e){let n=this.oldest_;for(;n;)t.call(e,n.value_,n.key_,this),n=n.newer},wc.prototype.get=function(t){const e=this.entries_[t];return eu(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},wc.prototype.remove=function(t){const e=this.entries_[t];return eu(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},wc.prototype.getCount=function(){return this.count_},wc.prototype.getKeys=function(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t},wc.prototype.getValues=function(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t},wc.prototype.peekLast=function(){return this.oldest_.value_},wc.prototype.peekLastKey=function(){return this.oldest_.key_},wc.prototype.peekFirstKey=function(){return this.newest_.key_},wc.prototype.pop=function(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},wc.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},wc.prototype.set=function(t,e){eu(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},wc.prototype.setSize=function(t){this.highWaterMark=t},wc.prototype.prune=function(){for(;this.canExpireCache();)this.pop()};var Cc=wc;const Ec=[0,0,0,1],Tc=[],Sc=[0,0,0,1],Ic=[0,0,0,0],Rc=new Cc,Pc={};let Mc=null;const kc={},Lc=function(){const t=60,e=Pc,n="32px ",i=["monospace","serif"],o=i.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";let s,a;function l(t){const e=Fc();let s=!0;for(let l=0;l<o;++l){const o=i[l];if(e.font=n+o,a=e.measureText(r).width,t!=o){e.font=n+t+","+o;const i=e.measureText(r).width;s=s&&i!=a}}return s}function u(){let n=!0;for(const i in e)e[i]<t&&(l(i)?(e[i]=t,wl(kc),Mc=null,Rc.clear()):(++e[i],n=!1));n&&(clearInterval(s),s=void 0)}return function(n){const i=bc(n);if(i)for(let o=0,r=i.length;o<r;++o){const n=i[o];n in e||(e[n]=t,l(n)||(e[n]=0,void 0===s&&(s=setInterval(u,32))))}}}();function Fc(){return Mc||(Mc=qh(1,1)),Mc}const Dc=function(){let t;const e=kc;return function(n){let i=e[n];return void 0==i&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=n,document.body.appendChild(t),i=e[n]=t.offsetHeight,document.body.removeChild(t)),i}}();function Oc(t,e){const n=Fc();return t!=n.font&&(n.font=t),n.measureText(e).width}function Ac(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))}const Nc=[1,0,0,1,0,0];function Gc(t,e,n,i,o,r,s,a,l,u,h){let c;1!=n&&(t.globalAlpha=(c=t.globalAlpha)*n),e&&t.setTransform.apply(t,e),t.drawImage(i,o,r,s,a,l,u,s*h,a*h),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,Nc)}const Vc=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};Vc.prototype.getOpacity=function(){return this.opacity_},Vc.prototype.getRotateWithView=function(){return this.rotateWithView_},Vc.prototype.getRotation=function(){return this.rotation_},Vc.prototype.getScale=function(){return this.scale_},Vc.prototype.getSnapToPixel=function(){return this.snapToPixel_},Vc.prototype.getAnchor=function(){},Vc.prototype.getImage=function(t){},Vc.prototype.getHitDetectionImage=function(t){},Vc.prototype.getImageState=function(){},Vc.prototype.getImageSize=function(){},Vc.prototype.getHitDetectionImageSize=function(){},Vc.prototype.getOrigin=function(){},Vc.prototype.getSize=function(){},Vc.prototype.setOpacity=function(t){this.opacity_=t},Vc.prototype.setRotateWithView=function(t){this.rotateWithView_=t},Vc.prototype.setRotation=function(t){this.rotation_=t},Vc.prototype.setScale=function(t){this.scale_=t},Vc.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},Vc.prototype.listenImageChange=function(t,e){},Vc.prototype.load=function(){},Vc.prototype.unlistenImageChange=function(t,e){};var jc=Vc;const Bc=function(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_),jc.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel})};_l(Bc,jc),Bc.prototype.clone=function(){const t=new Bc({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},Bc.prototype.getAnchor=function(){return this.anchor_},Bc.prototype.getAngle=function(){return this.angle_},Bc.prototype.getFill=function(){return this.fill_},Bc.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},Bc.prototype.getImage=function(t){return this.canvas_},Bc.prototype.getImageSize=function(){return this.imageSize_},Bc.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},Bc.prototype.getImageState=function(){return vc.LOADED},Bc.prototype.getOrigin=function(){return this.origin_},Bc.prototype.getPoints=function(){return this.points_},Bc.prototype.getRadius=function(){return this.radius_},Bc.prototype.getRadius2=function(){return this.radius2_},Bc.prototype.getSize=function(){return this.size_},Bc.prototype.getStroke=function(){return this.stroke_},Bc.prototype.listenImageChange=function(t,e){},Bc.prototype.load=function(){},Bc.prototype.unlistenImageChange=function(t,e){},Bc.prototype.render_=function(t){let e,n,i="",o="",r=0,s=null,a=0,l=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=Sc),n=Zh(n),void 0===(l=this.stroke_.getWidth())&&(l=1),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),fc||(s=null,a=0),void 0===(o=this.stroke_.getLineJoin())&&(o="round"),void 0===(i=this.stroke_.getLineCap())&&(i="round"),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));let u=2*(this.radius_+l)+1;const h={strokeStyle:n,strokeWidth:l,size:u,lineCap:i,lineDash:s,lineDashOffset:a,lineJoin:o,miterLimit:r};if(void 0===t){const t=qh(u,u);this.canvas_=t.canvas,e=u=this.canvas_.width,this.draw_(h,t,0,0),this.createHitDetectionCanvas_(h)}else{u=Math.round(u);const n=!this.fill_;let i;n&&(i=this.drawHitDetectionCanvas_.bind(this,h));const o=this.getChecksum(),r=t.add(o,u,u,this.draw_.bind(this,h),i);this.canvas_=r.image,this.origin_=[r.offsetX,r.offsetY],e=r.image.width,n?(this.hitDetectionCanvas_=r.hitImage,this.hitDetectionImageSize_=[r.hitImage.width,r.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[u/2,u/2],this.size_=[u,u],this.imageSize_=[e,e]},Bc.prototype.draw_=function(t,e,n,i){let o,r,s;e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();let a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const n=void 0!==this.radius2_?this.radius2_:this.radius_;for(n!==this.radius_&&(a*=2),o=0;o<=a;o++)r=2*o*Math.PI/a-Math.PI/2+this.angle_,e.lineTo(t.size/2+(s=o%2==0?this.radius_:n)*Math.cos(r),t.size/2+s*Math.sin(r))}if(this.fill_){let t=this.fill_.getColor();null===t&&(t=Ec),e.fillStyle=Zh(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},Bc.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)return void(this.hitDetectionCanvas_=this.canvas_);const e=qh(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)},Bc.prototype.drawHitDetectionCanvas_=function(t,e,n,i){e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();let o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const n=void 0!==this.radius2_?this.radius2_:this.radius_;let i,r,s;for(n!==this.radius_&&(o*=2),i=0;i<=o;i++)s=2*i*Math.PI/o-Math.PI/2+this.angle_,e.lineTo(t.size/2+(r=i%2==0?this.radius_:n)*Math.cos(s),t.size/2+r*Math.sin(s))}e.fillStyle=Ec,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},Bc.prototype.getChecksum=function(){const t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){const n="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[n,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};var zc=Bc;const Hc=function(t){const e=t||{};zc.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})};_l(Hc,zc),Hc.prototype.clone=function(){const t=new Hc({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},Hc.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)};var Wc=Hc;const Uc=function(t){const e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};Uc.prototype.clone=function(){const t=this.getColor();return new Uc({color:t&&t.slice?t.slice():t||void 0})},Uc.prototype.getColor=function(){return this.color_},Uc.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Uc.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_=this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?ml(this.color_).toString():"f"+(this.color_?Wh(this.color_):"-")),this.checksum_};var Yc=Uc;const Kc=function(t){const e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};Kc.prototype.clone=function(){const t=this.getColor();return new Kc({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},Kc.prototype.getColor=function(){return this.color_},Kc.prototype.getLineCap=function(){return this.lineCap_},Kc.prototype.getLineDash=function(){return this.lineDash_},Kc.prototype.getLineDashOffset=function(){return this.lineDashOffset_},Kc.prototype.getLineJoin=function(){return this.lineJoin_},Kc.prototype.getMiterLimit=function(){return this.miterLimit_},Kc.prototype.getWidth=function(){return this.width_},Kc.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Kc.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},Kc.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},Kc.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},Kc.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},Kc.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},Kc.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},Kc.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.checksum_+=this.color_?"string"==typeof this.color_?this.color_:ml(this.color_).toString():"-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var Xc=Kc;const Zc=function(t){const e=t||{};this.geometry_=null,this.geometryFunction_=$c,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};Zc.prototype.clone=function(){let t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new Zc({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},Zc.prototype.getRenderer=function(){return this.renderer_},Zc.prototype.setRenderer=function(t){this.renderer_=t},Zc.prototype.getGeometry=function(){return this.geometry_},Zc.prototype.getGeometryFunction=function(){return this.geometryFunction_},Zc.prototype.getFill=function(){return this.fill_},Zc.prototype.setFill=function(t){this.fill_=t},Zc.prototype.getImage=function(){return this.image_},Zc.prototype.setImage=function(t){this.image_=t},Zc.prototype.getStroke=function(){return this.stroke_},Zc.prototype.setStroke=function(t){this.stroke_=t},Zc.prototype.getText=function(){return this.text_},Zc.prototype.setText=function(t){this.text_=t},Zc.prototype.getZIndex=function(){return this.zIndex_},Zc.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=$c,this.geometry_=t},Zc.prototype.setZIndex=function(t){this.zIndex_=t};let qc=null;function Qc(t,e){if(!qc){const t=new Yc({color:"rgba(255,255,255,0.4)"}),e=new Xc({color:"#3399CC",width:1.25});qc=[new Zc({image:new Wc({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return qc}function Jc(){const t={},e=[255,255,255,1],n=[0,153,255,1];return t[Uu.POLYGON]=[new Zc({fill:new Yc({color:[255,255,255,.5]})})],t[Uu.MULTI_POLYGON]=t[Uu.POLYGON],t[Uu.LINE_STRING]=[new Zc({stroke:new Xc({color:e,width:5})}),new Zc({stroke:new Xc({color:n,width:3})})],t[Uu.MULTI_LINE_STRING]=t[Uu.LINE_STRING],t[Uu.CIRCLE]=t[Uu.POLYGON].concat(t[Uu.LINE_STRING]),t[Uu.POINT]=[new Zc({image:new Wc({radius:6,fill:new Yc({color:n}),stroke:new Xc({color:e,width:1.5})}),zIndex:1/0})],t[Uu.MULTI_POINT]=t[Uu.POINT],t[Uu.GEOMETRY_COLLECTION]=t[Uu.POLYGON].concat(t[Uu.LINE_STRING],t[Uu.POINT]),t}function $c(t){return t.getGeometry()}var td=Zc;const ed=function(t){Ql.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Pl(this,ql(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t&&(t instanceof Bh||!t?this.setGeometry(t):this.setProperties(t))};_l(ed,Ql),ed.prototype.clone=function(){const t=new ed(this.getProperties());t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t},ed.prototype.getGeometry=function(){return this.get(this.geometryName_)},ed.prototype.getId=function(){return this.id_},ed.prototype.getGeometryName=function(){return this.geometryName_},ed.prototype.getStyle=function(){return this.style_},ed.prototype.getStyleFunction=function(){return this.styleFunction_},ed.prototype.handleGeometryChange_=function(){this.changed()},ed.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Ll(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Pl(t,Wl.CHANGE,this.handleGeometryChange_,this)),this.changed()},ed.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},ed.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;{let e;return Array.isArray(t)?e=t:(eu(t instanceof td,41),e=[t]),function(){return e}}}(t):void 0,this.changed()},ed.prototype.setId=function(t){this.id_=t,this.changed()},ed.prototype.setGeometryName=function(t){kl(this,ql(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Pl(this,ql(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()};var nd=ed;function id(t,e){return t>e?1:t<e?-1:0}function od(t,e){return t.indexOf(e)>=0}function rd(t,e,n){const i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;{let o;if(n>0){for(o=1;o<i;++o)if(t[o]<e)return o-1}else if(n<0){for(o=1;o<i;++o)if(t[o]<=e)return o}else for(o=1;o<i;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return i-1}}function sd(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function ad(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let o=0;o<i;o++)t[t.length]=n[o]}function ld(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function ud(t,e){const n=t.length,i=Array(t.length);let o;for(o=0;o<n;o++)i[o]={index:o,value:t[o]};for(i.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),o=0;o<t.length;o++)t[o]=i[o].value}var hd={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};const cd=function(){Bh.call(this),this.layout=hd.XY,this.stride=2,this.flatCoordinates=null};function dd(t){let e;return t==hd.XY?e=2:t==hd.XYZ||t==hd.XYM?e=3:t==hd.XYZM&&(e=4),e}_l(cd,Bh),cd.prototype.containsXY=Ol,cd.prototype.computeExtent=function(t){return gu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},cd.prototype.getCoordinates=function(){},cd.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},cd.prototype.getFlatCoordinates=function(){return this.flatCoordinates},cd.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},cd.prototype.getLayout=function(){return this.layout},cd.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(wl(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];{const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=n,n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},cd.prototype.getSimplifiedGeometryInternal=function(t){return this},cd.prototype.getStride=function(){return this.stride},cd.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=dd(t),this.layout=t,this.flatCoordinates=e},cd.prototype.setCoordinates=function(t,e){},cd.prototype.setLayout=function(t,e,n){let i;if(t)i=dd(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout=hd.XY,void(this.stride=2);e=e[0]}t=function(t){let e;return 2==t?e=hd.XY:3==t?e=hd.XYZ:4==t&&(e=hd.XYZM),e}(i=e.length)}this.layout=t,this.stride=i},cd.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},cd.prototype.rotate=function(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,o,r,s){const a=s||[],l=Math.cos(o),u=Math.sin(o),h=r[0],c=r[1];let d=0;for(let p=0;p<n;p+=i){const e=t[p]-h,n=t[p+1]-c;a[d++]=h+e*l-n*u,a[d++]=c+e*u+n*l;for(let o=p+2;o<p+i;++o)a[d++]=t[o]}s&&a.length!=d&&(a.length=d)}(n,0,n.length,i,t,e,n),this.changed()}},cd.prototype.scale=function(t,e,n){let i=e;void 0===i&&(i=t);let o=n;o||(o=Tu(this.getExtent()));const r=this.getFlatCoordinates();if(r){const e=this.getStride();!function(t,e,n,i,o,r,s,a){const l=a||[],u=s[0],h=s[1];let c=0;for(let d=0;d<n;d+=i){const e=t[d+1]-h;l[c++]=u+o*(t[d]-u),l[c++]=h+r*e;for(let n=d+2;n<d+i;++n)l[c++]=t[n]}a&&l.length!=c&&(l.length=c)}(r,0,r.length,e,t,i,o,r),this.changed()}},cd.prototype.translate=function(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Au(n,0,n.length,i,t,e,n),this.changed()}};var pd=cd;function fd(t,e,n,i){let o=0,r=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];o+=s*n-r*i,r=n,s=i}return o/2}function gd(t,e,n,i){let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r];o+=fd(t,e,s,i),e=s}return o}function _d(t,e,n,i,o,r,s){const a=t[e],l=t[e+1],u=t[n]-a,h=t[n+1]-l;let c;if(0===u&&0===h)c=e;else{const d=((o-a)*u+(r-l)*h)/(u*u+h*h);if(d>1)c=n;else{if(d>0){for(let o=0;o<i;++o)s[o]=Wu(t[e+o],t[n+o],d);return void(s.length=i)}c=e}}for(let d=0;d<i;++d)s[d]=t[c+d];s.length=i}function yd(t,e,n,i,o){let r=t[e],s=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=ju(r,s,n,i);a>o&&(o=a),r=n,s=i}return o}function md(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r];o=yd(t,e,s,i,o),e=s}return o}function vd(t,e,n,i,o,r,s,a,l,u,h){if(e==n)return u;let c,d;if(0===o){if((d=ju(s,a,t[e],t[e+1]))<u){for(c=0;c<i;++c)l[c]=t[e+c];return l.length=i,d}return u}const p=h||[NaN,NaN];let f=e+i;for(;f<n;)if(_d(t,f-i,f,i,s,a,p),(d=ju(s,a,p[0],p[1]))<u){for(u=d,c=0;c<i;++c)l[c]=p[c];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(u))/o|0,1);if(r&&(_d(t,n-i,e,i,s,a,p),(d=ju(s,a,p[0],p[1]))<u)){for(u=d,c=0;c<i;++c)l[c]=p[c];l.length=i}return u}function xd(t,e,n,i,o,r,s,a,l,u,h){const c=h||[NaN,NaN];for(let d=0,p=n.length;d<p;++d){const h=n[d];u=vd(t,e,h,i,o,r,s,a,l,u,c),e=h}return u}function bd(t,e,n,i){for(let o=0,r=n.length;o<r;++o)t[e++]=n[o];return e}function wd(t,e,n,i){for(let o=0,r=n.length;o<r;++o){const r=n[o];for(let n=0;n<i;++n)t[e++]=r[n]}return e}function Cd(t,e,n,i,o){const r=o||[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=wd(t,e,n[a],i);r[s++]=o,e=o}return r.length=s,r}function Ed(t,e,n,i,o){const r=void 0!==o?o:[];let s=0;for(let a=e;a<n;a+=i)r[s++]=t.slice(a,a+i);return r.length=s,r}function Td(t,e,n,i,o){const r=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=n[a];r[s++]=Ed(t,e,o,i,r[s]),e=o}return r.length=s,r}function Sd(t,e,n,i,o){const r=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=n[a];r[s++]=Td(t,e,o,i,r[s]),e=o[o.length-1]}return r.length=s,r}function Id(t,e,n,i,o,r,s){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)r[s++]=t[e],r[s++]=t[e+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,n-i];let h=0;for(;u.length>0;){const n=u.pop(),r=u.pop();let s=0;const a=t[r],c=t[r+1],d=t[n],p=t[n+1];for(let e=r+i;e<n;e+=i){const n=Vu(t[e],t[e+1],a,c,d,p);n>s&&(h=e,s=n)}s>o&&(l[(h-e)/i]=1,r+i<h&&u.push(r,h),h+i<n&&u.push(h,n))}for(let c=0;c<a;++c)l[c]&&(r[s++]=t[e+c*i],r[s++]=t[e+c*i+1]);return s}function Rd(t,e){return e*Math.round(t/e)}function Pd(t,e,n,i,o,r,s){if(e==n)return s;let a,l,u=Rd(t[e],o),h=Rd(t[e+1],o);e+=i,r[s++]=u,r[s++]=h;do{if(a=Rd(t[e],o),l=Rd(t[e+1],o),(e+=i)==n)return r[s++]=a,r[s++]=l,s}while(a==u&&l==h);for(;e<n;){const n=Rd(t[e],o),c=Rd(t[e+1],o);if(e+=i,n==a&&c==l)continue;const d=a-u,p=l-h,f=n-u,g=c-h;d*g==p*f&&(d<0&&f<d||d==f||d>0&&f>d)&&(p<0&&g<p||p==g||p>0&&g>p)?(a=n,l=c):(r[s++]=a,r[s++]=l,u=a,h=l,a=n,l=c)}return r[s++]=a,r[s++]=l,s}function Md(t,e,n,i,o,r,s,a){for(let l=0,u=n.length;l<u;++l){const u=n[l];s=Pd(t,e,u,i,o,r,s),a.push(s),e=u}return s}const kd=function(t,e){pd.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};_l(kd,pd),kd.prototype.clone=function(){const t=new kd(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},kd.prototype.closestPointXY=function(t,e,n,i){return i<au(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},kd.prototype.getArea=function(){return fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},kd.prototype.getCoordinates=function(){return Ed(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},kd.prototype.getSimplifiedGeometryInternal=function(t){const e=[];e.length=Id(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);const n=new kd(null);return n.setFlatCoordinates(hd.XY,e),n},kd.prototype.getType=function(){return Uu.LINEAR_RING},kd.prototype.intersectsExtent=function(t){},kd.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wd(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(hd.XY,null)},kd.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var Ld=kd;const Fd=function(t,e){pd.call(this),this.setCoordinates(t,e)};_l(Fd,pd),Fd.prototype.clone=function(){const t=new Fd(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},Fd.prototype.closestPointXY=function(t,e,n,i){const o=this.flatCoordinates,r=ju(t,e,o[0],o[1]);if(r<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=o[e];return n.length=t,r}return i},Fd.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},Fd.prototype.computeExtent=function(t){return fu(this.flatCoordinates,t)},Fd.prototype.getType=function(){return Uu.POINT},Fd.prototype.intersectsExtent=function(t){return hu(t,this.flatCoordinates[0],this.flatCoordinates[1])},Fd.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bd(this.flatCoordinates,0,t),this.changed()):this.setFlatCoordinates(hd.XY,null)},Fd.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var Dd=Fd;function Od(t,e,n,i,o){return!bu(o,function(o){return!Ad(t,e,n,i,o[0],o[1])})}function Ad(t,e,n,i,o,r){let s=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=r?i>r&&(n-a)*(r-l)-(o-a)*(i-l)>0&&s++:i<=r&&(n-a)*(r-l)-(o-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function Nd(t,e,n,i,o,r){if(0===n.length)return!1;if(!Ad(t,e,n[0],i,o,r))return!1;for(let s=1,a=n.length;s<a;++s)if(Ad(t,n[s-1],n[s],i,o,r))return!1;return!0}function Gd(t,e,n,i,o,r,s){let a,l,u,h,c,d,p;const f=o[r+1],g=[];for(let m=0,v=n.length;m<v;++m){const o=n[m];for(h=t[o-i],d=t[o-i+1],a=e;a<o;a+=i)c=t[a],p=t[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&g.push(u=(f-d)/(p-d)*(c-h)+h),h=c,d=p}let _=NaN,y=-1/0;for(g.sort(id),h=g[0],a=1,l=g.length;a<l;++a){c=g[a];const o=Math.abs(c-h);o>y&&Nd(t,e,n,i,u=(h+c)/2,f)&&(_=u,y=o),h=c}return isNaN(_)&&(_=o[r]),s?(s.push(_,f,y),s):[_,f,y]}function Vd(t,e,n,i,o,r){const s=[t[e],t[e+1]],a=[];let l;for(;e+i<n;e+=i){if(a[0]=t[e+i],a[1]=t[e+i+1],l=o.call(r,s,a))return l;s[0]=a[0],s[1]=a[1]}return!1}function jd(t,e,n,i,o){const r=vu([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!Lu(o,r)&&(!!uu(o,r)||r[0]>=o[0]&&r[2]<=o[2]||r[1]>=o[1]&&r[3]<=o[3]||Vd(t,e,n,i,function(t,e){return function(t,e,n){let i=!1;const o=cu(t,e),r=cu(t,n);if(o===iu.INTERSECTING||r===iu.INTERSECTING)i=!0;else{const s=t[0],a=t[1],l=t[2],u=t[3],h=n[0],c=n[1],d=(c-e[1])/(h-e[0]);let p,f;r&iu.ABOVE&&!(o&iu.ABOVE)&&(i=(p=h-(c-u)/d)>=s&&p<=l),i||!(r&iu.RIGHT)||o&iu.RIGHT||(i=(f=c-(h-l)*d)>=a&&f<=u),i||!(r&iu.BELOW)||o&iu.BELOW||(i=(p=h-(c-a)/d)>=s&&p<=l),i||!(r&iu.LEFT)||o&iu.LEFT||(i=(f=c-(h-s)*d)>=a&&f<=u)}return i}(o,t,e)}))}function Bd(t,e,n,i,o){if(!function(t,e,n,i,o){return!!(jd(t,e,n,i,o)||Ad(t,e,n,i,o[0],o[1])||Ad(t,e,n,i,o[0],o[3])||Ad(t,e,n,i,o[2],o[1])||Ad(t,e,n,i,o[2],o[3]))}(t,e,n[0],i,o))return!1;if(1===n.length)return!0;for(let r=1,s=n.length;r<s;++r)if(Od(t,n[r-1],n[r],i,o))return!1;return!0}function zd(t,e,n,i){for(;e<n-i;){for(let o=0;o<i;++o){const r=t[e+o];t[e+o]=t[n-i+o],t[n-i+o]=r}e+=i,n-=i}}function Hd(t,e,n,i){let o=0,r=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];o+=(n-r)*(i+s),r=n,s=i}return o>0}function Wd(t,e,n,i,o){const r=void 0!==o&&o;for(let s=0,a=n.length;s<a;++s){const o=n[s],a=Hd(t,e,o,i);if(0===s){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=o}return!0}function Ud(t,e,n,i,o){const r=void 0!==o&&o;for(let s=0,a=n.length;s<a;++s){const o=n[s],a=Hd(t,e,o,i);(0===s?r&&a||!r&&!a:r&&!a||!r&&a)&&zd(t,e,o,i),e=o}return e}function Yd(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r)e=Ud(t,e,n[r],i,o);return e}const Kd=function(t,e){pd.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};_l(Kd,pd),Kd.prototype.appendLinearRing=function(t){this.flatCoordinates?ad(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},Kd.prototype.clone=function(){const t=new Kd(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},Kd.prototype.closestPointXY=function(t,e,n,i){return i<au(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(md(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},Kd.prototype.containsXY=function(t,e){return Nd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},Kd.prototype.getArea=function(){return gd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},Kd.prototype.getCoordinates=function(t){let e;return void 0!==t?Ud(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Td(e,0,this.ends_,this.stride)},Kd.prototype.getEnds=function(){return this.ends_},Kd.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Tu(this.getExtent());this.flatInteriorPoint_=Gd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},Kd.prototype.getInteriorPoint=function(){return new Dd(this.getFlatInteriorPoint(),hd.XYM)},Kd.prototype.getLinearRingCount=function(){return this.ends_.length},Kd.prototype.getLinearRing=function(t){if(t<0||this.ends_.length<=t)return null;const e=new Ld(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},Kd.prototype.getLinearRings=function(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r],a=new Ld(null);a.setFlatCoordinates(t,e.slice(o,s)),i.push(a),o=s}return i},Kd.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Wd(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ud(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},Kd.prototype.getSimplifiedGeometryInternal=function(t){const e=[],n=[];e.length=Md(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n);const i=new Kd(null);return i.setFlatCoordinates(hd.XY,e,n),i},Kd.prototype.getType=function(){return Uu.POLYGON},Kd.prototype.intersectsExtent=function(t){return Bd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},Kd.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Cd(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}else this.setFlatCoordinates(hd.XY,null,this.ends_)},Kd.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.ends_=n,this.changed()};var Xd=Kd;function Zd(t){const e=t[0],n=t[1],i=t[2],o=t[3],r=[e,n,e,o,i,o,i,n,e,n],s=new Kd(null);return s.setFlatCoordinates(hd.XY,r,[r.length]),s}const qd=function(t){Ql.call(this);const e=t||{};this.position_=null,this.transform_=fh,this.watchId_=void 0,Pl(this,ql("projection"),this.handleProjectionChanged_,this),Pl(this,ql("tracking"),this.handleTrackingChanged_,this),void 0!==e.projection&&this.setProjection(e.projection),void 0!==e.trackingOptions&&this.setTrackingOptions(e.trackingOptions),this.setTracking(void 0!==e.tracking&&e.tracking)};function Qd(t,e,n){const i=void 0!==n?t.toFixed(n):""+t;let o=i.indexOf(".");return(o=-1===o?i.length:o)>e?i:new Array(1+e-o).join("0")+i}function Jd(t,e){return t[0]+=e[0],t[1]+=e[1],t}function $d(t,e){const n=e[0],i=e[1],o=n[0],r=n[1],s=i[0],a=i[1],l=s-o,u=a-r,h=0===l&&0===u?0:(l*(t[0]-o)+u*(t[1]-r))/(l*l+u*u||0);let c,d;return h<=0?(c=o,d=r):h>=1?(c=s,d=a):(c=o+h*l,d=r+h*u),[c,d]}function tp(t,e,n){const i=Hu(e+180,360)-180,o=Math.abs(3600*i),r=n||0,s=Math.pow(10,r);let a=Math.floor(o/3600),l=Math.floor((o-3600*a)/60),u=o-3600*a-60*l;return(u=Math.ceil(u*s)/s)>=60&&(u=0,l+=1),l>=60&&(l=0,a+=1),a+"\xb0 "+Qd(l,2)+"\u2032 "+Qd(u,2,r)+"\u2033"+(0==i?"":" "+t.charAt(i<0?1:0))}function ep(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function np(t,e){const n=Math.cos(e),i=Math.sin(e),o=t[1]*n+t[0]*i;return t[0]=t[0]*n-t[1]*i,t[1]=o,t}function ip(t,e){return t[0]*=e,t[1]*=e,t}function op(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function rp(t,e){return Math.sqrt(op(t,e))}function sp(t,e){return op(t,$d(t,e))}function ap(t,e,n,i,o,r){let s=NaN,a=NaN;const l=(n-e)/i;if(1===l)s=t[e],a=t[e+1];else if(2==l)s=(1-o)*t[e]+o*t[e+i],a=(1-o)*t[e+1]+o*t[e+i+1];else if(0!==l){let r=t[e],l=t[e+1],u=0;const h=[0];for(let o=e+i;o<n;o+=i){const e=t[o],n=t[o+1];u+=Math.sqrt((e-r)*(e-r)+(n-l)*(n-l)),h.push(u),r=e,l=n}const c=o*u,d=function(t,e,n){let i,o;const r=id;let s=0,a=t.length,l=!1;for(;s<a;)(o=+r(t[i=s+(a-s>>1)],e))<0?s=i+1:(a=i,l=!o);return l?s:~s}(h,c);if(d<0){const n=(c-h[-d-2])/(h[-d-1]-h[-d-2]),o=e+(-d-2)*i;s=Wu(t[o],t[o+i],n),a=Wu(t[o+1],t[o+i+1],n)}else s=t[e+d*i],a=t[e+d*i+1]}return r?(r[0]=s,r[1]=a,r):[s,a]}function lp(t,e,n,i,o,r){if(n==e)return null;let s;if(o<t[e+i-1])return r?((s=t.slice(e,e+i))[i-1]=o,s):null;if(t[n-1]<o)return r?((s=t.slice(n-i,n))[i-1]=o,s):null;if(o==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const e=a+l>>1;o<t[(e+1)*i-1]?l=e:a=e+1}const u=t[a*i-1];if(o==u)return t.slice((a-1)*i,(a-1)*i+i);const h=(o-u)/(t[(a+1)*i-1]-u);s=[];for(let c=0;c<i-1;++c)s.push(Wu(t[(a-1)*i+c],t[a*i+c],h));return s.push(o),s}function up(t,e,n,i){let o=t[e],r=t[e+1],s=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];s+=Math.sqrt((e-o)*(e-o)+(n-r)*(n-r)),o=e,r=n}return s}_l(qd,Ql),qd.prototype.disposeInternal=function(){this.setTracking(!1),Ql.prototype.disposeInternal.call(this)},qd.prototype.handleProjectionChanged_=function(){const t=this.getProjection();t&&(this.transform_=bh(_h("EPSG:4326"),t),this.position_&&this.set("position",this.transform_(this.position_)))},qd.prototype.handleTrackingChanged_=function(){if(gc){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},qd.prototype.positionChange_=function(t){const e=t.coords;this.set("accuracy",e.accuracy),this.set("altitude",null===e.altitude?void 0:e.altitude),this.set("altitudeAccuracy",null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set("heading",null===e.heading?void 0:zu(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const n=this.transform_(this.position_);this.set("position",n),this.set("speed",null===e.speed?void 0:e.speed);const i=function(t,e,n,i){const o=[];for(let s=0;s<32;++s)ad(o,Xu(t,e,2*Math.PI*s/32,void 0));o.push(o[0],o[1]);const r=new Kd(null);return r.setFlatCoordinates(hd.XY,o,[o.length]),r}(this.position_,e.accuracy);i.applyTransform(this.transform_),this.set("accuracyGeometry",i),this.changed()},qd.prototype.positionError_=function(t){t.type=Wl.ERROR,this.setTracking(!1),this.dispatchEvent(t)},qd.prototype.getAccuracy=function(){return this.get("accuracy")},qd.prototype.getAccuracyGeometry=function(){return this.get("accuracyGeometry")||null},qd.prototype.getAltitude=function(){return this.get("altitude")},qd.prototype.getAltitudeAccuracy=function(){return this.get("altitudeAccuracy")},qd.prototype.getHeading=function(){return this.get("heading")},qd.prototype.getPosition=function(){return this.get("position")},qd.prototype.getProjection=function(){return this.get("projection")},qd.prototype.getSpeed=function(){return this.get("speed")},qd.prototype.getTracking=function(){return this.get("tracking")},qd.prototype.getTrackingOptions=function(){return this.get("trackingOptions")},qd.prototype.setProjection=function(t){this.set("projection",_h(t))},qd.prototype.setTracking=function(t){this.set("tracking",t)},qd.prototype.setTrackingOptions=function(t){this.set("trackingOptions",t)};const hp=function(t,e){pd.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};_l(hp,pd),hp.prototype.appendCoordinate=function(t){this.flatCoordinates?ad(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},hp.prototype.clone=function(){const t=new hp(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},hp.prototype.closestPointXY=function(t,e,n,i){return i<au(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))},hp.prototype.forEachSegment=function(t){return Vd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},hp.prototype.getCoordinateAtM=function(t,e){return this.layout!=hd.XYM&&this.layout!=hd.XYZM?null:lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,void 0!==e&&e)},hp.prototype.getCoordinates=function(){return Ed(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},hp.prototype.getCoordinateAt=function(t,e){return ap(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},hp.prototype.getLength=function(){return up(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},hp.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},hp.prototype.getSimplifiedGeometryInternal=function(t){const e=[];e.length=Id(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);const n=new hp(null);return n.setFlatCoordinates(hd.XY,e),n},hp.prototype.getType=function(){return Uu.LINE_STRING},hp.prototype.intersectsExtent=function(t){return jd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},hp.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wd(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(hd.XY,null)},hp.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var cp=hp;function dp(t,e,n){const i=[];let o=t(0),r=t(1),s=e(o),a=e(r);const l=[r,o],u=[a,s],h=[1,0],c={};let d,p,f,g,_,y,m=1e5;for(;--m>0&&h.length>0;)f=h.pop(),o=l.pop(),s=u.pop(),(y=f.toString())in c||(i.push(s[0],s[1]),c[y]=!0),g=h.pop(),r=l.pop(),a=u.pop(),Vu((p=e(d=t(_=(f+g)/2)))[0],p[1],s[0],s[1],a[0],a[1])<n?(i.push(a[0],a[1]),c[y=g.toString()]=!0):(h.push(g,_,_,f),u.push(a,p,p,s),l.push(r,d,d,o));return i}const pp=function(t){const e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Yc({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};pp.prototype.clone=function(){return new pp({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},pp.prototype.getOverflow=function(){return this.overflow_},pp.prototype.getFont=function(){return this.font_},pp.prototype.getMaxAngle=function(){return this.maxAngle_},pp.prototype.getPlacement=function(){return this.placement_},pp.prototype.getOffsetX=function(){return this.offsetX_},pp.prototype.getOffsetY=function(){return this.offsetY_},pp.prototype.getFill=function(){return this.fill_},pp.prototype.getRotateWithView=function(){return this.rotateWithView_},pp.prototype.getRotation=function(){return this.rotation_},pp.prototype.getScale=function(){return this.scale_},pp.prototype.getStroke=function(){return this.stroke_},pp.prototype.getText=function(){return this.text_},pp.prototype.getTextAlign=function(){return this.textAlign_},pp.prototype.getTextBaseline=function(){return this.textBaseline_},pp.prototype.getBackgroundFill=function(){return this.backgroundFill_},pp.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},pp.prototype.getPadding=function(){return this.padding_},pp.prototype.setOverflow=function(t){this.overflow_=t},pp.prototype.setFont=function(t){this.font_=t},pp.prototype.setMaxAngle=function(t){this.maxAngle_=t},pp.prototype.setOffsetX=function(t){this.offsetX_=t},pp.prototype.setOffsetY=function(t){this.offsetY_=t},pp.prototype.setPlacement=function(t){this.placement_=t},pp.prototype.setFill=function(t){this.fill_=t},pp.prototype.setRotation=function(t){this.rotation_=t},pp.prototype.setScale=function(t){this.scale_=t},pp.prototype.setStroke=function(t){this.stroke_=t},pp.prototype.setText=function(t){this.text_=t},pp.prototype.setTextAlign=function(t){this.textAlign_=t},pp.prototype.setTextBaseline=function(t){this.textBaseline_=t},pp.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},pp.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},pp.prototype.setPadding=function(t){this.padding_=t};var fp=pp;const gp=new Xc({color:"rgba(0,0,0,0.2)"}),_p=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],yp=function(t){const e=t||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==e.targetSize?e.targetSize:100,this.maxLines_=void 0!==e.maxLines?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:gp,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==e.showLabels&&(this.lonLabelFormatter_=void 0==e.lonLabelFormatter?tp.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=void 0==e.latLabelFormatter?tp.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=void 0==e.lonLabelPosition?0:e.lonLabelPosition,this.latLabelPosition_=void 0==e.latLabelPosition?1:e.latLabelPosition,this.lonLabelStyle_=void 0!==e.lonLabelStyle?e.lonLabelStyle:new fp({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Yc({color:"rgba(0,0,0,1)"}),stroke:new Xc({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==e.latLabelStyle?e.latLabelStyle:new fp({font:"12px Calibri,sans-serif",textAlign:"end",fill:new Yc({color:"rgba(0,0,0,1)"}),stroke:new Xc({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.setMap(void 0!==e.map?e.map:null)};yp.prototype.addMeridian_=function(t,e,n,i,o,r){const s=this.getMeridian_(t,e,n,i,r);if(Lu(s.getExtent(),o)){if(this.meridiansLabels_){const e=this.getMeridianPoint_(s,o,r);this.meridiansLabels_[r]={geom:e,text:this.lonLabelFormatter_(t)}}this.meridians_[r++]=s}return r},yp.prototype.getMeridianPoint_=function(t,e,n){const i=t.getFlatCoordinates(),o=Math.max(e[1],i[1]),r=Math.min(e[3],i[i.length-1]),s=Nu(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,r),a=[i[0],s],l=void 0!==this.meridiansLabels_[n]?this.meridiansLabels_[n].geom:new Dd(null);return l.setCoordinates(a),l},yp.prototype.addParallel_=function(t,e,n,i,o,r){const s=this.getParallel_(t,e,n,i,r);if(Lu(s.getExtent(),o)){if(this.parallelsLabels_){const e=this.getParallelPoint_(s,o,r);this.parallelsLabels_[r]={geom:e,text:this.latLabelFormatter_(t)}}this.parallels_[r++]=s}return r},yp.prototype.getParallelPoint_=function(t,e,n){const i=t.getFlatCoordinates(),o=Math.max(e[0],i[0]),r=Math.min(e[2],i[i.length-2]),s=[Nu(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,r),i[1]],a=void 0!==this.parallelsLabels_[n]?this.parallelsLabels_[n].geom:new Dd(null);return a.setCoordinates(s),a},yp.prototype.createGraticule_=function(t,e,n,i){const o=this.getInterval_(n);if(-1==o)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));const r=this.toLonLatTransform_(e);let s=r[0],a=r[1];const l=this.maxLines_;let u,h,c,d,p=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)];const f=(p=Eh(p,this.projection_,"EPSG:4326"))[3],g=p[2],_=p[1],y=p[0];for(d=Nu(s=Math.floor(s/o)*o,this.minLon_,this.maxLon_),h=this.addMeridian_(d,_,f,i,t,0),u=0;d!=this.minLon_&&u++<l;)d=Math.max(d-o,this.minLon_),h=this.addMeridian_(d,_,f,i,t,h);for(d=Nu(s,this.minLon_,this.maxLon_),u=0;d!=this.maxLon_&&u++<l;)d=Math.min(d+o,this.maxLon_),h=this.addMeridian_(d,_,f,i,t,h);for(this.meridians_.length=h,this.meridiansLabels_&&(this.meridiansLabels_.length=h),c=Nu(a=Math.floor(a/o)*o,this.minLat_,this.maxLat_),h=this.addParallel_(c,y,g,i,t,0),u=0;c!=this.minLat_&&u++<l;)c=Math.max(c-o,this.minLat_),h=this.addParallel_(c,y,g,i,t,h);for(c=Nu(a,this.minLat_,this.maxLat_),u=0;c!=this.maxLat_&&u++<l;)c=Math.min(c+o,this.maxLat_),h=this.addParallel_(c,y,g,i,t,h);this.parallels_.length=h,this.parallelsLabels_&&(this.parallelsLabels_.length=h)},yp.prototype.getInterval_=function(t){const e=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1];let i=-1;const o=Math.pow(this.targetSize_*t,2),r=[],s=[];for(let a=0,l=_p.length;a<l;++a){const t=_p[a]/2;if(r[0]=e-t,r[1]=n-t,s[0]=e+t,s[1]=n+t,this.fromLonLatTransform_(r,r),this.fromLonLatTransform_(s,s),Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2)<=o)break;i=_p[a]}return i},yp.prototype.getMap=function(){return this.map_},yp.prototype.getMeridian_=function(t,e,n,i,o){const r=function(t,e,n,i,o){return dp(function(i){return[t,e+(n-e)*i]},wh(_h("EPSG:4326"),i),o)}(t,e,n,this.projection_,i),s=void 0!==this.meridians_[o]?this.meridians_[o]:new cp(null);return s.setFlatCoordinates(hd.XY,r),s},yp.prototype.getMeridians=function(){return this.meridians_},yp.prototype.getParallel_=function(t,e,n,i,o){const r=function(t,e,n,i,o){return dp(function(i){return[e+(n-e)*i,t]},wh(_h("EPSG:4326"),i),o)}(t,e,n,this.projection_,i),s=void 0!==this.parallels_[o]?this.parallels_[o]:new cp(null);return s.setFlatCoordinates(hd.XY,r),s},yp.prototype.getParallels=function(){return this.parallels_},yp.prototype.handlePostCompose_=function(t){const e=t.vectorContext,n=t.frameState,i=n.extent,o=n.viewState,r=o.center,s=o.projection,a=o.resolution,l=n.pixelRatio,u=a*a/(4*l*l);let h,c,d,p;for((!this.projection_||!xh(this.projection_,s))&&this.updateProjectionInfo_(s),this.createGraticule_(i,r,a,u),e.setFillStrokeStyle(null,this.strokeStyle_),h=0,c=this.meridians_.length;h<c;++h)e.drawGeometry(d=this.meridians_[h]);for(h=0,c=this.parallels_.length;h<c;++h)e.drawGeometry(d=this.parallels_[h]);if(this.meridiansLabels_)for(h=0,c=this.meridiansLabels_.length;h<c;++h)this.lonLabelStyle_.setText((p=this.meridiansLabels_[h]).text),e.setTextStyle(this.lonLabelStyle_),e.drawGeometry(p.geom);if(this.parallelsLabels_)for(h=0,c=this.parallelsLabels_.length;h<c;++h)this.latLabelStyle_.setText((p=this.parallelsLabels_[h]).text),e.setTextStyle(this.latLabelStyle_),e.drawGeometry(p.geom)},yp.prototype.updateProjectionInfo_=function(t){const e=_h("EPSG:4326"),n=t.getWorldExtent(),i=Eh(n,e,t);this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0],this.maxLatP_=i[3],this.maxLonP_=i[2],this.minLatP_=i[1],this.minLonP_=i[0],this.fromLonLatTransform_=wh(e,t),this.toLonLatTransform_=wh(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_(Tu(t.getExtent())),this.projection_=t},yp.prototype.setMap=function(t){this.map_&&(Ll(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=Pl(t,"postcompose",this.handlePostCompose_,this),t.render()),this.map_=t};const mp=function(t,e,n,i){Hl.call(this),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=i};_l(mp,Hl),mp.prototype.changed=function(){this.dispatchEvent(Wl.CHANGE)},mp.prototype.getExtent=function(){return this.extent},mp.prototype.getImage=function(){},mp.prototype.getPixelRatio=function(){return this.pixelRatio_},mp.prototype.getResolution=function(){return this.resolution},mp.prototype.getState=function(){return this.state},mp.prototype.load=function(){};var vp=mp;const xp=function(t,e,n,i,o,r){vp.call(this,t,e,n,vc.IDLE),this.src_=i,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=vc.IDLE,this.imageLoadFunction_=r};_l(xp,vp),xp.prototype.getImage=function(){return this.image_},xp.prototype.handleImageError_=function(){this.state=vc.ERROR,this.unlistenImage_(),this.changed()},xp.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Iu(this.extent)/this.image_.height),this.state=vc.LOADED,this.unlistenImage_(),this.changed()},xp.prototype.load=function(){this.state!=vc.IDLE&&this.state!=vc.ERROR||(this.state=vc.LOADING,this.changed(),this.imageListenerKeys_=[Ml(this.image_,Wl.ERROR,this.handleImageError_,this),Ml(this.image_,Wl.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},xp.prototype.setImage=function(t){this.image_=t},xp.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(Ll),this.imageListenerKeys_=null};const bp=function(t,e,n,i,o){this.loader_=void 0!==o?o:null,vp.call(this,t,e,n,void 0!==o?vc.IDLE:vc.LOADED),this.canvas_=i,this.error_=null};_l(bp,vp),bp.prototype.getError=function(){return this.error_},bp.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=vc.ERROR):this.state=vc.LOADED,this.changed()},bp.prototype.load=function(){this.state==vc.IDLE&&(this.state=vc.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},bp.prototype.getImage=function(){return this.canvas_};var wp=bp;function Cp(t){return Math.pow(t,3)}function Ep(t){return 1-Cp(1-t)}function Tp(t){return 3*t*t-2*t*t*t}function Sp(t){return t}const Ip=function(t,e,n){Hl.call(this);const i=n||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={}};_l(Ip,Hl),Ip.prototype.changed=function(){this.dispatchEvent(Wl.CHANGE)},Ip.prototype.getKey=function(){return this.key+"/"+this.tileCoord},Ip.prototype.getInterimTile=function(){if(!this.interimTile)return this;let t=this.interimTile;do{if(2==t.getState())return t;t=t.interimTile}while(t);return this},Ip.prototype.refreshInterimChain=function(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)},Ip.prototype.getTileCoord=function(){return this.tileCoord},Ip.prototype.getState=function(){return this.state},Ip.prototype.setState=function(t){this.state=t,this.changed()},Ip.prototype.load=function(){},Ip.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else this.transitionStarts_[t]=n=e;const i=e-n+1e3/60;return i>=this.transition_?1:Cp(i/this.transition_)},Ip.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},Ip.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)};var Rp=Ip;const Pp=function(t,e,n,i,o,r){Rp.call(this,t,e,r),this.crossOrigin_=i,this.src_=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.imageListenerKeys_=null,this.tileLoadFunction_=o};function Mp(){const t=qh(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}_l(Pp,Rp),Pp.prototype.disposeInternal=function(){1==this.state&&(this.unlistenImage_(),this.image_=Mp()),this.interimTile&&this.interimTile.dispose(),this.state=5,this.changed(),Rp.prototype.disposeInternal.call(this)},Pp.prototype.getImage=function(){return this.image_},Pp.prototype.getKey=function(){return this.src_},Pp.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=Mp(),this.changed()},Pp.prototype.handleImageLoad_=function(){this.state=this.image_.naturalWidth&&this.image_.naturalHeight?2:4,this.unlistenImage_(),this.changed()},Pp.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.imageListenerKeys_=[Ml(this.image_,Wl.ERROR,this.handleImageError_,this),Ml(this.image_,Wl.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},Pp.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(Ll),this.imageListenerKeys_=null};var kp=Pp;const Lp=function(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};Lp.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Lp.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Lp.prototype.end=function(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const o=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/i,this.initialVelocity_>this.minVelocity_},Lp.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Lp.prototype.getAngle=function(){return this.angle_};var Fp=Lp;const Dp=function(t,e,n){Bl.call(this,t),this.map=e,this.frameState=void 0!==n?n:null};_l(Dp,Bl);var Op=Dp;const Ap=function(t,e,n,i,o){Op.call(this,t,e,o),this.originalEvent=n,this.pixel=e.getEventPixel(n),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==i&&i};_l(Ap,Op),Ap.prototype.preventDefault=function(){Op.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},Ap.prototype.stopPropagation=function(){Op.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var Np=Ap,Gp={SINGLECLICK:"singleclick",CLICK:Wl.CLICK,DBLCLICK:Wl.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};const Vp=function(t,e,n,i,o){Np.call(this,t,e,n.originalEvent,i,o),this.pointerEvent=n};_l(Vp,Np);var jp=Vp;const Bp=function(t,e){this.dispatcher=t,this.mapping_=e};Bp.prototype.getEvents=function(){return Object.keys(this.mapping_)},Bp.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var zp=Bp;const Hp=function(t){zp.call(this,t,{mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout}),this.pointerMap=t.pointerMap,this.lastTouches=[]};_l(Hp,zp);const Wp=1,Up="mouse";function Yp(t,e){const n=e.cloneEvent(t,t),i=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),i()},n.pointerId=Wp,n.isPrimary=!0,n.pointerType=Up,n}Hp.prototype.isEventSimulatedFromTouch_=function(t){const e=this.lastTouches,n=t.clientX,i=t.clientY;for(let o,r=0,s=e.length;r<s&&(o=e[r]);r++){const t=Math.abs(n-o[0]),e=Math.abs(i-o[1]);if(t<=25&&e<=25)return!0}return!1},Hp.prototype.mousedown=function(t){if(!this.isEventSimulatedFromTouch_(t)){Wp.toString()in this.pointerMap&&this.cancel(t);const e=Yp(t,this.dispatcher);this.pointerMap[Wp.toString()]=t,this.dispatcher.down(e,t)}},Hp.prototype.mousemove=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=Yp(t,this.dispatcher);this.dispatcher.move(e,t)}},Hp.prototype.mouseup=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=this.pointerMap[Wp.toString()];if(e&&e.button===t.button){const e=Yp(t,this.dispatcher);this.dispatcher.up(e,t),this.cleanupMouse()}}},Hp.prototype.mouseover=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=Yp(t,this.dispatcher);this.dispatcher.enterOver(e,t)}},Hp.prototype.mouseout=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=Yp(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}},Hp.prototype.cancel=function(t){const e=Yp(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},Hp.prototype.cleanupMouse=function(){delete this.pointerMap[Wp.toString()]};var Kp=Hp;const Xp=function(t){zp.call(this,t,{MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture}),this.pointerMap=t.pointerMap};_l(Xp,zp);const Zp=["","unavailable","touch","pen","mouse"];Xp.prototype.prepareEvent_=function(t){let e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=Zp[t.pointerType]),e},Xp.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},Xp.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;const e=this.prepareEvent_(t);this.dispatcher.down(e,t)},Xp.prototype.msPointerMove=function(t){const e=this.prepareEvent_(t);this.dispatcher.move(e,t)},Xp.prototype.msPointerUp=function(t){const e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)},Xp.prototype.msPointerOut=function(t){const e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)},Xp.prototype.msPointerOver=function(t){const e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)},Xp.prototype.msPointerCancel=function(t){const e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)},Xp.prototype.msLostPointerCapture=function(t){const e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)},Xp.prototype.msGotPointerCapture=function(t){const e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)};var qp=Xp;const Qp=function(t){zp.call(this,t,{pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture})};_l(Qp,zp),Qp.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)},Qp.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)},Qp.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)},Qp.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)},Qp.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)},Qp.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)},Qp.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},Qp.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)};var Jp=Qp;const $p=function(t,e,n){Bl.call(this,t),this.originalEvent=e;const i=n||{};this.buttons=this.getButtons_(i),this.pressure=this.getPressure_(i,this.buttons),this.bubbles="bubbles"in i&&i.bubbles,this.cancelable="cancelable"in i&&i.cancelable,this.view="view"in i?i.view:null,this.detail="detail"in i?i.detail:null,this.screenX="screenX"in i?i.screenX:0,this.screenY="screenY"in i?i.screenY:0,this.clientX="clientX"in i?i.clientX:0,this.clientY="clientY"in i?i.clientY:0,this.ctrlKey="ctrlKey"in i&&i.ctrlKey,this.altKey="altKey"in i&&i.altKey,this.shiftKey="shiftKey"in i&&i.shiftKey,this.metaKey="metaKey"in i&&i.metaKey,this.button="button"in i?i.button:0,this.relatedTarget="relatedTarget"in i?i.relatedTarget:null,this.pointerId="pointerId"in i?i.pointerId:0,this.width="width"in i?i.width:0,this.height="height"in i?i.height:0,this.tiltX="tiltX"in i?i.tiltX:0,this.tiltY="tiltY"in i?i.tiltY:0,this.pointerType="pointerType"in i?i.pointerType:"",this.hwTimestamp="hwTimestamp"in i?i.hwTimestamp:0,this.isPrimary="isPrimary"in i&&i.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})};_l($p,Bl);let tf=!1;$p.prototype.getButtons_=function(t){let e;if(t.buttons||tf)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},$p.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},function(){try{const t=new MouseEvent("click",{buttons:1});tf=1===t.buttons}catch(t){}}();var ef=$p;const nf=function(t,e){zp.call(this,t,{touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel}),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500};_l(nf,zp),nf.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},nf.prototype.setPrimaryTouch_=function(t){const e=Object.keys(this.pointerMap).length;(0===e||1===e&&Wp.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},nf.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},nf.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},nf.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},nf.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},nf.prototype.touchToPointer_=function(t,e){const n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.webkitRadiusX||e.radiusX||0,n.height=e.webkitRadiusY||e.radiusY||0,n.pressure=e.webkitForce||e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},nf.prototype.processTouches_=function(t,e){const n=Array.prototype.slice.call(t.changedTouches),i=n.length;function o(){t.preventDefault()}for(let r=0;r<i;++r){const i=this.touchToPointer_(t,n[r]);i.preventDefault=o,e.call(this,t,i)}},nf.prototype.findTouch_=function(t,e){const n=t.length;for(let i=0;i<n;i++)if(t[i].identifier===e)return!0;return!1},nf.prototype.vacuumTouches_=function(t){const e=t.touches,n=Object.keys(this.pointerMap),i=n.length;if(i>=e.length){const o=[];for(let t=0;t<i;++t){const i=n[t],r=this.pointerMap[i];i==Wp||this.findTouch_(e,i-2)||o.push(r.out)}for(let e=0;e<o.length;++e)this.cancelOut_(t,o[e])}},nf.prototype.touchstart=function(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)},nf.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},nf.prototype.touchmove=function(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)},nf.prototype.moveOverOut_=function(t,e){const n=e,i=this.pointerMap[n.pointerId];if(!i)return;const o=i.out,r=i.outTarget;this.dispatcher.move(n,t),o&&r!==n.target&&(o.relatedTarget=n.target,n.relatedTarget=r,o.target=r,n.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(n,t)):(n.target=r,n.relatedTarget=null,this.cancelOut_(t,n))),i.out=n,i.outTarget=n.target},nf.prototype.touchend=function(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)},nf.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},nf.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)},nf.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},nf.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},nf.prototype.dedupSynthMouse_=function(t){const e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){const t=[n.clientX,n.clientY];e.push(t),setTimeout(function(){!function(e,n){const i=e.indexOf(t);i>-1&&e.splice(i,1)}(e)},this.dedupTimeout_)}};var of=nf;const rf=function(t){Hl.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()};_l(rf,Hl);const sf=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];rf.prototype.registerSources=function(){if(yc)this.registerSource("native",new Jp(this));else if(mc)this.registerSource("ms",new qp(this));else{const t=new Kp(this);this.registerSource("mouse",t),_c&&this.registerSource("touch",new of(this,t))}this.register_()},rf.prototype.registerSource=function(t,e){const n=e,i=n.getEvents();i&&(i.forEach((function(t){const e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))}).bind(this)),this.eventSourceList_.push(n))},rf.prototype.register_=function(){const t=this.eventSourceList_.length;for(let e=0;e<t;e++)this.addEvents_(this.eventSourceList_[e].getEvents())},rf.prototype.unregister_=function(){const t=this.eventSourceList_.length;for(let e=0;e<t;e++)this.removeEvents_(this.eventSourceList_[e].getEvents())},rf.prototype.eventHandler_=function(t){const e=this.eventMap_[t.type];e&&e(t)},rf.prototype.addEvents_=function(t){t.forEach((function(t){Pl(this.element_,t,this.eventHandler_,this)}).bind(this))},rf.prototype.removeEvents_=function(t){t.forEach((function(t){kl(this.element_,t,this.eventHandler_,this)}).bind(this))},rf.prototype.cloneEvent=function(t,e){const n={};for(let i=0,o=sf.length;i<o;i++){const o=sf[i][0];n[o]=t[o]||e[o]||sf[i][1]}return n},rf.prototype.down=function(t,e){this.fireEvent("pointerdown",t,e)},rf.prototype.move=function(t,e){this.fireEvent("pointermove",t,e)},rf.prototype.up=function(t,e){this.fireEvent("pointerup",t,e)},rf.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent("pointerenter",t,e)},rf.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent("pointerleave",t,e)},rf.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent("pointerover",t,e)},rf.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent("pointerout",t,e)},rf.prototype.cancel=function(t,e){this.fireEvent("pointercancel",t,e)},rf.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},rf.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},rf.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},rf.prototype.makeEvent=function(t,e,n){return new ef(t,n,e)},rf.prototype.fireEvent=function(t,e,n){const i=this.makeEvent(t,e,n);this.dispatchEvent(i)},rf.prototype.fireNativeEvent=function(t){const e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},rf.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Kp.prepareEvent(e,this),e)},rf.prototype.disposeInternal=function(){this.unregister_(),Hl.prototype.disposeInternal.call(this)};var af=rf;const lf=function(t,e){Hl.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*pc:pc,this.down_=null;const n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new af(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Pl(this.pointerEventHandler_,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=Pl(this.pointerEventHandler_,"pointermove",this.relayEvent_,this)};_l(lf,Hl),lf.prototype.emulateClick_=function(t){let e=new jp(Gp.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new jp(Gp.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=0;const e=new jp(Gp.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)},lf.prototype.updateActivePointers_=function(t){const e=t;e.type==Gp.POINTERUP||e.type==Gp.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Gp.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},lf.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);const e=new jp(Gp.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(Ll),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},lf.prototype.isMouseActionButton_=function(t){return 0===t.button},lf.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);const e=new jp(Gp.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new af(document),this.dragListenerKeys_.push(Pl(this.documentPointerEventHandler_,Gp.POINTERMOVE,this.handlePointerMove_,this),Pl(this.documentPointerEventHandler_,Gp.POINTERUP,this.handlePointerUp_,this),Pl(this.pointerEventHandler_,Gp.POINTERCANCEL,this.handlePointerUp_,this)))},lf.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;const e=new jp(Gp.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},lf.prototype.relayEvent_=function(t){const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new jp(t.type,this.map_,t,e))},lf.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},lf.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Ll(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Ll(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ll),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),Hl.prototype.disposeInternal.call(this)};var uf=lf;const hf=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};hf.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,wl(this.queuedElements_)},hf.prototype.dequeue=function(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n},hf.prototype.enqueue=function(t){eu(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},hf.prototype.getCount=function(){return this.elements_.length},hf.prototype.getLeftChildIndex_=function(t){return 2*t+1},hf.prototype.getRightChildIndex_=function(t){return 2*t+2},hf.prototype.getParentIndex_=function(t){return t-1>>1},hf.prototype.heapify_=function(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},hf.prototype.isEmpty=function(){return 0===this.elements_.length},hf.prototype.isKeyQueued=function(t){return t in this.queuedElements_},hf.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},hf.prototype.siftUp_=function(t){const e=this.elements_,n=this.priorities_,i=e.length,o=e[t],r=n[t],s=t;for(;t<i>>1;){const o=this.getLeftChildIndex_(t),r=this.getRightChildIndex_(t),s=r<i&&n[r]<n[o]?r:o;e[t]=e[s],n[t]=n[s],t=s}e[t]=o,n[t]=r,this.siftDown_(s,t)},hf.prototype.siftDown_=function(t,e){const n=this.elements_,i=this.priorities_,o=n[e],r=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>r))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=o,i[e]=r},hf.prototype.reprioritize=function(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const o=e.length;let r,s,a;for(s=0;s<o;++s)(a=t(r=e[s]))==1/0?delete this.queuedElements_[this.keyFunction_(r)]:(n[i]=a,e[i++]=r);e.length=i,n.length=i,this.heapify_()};var cf=hf;const df=function(t,e){cf.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}};_l(df,cf),df.prototype.enqueue=function(t){const e=cf.prototype.enqueue.call(this,t);return e&&Pl(t[0],Wl.CHANGE,this.handleTileChange,this),e},df.prototype.getTilesLoading=function(){return this.tilesLoading_},df.prototype.handleTileChange=function(t){const e=t.target,n=e.getState();if(2===n||3===n||4===n||5===n){kl(e,Wl.CHANGE,this.handleTileChange,this);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}},df.prototype.loadMoreTiles=function(t,e){let n,i,o,r=0,s=!1;for(;this.tilesLoading_<t&&r<e&&this.getCount()>0;)o=(i=this.dequeue()[0]).getKey(),5===(n=i.getState())?s=!0:0!==n||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,i.load());0===r&&s&&this.tileChangeCallback_()};var pf=df;const ff=42,gf=256;function _f(t){return t}function yf(t,e){return void 0!==t?0:void 0}function mf(t,e){return void 0!==t?t+e:void 0}var vf={ANIMATING:0,INTERACTING:1};const xf=function(t){Ql.call(this);const e=bl({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=vh(e.projection,"EPSG:3857"),this.applyOptions_(e)};_l(xf,Ql),xf.prototype.applyOptions_=function(t){const e={};e.center=void 0!==t.center?t.center:null;const n=function(t){let e,n,i,o=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28;const s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){const s=t.resolutions;n=s[o],i=void 0!==s[r]?s[r]:s[s.length-1],s=s,e=function(t,e,n){if(void 0!==t){let i=rd(s,t,n);i=Nu(i+e,0,s.length-1);const o=Math.floor(i);return i!=o&&o<s.length-1?s[o]/Math.pow(s[o]/s[o+1],i-o):s[o]}}}else{const a=vh(t.projection,"EPSG:3857"),l=a.getExtent(),u=(l?Math.max(ku(l),Iu(l)):360*qu[Qu.DEGREES]/a.getMetersPerUnit())/gf/Math.pow(2,0),h=u/Math.pow(2,28);void 0!==(n=t.maxResolution)?o=0:n=u/Math.pow(s,o),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(s,r):u/Math.pow(s,r):h),r=o+Math.floor(Math.log(n/i)/Math.log(s)),i=n/Math.pow(s,r-o),e=function(t,e,n){return function(i,o,r){if(void 0!==i){const s=-r/2+.5,a=Math.floor(Math.log(e/i)/Math.log(t)+s);let l=Math.max(a+o,0);return void 0!==n&&(l=Math.min(l,n)),e/Math.pow(t,l)}}}(s,n,r-o)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:s}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;const i=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Nu(t[0],e[0],e[2]),Nu(t[1],e[1],e[3])]:void 0}):_f;var e}(t),o=n.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?function(t){const e=zu(5);return function(t,n){return void 0!==t?Math.abs(t+n)<=e?0:t+n:void 0}}():!1===e?mf:"number"==typeof e?function(t){const n=2*Math.PI/e;return function(t,e){return void 0!==t?t=Math.floor((t+e)/n+.5)*n:void 0}}():mf}return yf}(t);this.constraints_={center:i,resolution:o,rotation:r},void 0!==t.resolution?e.resolution=t.resolution:void 0!==t.zoom&&(e.resolution=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e.resolution=Nu(Number(this.getResolution()||e.resolution),this.minResolution_,this.maxResolution_))),e.rotation=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},xf.prototype.getUpdatedOptions_=function(t){const e=bl({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),bl({},e,t)},xf.prototype.animate=function(t){let e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){const t=arguments[n-1];return t.center&&this.setCenter(t.center),void 0!==t.zoom&&this.setZoom(t.zoom),void 0!==t.rotation&&this.setRotation(t.rotation),void(e&&setTimeout(function(){e(!0)},0))}let i=Date.now(),o=this.getCenter().slice(),r=this.getResolution(),s=this.getRotation();const a=[];for(let l=0;l<n;++l){const t=arguments[l],n={start:i,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||Tp};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center,o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=r,n.targetResolution=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_,0),r=n.targetResolution):t.resolution&&(n.sourceResolution=r,n.targetResolution=t.resolution,r=n.targetResolution),void 0!==t.rotation){n.sourceRotation=s;const e=Hu(t.rotation-s+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=s+e,s=n.targetRotation}n.callback=e,(n=n).sourceCenter&&n.targetCenter&&!ep(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation?i+=n.duration:n.complete=!0,a.push(n)}this.animations_.push(a),this.setHint(vf.ANIMATING,1),this.updateAnimations_()},xf.prototype.getAnimating=function(){return this.hints_[vf.ANIMATING]>0},xf.prototype.getInteracting=function(){return this.hints_[vf.INTERACTING]>0},xf.prototype.cancelAnimations=function(){this.setHint(vf.ANIMATING,-this.hints_[vf.ANIMATING]);for(let t=0,e=this.animations_.length;t<e;++t){const e=this.animations_[t];e[0].callback&&e[0].callback(!1)}this.animations_.length=0},xf.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let o=!0;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r.complete)continue;let s=r.duration>0?(t-r.start)/r.duration:1;s>=1?(r.complete=!0,s=1):o=!1;const a=r.easing(s);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1];this.set("center",[t+a*(r.targetCenter[0]-t),e+a*(r.targetCenter[1]-e)])}if(r.sourceResolution&&r.targetResolution){const t=1===a?r.targetResolution:r.sourceResolution+a*(r.targetResolution-r.sourceResolution);r.anchor&&this.set("center",this.calculateCenterZoom(t,r.anchor)),this.set("resolution",t)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===a?Hu(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+a*(r.targetRotation-r.sourceRotation);r.anchor&&this.set("center",this.calculateCenterRotate(t,r.anchor)),this.set("rotation",t)}if(e=!0,!r.complete)break}if(o){this.animations_[n]=null,this.setHint(vf.ANIMATING,-1);const t=i[0].callback;t&&setTimeout(function(){t(!0)},0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))},xf.prototype.calculateCenterRotate=function(t,e){let n;const i=this.getCenter();return void 0!==i&&(np(n=[i[0]-e[0],i[1]-e[1]],t-this.getRotation()),Jd(n,e)),n},xf.prototype.calculateCenterZoom=function(t,e){let n;const i=this.getCenter(),o=this.getResolution();return void 0!==i&&void 0!==o&&(n=[e[0]-t*(e[0]-i[0])/o,e[1]-t*(e[1]-i[1])/o]),n},xf.prototype.getSizeFromViewport_=function(){const t=[100,100],e='.ol-viewport[data-view="'+ml(this)+'"]',n=document.querySelector(e);if(n){const e=getComputedStyle(n);t[0]=parseInt(e.width,10),t[1]=parseInt(e.height,10)}return t},xf.prototype.constrainCenter=function(t){return this.constraints_.center(t)},xf.prototype.constrainResolution=function(t,e,n){return this.constraints_.resolution(t,e||0,n||0)},xf.prototype.constrainRotation=function(t,e){return this.constraints_.rotation(t,e||0)},xf.prototype.getCenter=function(){return this.get("center")},xf.prototype.getConstraints=function(){return this.constraints_},xf.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},xf.prototype.calculateExtent=function(t){const e=t||this.getSizeFromViewport_(),n=this.getCenter();eu(n,1);const i=this.getResolution();eu(void 0!==i,2);const o=this.getRotation();return eu(void 0!==o,3),Su(n,i,o,e)},xf.prototype.getMaxResolution=function(){return this.maxResolution_},xf.prototype.getMinResolution=function(){return this.minResolution_},xf.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},xf.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},xf.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},xf.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},xf.prototype.getProjection=function(){return this.projection_},xf.prototype.getResolution=function(){return this.get("resolution")},xf.prototype.getResolutions=function(){return this.resolutions_},xf.prototype.getResolutionForExtent=function(t,e){const n=e||this.getSizeFromViewport_(),i=ku(t)/n[0],o=Iu(t)/n[1];return Math.max(i,o)},xf.prototype.getResolutionForValueFunction=function(t){const e=t||2,n=this.maxResolution_,i=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},xf.prototype.getRotation=function(){return this.get("rotation")},xf.prototype.getValueForResolutionFunction=function(t){const e=t||2,n=this.maxResolution_,i=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/i}},xf.prototype.getState=function(){const t=this.getCenter(),e=this.getProjection(),n=this.getResolution(),i=this.getRotation();return{center:t.slice(),projection:void 0!==e?e:null,resolution:n,rotation:i,zoom:this.getZoom()}},xf.prototype.getZoom=function(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},xf.prototype.getZoomForResolution=function(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const o=rd(this.resolutions_,t,1);i=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},xf.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},xf.prototype.fit=function(t,e){const n=e||{};let i,o=n.size;o||(o=this.getSizeFromViewport_()),t instanceof pd?t.getType()===Uu.CIRCLE?(i=Zd(t=t.getExtent())).rotate(this.getRotation(),Tu(t)):i=t:(eu(Array.isArray(t),24),eu(!Fu(t),25),i=Zd(t));const r=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0===n.constrainResolution||n.constrainResolution,a=void 0!==n.nearest&&n.nearest;let l;l=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;const u=i.getFlatCoordinates(),h=this.getRotation(),c=Math.cos(-h);let d=Math.sin(-h),p=1/0,f=1/0,g=-1/0,_=-1/0;const y=i.getStride();for(let C=0,E=u.length;C<E;C+=y){const t=u[C]*c-u[C+1]*d,e=u[C]*d+u[C+1]*c;p=Math.min(p,t),f=Math.min(f,e),g=Math.max(g,t),_=Math.max(_,e)}let m=this.getResolutionForExtent([p,f,g,_],[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);if(m=isNaN(m)?l:Math.max(m,l),s){let t=this.constrainResolution(m,0,0);!a&&t<m&&(t=this.constrainResolution(t,-1,0)),m=t}let v=(p+g)/2,x=(f+_)/2;const b=[(v+=(r[1]-r[3])/2*m)*c-(x+=(r[0]-r[2])/2*m)*(d=-d),x*c+v*d],w=n.callback?n.callback:Al;void 0!==n.duration?this.animate({resolution:m,center:b,duration:n.duration,easing:n.easing},w):(this.setResolution(m),this.setCenter(b),setTimeout(w.bind(void 0,!0),0))},xf.prototype.centerOn=function(t,e,n){const i=this.getRotation(),o=Math.cos(-i);let r=Math.sin(-i),s=t[0]*o-t[1]*r,a=t[1]*o+t[0]*r;const l=this.getResolution();this.setCenter([(s+=(e[0]/2-n[0])*l)*o-(a+=(n[1]-e[1]/2)*l)*(r=-r),a*o+s*r])},xf.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},xf.prototype.rotate=function(t,e){if(void 0!==e){const n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)},xf.prototype.setCenter=function(t){this.set("center",t),this.getAnimating()&&this.cancelAnimations()},xf.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},xf.prototype.setResolution=function(t){this.set("resolution",t),this.getAnimating()&&this.cancelAnimations()},xf.prototype.setRotation=function(t){this.set("rotation",t),this.getAnimating()&&this.cancelAnimations()},xf.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))};var bf=xf;const wf=function(t){Ql.call(this);const e=bl({},t);e.opacity=void 0!==t.opacity?t.opacity:1,e.visible=void 0===t.visible||t.visible,e.zIndex=void 0!==t.zIndex?t.zIndex:0,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_={layer:this,managed:!0}};_l(wf,Ql),wf.prototype.getType=function(){return this.type},wf.prototype.getLayerState=function(){return this.state_.opacity=Nu(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},wf.prototype.getLayersArray=function(t){},wf.prototype.getLayerStatesArray=function(t){},wf.prototype.getExtent=function(){return this.get("extent")},wf.prototype.getMaxResolution=function(){return this.get("maxResolution")},wf.prototype.getMinResolution=function(){return this.get("minResolution")},wf.prototype.getOpacity=function(){return this.get("opacity")},wf.prototype.getSourceState=function(){},wf.prototype.getVisible=function(){return this.get("visible")},wf.prototype.getZIndex=function(){return this.get("zIndex")},wf.prototype.setExtent=function(t){this.set("extent",t)},wf.prototype.setMaxResolution=function(t){this.set("maxResolution",t)},wf.prototype.setMinResolution=function(t){this.set("minResolution",t)},wf.prototype.setOpacity=function(t){this.set("opacity",t)},wf.prototype.setVisible=function(t){this.set("visible",t)},wf.prototype.setZIndex=function(t){this.set("zIndex",t)};var Cf=wf;const Ef=function(t){const e=t||{},n=bl({},e);delete n.layers;let i=e.layers;Cf.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},Pl(this,ql("layers"),this.handleLayersChanged_,this),i?Array.isArray(i)?i=new tu(i.slice(),{unique:!0}):(eu(i instanceof tu,43),i=i):i=new tu(void 0,{unique:!0}),this.setLayers(i)};_l(Ef,Cf),Ef.prototype.handleLayerChange_=function(){this.changed()},Ef.prototype.handleLayersChanged_=function(t){this.layersListenerKeys_.forEach(Ll),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Pl(e,"add",this.handleLayersAdd_,this),Pl(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ll);wl(this.listenerKeys_);const n=e.getArray();for(let i=0,o=n.length;i<o;i++){const t=n[i];this.listenerKeys_[ml(t).toString()]=[Pl(t,"propertychange",this.handleLayerChange_,this),Pl(t,Wl.CHANGE,this.handleLayerChange_,this)]}this.changed()},Ef.prototype.handleLayersAdd_=function(t){const e=t.element,n=ml(e).toString();this.listenerKeys_[n]=[Pl(e,"propertychange",this.handleLayerChange_,this),Pl(e,Wl.CHANGE,this.handleLayerChange_,this)],this.changed()},Ef.prototype.handleLayersRemove_=function(t){const e=ml(t.element).toString();this.listenerKeys_[e].forEach(Ll),delete this.listenerKeys_[e],this.changed()},Ef.prototype.getLayers=function(){return this.get("layers")},Ef.prototype.setLayers=function(t){this.set("layers",t)},Ef.prototype.getLayersArray=function(t){const e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},Ef.prototype.getLayerStatesArray=function(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});const i=this.getLayerState();for(let o=n,r=e.length;o<r;o++){const t=e[o];t.opacity*=i.opacity,t.visible=t.visible&&i.visible,t.maxResolution=Math.min(t.maxResolution,i.maxResolution),t.minResolution=Math.max(t.minResolution,i.minResolution),void 0!==i.extent&&(t.extent=void 0!==t.extent?Ru(t.extent,i.extent):i.extent)}return e},Ef.prototype.getSourceState=function(){return"ready"};var Tf=Ef;function Sf(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}const If=function(t){Ql.call(this);const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers instanceof Tf?t.layers:new Tf({layers:t.layers});let o,r,s;return n.layergroup=i,n.target=t.target,n.view=void 0!==t.view?t.view:new bf,void 0!==t.controls&&(Array.isArray(t.controls)?o=new tu(t.controls.slice()):(eu(t.controls instanceof tu,47),o=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new tu(t.interactions.slice()):(eu(t.interactions instanceof tu,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?s=new tu(t.overlays.slice()):(eu(t.overlays instanceof tu,49),s=t.overlays):s=new tu,{controls:o,interactions:r,keyboardEventTarget:e,overlays:s,values:n}}(t);this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:pc,this.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}).bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(_c?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";const n=[Wl.CLICK,Wl.DBLCLICK,Wl.MOUSEDOWN,Wl.TOUCHSTART,Wl.MSPOINTERDOWN,Gp.POINTERDOWN,Wl.MOUSEWHEEL,Wl.WHEEL];for(let i=0,o=n.length;i<o;++i)Pl(this.overlayContainerStopEvent_,n[i],jl);this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new uf(this,t.moveTolerance);for(const i in Gp)Pl(this.mapBrowserEventHandler_,Gp[i],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,Pl(this.viewport_,Wl.CONTEXTMENU,this.handleBrowserEvent,this),Pl(this.viewport_,Wl.WHEEL,this.handleBrowserEvent,this),Pl(this.viewport_,Wl.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new tu,this.interactions=e.interactions||new tu,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new pf(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Pl(this,ql("layergroup"),this.handleLayerGroupChanged_,this),Pl(this,ql("view"),this.handleViewChanged_,this),Pl(this,ql("size"),this.handleSizeChanged_,this),Pl(this,ql("target"),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach((function(t){t.setMap(this)}).bind(this)),Pl(this.controls,"add",function(t){t.element.setMap(this)},this),Pl(this.controls,"remove",function(t){t.element.setMap(null)},this),this.interactions.forEach((function(t){t.setMap(this)}).bind(this)),Pl(this.interactions,"add",function(t){t.element.setMap(this)},this),Pl(this.interactions,"remove",function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Pl(this.overlays_,"add",function(t){this.addOverlayInternal_(t.element)},this),Pl(this.overlays_,"remove",function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)};_l(If,Ql),If.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},If.prototype.addControl=function(t){this.getControls().push(t)},If.prototype.addInteraction=function(t){this.getInteractions().push(t)},If.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},If.prototype.addOverlay=function(t){this.getOverlays().push(t)},If.prototype.addOverlayInternal_=function(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},If.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),kl(this.viewport_,Wl.CONTEXTMENU,this.handleBrowserEvent,this),kl(this.viewport_,Wl.WHEEL,this.handleBrowserEvent,this),kl(this.viewport_,Wl.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(Wl.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),Ql.prototype.disposeInternal.call(this)},If.prototype.forEachFeatureAtPixel=function(t,e,n){if(!this.frameState_)return;const i=this.getCoordinateFromPixel(t);return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,null,void 0!==n.layerFilter?n.layerFilter:Dl,null)},If.prototype.getFeaturesAtPixel=function(t,e){let n=null;return this.forEachFeatureAtPixel(t,function(t){n||(n=[]),n.push(t)},e),n},If.prototype.forEachLayerAtPixel=function(t,e,n){if(!this.frameState_)return;const i=n||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==i.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,null,i.layerFilter||Dl,null)},If.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;const n=this.getCoordinateFromPixel(t);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,void 0!==e.layerFilter?e.layerFilter:Dl,null)},If.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},If.prototype.getEventPixel=function(t){const e=this.viewport_.getBoundingClientRect(),n=t.changedTouches?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},If.prototype.getTarget=function(){return this.get("target")},If.prototype.getTargetElement=function(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},If.prototype.getCoordinateFromPixel=function(t){const e=this.frameState_;return e?Fh(e.pixelToCoordinateTransform,t.slice()):null},If.prototype.getControls=function(){return this.controls},If.prototype.getOverlays=function(){return this.overlays_},If.prototype.getOverlayById=function(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},If.prototype.getInteractions=function(){return this.interactions},If.prototype.getLayerGroup=function(){return this.get("layergroup")},If.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},If.prototype.getPixelFromCoordinate=function(t){const e=this.frameState_;return e?Fh(e.coordinateToPixelTransform,t.slice(0,2)):null},If.prototype.getRenderer=function(){return this.renderer_},If.prototype.getSize=function(){return this.get("size")},If.prototype.getView=function(){return this.get("view")},If.prototype.getViewport=function(){return this.viewport_},If.prototype.getOverlayContainer=function(){return this.overlayContainer_},If.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},If.prototype.getTilePriority=function(t,e,n,i){const o=this.frameState_;if(!(o&&e in o.wantedTiles))return 1/0;if(!o.wantedTiles[e][t.getKey()])return 1/0;const r=n[0]-o.focus[0],s=n[1]-o.focus[1];return 65536*Math.log(i)+Math.sqrt(r*r+s*s)/i},If.prototype.handleBrowserEvent=function(t,e){const n=new Np(e||t.type,this,t);this.handleMapBrowserEvent(n)},If.prototype.handleMapBrowserEvent=function(t){if(!this.frameState_)return;this.focus_=t.coordinate,t.frameState=this.frameState_;const e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getActive()&&!i.handleEvent(t))break}},If.prototype.handlePostRender=function(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;e[vf.ANIMATING]&&(n=this.loadTilesWhileAnimating_?8:0,i=2),e[vf.INTERACTING]&&(n=this.loadTilesWhileInteracting_?8:0,i=2)}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}const n=this.postRenderFunctions_;for(let i=0,o=n.length;i<o;++i)n[i](this,t);n.length=0},If.prototype.handleSizeChanged_=function(){this.render()},If.prototype.handleTargetChanged_=function(){let t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(let t=0,e=this.keyHandlerKeys_.length;t<e;++t)Ll(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);const e=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Pl(e,Wl.KEYDOWN,this.handleBrowserEvent,this),Pl(e,Wl.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(Wl.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Jh(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Wl.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},If.prototype.handleTileChange_=function(){this.render()},If.prototype.handleViewPropertyChanged_=function(){this.render()},If.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Ll(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ll(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.viewport_.setAttribute("data-view",ml(t)),this.viewPropertyListenerKey_=Pl(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Pl(t,Wl.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},If.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ll),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Pl(t,"propertychange",this.render,this),Pl(t,Wl.CHANGE,this.render,this)]),this.render()},If.prototype.isRendered=function(){return!!this.frameState_},If.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},If.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},If.prototype.removeControl=function(t){return this.getControls().remove(t)},If.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},If.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},If.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},If.prototype.renderFrame_=function(t){let e;const n=this.getSize(),i=this.getView(),o=[1/0,1/0,-1/0,-1/0],r=this.frameState_;let s=null;if(void 0!==n&&function(t){return t[0]>0&&t[1]>0}(n)&&i&&i.isDef()){const r=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=this.getLayerGroup().getLayerStatesArray(),l={};for(let t=0,e=a.length;t<e;++t)l[ml(a[t].layer)]=a[t];e=i.getState();let u=this.focus_;if(!u){const t=e.resolution/this.pixelRatio_;(u=e.center)[0]=Math.round(u[0]/t)*t,u[1]=Math.round(u[1]/t)*t}s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:u,index:this.frameIndex_++,layerStates:l,layerStatesArray:a,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:r,wantedTiles:{}}}s&&(s.extent=Su(e.center,e.resolution,e.rotation,s.size,o)),this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Fu(this.previousExtent_)&&!_u(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Op("movestart",this,r)),this.previousExtent_=pu(this.previousExtent_)),this.previousExtent_&&!s.viewHints[vf.ANIMATING]&&!s.viewHints[vf.INTERACTING]&&!_u(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Op("moveend",this,s)),su(s.extent,this.previousExtent_))),this.dispatchEvent(new Op("postrender",this,s)),setTimeout(this.handlePostRender.bind(this),0)},If.prototype.setLayerGroup=function(t){this.set("layergroup",t)},If.prototype.setSize=function(t){this.set("size",t)},If.prototype.setTarget=function(t){this.set("target",t)},If.prototype.setView=function(t){this.set("view",t)},If.prototype.skipFeature=function(t){const e=ml(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},If.prototype.updateSize=function(){const t=this.getTargetElement();if(t){const e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},If.prototype.unskipFeature=function(t){const e=ml(t).toString();delete this.skippedFeatureUids_[e],this.render()};var Rf=If;const Pf=function(t){Ql.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:Al,t.target&&this.setTarget(t.target)};_l(Pf,Ql),Pf.prototype.disposeInternal=function(){Jh(this.element),Ql.prototype.disposeInternal.call(this)},Pf.prototype.getMap=function(){return this.map_},Pf.prototype.setMap=function(t){this.map_&&Jh(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Ll(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Al&&this.listenerKeys.push(Pl(t,"postrender",this.render,this)),t.render())},Pf.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t};var Mf=Pf;const kf=function(t){const e=bl({},t);delete e.source,Cf.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),Pl(this,ql("source"),this.handleSourcePropertyChange_,this),this.setSource(t.source?t.source:null)};function Lf(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}_l(kf,Cf),kf.prototype.getLayersArray=function(t){const e=t||[];return e.push(this),e},kf.prototype.getLayerStatesArray=function(t){const e=t||[];return e.push(this.getLayerState()),e},kf.prototype.getSource=function(){return this.get("source")||null},kf.prototype.getSourceState=function(){const t=this.getSource();return t?t.getState():"undefined"},kf.prototype.handleSourceChange_=function(){this.changed()},kf.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Ll(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=Pl(t,Wl.CHANGE,this.handleSourceChange_,this)),this.changed()},kf.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Ll(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Ll(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Pl(t,"precompose",function(t){const e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[ml(this)]=e},this),this.mapRenderKey_=Pl(this,Wl.CHANGE,t.render,t),this.changed())},kf.prototype.setSource=function(t){this.set("source",t)};var Ff=kf;const Df=function(t){const e=t||{};this.ulElement_=document.createElement("UL"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const n=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",o=void 0!==e.collapseLabel?e.collapseLabel:"\xbb";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;const r=void 0!==e.label?e.label:"i";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(s),Pl(a,Wl.CLICK,this.handleClick_,this);const l=n+" ol-unselectable ol-control"+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),u=document.createElement("div");u.className=l,u.appendChild(this.ulElement_),u.appendChild(a),Mf.call(this,{element:u,render:e.render||Of,target:e.target}),this.renderedAttributions_=[],this.renderedVisible_=!0};function Of(t){this.updateElement_(t.frameState)}_l(Df,Mf),Df.prototype.getSourceAttributions_=function(t){const e={},n=[],i=t.layerStatesArray,o=t.viewState.resolution;for(let r=0,s=i.length;r<s;++r){const s=i[r];if(!Lf(s,o))continue;const a=s.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const u=l(t);if(u)if(Array.isArray(u))for(let t=0,i=u.length;t<i;++t)u[t]in e||(n.push(u[t]),e[u[t]]=!0);else u in e||(n.push(u),e[u]=!0)}return n},Df.prototype.updateElement_=function(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.getSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ld(e,this.renderedAttributions_)){$h(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("LI");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}},Df.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},Df.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Qh(this.collapseLabel_,this.label_):Qh(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},Df.prototype.getCollapsible=function(){return this.collapsible_},Df.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},Df.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},Df.prototype.getCollapsed=function(){return this.collapsed_};var Af=Df;const Nf=function(t){const e=t||{},n=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=i):(this.label_=i,this.label_.classList.add("ol-compass"));const o=e.tipLabel?e.tipLabel:"Reset rotation",r=document.createElement("button");r.className=n+"-reset",r.setAttribute("type","button"),r.title=o,r.appendChild(this.label_),Pl(r,Wl.CLICK,Nf.prototype.handleClick_,this);const s=n+" ol-unselectable ol-control",a=document.createElement("div");a.className=s,a.appendChild(r),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,Mf.call(this,{element:a,render:e.render||Gf,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(xc)};function Gf(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(xc);t||0!==n?t&&0!==n&&this.element.classList.remove(xc):this.element.classList.add(xc)}this.label_.style.msTransform=t,this.label_.style.webkitTransform=t,this.label_.style.transform=t}this.rotation_=n}_l(Nf,Mf),Nf.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},Nf.prototype.resetNorth_=function(){const t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Ep}):t.setRotation(0))};var Vf=Nf;const jf=function(t){const e=t||{},n=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",r=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2212",s=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",a=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=n+"-in",l.setAttribute("type","button"),l.title=s,l.appendChild("string"==typeof o?document.createTextNode(o):o),Pl(l,Wl.CLICK,jf.prototype.handleClick_.bind(this,i));const u=document.createElement("button");u.className=n+"-out",u.setAttribute("type","button"),u.title=a,u.appendChild("string"==typeof r?document.createTextNode(r):r),Pl(u,Wl.CLICK,jf.prototype.handleClick_.bind(this,-i));const h=n+" ol-unselectable ol-control",c=document.createElement("div");c.className=h,c.appendChild(l),c.appendChild(u),Mf.call(this,{element:c,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250};_l(jf,Mf),jf.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},jf.prototype.zoomByDelta_=function(t){const e=this.getMap().getView();if(!e)return;const n=e.getResolution();if(n){const i=e.constrainResolution(n,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,duration:this.duration_,easing:Ep})):e.setResolution(i)}};var Bf=jf;function zf(t){const e=t||{},n=new tu;return(void 0===e.zoom||e.zoom)&&n.push(new Bf(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Vf(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Af(e.attributionOptions)),n}const Hf=function(t){Ql.call(this),this.map_=null,this.setActive(!0),this.handleEvent=t.handleEvent};function Wf(t,e,n,i){Uf(t,e=t.constrainRotation(e,0),n,i)}function Uf(t,e,n,i){if(void 0!==e){const o=t.getRotation(),r=t.getCenter();void 0!==o&&r&&i>0?t.animate({rotation:e,anchor:n,duration:i,easing:Ep}):t.rotate(e,n)}}function Yf(t,e,n,i,o){Xf(t,e=t.constrainResolution(e,0,o),n,i)}function Kf(t,e,n,i){const o=t.getResolution();let r=t.constrainResolution(o,e,0);if(void 0!==r){const e=t.getResolutions();r=Nu(r,t.getMinResolution()||e[e.length-1],t.getMaxResolution()||e[0])}if(n&&void 0!==r&&r!==o){const e=t.getCenter();let i=t.calculateCenterZoom(r,n);i=t.constrainCenter(i),n=[(r*e[0]-o*i[0])/(r-o),(r*e[1]-o*i[1])/(r-o)]}Xf(t,r,n,i)}function Xf(t,e,n,i){if(e){const o=t.getResolution(),r=t.getCenter();if(void 0!==o&&r&&e!==o&&i)t.animate({resolution:e,anchor:n,duration:i,easing:Ep});else{if(n){const i=t.calculateCenterZoom(e,n);t.setCenter(i)}t.setResolution(e)}}}_l(Hf,Ql),Hf.prototype.getActive=function(){return this.get("active")},Hf.prototype.getMap=function(){return this.map_},Hf.prototype.setActive=function(t){this.set("active",t)},Hf.prototype.setMap=function(t){this.map_=t};var Zf=Hf;const qf=function(t){const e=t||{};this.delta_=e.delta?e.delta:1,Zf.call(this,{handleEvent:Qf}),this.duration_=void 0!==e.duration?e.duration:250};function Qf(t){let e=!1;if(t.type==Gp.DBLCLICK){const n=t.coordinate,i=t.originalEvent.shiftKey?-this.delta_:this.delta_;Kf(t.map.getView(),i,n,this.duration_),t.preventDefault(),e=!0}return!e}_l(qf,Zf);var Jf=qf;const $f=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},tg=Dl,eg=function(t){const e=t.originalEvent;return 0==e.button&&!(cc&&dc&&e.ctrlKey)},ng=Ol,ig=function(t){return"pointermove"==t.type},og=function(t){return t.type==Gp.SINGLECLICK},rg=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},sg=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ag=function(t){const e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},lg=function(t){return eu(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},ug=function(t){const e=t.pointerEvent;return e.isPrimary&&0===e.button},hg=Al,cg=Ol,dg=Ol,pg=Al,fg=function(t){const e=t||{};Zf.call(this,{handleEvent:e.handleEvent||_g}),this.handleDownEvent_=e.handleDownEvent?e.handleDownEvent:dg,this.handleDragEvent_=e.handleDragEvent?e.handleDragEvent:hg,this.handleMoveEvent_=e.handleMoveEvent?e.handleMoveEvent:pg,this.handleUpEvent_=e.handleUpEvent?e.handleUpEvent:cg,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};function gg(t){const e=t.length;let n=0,i=0;for(let o=0;o<e;o++)n+=t[o].clientX,i+=t[o].clientY;return[n/e,i/e]}function _g(t){if(!(t instanceof jp))return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Gp.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==Gp.POINTERUP){const e=this.handleUpEvent_(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Gp.POINTERDOWN){const n=this.handleDownEvent_(t);this.handlingDownUpSequence=n,e=this.shouldStopEvent(n)}else t.type==Gp.POINTERMOVE&&this.handleMoveEvent_(t);return!e}_l(fg,Zf),fg.prototype.updateTrackedPointers_=function(t){if(function(t){const e=t.type;return e===Gp.POINTERDOWN||e===Gp.POINTERDRAG||e===Gp.POINTERUP}(t)){const e=t.pointerEvent,n=e.pointerId.toString();t.type==Gp.POINTERUP?delete this.trackedPointers_[n]:t.type==Gp.POINTERDOWN?this.trackedPointers_[n]=e:n in this.trackedPointers_&&(this.trackedPointers_[n]=e),this.targetPointers=Cl(this.trackedPointers_)}},fg.prototype.shouldStopEvent=function(t){return t};var yg=fg;const mg=function(t){yg.call(this,{handleDownEvent:bg,handleDragEvent:vg,handleUpEvent:xg});const e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.condition_=e.condition?e.condition:rg,this.noKinetic_=!1};function vg(t){const e=this.targetPointers,n=gg(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=this.lastCentroid[0]-n[0],i=n[1]-this.lastCentroid[1],o=t.map.getView();let r=[e,i];ip(r,o.getResolution()),np(r,o.getRotation()),Jd(r,o.getCenter()),r=o.constrainCenter(r),o.setCenter(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length}function xg(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenter(),r=e.getPixelFromCoordinate(o),s=e.getCoordinateFromPixel([r[0]-t*Math.cos(i),r[1]-t*Math.sin(i)]);n.animate({center:n.constrainCenter(s),duration:500,easing:Ep})}return n.setHint(vf.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}function bg(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||e.setHint(vf.INTERACTING,1),e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}_l(mg,yg),mg.prototype.shouldStopEvent=Ol;var wg=mg;const Cg=function(t){const e=t||{};yg.call(this,{handleDownEvent:Sg,handleDragEvent:Eg,handleUpEvent:Tg}),this.condition_=e.condition?e.condition:$f,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250};function Eg(t){if(!lg(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===yf)return;const i=e.getSize(),o=t.pixel,r=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;Uf(n,n.getRotation()-t)}this.lastAngle_=r}function Tg(t){if(!lg(t))return!0;const e=t.map.getView();return e.setHint(vf.INTERACTING,-1),Wf(e,e.getRotation(),void 0,this.duration_),!1}function Sg(t){return!(!lg(t)||!eg(t)||!this.condition_(t)||(t.map.getView().setHint(vf.INTERACTING,1),this.lastAngle_=void 0,0))}_l(Cg,yg),Cg.prototype.shouldStopEvent=Ol;var Ig=Cg;const Rg=function(t){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null};_l(Rg,Gl),Rg.prototype.disposeInternal=function(){this.setMap(null)},Rg.prototype.render_=function(){const t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},Rg.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left=t.top=t.width=t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},Rg.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},Rg.prototype.createOrUpdateGeometry=function(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Xd([n])},Rg.prototype.getGeometry=function(){return this.geometry_};var Pg=Rg;const Mg={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},kg=function(t,e,n){Bl.call(this,t),this.coordinate=e,this.mapBrowserEvent=n};_l(kg,Bl);const Lg=function(t){yg.call(this,{handleDownEvent:Ag,handleDragEvent:Dg,handleUpEvent:Og});const e=t||{};this.box_=new Pg(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.startPixel_=null,this.condition_=e.condition?e.condition:tg,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:Fg};function Fg(t,e,n){const i=n[0]-e[0],o=n[1]-e[1];return i*i+o*o>=this.minArea_}function Dg(t){lg(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new kg(Mg.BOXDRAG,t.coordinate,t)))}function Og(t){return!lg(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new kg(Mg.BOXEND,t.coordinate,t))),!1)}function Ag(t){return!(!lg(t)||!eg(t)||!this.condition_(t)||(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kg(Mg.BOXSTART,t.coordinate,t)),0))}_l(Lg,yg),Lg.prototype.getGeometry=function(){return this.box_.getGeometry()},Lg.prototype.onBoxEnd=Al;var Ng=Lg;const Gg=function(t){const e=t||{},n=e.condition?e.condition:sg;this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out,Ng.call(this,{condition:n,className:e.className||"ol-dragzoom"})};_l(Gg,Ng),Gg.prototype.onBoxEnd=function(){const t=this.getMap(),e=t.getView(),n=t.getSize();let i=this.getGeometry().getExtent();if(this.out_){const r=e.calculateExtent(n),s=(o=[t.getPixelFromCoordinate(Cu(i)),t.getPixelFromCoordinate(Mu(i))],function(t,e){for(let n=0,i=e.length;n<i;++n)mu(t,e[n]);return t}(pu(void 0),o));Du(r,1/e.getResolutionForExtent(s,n)),i=r}var o;const r=e.constrainResolution(e.getResolutionForExtent(i,n));let s=Tu(i);s=e.constrainCenter(s),e.animate({resolution:r,center:s,duration:this.duration_,easing:Ep})};var Vg=Gg,jg={LEFT:37,UP:38,RIGHT:39,DOWN:40};const Bg=function(t){Zf.call(this,{handleEvent:zg});const e=t||{};this.defaultCondition_=function(t){return rg(t)&&ag(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128};function zg(t){let e=!1;if(t.type==Wl.KEYDOWN){const n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==jg.DOWN||n==jg.LEFT||n==jg.RIGHT||n==jg.UP)){const i=t.map.getView(),o=i.getResolution()*this.pixelDelta_;let r=0,s=0;n==jg.DOWN?s=-o:n==jg.LEFT?r=-o:n==jg.RIGHT?r=o:s=o;const a=[r,s];np(a,i.getRotation()),function(t,e,n){const i=t.getCenter();if(i){const o=t.constrainCenter([i[0]+e[0],i[1]+e[1]]);n?t.animate({duration:n,easing:Sp,center:o}):t.setCenter(o)}}(i,a,this.duration_),t.preventDefault(),e=!0}}return!e}_l(Bg,Zf);var Hg=Bg;const Wg=function(t){Zf.call(this,{handleEvent:Ug});const e=t||{};this.condition_=e.condition?e.condition:ag,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100};function Ug(t){let e=!1;if(t.type==Wl.KEYDOWN||t.type==Wl.KEYPRESS){const n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){const i=t.map,o=n=="+".charCodeAt(0)?this.delta_:-this.delta_;Kf(i.getView(),o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}_l(Wg,Zf);var Yg=Wg;const Kg={TRACKPAD:"trackpad",WHEEL:"wheel"},Xg=function(t){Zf.call(this,{handleEvent:Zg});const e=t||{};this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.condition_=e.condition?e.condition:tg,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};function Zg(t){if(!this.condition_(t))return!0;const e=t.type;if(e!==Wl.WHEEL&&e!==Wl.MOUSEWHEEL)return!0;t.preventDefault();const n=t.map,i=t.originalEvent;let o;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Wl.WHEEL?(o=i.deltaY,uc&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=pc),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)):t.type==Wl.MOUSEWHEEL&&(o=-i.wheelDeltaY,hc&&(o/=3)),0===o)return!1;const r=Date.now();if(void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?Kg.TRACKPAD:Kg.WHEEL),this.mode_===Kg.TRACKPAD){const t=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):t.setHint(vf.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);let e=t.getResolution()*Math.pow(2,o/this.trackpadDeltaPerZoom_);const i=t.getMinResolution(),s=t.getMaxResolution();let a=0;if(e<i?(e=Math.max(e,i/this.trackpadZoomBuffer_),a=1):e>s&&(e=Math.min(e,s*this.trackpadZoomBuffer_),a=-1),this.lastAnchor_){const n=t.calculateCenterZoom(e,this.lastAnchor_);t.setCenter(t.constrainCenter(n))}return t.setResolution(e),0===a&&this.constrainResolution_&&t.animate({resolution:t.constrainResolution(e,o>0?-1:1),easing:Ep,anchor:this.lastAnchor_,duration:this.duration_}),a>0?t.animate({resolution:i,easing:Ep,anchor:this.lastAnchor_,duration:500}):a<0&&t.animate({resolution:s,easing:Ep,anchor:this.lastAnchor_,duration:500}),this.startTime_=r,!1}this.delta_+=o;const s=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1}_l(Xg,Zf),Xg.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(vf.INTERACTING,-1)},Xg.prototype.handleWheelZoom_=function(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations(),Kf(e,-Nu(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},Xg.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)};var qg=Xg;const Qg=function(t){yg.call(this,{handleDownEvent:t_,handleDragEvent:Jg,handleUpEvent:$g});const e=t||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250};function Jg(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=o;const r=t.map,s=r.getView();if(s.getConstraints().rotation===yf)return;const a=r.getViewport().getBoundingClientRect(),l=gg(this.targetPointers);if(l[0]-=a.left,l[1]-=a.top,this.anchor_=r.getCoordinateFromPixel(l),this.rotating_){const t=s.getRotation();r.render(),Uf(s,t+e,this.anchor_)}}function $g(t){if(this.targetPointers.length<2){const e=t.map.getView();return e.setHint(vf.INTERACTING,-1),this.rotating_&&Wf(e,e.getRotation(),this.anchor_,this.duration_),!1}return!0}function t_(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(vf.INTERACTING,1),!0}return!1}_l(Qg,yg),Qg.prototype.shouldStopEvent=Ol;var e_=Qg;const n_=function(t){yg.call(this,{handleDownEvent:r_,handleDragEvent:i_,handleUpEvent:o_});const e=t||{};this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1};function i_(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],o=n.clientX-i.clientX,r=n.clientY-i.clientY,s=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;const a=t.map,l=a.getView(),u=l.getResolution(),h=l.getMaxResolution(),c=l.getMinResolution();let d=u*e;d>h?(e=h/u,d=h):d<c&&(e=c/u,d=c),1!=e&&(this.lastScaleDelta_=e);const p=a.getViewport().getBoundingClientRect(),f=gg(this.targetPointers);f[0]-=p.left,f[1]-=p.top,this.anchor_=a.getCoordinateFromPixel(f),a.render(),Xf(l,d,this.anchor_)}function o_(t){if(this.targetPointers.length<2){const e=t.map.getView();e.setHint(vf.INTERACTING,-1);const n=e.getResolution();return(this.constrainResolution_||n<e.getMinResolution()||n>e.getMaxResolution())&&Yf(e,n,this.anchor_,this.duration_,this.lastScaleDelta_-1),!1}return!0}function r_(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(vf.INTERACTING,1),!0}return!1}_l(n_,yg),n_.prototype.shouldStopEvent=Ol;var s_=n_;const a_=function(t,e,n,i){Bl.call(this,t),this.features=n,this.file=e,this.projection=i};_l(a_,Bl);const l_=function(t){const e=t||{};Zf.call(this,{handleEvent:Dl}),this.formatConstructors_=e.formatConstructors?e.formatConstructors:[],this.projection_=e.projection?_h(e.projection):null,this.dropListenKeys_=null,this.source_=e.source||null,this.target=e.target?e.target:null};function u_(t){const e=t.dataTransfer.files;for(let n=0,i=e.length;n<i;++n){const t=e.item(n),i=new FileReader;i.addEventListener(Wl.LOAD,this.handleResult_.bind(this,t)),i.readAsText(t)}}function h_(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function c_(t){if(!lg(t))return;const e=t.map,n=e.getSize(),i=t.pixel,o=i[0]-n[0]/2,r=n[1]/2-i[1],s=Math.atan2(r,o),a=Math.sqrt(o*o+r*r),l=e.getView();if(l.getConstraints().rotation!==yf&&void 0!==this.lastAngle_){const t=s-this.lastAngle_;Uf(l,l.getRotation()-t)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&Xf(l,this.lastMagnitude_*(l.getResolution()/a)),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}function d_(t){if(!lg(t))return!0;const e=t.map.getView();e.setHint(vf.INTERACTING,-1);const n=this.lastScaleDelta_-1;return Wf(e,e.getRotation()),Yf(e,e.getResolution(),void 0,this.duration_,n),this.lastScaleDelta_=0,!1}function p_(t){return!!lg(t)&&!!this.condition_(t)&&(t.map.getView().setHint(vf.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)}_l(l_,Zf),l_.prototype.handleResult_=function(t,e){const n=e.target.result,i=this.getMap();let o=this.projection_;o||(o=i.getView().getProjection());const r=this.formatConstructors_;let s=[];for(let a=0,l=r.length;a<l;++a){const t=new(0,r[a]);if((s=this.tryReadFeatures_(t,n,{featureProjection:o}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new a_("addfeatures",t,s,o))},l_.prototype.registerListeners_=function(){const t=this.getMap();if(t){const e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Pl(e,Wl.DROP,u_,this),Pl(e,Wl.DRAGENTER,h_,this),Pl(e,Wl.DRAGOVER,h_,this),Pl(e,Wl.DROP,h_,this)]}},l_.prototype.setActive=function(t){Zf.prototype.setActive.call(this,t),t?this.registerListeners_():this.unregisterListeners_()},l_.prototype.setMap=function(t){this.unregisterListeners_(),Zf.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},l_.prototype.tryReadFeatures_=function(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}},l_.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(Ll),this.dropListenKeys_=null)},_l(function(t){const e=t||{};yg.call(this,{handleDownEvent:p_,handleDragEvent:c_,handleUpEvent:d_}),this.condition_=e.condition?e.condition:sg,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==e.duration?e.duration:400},yg);const f_=function(t,e,n){pd.call(this),this.setCenterAndRadius(t,e||0,n)};_l(f_,pd),f_.prototype.clone=function(){const t=new f_(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},f_.prototype.closestPointXY=function(t,e,n,i){const o=this.flatCoordinates,r=t-o[0],s=e-o[1],a=r*r+s*s;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)n[t]=o[t];else{const t=this.getRadius()/Math.sqrt(a);n[0]=o[0]+t*r,n[1]=o[1]+t*s;for(let e=2;e<this.stride;++e)n[e]=o[e]}return n.length=this.stride,a}return i},f_.prototype.containsXY=function(t,e){const n=this.flatCoordinates,i=t-n[0],o=e-n[1];return i*i+o*o<=this.getRadiusSquared_()},f_.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},f_.prototype.computeExtent=function(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return du(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},f_.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},f_.prototype.getRadiusSquared_=function(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},f_.prototype.getType=function(){return Uu.CIRCLE},f_.prototype.intersectsExtent=function(t){if(Lu(t,this.getExtent())){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||bu(t,this.intersectsCoordinate,this)}return!1},f_.prototype.setCenter=function(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(let o=1;o<e;++o)i[e+o]=t[o];this.setFlatCoordinates(this.layout,i)},f_.prototype.setCenterAndRadius=function(t,e,n){if(t){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let o=bd(i,0,t);i[o++]=i[0]+e;for(let t=1,e=this.stride;t<e;++t)i[o++]=i[t];i.length=o,this.changed()}else this.setFlatCoordinates(hd.XY,null)},f_.prototype.getCoordinates=function(){},f_.prototype.setCoordinates=function(t,e){},f_.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},f_.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()};var g_=f_;const __=function(t,e){pd.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};_l(__,pd),__.prototype.appendLineString=function(t){this.flatCoordinates?ad(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},__.prototype.clone=function(){const t=new __(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},__.prototype.closestPointXY=function(t,e,n,i){return i<au(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(md(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))},__.prototype.getCoordinateAtM=function(t,e,n){return this.layout!=hd.XYM&&this.layout!=hd.XYZM||0===this.flatCoordinates.length?null:function(t,e,i,o,r,s,a){if(void 0!==n&&n)return lp(t,e,i[i.length-1],o,r,s);let l;if(r<t[o-1])return s?((l=t.slice(0,o))[o-1]=r,l):null;if(t[t.length-1]<r)return s?((l=t.slice(t.length-o))[o-1]=r,l):null;for(let n=0,u=i.length;n<u;++n){const s=i[n];if(e!=s){if(r<t[e+o-1])return null;if(r<=t[s-1])return lp(t,e,s,o,r,!1);e=s}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,void 0!==e&&e)},__.prototype.getCoordinates=function(){return Td(this.flatCoordinates,0,this.ends_,this.stride)},__.prototype.getEnds=function(){return this.ends_},__.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;const e=new cp(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},__.prototype.getLineStrings=function(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let o=0;for(let r=0,s=e.length;r<s;++r){const s=e[r],a=new cp(null);a.setFlatCoordinates(n,t.slice(o,s)),i.push(a),o=s}return i},__.prototype.getFlatMidpoints=function(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,o=this.stride;for(let r=0,s=i.length;r<s;++r){const s=i[r];ad(t,ap(e,n,s,o,.5)),n=s}return t},__.prototype.getSimplifiedGeometryInternal=function(t){const e=[],n=[];e.length=function(t,e,n,i,o,r,s,a){for(let l=0,u=n.length;l<u;++l){const u=n[l];s=Id(t,e,u,i,o,r,s),a.push(s),e=u}return s}(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n);const i=new __(null);return i.setFlatCoordinates(hd.XY,e,n),i},__.prototype.getType=function(){return Uu.MULTI_LINE_STRING},__.prototype.intersectsExtent=function(t){return function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){if(jd(t,e,n[r],i,o))return!0;e=n[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},__.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Cd(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}else this.setFlatCoordinates(hd.XY,null,this.ends_)},__.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.ends_=n,this.changed()},__.prototype.setLineStrings=function(t){let e=this.getLayout();const n=[],i=[];for(let o=0,r=t.length;o<r;++o){const r=t[o];0===o&&(e=r.getLayout()),ad(n,r.getFlatCoordinates()),i.push(n.length)}this.setFlatCoordinates(e,n,i)};var y_=__;const m_=function(t,e){pd.call(this),this.setCoordinates(t,e)};_l(m_,pd),m_.prototype.appendPoint=function(t){this.flatCoordinates?ad(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},m_.prototype.clone=function(){const t=new m_(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},m_.prototype.closestPointXY=function(t,e,n,i){if(i<au(this.getExtent(),t,e))return i;const o=this.flatCoordinates,r=this.stride;for(let s=0,a=o.length;s<a;s+=r){const a=ju(t,e,o[s],o[s+1]);if(a<i){i=a;for(let t=0;t<r;++t)n[t]=o[s+t];n.length=r}}return i},m_.prototype.getCoordinates=function(){return Ed(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},m_.prototype.getPoint=function(t){if(t<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=t)return null;const e=new Dd(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),e},m_.prototype.getPoints=function(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let o=0,r=t.length;o<r;o+=n){const r=new Dd(null);r.setFlatCoordinates(e,t.slice(o,o+n)),i.push(r)}return i},m_.prototype.getType=function(){return Uu.MULTI_POINT},m_.prototype.intersectsExtent=function(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,o=e.length;i<o;i+=n)if(hu(t,e[i],e[i+1]))return!0;return!1},m_.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wd(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(hd.XY,null)},m_.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var v_=m_;const x_=function(t,e){pd.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};_l(x_,pd),x_.prototype.appendPolygon=function(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;ad(this.flatCoordinates,t.getFlatCoordinates());for(let i=0,o=(e=t.getEnds().slice()).length;i<o;++i)e[i]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},x_.prototype.clone=function(){const t=new x_(null),e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),n),t},x_.prototype.closestPointXY=function(t,e,n,i){return i<au(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r];o=md(t,e,s,i,o),e=s[s.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,o,r,s,a,l,u,h){const c=[NaN,NaN];for(let d=0,p=n.length;d<p;++d){const r=n[d];u=xd(t,e,r,i,o,!0,s,a,l,u,c),e=r[r.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,n,i))},x_.prototype.containsXY=function(t,e){return function(t,e,n,i,o,r){if(0===n.length)return!1;for(let s=0,a=n.length;s<a;++s){const a=n[s];if(Nd(t,e,a,i,o,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},x_.prototype.getArea=function(){return function(t,e,n,i){let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r];o+=gd(t,e,s,i),e=s[s.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},x_.prototype.getCoordinates=function(t){let e;return void 0!==t?Yd(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Sd(e,0,this.endss_,this.stride)},x_.prototype.getEndss=function(){return this.endss_},x_.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,n,i){const o=[];let r=[1/0,1/0,-1/0,-1/0];for(let s=0,a=n.length;s<a;++s){const a=n[s];r=gu(t,e,a[0],i),o.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=a[a.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,n,i,o){let r=[];for(let s=0,a=n.length;s<a;++s){const a=n[s];r=Gd(t,e,a,i,o,2*s,r),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},x_.prototype.getInteriorPoints=function(){const t=new v_(null);return t.setFlatCoordinates(hd.XYM,this.getFlatInteriorPoints().slice()),t},x_.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r)if(!Wd(t,0,n[r],i,void 0))return!1;return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Yd(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},x_.prototype.getSimplifiedGeometryInternal=function(t){const e=[],n=[];e.length=function(t,e,n,i,o,r,s,a){for(let l=0,u=n.length;l<u;++l){const u=n[l],h=[];s=Md(t,e,u,i,o,r,s,h),a.push(h),e=u[u.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n);const i=new x_(null);return i.setFlatCoordinates(hd.XY,e,n),i},x_.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let r=0,s=n.length;r<s;++r)n[r]-=e;const o=new Xd(null);return o.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,i),n),o},x_.prototype.getPolygons=function(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r].slice(),a=s[s.length-1];if(0!==o)for(let t=0,e=s.length;t<e;++t)s[t]-=o;const l=new Xd(null);l.setFlatCoordinates(t,e.slice(o,a),s),i.push(l),o=a}return i},x_.prototype.getType=function(){return Uu.MULTI_POLYGON},x_.prototype.intersectsExtent=function(t){return function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r];if(Bd(t,e,s,i,o))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},x_.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=function(t,e,n,i,o){const r=o||[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=Cd(t,e,n[a],i,r[s]);r[s++]=o,e=o[o.length-1]}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}else this.setFlatCoordinates(hd.XY,null,this.endss_)},x_.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.endss_=n,this.changed()},x_.prototype.setPolygons=function(t){let e=this.getLayout();const n=[],i=[];for(let o=0,r=t.length;o<r;++o){const r=t[o];0===o&&(e=r.getLayout());const s=n.length,a=r.getEnds();for(let t=0,e=a.length;t<e;++t)a[t]+=s;ad(n,r.getFlatCoordinates()),i.push(a)}this.setFlatCoordinates(e,n,i)};var b_=x_;const w_=function(t){const e=t||{},n=bl({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,Ff.call(this,n),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||"vector",this.type="VECTOR"};_l(w_,Ff),w_.prototype.getDeclutter=function(){return this.declutter_},w_.prototype.setDeclutter=function(t){this.declutter_=t},w_.prototype.getRenderBuffer=function(){return this.renderBuffer_},w_.prototype.getRenderOrder=function(){return this.get("renderOrder")},w_.prototype.getStyle=function(){return this.style_},w_.prototype.getStyleFunction=function(){return this.styleFunction_},w_.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},w_.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},w_.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},w_.prototype.setStyle=function(t){this.style_=void 0!==t?t:Qc,this.styleFunction_=null===t?void 0:function(t){let e;if("function"==typeof t)e=t;else{let n;Array.isArray(t)?n=t:(eu(t instanceof Zc,41),n=[t]),e=function(){return n}}return e}(this.style_),this.changed()},w_.prototype.getRenderMode=function(){return this.renderMode_};var C_=w_,E_="arraybuffer",T_="json",S_="text",I_="xml";function R_(t,e){return[[-1/0,-1/0,1/0,1/0]]}const P_=function(t){Ql.call(this),this.projection_=_h(t.projection),this.attributions_=this.adaptAttributions_(t.attributions),this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX};_l(P_,Ql),P_.prototype.adaptAttributions_=function(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null},P_.prototype.forEachFeatureAtCoordinate=Al,P_.prototype.getAttributions=function(){return this.attributions_},P_.prototype.getProjection=function(){return this.projection_},P_.prototype.getResolutions=function(){},P_.prototype.getState=function(){return this.state_},P_.prototype.getWrapX=function(){return this.wrapX_},P_.prototype.refresh=function(){this.changed()},P_.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t),this.changed()},P_.prototype.setState=function(t){this.state_=t,this.changed()};var M_=P_,k_=n("A1R+"),L_=n.n(k_);const F_=function(t){this.rbush_=L_()(t,void 0),this.items_={}};F_.prototype.insert=function(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[ml(e)]=n},F_.prototype.load=function(t,e){const n=new Array(e.length);for(let i=0,o=e.length;i<o;i++){const o=t[i],r=e[i],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:r};n[i]=s,this.items_[ml(r)]=s}this.rbush_.load(n)},F_.prototype.remove=function(t){const e=ml(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},F_.prototype.update=function(t,e){const n=this.items_[ml(e)];_u([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},F_.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},F_.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(t){return t.value})},F_.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},F_.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},F_.prototype.forEach_=function(t,e,n){let i;for(let o=0,r=t.length;o<r;o++)if(i=e.call(n,t[o]))return i;return i},F_.prototype.isEmpty=function(){return El(this.items_)},F_.prototype.clear=function(){this.rbush_.clear(),this.items_={}},F_.prototype.getExtent=function(t){const e=this.rbush_.data;return du(e.minX,e.minY,e.maxX,e.maxY,t)},F_.prototype.concat=function(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[0|e]=t.items_[0|e]};var D_=F_;const O_=function(t,e){Bl.call(this,t),this.feature=e};_l(O_,Bl);const A_=function(t){const e=t||{};M_.call(this,{attributions:e.attributions,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=Al,this.format_=e.format,this.overlaps_=void 0==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(eu(this.format_,7),this.loader_=function(t,e,n,i){return function(n,o,r){const s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,o,r):t,!0),e.getType()==E_&&(s.responseType="arraybuffer"),s.onload=(function(t){if(!s.status||s.status>=200&&s.status<300){const t=e.getType();let n;t==T_||t==S_?n=s.responseText:t==I_?(n=s.responseXML)||(n=(new DOMParser).parseFromString(s.responseText,"application/xml")):t==E_&&(n=s.response),n?(function(t,e){this.addFeatures(t)}).call(this,e.readFeatures(n,{featureProjection:r}),e.readProjection(n),e.getLastExtent()):i.call(this)}else i.call(this)}).bind(this),s.onerror=(function(){i.call(this)}).bind(this),s.send()}}(this.url_,this.format_,0,Al)),this.strategy_=void 0!==e.strategy?e.strategy:R_;const n=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,o;this.featuresRtree_=n?new D_:null,this.loadedExtentsRtree_=new D_,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,e.features instanceof tu?o=(i=e.features).getArray():Array.isArray(e.features)&&(o=e.features),n||void 0!==i||(i=new tu(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)};_l(A_,M_),A_.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},A_.prototype.addFeatureInternal=function(t){const e=ml(t).toString();if(!this.addToIndex_(e,t))return;this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new O_("addfeature",t))},A_.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Pl(e,Wl.CHANGE,this.handleFeatureChange_,this),Pl(e,"propertychange",this.handleFeatureChange_,this)]},A_.prototype.addToIndex_=function(t,e){let n=!0;const i=e.getId();return void 0!==i?i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e:(eu(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},A_.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},A_.prototype.addFeaturesInternal=function(t){const e=[],n=[],i=[];for(let o=0,r=t.length;o<r;o++){const e=t[o],i=ml(e).toString();this.addToIndex_(i,e)&&n.push(e)}for(let o=0,r=n.length;o<r;o++){const t=n[o],r=ml(t).toString();this.setupChangeEvents_(r,t);const s=t.getGeometry();if(s){const n=s.getExtent();e.push(n),i.push(t)}else this.nullGeometryFeatures_[r]=t}this.featuresRtree_&&this.featuresRtree_.load(e,i);for(let o=0,r=n.length;o<r;o++)this.dispatchEvent(new O_("addfeature",n[o]))},A_.prototype.bindFeaturesCollection_=function(t){let e=!1;Pl(this,"addfeature",function(n){e||(e=!0,t.push(n.feature),e=!1)}),Pl(this,"removefeature",function(n){e||(e=!0,t.remove(n.feature),e=!1)}),Pl(t,"add",function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Pl(t,"remove",function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},A_.prototype.clear=function(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(Ll);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};const e=new O_("clear");this.dispatchEvent(e),this.changed()},A_.prototype.forEachFeature=function(t){return this.featuresRtree_?this.featuresRtree_.forEach(t):this.featuresCollection_?this.featuresCollection_.forEach(t):void 0},A_.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0})},A_.prototype.forEachFeatureInExtent=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e):this.featuresCollection_?this.featuresCollection_.forEach(e):void 0},A_.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){const t=e(n);if(t)return t}})},A_.prototype.getFeaturesCollection=function(){return this.featuresCollection_},A_.prototype.getFeatures=function(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),El(this.nullGeometryFeatures_)||ad(t,Cl(this.nullGeometryFeatures_))),t},A_.prototype.getFeaturesAtCoordinate=function(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},A_.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},A_.prototype.getClosestFeatureToCoordinate=function(t,e){const n=t[0],i=t[1];let o=null;const r=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0],l=e||Dl;return this.featuresRtree_.forEachInExtent(a,function(t){if(l(t)){const e=t.getGeometry(),l=s;if((s=e.closestPointXY(n,i,r,s))<l){o=t;const e=Math.sqrt(s);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}}),o},A_.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},A_.prototype.getFeatureById=function(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null},A_.prototype.getFormat=function(){return this.format_},A_.prototype.getOverlaps=function(){return this.overlaps_},A_.prototype.getResolutions=function(){},A_.prototype.getUrl=function(){return this.url_},A_.prototype.handleFeatureChange_=function(t){const e=t.target,n=ml(e).toString(),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const o=e.getId();if(void 0!==o){const t=o.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[t]=e):this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[n]=e);this.changed(),this.dispatchEvent(new O_("changefeature",e))},A_.prototype.hasFeature=function(t){const e=t.getId();return void 0!==e?e in this.idIndex_:ml(t).toString()in this.undefIdIndex_},A_.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&El(this.nullGeometryFeatures_)},A_.prototype.loadFeatures=function(t,e,n){const i=this.loadedExtentsRtree_,o=this.strategy_(t,e);for(let r=0,s=o.length;r<s;++r){const t=o[r];i.forEachInExtent(t,function(e){return uu(e.extent,t)})||(this.loader_.call(this,t,e,n),i.insert(t,{extent:t.slice()}))}},A_.prototype.removeLoadedExtent=function(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(e){if(_u(e.extent,t))return n=e,!0}),n&&e.remove(n)},A_.prototype.removeFeature=function(t){const e=ml(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},A_.prototype.removeFeatureInternal=function(t){const e=ml(t).toString();this.featureChangeKeys_[e].forEach(Ll),delete this.featureChangeKeys_[e];const n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new O_("removefeature",t))},A_.prototype.removeFromIdIndex_=function(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},A_.prototype.setLoader=function(t){this.loader_=t};var N_=A_;const G_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},V_=function(t,e){Bl.call(this,t),this.feature=e};_l(V_,Bl);const j_=function(t){yg.call(this,{handleDownEvent:z_,handleEvent:B_,handleUpEvent:H_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){let e;return t===Uu.POINT||t===Uu.MULTI_POINT?e=G_.POINT:t===Uu.LINE_STRING||t===Uu.MULTI_LINE_STRING?e=G_.LINE_STRING:t===Uu.POLYGON||t===Uu.MULTI_POLYGON?e=G_.POLYGON:t===Uu.CIRCLE&&(e=G_.CIRCLE),e}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===G_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Dl;let e=t.geometryFunction;if(!e)if(this.type_===Uu.CIRCLE)e=function(t,e){const n=e||new g_([NaN,NaN]),i=op(t[0],t[1]);return n.setCenterAndRadius(t[0],Math.sqrt(i)),n};else{let t;const n=this.mode_;n===G_.POINT?t=Dd:n===G_.LINE_STRING?t=cp:n===G_.POLYGON&&(t=Xd),e=function(e,i){let o=i;return o?o.setCoordinates(n===G_.POLYGON?e[0].length?[e[0].concat([e[0][0]])]:[]:e):o=new t(e),o}}this.geometryFunction_=e,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new C_({source:new N_({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:function(){const t=Jc();return function(e,n){return t[e.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:rg,this.freehandCondition_=t.freehand?tg:t.freehandCondition?t.freehandCondition:sg,Pl(this,ql("active"),this.updateState_,this)};function B_(t){t.originalEvent.type===Wl.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==G_.POINT&&this.freehandCondition_(t);let e=t.type===Gp.POINTERMOVE,n=!0;return this.lastDragTime_&&t.type===Gp.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Gp.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),n=!1):this.freehand_&&t.type===Gp.POINTERDOWN?n=!1:e?(n=t.type===Gp.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(t):(t.pointerEvent.pointerType==Up||t.type===Gp.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===Gp.DBLCLICK&&(n=!1),_g.call(this,t)&&n}function z_(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){this.handlePointerMove_(new jp(Gp.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}).bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function H_(t){let e=!0;return this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_?(this.finishCoordinate_?this.freehand_||this.mode_===G_.CIRCLE?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===G_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}_l(j_,yg),j_.prototype.setMap=function(t){yg.prototype.setMap.call(this,t),this.updateState_()},j_.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,n=t.pixel,i=e[0]-n[0],o=e[1]-n[1],r=i*i+o*o;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},j_.prototype.atFinish_=function(t){let e=!1;if(this.sketchFeature_){let n=!1,i=[this.finishCoordinate_];if(this.mode_===G_.LINE_STRING?n=this.sketchCoords_.length>this.minPoints_:this.mode_===G_.POLYGON&&(n=this.sketchCoords_[0].length>this.minPoints_,i=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),n){const n=t.map;for(let o=0,r=i.length;o<r;o++){const r=i[o],s=n.getPixelFromCoordinate(r),a=t.pixel,l=a[0]-s[0],u=a[1]-s[1],h=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+u*u)<=h){this.finishCoordinate_=r;break}}}}return e},j_.prototype.createOrUpdateSketchPoint_=function(t){const e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new nd(new Dd(e)),this.updateSketchFeatures_())},j_.prototype.startDrawing_=function(t){const e=t.coordinate;this.finishCoordinate_=e,this.mode_===G_.POINT?this.sketchCoords_=e.slice():this.mode_===G_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new nd(new cp(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new nd,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new V_("drawstart",this.sketchFeature_))},j_.prototype.modifyDrawing_=function(t){let e=t.coordinate;const n=this.sketchFeature_.getGeometry();let i,o,r;if(this.mode_===G_.POINT?o=this.sketchCoords_:this.mode_===G_.POLYGON?(o=(i=this.sketchCoords_[0])[i.length-1],this.atFinish_(t)&&(e=this.finishCoordinate_.slice())):o=(i=this.sketchCoords_)[i.length-1],o[0]=e[0],o[1]=e[1],this.geometryFunction_(this.sketchCoords_,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n instanceof Xd&&this.mode_!==G_.POLYGON){this.sketchLine_||(this.sketchLine_=new nd(new cp(null)));const t=n.getLinearRing(0);(r=this.sketchLine_.getGeometry()).setFlatCoordinates(t.getLayout(),t.getFlatCoordinates())}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},j_.prototype.addToDrawing_=function(t){const e=t.coordinate,n=this.sketchFeature_.getGeometry();let i,o;this.mode_===G_.LINE_STRING?(this.finishCoordinate_=e.slice(),(o=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),this.geometryFunction_(o,n)):this.mode_===G_.POLYGON&&((o=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),i&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),i&&this.finishDrawing()},j_.prototype.removeLastPoint=function(){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry();let e,n;this.mode_===G_.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===G_.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),(n=this.sketchLine_.getGeometry()).setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()},j_.prototype.finishDrawing=function(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const n=t.getGeometry();this.mode_===G_.LINE_STRING?(e.pop(),this.geometryFunction_(e,n)):this.mode_===G_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,n),e=n.getCoordinates()),this.type_===Uu.MULTI_POINT?t.setGeometry(new v_([e])):this.type_===Uu.MULTI_LINE_STRING?t.setGeometry(new y_([e])):this.type_===Uu.MULTI_POLYGON&&t.setGeometry(new b_([e])),this.dispatchEvent(new V_("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},j_.prototype.abortDrawing_=function(){this.finishCoordinate_=null;const t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},j_.prototype.extend=function(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new V_("drawstart",this.sketchFeature_))},j_.prototype.shouldStopEvent=Ol,j_.prototype.updateSketchFeatures_=function(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},j_.prototype.updateState_=function(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)};const W_=function(t){Bl.call(this,"extentchanged"),this.extent=t};_l(W_,Bl);const U_=function(t){const e=t||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),yg.call(this,{handleDownEvent:K_,handleDragEvent:X_,handleEvent:Y_,handleUpEvent:Z_}),this.extentOverlay_=new C_({source:new N_({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:function(){const t=Jc();return function(e,n){return t[Uu.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new C_({source:new N_({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:function(){const t=Jc();return function(e,n){return t[Uu.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)};function Y_(t){return!(t instanceof jp&&(t.type!=Gp.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),_g.call(this,t),1))}function K_(t){const e=t.pixel,n=t.map,i=this.getExtent();let o=this.snapToVertex_(e,n);const r=function(t){let e=null,n=null;return t[0]==i[0]?e=i[2]:t[0]==i[2]&&(e=i[0]),t[1]==i[1]?n=i[3]:t[1]==i[3]&&(n=i[1]),null!==e&&null!==n?[e,n]:null};if(o&&i){const t=o[0]==i[0]||o[0]==i[2]?o[0]:null,e=o[1]==i[1]||o[1]==i[3]?o[1]:null;null!==t&&null!==e?this.pointerHandler_=q_(r(o)):null!==t?this.pointerHandler_=Q_(r([t,i[1]]),r([t,i[3]])):null!==e&&(this.pointerHandler_=Q_(r([i[0],e]),r([i[2],e])))}else o=n.getCoordinateFromPixel(e),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=q_(o);return!0}function X_(t){if(this.pointerHandler_){const e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0}function Z_(t){this.pointerHandler_=null;const e=this.getExtent();return e&&0!==wu(e)||this.setExtent(null),!1}function q_(t){return function(e){return ou([t,e])}}function Q_(t,e){return t[0]==e[0]?function(n){return ou([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return ou([t,[e[0],n[1]]])}:null}_l(U_,yg),U_.prototype.snapToVertex_=function(t,e){const n=e.getCoordinateFromPixel(t),i=function(t,e){return sp(n,t)-sp(n,e)},o=this.getExtent();if(o){const r=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(o);r.sort(i);const s=r[0];let a=$d(n,s);const l=e.getPixelFromCoordinate(a);if(rp(t,l)<=this.pixelTolerance_){const t=e.getPixelFromCoordinate(s[0]),n=e.getPixelFromCoordinate(s[1]),i=op(l,t),o=op(l,n),r=Math.sqrt(Math.min(i,o));return this.snappedToVertex_=r<=this.pixelTolerance_,this.snappedToVertex_&&(a=i>o?s[1]:s[0]),a}}return null},U_.prototype.handlePointerMove_=function(t){const e=t.pixel,n=t.map;let i=this.snapToVertex_(e,n);i||(i=n.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(i)},U_.prototype.createOrUpdateExtentFeature_=function(t){let e=this.extentFeature_;return e?e.setGeometry(t?Zd(t):void 0):(e=new nd(t?Zd(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},U_.prototype.createOrUpdatePointerFeature_=function(t){let e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new nd(new Dd(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},U_.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),yg.prototype.setMap.call(this,t)},U_.prototype.getExtent=function(){return this.extent_},U_.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new W_(this.extent_))};const J_={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},$_=function(t,e,n){Bl.call(this,t),this.features=e,this.mapBrowserEvent=n};_l($_,Bl);const ty=function(t){let e;if(yg.call(this,{handleDownEvent:oy,handleDragEvent:ry,handleEvent:ay,handleUpEvent:sy}),this.condition_=t.condition?t.condition:ug,this.defaultDeleteCondition_=function(t){return function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(t)&&og(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:tg,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new D_,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new C_({source:new N_({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:function(){const t=Jc();return function(e,n){return t[Uu.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,e=new tu(this.source_.getFeatures()),Pl(this.source_,"addfeature",this.handleSourceAdd_,this),Pl(this.source_,"removefeature",this.handleSourceRemove_,this)):e=t.features,!e)throw new Error("The modify interaction requires features or a source");this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),Pl(this.features_,"add",this.handleFeatureAdd_,this),Pl(this.features_,"remove",this.handleFeatureRemove_,this),this.lastPointerEvent_=null};_l(ty,yg);const ey=0,ny=1;function iy(t,e){return t.index-e.index}function oy(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);const e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;const n=this.vertexFeature_;if(n){const i=[],o=n.getGeometry().getCoordinates(),r=ou([o]),s=this.rBush_.getInExtent(r),a={};s.sort(iy);for(let n=0,l=s.length;n<l;++n){const r=s[n],l=r.segment;let u=ml(r.feature);const h=r.depth;if(h&&(u+="-"+h.join("-")),a[u]||(a[u]=new Array(2)),r.geometry.getType()===Uu.CIRCLE&&r.index===ny)ep(uy(e,r),o)&&!a[u][0]&&(this.dragSegments_.push([r,0]),a[u][0]=r);else if(ep(l[0],o)&&!a[u][0])this.dragSegments_.push([r,0]),a[u][0]=r;else if(ep(l[1],o)&&!a[u][1]){if((r.geometry.getType()===Uu.LINE_STRING||r.geometry.getType()===Uu.MULTI_LINE_STRING)&&a[u][0]&&0===a[u][0].index)continue;this.dragSegments_.push([r,1]),a[u][1]=r}else this.insertVertexCondition_(t)&&ml(l)in this.vertexSegments_&&!a[u][0]&&!a[u][1]&&i.push([r,o])}i.length&&this.willModifyFeatures_(t);for(let t=i.length-1;t>=0;--t)this.insertVertex_.apply(this,i[t])}return!!this.vertexFeature_}function ry(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);const e=t.coordinate;for(let n=0,i=this.dragSegments_.length;n<i;++n){const t=this.dragSegments_[n],i=t[0],o=i.depth,r=i.geometry;let s;const a=i.segment,l=t[1];for(;e.length<r.getStride();)e.push(a[l][e.length]);switch(r.getType()){case Uu.POINT:s=e,a[0]=a[1]=e;break;case Uu.MULTI_POINT:(s=r.getCoordinates())[i.index]=e,a[0]=a[1]=e;break;case Uu.LINE_STRING:(s=r.getCoordinates())[i.index+l]=e,a[l]=e;break;case Uu.MULTI_LINE_STRING:case Uu.POLYGON:(s=r.getCoordinates())[o[0]][i.index+l]=e,a[l]=e;break;case Uu.MULTI_POLYGON:(s=r.getCoordinates())[o[1]][o[0]][i.index+l]=e,a[l]=e;break;case Uu.CIRCLE:a[0]=a[1]=e,i.index===ey?(this.changingFeature_=!0,r.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,r.setRadius(rp(r.getCenter(),e)),this.changingFeature_=!1)}s&&this.setGeometryCoordinates_(r,s)}this.createOrUpdateVertexFeature_(e)}function sy(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const t=this.dragSegments_[e][0],n=t.geometry;if(n.getType()===Uu.CIRCLE){const e=n.getCenter(),i=t.featureSegments[0],o=t.featureSegments[1];i.segment[0]=i.segment[1]=e,o.segment[0]=o.segment[1]=e,this.rBush_.update(fu(e),i),this.rBush_.update(n.getExtent(),o)}else this.rBush_.update(ou(t.segment),t)}return this.modified_&&(this.dispatchEvent(new $_(J_.MODIFYEND,this.features_,t)),this.modified_=!1),!1}function ay(t){if(!(t instanceof jp))return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=Gp.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=Gp.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==Gp.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),_g.call(this,t)&&!e}function ly(t,e){const n=e.geometry;if(n.getType()===Uu.CIRCLE){const i=n;if(e.index===ny){const e=op(i.getCenter(),t),n=Math.sqrt(e)-i.getRadius();return n*n}}return sp(t,e.segment)}function uy(t,e){const n=e.geometry;return n.getType()===Uu.CIRCLE&&e.index===ny?n.getClosestPoint(t):$d(t,e.segment)}ty.prototype.addFeature_=function(t){const e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),Pl(t,Wl.CHANGE,this.handleFeatureChange_,this)},ty.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new $_(J_.MODIFYSTART,this.features_,t)))},ty.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),kl(t,Wl.CHANGE,this.handleFeatureChange_,this)},ty.prototype.removeFeatureSegmentData_=function(t){const e=this.rBush_,n=[];e.forEach(function(e){t===e.feature&&n.push(e)});for(let i=n.length-1;i>=0;--i)e.remove(n[i])},ty.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),yg.prototype.setActive.call(this,t)},ty.prototype.setMap=function(t){this.overlay_.setMap(t),yg.prototype.setMap.call(this,t)},ty.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},ty.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},ty.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},ty.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}},ty.prototype.handleFeatureRemove_=function(t){this.removeFeature_(t.element)},ty.prototype.writePointGeometry_=function(t,e){const n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},ty.prototype.writeMultiPointGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i],r={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),r)}},ty.prototype.writeLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length-1;i<o;++i){const o=n.slice(i,i+2),r={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(ou(o),r)}},ty.prototype.writeMultiLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i];for(let n=0,r=o.length-1;n<r;++n){const r=o.slice(n,n+2),s={feature:t,geometry:e,depth:[i],index:n,segment:r};this.rBush_.insert(ou(r),s)}}},ty.prototype.writePolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i];for(let n=0,r=o.length-1;n<r;++n){const r=o.slice(n,n+2),s={feature:t,geometry:e,depth:[i],index:n,segment:r};this.rBush_.insert(ou(r),s)}}},ty.prototype.writeMultiPolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i];for(let n=0,r=o.length;n<r;++n){const r=o[n];for(let o=0,s=r.length-1;o<s;++o){const s=r.slice(o,o+2),a={feature:t,geometry:e,depth:[n,i],index:o,segment:s};this.rBush_.insert(ou(s),a)}}}},ty.prototype.writeCircleGeometry_=function(t,e){const n=e.getCenter(),i={feature:t,geometry:e,index:ey,segment:[n,n]},o={feature:t,geometry:e,index:ny,segment:[n,n]};i.featureSegments=o.featureSegments=[i,o],this.rBush_.insert(fu(n),i),this.rBush_.insert(e.getExtent(),o)},ty.prototype.writeGeometryCollectionGeometry_=function(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i)this.SEGMENT_WRITERS_[n[i].getType()].call(this,t,n[i])},ty.prototype.createOrUpdateVertexFeature_=function(t){let e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new nd(new Dd(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},ty.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},ty.prototype.handlePointerAtPixel_=function(t,e){const n=e.getCoordinateFromPixel(t),i=function(t,e){return ly(n,t)-ly(n,e)},o=ru(fu(n),e.getView().getResolution()*this.pixelTolerance_),r=this.rBush_.getInExtent(o);if(r.length>0){r.sort(i);const o=r[0],s=o.segment;let a=uy(n,o);const l=e.getPixelFromCoordinate(a);let u=rp(t,l);if(u<=this.pixelTolerance_){const t={};if(o.geometry.getType()===Uu.CIRCLE&&o.index===ny)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(a);else{const n=e.getPixelFromCoordinate(s[0]),i=e.getPixelFromCoordinate(s[1]),o=op(l,n),h=op(l,i);u=Math.sqrt(Math.min(o,h)),this.snappedToVertex_=u<=this.pixelTolerance_,this.snappedToVertex_&&(a=o>h?s[1]:s[0]),this.createOrUpdateVertexFeature_(a);for(let e=1,a=r.length;e<a;++e){const n=r[e].segment;if(!(ep(s[0],n[0])&&ep(s[1],n[1])||ep(s[0],n[1])&&ep(s[1],n[0])))break;t[ml(n)]=!0}}return t[ml(s)]=!0,void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},ty.prototype.insertVertex_=function(t,e){const n=t.segment,i=t.feature,o=t.geometry,r=t.depth,s=t.index;let a;for(;e.length<o.getStride();)e.push(0);switch(o.getType()){case Uu.MULTI_LINE_STRING:case Uu.POLYGON:(a=o.getCoordinates())[r[0]].splice(s+1,0,e);break;case Uu.MULTI_POLYGON:(a=o.getCoordinates())[r[1]][r[0]].splice(s+1,0,e);break;case Uu.LINE_STRING:(a=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(o,s,r,1);const u={segment:[n[0],e],feature:i,geometry:o,depth:r,index:s};l.insert(ou(u.segment),u),this.dragSegments_.push([u,1]);const h={segment:[e,n[1]],feature:i,geometry:o,depth:r,index:s+1};l.insert(ou(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0},ty.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Gp.POINTERDRAG){const t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new $_(J_.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},ty.prototype.removeVertex_=function(){const t=this.dragSegments_,e={};let n,i,o,r,s,a,l,u,h,c,d,p=!1;for(s=t.length-1;s>=0;--s)d=ml((c=(o=t[s])[0]).feature),c.depth&&(d+="-"+c.depth.join("-")),d in e||(e[d]={}),0===o[1]?(e[d].right=c,e[d].index=c.index):1==o[1]&&(e[d].left=c,e[d].index=c.index+1);for(d in e){switch(h=e[d].right,u=(a=e[d].index)-1,c=void 0!==(l=e[d].left)?l:h,u<0&&(u=0),n=i=(r=c.geometry).getCoordinates(),p=!1,r.getType()){case Uu.MULTI_LINE_STRING:i[c.depth[0]].length>2&&(i[c.depth[0]].splice(a,1),p=!0);break;case Uu.LINE_STRING:i.length>2&&(i.splice(a,1),p=!0);break;case Uu.MULTI_POLYGON:n=n[c.depth[1]];case Uu.POLYGON:(n=n[c.depth[0]]).length>4&&(a==n.length-1&&(a=0),n.splice(a,1),p=!0,0===a&&(n.pop(),n.push(n[0]),u=n.length-1))}if(p){this.setGeometryCoordinates_(r,i);const e=[];if(void 0!==l&&(this.rBush_.remove(l),e.push(l.segment[0])),void 0!==h&&(this.rBush_.remove(h),e.push(h.segment[1])),void 0!==l&&void 0!==h){const t={depth:c.depth,feature:c.feature,geometry:c.geometry,index:u,segment:e};this.rBush_.insert(ou(t.segment),t)}this.updateSegmentIndices_(r,a,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return p},ty.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},ty.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(o){o.geometry===t&&(void 0===n||void 0===o.depth||ld(o.depth,n))&&o.index>e&&(o.index+=i)})};const hy={SELECT:"select"},cy=function(t,e,n,i){Bl.call(this,t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i};_l(cy,Bl);const dy=function(t){Zf.call(this,{handleEvent:py});const e=t||{};this.condition_=e.condition?e.condition:og,this.addCondition_=e.addCondition?e.addCondition:ng,this.removeCondition_=e.removeCondition?e.removeCondition:ng,this.toggleCondition_=e.toggleCondition?e.toggleCondition:sg,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:Dl,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0;const n=new C_({source:new N_({useSpatialIndex:!1,features:e.features,wrapX:e.wrapX}),style:e.style?e.style:function(){const t=Jc();return ad(t[Uu.POLYGON],t[Uu.LINE_STRING]),ad(t[Uu.GEOMETRY_COLLECTION],t[Uu.LINE_STRING]),function(e,n){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0});let i;if(this.featureOverlay_=n,e.layers)if("function"==typeof e.layers)i=e.layers;else{const t=e.layers;i=function(e){return od(t,e)}}else i=Dl;this.layerFilter_=i,this.featureLayerAssociation_={};const o=this.featureOverlay_.getSource().getFeaturesCollection();Pl(o,"add",this.addFeature_,this),Pl(o,"remove",this.removeFeature_,this)};function py(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),o=!e&&!n&&!i,r=t.map,s=this.featureOverlay_.getSource().getFeaturesCollection(),a=[],l=[];if(o){wl(this.featureLayerAssociation_),r.forEachFeatureAtPixel(t.pixel,(function(t,e){if(this.filter_(t,e))return l.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=s.getLength()-1;t>=0;--t){const e=s.item(t),n=l.indexOf(e);n>-1?l.splice(n,1):(s.remove(e),a.push(e))}0!==l.length&&s.extend(l)}else{r.forEachFeatureAtPixel(t.pixel,(function(t,o){if(this.filter_(t,o))return!e&&!i||od(s.getArray(),t)?(n||i)&&od(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(l.push(t),this.addFeatureLayerAssociation_(t,o)),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)s.remove(a[t]);s.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new cy(hy.SELECT,l,a,t)),ig(t)}_l(dy,Zf),dy.prototype.addFeatureLayerAssociation_=function(t,e){const n=ml(t);this.featureLayerAssociation_[n]=e},dy.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},dy.prototype.getHitTolerance=function(){return this.hitTolerance_},dy.prototype.getLayer=function(t){const e=ml(t);return this.featureLayerAssociation_[e]},dy.prototype.setHitTolerance=function(t){this.hitTolerance_=t},dy.prototype.setMap=function(t){const e=this.getMap(),n=this.featureOverlay_.getSource().getFeaturesCollection();e&&n.forEach(e.unskipFeature.bind(e)),Zf.prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&n.forEach(t.skipFeature.bind(t))},dy.prototype.addFeature_=function(t){const e=this.getMap();e&&e.skipFeature(t.element)},dy.prototype.removeFeature_=function(t){const e=this.getMap();e&&e.unskipFeature(t.element)},dy.prototype.removeFeatureLayerAssociation_=function(t){const e=ml(t);delete this.featureLayerAssociation_[e]};const fy=function(t){yg.call(this,{handleEvent:gy,handleDownEvent:Dl,handleUpEvent:_y});const e=t||{};this.source_=e.source?e.source:null,this.vertex_=void 0===e.vertex||e.vertex,this.edge_=void 0===e.edge||e.edge,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.sortByDistance_=(function(t,e){return sp(this.pixelCoordinate_,t.segment)-sp(this.pixelCoordinate_,e.segment)}).bind(this),this.rBush_=new D_,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}};function gy(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),_g.call(this,t)}function _y(t){const e=Cl(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}_l(fy,yg),fy.prototype.addFeature=function(t,e){const n=void 0===e||e,i=ml(t),o=t.getGeometry();if(o){const e=this.SEGMENT_WRITERS_[o.getType()];e&&(this.indexedFeaturesExtents_[i]=o.getExtent([1/0,1/0,-1/0,-1/0]),e.call(this,t,o))}n&&(this.featureChangeListenerKeys_[i]=Pl(t,Wl.CHANGE,this.handleFeatureChange_,this))},fy.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},fy.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},fy.prototype.getFeatures_=function(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},fy.prototype.handleFeatureAdd_=function(t){let e;t instanceof O_?e=t.feature:t instanceof Jl&&(e=t.element),this.addFeature(e)},fy.prototype.handleFeatureRemove_=function(t){let e;t instanceof O_?e=t.feature:t instanceof Jl&&(e=t.element),this.removeFeature(e)},fy.prototype.handleFeatureChange_=function(t){const e=t.target;if(this.handlingDownUpSequence){const t=ml(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)},fy.prototype.removeFeature=function(t,e){const n=void 0===e||e,i=ml(t),o=this.indexedFeaturesExtents_[i];if(o){const e=this.rBush_,n=[];e.forEachInExtent(o,function(e){t===e.feature&&n.push(e)});for(let t=n.length-1;t>=0;--t)e.remove(n[t])}n&&(Ll(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])},fy.prototype.setMap=function(t){const e=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();e&&(n.forEach(Ll),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),yg.prototype.setMap.call(this,t),t&&(this.features_?n.push(Pl(this.features_,"add",this.handleFeatureAdd_,this),Pl(this.features_,"remove",this.handleFeatureRemove_,this)):this.source_&&n.push(Pl(this.source_,"addfeature",this.handleFeatureAdd_,this),Pl(this.source_,"removefeature",this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},fy.prototype.shouldStopEvent=Ol,fy.prototype.snapTo=function(t,e,n){const i=ou([n.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),n.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]);let o=this.rBush_.getInExtent(i);this.vertex_&&!this.edge_&&(o=o.filter(function(t){return t.feature.getGeometry().getType()!==Uu.CIRCLE}));let r,s,a,l,u,h=!1,c=!1,d=null,p=null;if(o.length>0){this.pixelCoordinate_=e,o.sort(this.sortByDistance_);const i=o[0].segment,f=o[0].feature.getGeometry().getType()===Uu.CIRCLE;this.vertex_&&!this.edge_?(s=n.getPixelFromCoordinate(i[0]),a=n.getPixelFromCoordinate(i[1]),l=op(t,s),u=op(t,a),(h=(r=Math.sqrt(Math.min(l,u)))<=this.pixelTolerance_)&&(c=!0,p=n.getPixelFromCoordinate(d=l>u?i[1]:i[0]))):this.edge_&&(d=f?function(t,e){const n=e.getRadius(),i=e.getCenter(),o=i[0],r=i[1];let s=t[0]-o;const a=t[1]-r;0===s&&0===a&&(s=1);const l=Math.sqrt(s*s+a*a);return[o+n*s/l,r+n*a/l]}(e,o[0].feature.getGeometry()):$d(e,i),rp(t,p=n.getPixelFromCoordinate(d))<=this.pixelTolerance_&&(c=!0,this.vertex_&&!f&&(s=n.getPixelFromCoordinate(i[0]),a=n.getPixelFromCoordinate(i[1]),l=op(p,s),u=op(p,a),(h=(r=Math.sqrt(Math.min(l,u)))<=this.pixelTolerance_)&&(p=n.getPixelFromCoordinate(d=l>u?i[1]:i[0]))))),c&&(p=[Math.round(p[0]),Math.round(p[1])])}return{snapped:c,vertex:d,vertexPixel:p}},fy.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},fy.prototype.writeCircleGeometry_=function(t,e){const n=function(t,e,n){const i=e||32,o=t.getStride(),r=t.getLayout(),s=new Kd(null,r),a=o*(i+1),l=new Array(a);for(let u=0;u<a;u++)l[u]=0;return s.setFlatCoordinates(r,l,[l.length]),function(t,e,n,i){const o=t.getFlatCoordinates(),r=t.getLayout(),s=t.getStride(),a=t.getEnds(),l=o.length/s-1,u=i||0;for(let h=0;h<=l;++h){const t=h*s,i=u+2*Hu(h,l)*Math.PI/l;o[t]=e[0]+n*Math.cos(i),o[t+1]=e[1]+n*Math.sin(i)}t.setFlatCoordinates(r,o,a)}(s,t.getCenter(),t.getRadius(),n),s}(e).getCoordinates()[0];for(let i=0,o=n.length-1;i<o;++i){const e=n.slice(i,i+2),o={feature:t,segment:e};this.rBush_.insert(ou(e),o)}},fy.prototype.writeGeometryCollectionGeometry_=function(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i){const e=this.SEGMENT_WRITERS_[n[i].getType()];e&&e.call(this,t,n[i])}},fy.prototype.writeLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length-1;i<o;++i){const e=n.slice(i,i+2),o={feature:t,segment:e};this.rBush_.insert(ou(e),o)}},fy.prototype.writeMultiLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const e=n[i];for(let n=0,i=e.length-1;n<i;++n){const i=e.slice(n,n+2),o={feature:t,segment:i};this.rBush_.insert(ou(i),o)}}},fy.prototype.writeMultiPointGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i],r={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),r)}},fy.prototype.writeMultiPolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const e=n[i];for(let n=0,i=e.length;n<i;++n){const i=e[n];for(let e=0,n=i.length-1;e<n;++e){const n=i.slice(e,e+2),o={feature:t,segment:n};this.rBush_.insert(ou(n),o)}}}},fy.prototype.writePointGeometry_=function(t,e){const n=e.getCoordinates(),i={feature:t,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},fy.prototype.writePolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const e=n[i];for(let n=0,i=e.length-1;n<i;++n){const i=e.slice(n,n+2),o={feature:t,segment:i};this.rBush_.insert(ou(i),o)}}};const yy={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},my=function(t,e,n){Bl.call(this,t),this.features=e,this.coordinate=n};_l(my,Bl);const vy=function(t){yg.call(this,{handleDownEvent:xy,handleDragEvent:wy,handleMoveEvent:Cy,handleUpEvent:by});const e=t||{};let n;if(this.lastCoordinate_=null,this.features_=void 0!==e.features?e.features:null,e.layers)if("function"==typeof e.layers)n=e.layers;else{const t=e.layers;n=function(e){return od(t,e)}}else n=Dl;this.layerFilter_=n,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.lastFeature_=null,Pl(this,ql("active"),this.handleActiveChanged_,this)};function xy(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,Cy.call(this,t);const e=this.features_||new tu([this.lastFeature_]);return this.dispatchEvent(new my(yy.TRANSLATESTART,e,t.coordinate)),!0}return!1}function by(t){if(this.lastCoordinate_){this.lastCoordinate_=null,Cy.call(this,t);const e=this.features_||new tu([this.lastFeature_]);return this.dispatchEvent(new my(yy.TRANSLATEEND,e,t.coordinate)),!0}return!1}function wy(t){if(this.lastCoordinate_){const e=t.coordinate,n=e[0]-this.lastCoordinate_[0],i=e[1]-this.lastCoordinate_[1],o=this.features_||new tu([this.lastFeature_]);o.forEach(function(t){const e=t.getGeometry();e.translate(n,i),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new my(yy.TRANSLATING,o,e))}}function Cy(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}function Ey(t){const e=t||{},n=new tu,i=new Fp(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Ig),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Jf({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new wg({kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new e_),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new s_({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Hg),n.push(new Yg({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new qg({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Vg({duration:e.zoomDuration})),n}_l(vy,yg),vy.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,(function(t){if(!this.features_||od(this.features_.getArray(),t))return t}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},vy.prototype.getHitTolerance=function(){return this.hitTolerance_},vy.prototype.setHitTolerance=function(t){this.hitTolerance_=t},vy.prototype.setMap=function(t){const e=this.getMap();yg.prototype.setMap.call(this,t),this.updateState_(e)},vy.prototype.handleActiveChanged_=function(){this.updateState_(null)},vy.prototype.updateState_=function(t){let e=this.getMap();const n=this.getActive();e&&n||!(e=e||t)||e.getViewport().classList.remove("ol-grab","ol-grabbing")};const Ty=function(t,e,n,i,o){Bl.call(this,t),this.vectorContext=e,this.frameState=n,this.context=i,this.glContext=o};_l(Ty,Bl);var Sy=Ty;const Iy=function(){};Iy.prototype.drawCustom=function(t,e,n){},Iy.prototype.drawGeometry=function(t){},Iy.prototype.setStyle=function(t){},Iy.prototype.drawCircle=function(t,e){},Iy.prototype.drawFeature=function(t,e){},Iy.prototype.drawGeometryCollection=function(t,e){},Iy.prototype.drawLineString=function(t,e){},Iy.prototype.drawMultiLineString=function(t,e){},Iy.prototype.drawMultiPoint=function(t,e){},Iy.prototype.drawMultiPolygon=function(t,e){},Iy.prototype.drawPoint=function(t,e){},Iy.prototype.drawPolygon=function(t,e){},Iy.prototype.drawText=function(t,e){},Iy.prototype.setFillStrokeStyle=function(t,e){},Iy.prototype.setImageStyle=function(t,e){},Iy.prototype.setTextStyle=function(t,e){};var Ry=Iy;const Py=function(t,e,n,i,o){Ry.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]};_l(Py,Ry),Py.prototype.drawImages_=function(t,e,n,i){if(!this.image_)return;const o=Ou(t,e,n,2,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,h=o.length;u<h;u+=2){let t=o[u]-this.imageAnchorX_,e=o[u+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(t=Math.round(t),e=Math.round(e)),0!==l||1!=this.imageScale_){const n=t+this.imageAnchorX_,i=e+this.imageAnchorY_;Nh(s,n,i,this.imageScale_,this.imageScale_,l,-n,-i),r.setTransform.apply(r,s)}r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||r.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(r.globalAlpha=a)},Py.prototype.drawText_=function(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Ou(t,e,n,i,this.transform_,this.pixelCoordinates_),r=this.context_;let s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const t=o[e]+this.textOffsetX_,n=o[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){const e=Nh(this.tmpLocalTransform_,t,n,this.textScale_,this.textScale_,s,-t,-n);r.setTransform.apply(r,e)}this.textStrokeState_&&r.strokeText(this.text_,t,n),this.textFillState_&&r.fillText(this.text_,t,n)}0===s&&1==this.textScale_||r.setTransform(1,0,0,1,0,0)},Py.prototype.moveToLineTo_=function(t,e,n,i,o){const r=this.context_,s=Ou(t,e,n,i,this.transform_,this.pixelCoordinates_);r.moveTo(s[0],s[1]);let a=s.length;o&&(a-=2);for(let l=2;l<a;l+=2)r.lineTo(s[l],s[l+1]);return o&&r.closePath(),n},Py.prototype.drawRings_=function(t,e,n,i){for(let o=0,r=n.length;o<r;++o)e=this.moveToLineTo_(t,e,n[o],i,!0);return e},Py.prototype.drawCircle=function(t){if(Lu(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,n){const i=t.getFlatCoordinates();if(i){const o=t.getStride();return Ou(i,0,i.length,o,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],o=Math.sqrt(n*n+i*i),r=this.context_;r.beginPath(),r.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},Py.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},Py.prototype.drawGeometry=function(t){switch(t.getType()){case Uu.POINT:this.drawPoint(t);break;case Uu.LINE_STRING:this.drawLineString(t);break;case Uu.POLYGON:this.drawPolygon(t);break;case Uu.MULTI_POINT:this.drawMultiPoint(t);break;case Uu.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Uu.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Uu.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Uu.CIRCLE:this.drawCircle(t)}},Py.prototype.drawFeature=function(t,e){const n=e.getGeometryFunction()(t);n&&Lu(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},Py.prototype.drawGeometryCollection=function(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},Py.prototype.drawPoint=function(t){const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},Py.prototype.drawMultiPoint=function(t){const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},Py.prototype.drawLineString=function(t){if(Lu(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}},Py.prototype.drawMultiLineString=function(t){const e=t.getExtent();if(Lu(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const o=t.getEnds(),r=t.getStride();e.beginPath();for(let t=0,s=o.length;t<s;++t)i=this.moveToLineTo_(n,i,o[t],r,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}},Py.prototype.drawPolygon=function(t){if(Lu(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}},Py.prototype.drawMultiPolygon=function(t){if(Lu(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const o=t.getEndss(),r=t.getStride();e.beginPath();for(let t=0,s=o.length;t<s;++t)i=this.drawRings_(n,i,o[t],r);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}},Py.prototype.setContextFillState_=function(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},Py.prototype.setContextStrokeState_=function(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),fc&&(ld(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,fc&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},Py.prototype.setContextTextState_=function(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:"center";n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=i&&(n.textAlign=e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},Py.prototype.setFillStrokeStyle=function(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Zh(e||Ec)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),o=e.getLineDashOffset(),r=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit();this.strokeState_={lineCap:void 0!==n?n:"round",lineDash:i||Tc,lineDashOffset:o||0,lineJoin:void 0!==r?r:"round",lineWidth:this.pixelRatio_*(void 0!==s?s:1),miterLimit:void 0!==a?a:10,strokeStyle:Zh(t||Sc)}}else this.strokeState_=null},Py.prototype.setImageStyle=function(t){if(t){const e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),o=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=o[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=o[0]}else this.image_=null},Py.prototype.setTextStyle=function(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Zh(t||Ec)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),o=n.getLineDashOffset(),r=n.getLineJoin(),s=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:"round",lineDash:i||Tc,lineDashOffset:o||0,lineJoin:void 0!==r?r:"round",lineWidth:void 0!==s?s:1,miterLimit:void 0!==a?a:10,strokeStyle:Zh(t||Sc)}}else this.textStrokeState_=null;const i=t.getFont(),o=t.getOffsetX(),r=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScale(),u=t.getText(),h=t.getTextAlign(),c=t.getTextBaseline();this.textState_={font:void 0!==i?i:"10px sans-serif",textAlign:void 0!==h?h:"center",textBaseline:void 0!==c?c:"middle"},this.text_=void 0!==u?u:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=this.pixelRatio_*(void 0!==l?l:1)}else this.text_=""};var My=Py;const ky=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Ly(t,e,n){return e+":"+t+":"+(n?Wh(n):"null")}ky.prototype.clear=function(){this.cache_={},this.cacheSize_=0},ky.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){let t=0;for(const e in this.cache_)0!=(3&t++)||this.cache_[e].hasListener()||(delete this.cache_[e],--this.cacheSize_)}},ky.prototype.get=function(t,e,n){const i=Ly(t,e,n);return i in this.cache_?this.cache_[i]:null},ky.prototype.set=function(t,e,n,i){const o=Ly(t,e,n);this.cache_[o]=i,++this.cacheSize_},ky.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};const Fy=new ky,Dy=function(t){Gl.call(this),this.map_=t,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]};function Oy(t,e){Fy.expire()}function Ay(t,e){return t.zIndex-e.zIndex}_l(Dy,Gl),Dy.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},Dy.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_},Dy.prototype.calculateMatrices2D=function(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Nh(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Gh(Lh(i,n))},Dy.prototype.removeLayerRenderers=function(){for(const t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},Dy.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s){let a;const l=e.viewState,u=l.resolution;function h(t,n){const r=ml(t).toString(),s=e.layerStates[ml(n)].managed;if(!(r in e.skippedFeatureUids)||s)return i.call(o,t,s?n:null)}const c=l.projection;let d=t;if(c.canWrapX()){const e=c.getExtent(),n=ku(e),i=t[0];(i<e[0]||i>e[2])&&(d=[i+n*Math.ceil((e[0]-i)/n),t[1]])}const p=e.layerStatesArray;let f;for(f=p.length-1;f>=0;--f){const i=p[f],l=i.layer;if(Lf(i,u)&&r.call(s,l)){const i=this.getLayerRenderer(l);if(l.getSource()&&(a=i.forEachFeatureAtCoordinate(l.getSource().getWrapX()?d:t,e,n,h,o)),a)return a}}},Dy.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,s){},Dy.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,Dl,this,i,o)},Dy.prototype.getLayerRenderer=function(t){const e=ml(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];{let n;for(let e=0,i=this.layerRendererConstructors_.length;e<i;++e){const i=this.layerRendererConstructors_[e];if(i.handles(t)){n=i.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=Pl(n,Wl.CHANGE,this.handleLayerRendererChange_,this),n}},Dy.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},Dy.prototype.getLayerRenderers=function(){return this.layerRenderers_},Dy.prototype.getMap=function(){return this.map_},Dy.prototype.handleLayerRendererChange_=function(){this.map_.render()},Dy.prototype.removeLayerRendererByKey_=function(t){const e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Ll(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},Dy.prototype.renderFrame=Al,Dy.prototype.removeUnusedLayerRenderers_=function(t,e){for(const n in this.layerRenderers_)e&&n in e.layerStates||this.removeLayerRendererByKey_(n).dispose()},Dy.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Oy)},Dy.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(const e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))};var Ny=Dy;const Gy=[],Vy=function(t){Ny.call(this,t);const e=t.getViewport();this.context_=qh(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className="ol-unselectable",e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]};_l(Vy,Ny),Vy.prototype.dispatchComposeEvent_=function(t,e){const n=this.getMap(),i=this.context_;if(n.hasListener(t)){const o=e.extent,r=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),l=new My(i,r,o,a,s),u=new Sy(t,l,e,i,null);n.dispatchEvent(u)}},Vy.prototype.getTransform=function(t){const e=t.viewState,n=t.pixelRatio/e.resolution;return Nh(this.transform_,this.canvas_.width/2,this.canvas_.height/2,n,-n,-e.rotation,-e.center[0],-e.center[1])},Vy.prototype.renderFrame=function(t){if(!t)return void(this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1));const e=this.context_,n=t.pixelRatio,i=Math.round(t.size[0]*n),o=Math.round(t.size[1]*n);this.canvas_.width!=i||this.canvas_.height!=o?(this.canvas_.width=i,this.canvas_.height=o):e.clearRect(0,0,i,o);const r=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_("precompose",t);const s=t.layerStatesArray;ud(s,Ay),r&&(e.save(),Ac(e,r,i/2,o/2));const a=t.viewState.resolution;let l,u,h,c,d;for(l=0,u=s.length;l<u;++l)c=this.getLayerRenderer(h=(d=s[l]).layer),Lf(d,a)&&"ready"==d.sourceState&&c.prepareFrame(t,d)&&c.composeFrame(t,d,e);r&&e.restore(),this.dispatchComposeEvent_("postcompose",t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},Vy.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,s){let a;const l=e.viewState.resolution,u=e.layerStatesArray,h=u.length,c=Fh(e.pixelToCoordinateTransform,t.slice());let d;for(d=h-1;d>=0;--d){const t=u[d],h=t.layer;if(Lf(t,l)&&r.call(s,h)&&(a=this.getLayerRenderer(h).forEachLayerAtCoordinate(c,e,n,i,o)))return a}},Vy.prototype.registerLayerRenderers=function(t){Ny.prototype.registerLayerRenderers.call(this,t);for(let e=0,n=t.length;e<n;++e){const n=t[e];od(Gy,n)||Gy.push(n)}};var jy=Vy;const By=function(t){Yl.call(this),this.layer_=t};_l(By,Yl),By.prototype.forEachFeatureAtCoordinate=Al,By.prototype.hasFeatureAtCoordinate=Ol,By.prototype.createLoadedTileFinder=function(t,e,n){return function(i,o){return t.forEachLoadedTile(e,i,o,function(t){n[i]||(n[i]={}),n[i][t.tileCoord.toString()]=t})}},By.prototype.getLayer=function(){return this.layer_},By.prototype.handleImageChange_=function(t){t.target.getState()===vc.LOADED&&this.renderIfReadyAndVisible()},By.prototype.loadImage=function(t){let e=t.getState();return e!=vc.LOADED&&e!=vc.ERROR&&Pl(t,Wl.CHANGE,this.handleImageChange_,this),e==vc.IDLE&&(t.load(),e=t.getState()),e==vc.LOADED},By.prototype.renderIfReadyAndVisible=function(){const t=this.getLayer();t.getVisible()&&"ready"==t.getSourceState()&&this.changed()},By.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){const n=(function(t,e,n){const i=ml(t).toString();i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}).bind(null,e);t.postRenderFunctions.push(n)}},By.prototype.updateUsedTiles=function(t,e,n,i){const o=ml(e).toString(),r=n.toString();o in t?r in t[o]?t[o][r].extend(i):t[o][r]=i:(t[o]={},t[o][r]=i)},By.prototype.manageTilePyramid=function(t,e,n,i,o,r,s,a,l,u){const h=ml(e).toString();h in t.wantedTiles||(t.wantedTiles[h]={});const c=t.wantedTiles[h],d=t.tileQueue;let p,f,g,_,y,m;for(m=n.getMinZoom();m<=s;++m)for(f=n.getTileRangeForExtentAndZ(r,m,f),g=n.getResolution(m),_=f.minX;_<=f.maxX;++_)for(y=f.minY;y<=f.maxY;++y)s-m<=a?(0==(p=e.getTile(m,_,y,i,o)).getState()&&(c[p.getKey()]=!0,d.isKeyQueued(p.getKey())||d.enqueue([p,h,n.getTileCoordCenter(p.tileCoord),g])),void 0!==l&&l.call(u,p)):e.useTile(m,_,y,o)};var zy=By;const Hy=function(t){zy.call(this,t),this.transform_=[1,0,0,1,0,0]};_l(Hy,zy),Hy.prototype.clip=function(t,e,n){const i=e.pixelRatio,o=e.size[0]*i,r=e.size[1]*i,s=e.viewState.rotation,a=Pu(n),l=Mu(n),u=Eu(n),h=Cu(n);Fh(e.coordinateToPixelTransform,a),Fh(e.coordinateToPixelTransform,l),Fh(e.coordinateToPixelTransform,u),Fh(e.coordinateToPixelTransform,h),t.save(),Ac(t,-s,o/2,r/2),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(l[0]*i,l[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(h[0]*i,h[1]*i),t.clip(),Ac(t,s,o/2,r/2)},Hy.prototype.dispatchComposeEvent_=function(t,e,n,i){const o=this.getLayer();if(o.hasListener(t)){const r=n.size[0]*n.pixelRatio,s=n.size[1]*n.pixelRatio,a=n.viewState.rotation;Ac(e,-a,r/2,s/2);const l=void 0!==i?i:this.getTransform(n,0),u=new My(e,n.pixelRatio,n.extent,l,n.viewState.rotation),h=new Sy(t,u,n,e,null);o.dispatchEvent(h),Ac(e,a,r/2,s/2)}},Hy.prototype.forEachLayerAtCoordinate=function(t,e,n,i,o){return this.forEachFeatureAtCoordinate(t,e,n,Dl,this)?i.call(o,this.getLayer(),null):void 0},Hy.prototype.postCompose=function(t,e,n,i){this.dispatchComposeEvent_("postcompose",t,e,i)},Hy.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_("precompose",t,e,n)},Hy.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_("render",t,e,n)},Hy.prototype.getTransform=function(t,e){const n=t.viewState,i=t.pixelRatio,o=i/n.resolution;return Nh(this.transform_,i*t.size[0]/2,i*t.size[1]/2,o,-o,-n.rotation,-n.center[0]+e,-n.center[1])},Hy.prototype.composeFrame=function(t,e,n){},Hy.prototype.prepareFrame=function(t,e){};var Wy=Hy;const Uy=function(t){Wy.call(this,t),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null};_l(Uy,Wy),Uy.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);const i=this.getImage();if(i){const o=e.extent,r=void 0!==o&&!uu(o,t.extent)&&Lu(o,t.extent);r&&this.clip(n,t,o);const s=this.getImageTransform(),a=n.globalAlpha;n.globalAlpha=e.opacity;const l=s[5],u=i.width*s[0],h=i.height*s[3];n.drawImage(i,0,0,+i.width,+i.height,Math.round(s[4]),Math.round(l),Math.round(u),Math.round(h)),n.globalAlpha=a,r&&n.restore()}this.postCompose(n,t,e)},Uy.prototype.getImage=function(){},Uy.prototype.getImageTransform=function(){},Uy.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){const r=this.getLayer();return r.getSource().forEachFeatureAtCoordinate(t,e.viewState.resolution,e.viewState.rotation,n,e.skippedFeatureUids,function(t){return i.call(o,t,r)})},Uy.prototype.forEachLayerAtCoordinate=function(t,e,n,i,o){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==Al)return Wy.prototype.forEachLayerAtCoordinate.apply(this,arguments);{const n=Fh(this.coordinateToCanvasPixelTransform,t.slice());ip(n,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=qh(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),n[0],n[1],1,1,0,0,1,1);const r=this.hitCanvasContext_.getImageData(0,0,1,1).data;return r[3]>0?i.call(o,this.getLayer(),r):void 0}}};var Yy=Uy;const Ky=function(t){if(Yy.call(this,t),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,"VECTOR"===t.getType())for(let e=0,n=Gy.length;e<n;++e){const n=Gy[e];if(n!==Ky&&n.handles(t)){this.vectorRenderer_=new n(t);break}}};_l(Ky,Yy),Ky.handles=function(t){return"IMAGE"===t.getType()||"VECTOR"===t.getType()&&"image"===t.getRenderMode()},Ky.create=function(t,e){return new Ky(e)},Ky.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),Yy.prototype.disposeInternal.call(this)},Ky.prototype.getImage=function(){return this.image_?this.image_.getImage():null},Ky.prototype.getImageTransform=function(){return this.imageTransform_},Ky.prototype.prepareFrame=function(t,e){const n=t.pixelRatio,i=t.size,o=t.viewState,r=o.center,s=o.resolution;let a;const l=this.getLayer().getSource(),u=t.viewHints,h=this.vectorRenderer_;let c=t.extent;if(h||void 0===e.extent||(c=Ru(c,e.extent)),!u[vf.ANIMATING]&&!u[vf.INTERACTING]&&!Fu(c)){let i=o.projection,r=this.skippedFeatures_;if(h){const i=h.context,o=bl({},t,{size:[ku(c)/s,Iu(c)/s],viewState:bl({},t.viewState,{rotation:0})}),l=Object.keys(o.skippedFeatureUids).sort();a=new wp(c,s,n,i.canvas,function(t){!h.prepareFrame(o,e)||!h.replayGroupChanged&&ld(r,l)||(i.canvas.width=o.size[0]*n,i.canvas.height=o.size[1]*n,h.compose(i,o,e),r=l,t())})}else a=l.getImage(c,s,n,i);a&&this.loadImage(a)&&(this.image_=a,this.skippedFeatures_=r)}if(this.image_){const t=(a=this.image_).getExtent(),e=a.getResolution(),o=a.getPixelRatio(),l=n*e/(s*o),u=Nh(this.imageTransform_,n*i[0]/2,n*i[1]/2,l,l,0,o*(t[0]-r[0])/e,o*(r[1]-t[3])/e);Nh(this.coordinateToCanvasPixelTransform,n*i[0]/2-u[4],n*i[1]/2-u[5],n/s,-n/s,0,-r[0],-r[1]),this.renderedResolution=e*n/o}return!!this.image_},Ky.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,i,o):Yy.prototype.forEachFeatureAtCoordinate.call(this,t,e,n,i,o)};var Xy=Ky;const Zy=function(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i};function qy(t,e,n,i,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=i,o):new Zy(t,e,n,i)}Zy.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Zy.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Zy.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Zy.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Zy.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Zy.prototype.getHeight=function(){return this.maxY-this.minY+1},Zy.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Zy.prototype.getWidth=function(){return this.maxX-this.minX+1},Zy.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var Qy=Zy;const Jy=function(t){Yy.call(this,t),this.context=null===this.context?null:qh(),this.renderedExtent_=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Qy(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0};_l(Jy,Yy),Jy.handles=function(t){return"TILE"===t.getType()},Jy.create=function(t,e){return new Jy(e)},Jy.prototype.isDrawableTile_=function(t){const e=t.getState(),n=this.getLayer().getUseInterimTilesOnError();return 2==e||4==e||3==e&&!n},Jy.prototype.getTile=function(t,e,n,i,o){const r=this.getLayer();let s=r.getSource().getTile(t,e,n,i,o);return 3==s.getState()&&(r.getUseInterimTilesOnError()?r.getPreload()>0&&(this.newTiles_=!0):s.setState(2)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},Jy.prototype.prepareFrame=function(t,e){const n=t.pixelRatio,i=t.size,o=t.viewState,r=o.projection,s=o.resolution,a=o.center,l=this.getLayer(),u=l.getSource(),h=u.getRevision(),c=u.getTileGridForProjection(r),d=c.getZForResolution(s,this.zDirection),p=c.getResolution(d);let f=Math.round(s/p)||1,g=t.extent;if(void 0!==e.extent&&(g=Ru(g,e.extent)),Fu(g))return!1;const _=c.getTileRangeForExtentAndZ(g,d),y=c.getTileRangeExtent(d,_),m=u.getTilePixelRatio(n),v={};v[d]={};const x=this.createLoadedTileFinder(u,r,v),b=t.viewHints,w=b[vf.ANIMATING]||b[vf.INTERACTING],C=this.tmpExtent,E=this.tmpTileRange_;let T,S,I;for(this.newTiles_=!1,S=_.minX;S<=_.maxX;++S)for(I=_.minY;I<=_.maxY;++I){if(Date.now()-t.time>16&&w)continue;if(T=this.getTile(d,S,I,n,r),this.isDrawableTile_(T)){const e=ml(this);if(2==T.getState()){v[d][T.tileCoord.toString()]=T;const t=T.inTransition(e);this.newTiles_||!t&&-1!==this.renderedTiles.indexOf(T)||(this.newTiles_=!0)}if(1===T.getAlpha(e,t.time))continue}const e=c.getTileCoordChildTileRange(T.tileCoord,E,C);let i=!1;e&&(i=x(d+1,e)),i||c.forEachTileCoordParentTileRange(T.tileCoord,x,null,E,C)}const R=p*n/m*f;if(!(this.renderedResolution&&Date.now()-t.time>16&&w)&&(this.newTiles_||!this.renderedExtent_||!uu(this.renderedExtent_,g)||this.renderedRevision!=h||f!=this.oversampling_||!w&&R!=this.renderedResolution)){const i=this.context;if(i){const t=u.getTilePixelSize(d,n,r),e=Math.round(_.getWidth()*t[0]/f),o=Math.round(_.getHeight()*t[1]/f),s=i.canvas;s.width!=e||s.height!=o?(this.oversampling_=f,s.width=e,s.height=o):(this.renderedExtent_&&!_u(y,this.renderedExtent_)&&i.clearRect(0,0,e,o),f=this.oversampling_)}this.renderedTiles.length=0;const o=Object.keys(v).map(Number);let s,a,l,g,x,b,w,E,R,P,M;for(o.sort(function(t,e){return t===d?1:e===d?-1:t>e?1:t<e?-1:0}),x=0,b=o.length;x<b;++x){l=u.getTilePixelSize(g=o[x],n,r),a=(s=c.getResolution(g))/p,E=m*u.getGutter(r),R=v[g];for(const n in R)w=c.getTileCoordExtent((T=R[n]).getTileCoord(),C),this.drawTileImage(T,t,e,S=(w[0]-y[0])/p*m/f,I=(y[3]-w[3])/p*m/f,P=l[0]*a/f,M=l[1]*a/f,E,d===g),this.renderedTiles.push(T)}this.renderedRevision=h,this.renderedResolution=p*n/m*f,this.renderedExtent_=y}const P=this.renderedResolution/s,M=Nh(this.imageTransform_,n*i[0]/2,n*i[1]/2,P,P,0,(this.renderedExtent_[0]-a[0])/this.renderedResolution*n,(a[1]-this.renderedExtent_[3])/this.renderedResolution*n);return Nh(this.coordinateToCanvasPixelTransform,n*i[0]/2-M[4],n*i[1]/2-M[5],n/s,-n/s,0,-a[0],-a[1]),this.updateUsedTiles(t.usedTiles,u,d,_),this.manageTilePyramid(t,u,c,n,r,g,d,l.getPreload()),this.scheduleExpireCache(t,u),this.renderedTiles.length>0},Jy.prototype.drawTileImage=function(t,e,n,i,o,r,s,a,l){const u=t.getImage(this.getLayer());if(!u)return;const h=ml(this),c=l?t.getAlpha(h,e.time):1;1!==c||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(i,o,r,s);const d=c!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,o,r,s),d&&this.context.restore(),1!==c?e.animate=!0:l&&t.endTransition(h)},Jy.prototype.getImage=function(){const t=this.context;return t?t.canvas:null},Jy.prototype.getImageTransform=function(){return this.imageTransform_};var $y=Jy;const tm=function(){};tm.prototype.getReplay=function(t,e){},tm.prototype.isEmpty=function(){};var em=tm,nm={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function im(t,e,n,i,o,r,s,a){const l=[],u=t[e]>t[n-i],h=o.length;let c,d,p,f=t[e],g=t[e+1],_=t[e+=i],y=t[e+1],m=0,v=Math.sqrt(Math.pow(_-f,2)+Math.pow(y-g,2)),x="",b=0;for(let w=0;w<h;++w){const C=o.charAt(d=u?h-w-1:w),E=r(x=u?C+x:x+C)-b;b+=E;const T=s+E/2;for(;e<n-i&&m+v<T;)f=_,g=y,_=t[e+=i],y=t[e+1],m+=v,v=Math.sqrt(Math.pow(_-f,2)+Math.pow(y-g,2));const S=T-m;let I=Math.atan2(y-g,_-f);if(u&&(I+=I>0?-Math.PI:Math.PI),void 0!==p){let t=I-p;if(t+=t>Math.PI?-2*Math.PI:t<-Math.PI?2*Math.PI:0,Math.abs(t)>a)return null}const R=S/v,P=Wu(f,_,R),M=Wu(g,y,R);p==I?(u&&(c[0]=P,c[1]=M,c[2]=E/2),c[4]=x):(b=E,c=[P,M,E/2,I,x=C],u?l.unshift(c):l.push(c),p=I),s+=E}return l}const om={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},rm=[om.FILL],sm=[om.STROKE],am=[om.BEGIN_PATH],lm=[om.CLOSE_PATH];var um=om;const hm=[nm.POLYGON,nm.CIRCLE,nm.LINE_STRING,nm.IMAGE,nm.TEXT,nm.DEFAULT],cm={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},dm=function(t,e,n,i,o,r){Ry.call(this),this.declutterTree=r,this.tolerance=t,this.maxExtent=e,this.overlaps=o,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0};_l(dm,Ry);const pm=[1/0,1/0,-1/0,-1/0],fm=[1,0,0,1,0,0];dm.prototype.replayTextBackground_=function(t,e,n,i,o,r,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},dm.prototype.replayImage_=function(t,e,n,i,o,r,s,a,l,u,h,c,d,p,f,g,_,y){const m=_||y;e-=o*=d,n-=r*=d;const v=f+u>i.width?i.width-u:f,x=a+h>i.height?i.height-h:a,b=g[3]+v*d+g[1],w=g[0]+x*d+g[2],C=e-g[3],E=n-g[0];let T,S,I,R;(m||0!==c)&&(T=[C,E],S=[C+b,E],I=[C+b,E+w],R=[C,E+w]);let P=null;if(0!==c){const t=e+o,i=n+r;P=Nh(fm,t,i,1,1,c,-t,-i),pu(pm),mu(pm,Fh(fm,T)),mu(pm,Fh(fm,S)),mu(pm,Fh(fm,I)),mu(pm,Fh(fm,R))}else du(C,E,C+b,E+w,pm);const M=t.canvas,k=y?y[2]*d/2:0,L=pm[0]-k<=M.width&&pm[2]+k>=0&&pm[1]-k<=M.height&&pm[3]+k>=0;if(p&&(e=Math.round(e),n=Math.round(n)),s){if(!L&&1==s[4])return;yu(s,pm);const o=L?[t,P?P.slice(0):null,l,i,u,h,v,x,e,n,d]:null;o&&m&&o.push(_,y,T,S,I,R),s.push(o)}else L&&(m&&this.replayTextBackground_(t,T,S,I,R,_,y),Gc(t,P,l,i,u,h,v,x,e,n,d))},dm.prototype.applyPixelRatio=function(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},dm.prototype.appendFlatCoordinates=function(t,e,n,i,o,r){let s=this.coordinates.length;const a=this.getBufferedMaxExtent();r&&(e+=i);const l=[t[e],t[e+1]],u=[NaN,NaN];let h,c,d,p=!0;for(h=e+i;h<n;h+=i)u[0]=t[h],u[1]=t[h+1],(d=cu(a,u))!==c?(p&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),this.coordinates[s++]=u[0],this.coordinates[s++]=u[1],p=!1):d===iu.INTERSECTING?(this.coordinates[s++]=u[0],this.coordinates[s++]=u[1],p=!1):p=!0,l[0]=u[0],l[1]=u[1],c=d;return(o&&p||h===e+i)&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),s},dm.prototype.drawCustomCoordinates_=function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r],a=this.appendFlatCoordinates(t,e,s,i,!1,!1);o.push(a),e=s}return e},dm.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);const i=t.getType(),o=t.getStride(),r=this.coordinates.length;let s,a,l,u,h;if(i==Uu.MULTI_POLYGON){s=(t=t).getOrientedFlatCoordinates(),u=[];const e=t.getEndss();h=0;for(let t=0,n=e.length;t<n;++t){const n=[];h=this.drawCustomCoordinates_(s,h,e[t],o,n),u.push(n)}this.instructions.push([um.CUSTOM,r,u,t,n,Sd])}else i==Uu.POLYGON||i==Uu.MULTI_LINE_STRING?(l=[],s=i==Uu.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(s,0,t.getEnds(),o,l),this.instructions.push([um.CUSTOM,r,l,t,n,Td])):i==Uu.LINE_STRING||i==Uu.MULTI_POINT?(s=t.getFlatCoordinates(),a=this.appendFlatCoordinates(s,0,s.length,o,!1,!1),this.instructions.push([um.CUSTOM,r,a,t,n,Ed])):i==Uu.POINT&&(s=t.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),this.instructions.push([um.CUSTOM,r,a=this.coordinates.length,t,n]));this.endGeometry(t,e)},dm.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[um.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[um.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},dm.prototype.fill_=function(t){if(this.alignFill_){const e=Fh(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Nc)},dm.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],fc&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},dm.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){const n=t[4];if(1==n||n==t.length-5){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(let e=5,n=t.length;e<n;++e){const n=t[e];n&&(n.length>11&&this.replayTextBackground_(n[0],n[13],n[14],n[15],n[16],n[11],n[12]),Gc.apply(void 0,n))}}t.length=5,pu(t)}}},dm.prototype.replay_=function(t,e,n,i,o,r){let s;this.pixelCoordinates_&&ld(e,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=Ou(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Lh(this.renderedTransform_,e));const a=!El(n);let l=0;const u=i.length;let h,c,d,p,f,g,_,y,m,v=0,x=0,b=0,w=null,C=null;const E=this.coordinateCache_,T=this.viewRotation_,S={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T},I=this.instructions!=i||this.overlaps?0:200;let R,P,M;for(;l<u;){const e=i[l];switch(e[0]){case um.BEGIN_GEOMETRY:R=e[1],a&&n[ml(R).toString()]||!R.getGeometry()?l=e[2]:void 0===r||Lu(r,R.getGeometry().getExtent())?++l:l=e[2]+1;break;case um.BEGIN_PATH:x>I&&(this.fill_(t),x=0),b>I&&(t.stroke(),b=0),x||b||(t.beginPath(),p=f=NaN),++l;break;case um.CIRCLE:const i=s[v=e[1]],u=s[v+1],k=s[v+2]-i,L=s[v+3]-u,F=Math.sqrt(k*k+L*L);t.moveTo(i+F,u),t.arc(i,u,F,0,2*Math.PI,!0),++l;break;case um.CLOSE_PATH:t.closePath(),++l;break;case um.CUSTOM:v=e[1],h=e[2];const D=e[4],O=6==e.length?e[5]:void 0;S.geometry=e[3],S.feature=R,l in E||(E[l]=[]);const A=E[l];O?O(s,v,h,2,A):(A[0]=s[v],A[1]=s[v+1],A.length=2),D(A,S),++l;break;case um.DRAW_IMAGE:v=e[1],h=e[2],m=e[3],c=e[4],d=e[5],y=o?null:e[6];const N=e[7],G=e[8],V=e[9],j=e[10];let B=e[12];const z=e[13],H=e[14],W=e[15];let U,Y,K;for(e.length>16?(U=e[16],Y=e[17],K=e[18]):(U=Ic,Y=K=!1),e[11]&&(B+=T);v<h;v+=2)this.replayImage_(t,s[v],s[v+1],m,c,d,y,N,G,V,j,B,z,H,W,U,Y?w:null,K?C:null);this.renderDeclutter_(y,R),++l;break;case um.DRAW_CHARS:const X=e[1],Z=e[2],q=e[3];y=o?null:e[4];const Q=e[5],J=e[6],$=e[7],tt=e[8],et=e[9],nt=e[10],it=e[11],ot=e[12],rt=e[13],st=e[14],at=up(s,X,Z,2),lt=tt(ot);if(Q||lt<=at){const e=im(s,X,Z,2,ot,tt,(at-lt)*cm[this.textStates[rt].textAlign],$);if(e){let n,i,o,r,s;if(nt)for(n=0,i=e.length;n<i;++n)r=this.getImage(o=(s=e[n])[4],rt,"",nt),this.replayImage_(t,s[0],s[1],r,c=s[2]+it,d=q*r.height+2*(.5-q)*it-et,y,r.height,1,0,0,s[3],st,!1,r.width,Ic,null,null);if(J)for(n=0,i=e.length;n<i;++n)r=this.getImage(o=(s=e[n])[4],rt,J,""),this.replayImage_(t,s[0],s[1],r,c=s[2],d=q*r.height-et,y,r.height,1,0,0,s[3],st,!1,r.width,Ic,null,null)}}this.renderDeclutter_(y,R),++l;break;case um.END_GEOMETRY:if(void 0!==o){const t=o(R=e[1]);if(t)return t}++l;break;case um.FILL:I?x++:this.fill_(t),++l;break;case um.MOVE_TO_LINE_TO:for(h=e[2],_=(M=s[(v=e[1])+1])+.5|0,(g=(P=s[v])+.5|0)===p&&_===f||(t.moveTo(P,M),p=g,f=_),v+=2;v<h;v+=2)g=(P=s[v])+.5|0,_=(M=s[v+1])+.5|0,v!=h-2&&g===p&&_===f||(t.lineTo(P,M),p=g,f=_);++l;break;case um.SET_FILL_STYLE:w=e,this.alignFill_=e[2],x&&(this.fill_(t),x=0,b&&(t.stroke(),b=0)),t.fillStyle=e[1],++l;break;case um.SET_STROKE_STYLE:C=e,b&&(t.stroke(),b=0),this.setStrokeStyle_(t,e),++l;break;case um.STROKE:I?b++:t.stroke(),++l;break;default:++l}}x&&this.fill_(t),b&&t.stroke()},dm.prototype.replay=function(t,e,n,i){this.viewRotation_=n,this.replay_(t,e,i,this.instructions,void 0,void 0)},dm.prototype.replayHitDetection=function(t,e,n,i,o,r){return this.viewRotation_=n,this.replay_(t,e,i,this.hitDetectionInstructions,o,r)},dm.prototype.reverseHitDetectionInstructions=function(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,o,r=-1;for(e=0;e<n;++e)(o=(i=t[e])[0])==um.END_GEOMETRY?r=e:o==um.BEGIN_GEOMETRY&&(i[2]=e,sd(this.hitDetectionInstructions,r,e),r=-1)},dm.prototype.setFillStrokeStyle=function(t,e){const n=this.state;if(t){const e=t.getColor();n.fillStyle=Zh(e||Ec)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=Zh(t||Sc);const i=e.getLineCap();n.lineCap=void 0!==i?i:"round";const o=e.getLineDash();n.lineDash=o?o.slice():Tc;const r=e.getLineDashOffset();n.lineDashOffset=r||0;const s=e.getLineJoin();n.lineJoin=void 0!==s?s:"round";const a=e.getWidth();n.lineWidth=void 0!==a?a:1;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},dm.prototype.createFill=function(t,e){const n=t.fillStyle,i=[um.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},dm.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},dm.prototype.createStroke=function(t){return[um.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},dm.prototype.updateFillStyle=function(t,e,n){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t,n)),t.currentFillStyle=i)},dm.prototype.updateStrokeStyle=function(t,e){const n=t.strokeStyle,i=t.lineCap,o=t.lineDash,r=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||o!=t.currentLineDash&&!ld(t.currentLineDash,o)||t.currentLineDashOffset!=r||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=o,t.currentLineDashOffset=r,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},dm.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[um.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},dm.prototype.finish=Al,dm.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=su(this.maxExtent),this.maxLineWidth>0)&&ru(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_};var gm=dm;const _m=function(t,e,n,i,o,r){gm.call(this,t,e,n,i,o,r),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0};_l(_m,gm),_m.prototype.drawCoordinates_=function(t,e,n,i){return this.appendFlatCoordinates(t,e,n,i,!1,!1)},_m.prototype.drawPoint=function(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([um.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([um.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)},_m.prototype.drawMultiPoint=function(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([um.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([um.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)},_m.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},_m.prototype.setImageStyle=function(t,e){const n=t.getAnchor(),i=t.getSize(),o=t.getHitDetectionImage(1),r=t.getImage(1),s=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=o,this.image_=r,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=i[0]};var ym=_m;const mm=function(t,e,n,i,o,r){gm.call(this,t,e,n,i,o,r)};_l(mm,gm),mm.prototype.drawFlatCoordinates_=function(t,e,n,i){const o=this.coordinates.length,r=this.appendFlatCoordinates(t,e,n,i,!1,!1),s=[um.MOVE_TO_LINE_TO,o,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n},mm.prototype.drawLineString=function(t,e){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([um.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],am);const i=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(i,0,i.length,o),this.hitDetectionInstructions.push(sm),this.endGeometry(t,e)},mm.prototype.drawMultiLineString=function(t,e){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([um.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],am);const i=t.getEnds(),o=t.getFlatCoordinates(),r=t.getStride();let s=0;for(let a=0,l=i.length;a<l;++a)s=this.drawFlatCoordinates_(o,s,i[a],r);this.hitDetectionInstructions.push(sm),this.endGeometry(t,e)},mm.prototype.finish=function(){const t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(sm),this.reverseHitDetectionInstructions(),this.state=null},mm.prototype.applyStroke=function(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(sm),t.lastStroke=this.coordinates.length),t.lastStroke=0,gm.prototype.applyStroke.call(this,t),this.instructions.push(am)};var vm=mm;const xm=function(t,e,n,i,o,r){gm.call(this,t,e,n,i,o,r)};_l(xm,gm),xm.prototype.drawFlatCoordinatess_=function(t,e,n,i){const o=this.state,r=void 0!==o.fillStyle,s=void 0!=o.strokeStyle,a=n.length;this.instructions.push(am),this.hitDetectionInstructions.push(am);for(let l=0;l<a;++l){const o=n[l],r=this.coordinates.length,a=this.appendFlatCoordinates(t,e,o,i,!0,!s),u=[um.MOVE_TO_LINE_TO,r,a];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(lm),this.hitDetectionInstructions.push(lm)),e=o}return r&&(this.instructions.push(rm),this.hitDetectionInstructions.push(rm)),s&&(this.instructions.push(sm),this.hitDetectionInstructions.push(sm)),e},xm.prototype.drawCircle=function(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([um.SET_FILL_STYLE,Wh(Ec)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([um.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length;this.appendFlatCoordinates(i,0,i.length,o,!1,!1);const s=[um.CIRCLE,r];this.instructions.push(am,s),this.hitDetectionInstructions.push(am,s),this.hitDetectionInstructions.push(rm),void 0!==n.fillStyle&&this.instructions.push(rm),void 0!==n.strokeStyle&&(this.instructions.push(sm),this.hitDetectionInstructions.push(sm)),this.endGeometry(t,e)},xm.prototype.drawPolygon=function(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([um.SET_FILL_STYLE,Wh(Ec)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([um.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const i=t.getEnds(),o=t.getOrientedFlatCoordinates(),r=t.getStride();this.drawFlatCoordinatess_(o,0,i,r),this.endGeometry(t,e)},xm.prototype.drawMultiPolygon=function(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([um.SET_FILL_STYLE,Wh(Ec)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([um.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const i=t.getEndss(),o=t.getOrientedFlatCoordinates(),r=t.getStride();let s=0;for(let a=0,l=i.length;a<l;++a)s=this.drawFlatCoordinatess_(o,s,i[a],r);this.endGeometry(t,e)},xm.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Rd(e[n],t)}},xm.prototype.setFillStrokeStyles_=function(t){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)};var bm=xm;function wm(t,e,n,i,o){let r,s,a,l,u,h,c,d,p,f,g=n,_=n,y=0,m=0,v=n;for(s=n;s<i;s+=o){const n=e[s],i=e[s+1];void 0!==u&&(p=n-u,f=i-h,l=Math.sqrt(p*p+f*f),void 0!==c&&(m+=a,(r=Math.acos((c*p+d*f)/(a*l)))>t&&(m>y&&(y=m,g=v,_=s),m=0,v=s-o)),a=l,c=p,d=f),u=n,h=i}return(m+=l)>y?[v,s]:[g,_]}const Cm=function(t,e,n,i,o,r){gm.call(this,t,e,n,i,o,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Rc.prune()};_l(Cm,gm),Cm.prototype.drawText=function(t,e){const n=this.textState_;if(""===this.text_||!n||!this.textFillState_&&!this.textStrokeState_)return;let i=this.coordinates.length;const o=t.getType();let r,s,a=null,l=2,u=2;if("line"===n.placement){if(!Lu(this.getBufferedMaxExtent(),t.getExtent()))return;let h;if(a=t.getFlatCoordinates(),u=t.getStride(),o==Uu.LINE_STRING)h=[a.length];else if(o==Uu.MULTI_LINE_STRING)h=t.getEnds();else if(o==Uu.POLYGON)h=t.getEnds().slice(0,1);else if(o==Uu.MULTI_POLYGON){const e=t.getEndss();for(h=[],r=0,s=e.length;r<s;++r)h.push(e[r][0])}this.beginGeometry(t,e);const c=n.textAlign;let d,p=0;for(let t=0,e=h.length;t<e;++t){if(void 0==c){const e=wm(n.maxAngle,a,p,h[t],u);p=e[0],d=e[1]}else d=h[t];for(r=p;r<d;r+=u)this.coordinates.push(a[r],a[r+1]);p=h[t],this.drawChars_(i,l=this.coordinates.length,this.declutterGroup_),i=l}this.endGeometry(t,e)}else{const h=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),c=h.width/this.pixelRatio;switch(o){case Uu.POINT:case Uu.MULTI_POINT:l=(a=t.getFlatCoordinates()).length;break;case Uu.LINE_STRING:a=t.getFlatMidpoint();break;case Uu.CIRCLE:a=t.getCenter();break;case Uu.MULTI_LINE_STRING:l=(a=t.getFlatMidpoints()).length;break;case Uu.POLYGON:if(a=t.getFlatInteriorPoint(),!n.overflow&&a[2]/this.resolution<c)return;u=3;break;case Uu.MULTI_POLYGON:const e=t.getFlatInteriorPoints();for(a=[],r=0,s=e.length;r<s;r+=3)(n.overflow||e[r+2]/this.resolution>=c)&&a.push(e[r],e[r+1]);if(0==(l=a.length))return}l=this.appendFlatCoordinates(a,0,l,u,!1,!1),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(h,i,l),this.endGeometry(t,e)}},Cm.prototype.getImage=function(t,e,n,i){let o;const r=i+e+t+n+this.pixelRatio;if(!Rc.containsKey(r)){const s=i?this.strokeStates[i]||this.textStrokeState_:null,a=n?this.fillStates[n]||this.textFillState_:null,l=this.textStates[e]||this.textState_,u=l.scale*this.pixelRatio,h=cm[l.textAlign||"center"],c=i&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),p=d.length,f=[],g=function(t,e,n){const i=e.length;let o=0;for(let r=0;r<i;++r){const i=Oc(t,e[r]);o=Math.max(o,i),n.push(i)}return o}(l.font,d,f),_=Dc(l.font),y=_*p,m=qh(Math.ceil((g+c)*u),Math.ceil((y+c)*u));Rc.set(r,o=m.canvas),1!=u&&m.scale(u,u),m.font=l.font,i&&(m.strokeStyle=s.strokeStyle,m.lineWidth=c,m.lineCap=s.lineCap,m.lineJoin=s.lineJoin,m.miterLimit=s.miterLimit,fc&&s.lineDash.length&&(m.setLineDash(s.lineDash),m.lineDashOffset=s.lineDashOffset)),n&&(m.fillStyle=a.fillStyle),m.textBaseline="middle",m.textAlign="center";const v=.5-h,x=h*o.width/u+v*c;let b;if(i)for(b=0;b<p;++b)m.strokeText(d[b],x+v*f[b],.5*(c+_)+b*_);if(n)for(b=0;b<p;++b)m.fillText(d[b],x+v*f[b],.5*(c+_)+b*_)}return Rc.get(r)},Cm.prototype.drawTextImage_=function(t,e,n){const i=this.textState_,o=this.textStrokeState_,r=this.pixelRatio,s=cm[i.textAlign||"center"],a=cm[i.textBaseline],l=o&&o.lineWidth?o.lineWidth:0,u=s*t.width/r+2*(.5-s)*l,h=a*t.height/r+2*(.5-a)*l;this.instructions.push([um.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*r,(h-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,i.padding==Ic?Ic:i.padding.map(function(t){return t*r}),!!i.backgroundFill,!!i.backgroundStroke]),this.hitDetectionInstructions.push([um.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*r,(h-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/r,!0,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])},Cm.prototype.drawChars_=function(t,e,n){const i=this.textStrokeState_,o=this.textState_,r=this.textFillState_,s=this.strokeKey_;i&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));const a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:o.font,textAlign:o.textAlign||"center",scale:o.scale});const l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}));const u=this.pixelRatio,h=cm[o.textBaseline],c=this.textOffsetY_*u,d=this.text_,p=o.font,f=o.scale,g=i?i.lineWidth*f/2:0;let _=this.widths_[p];_||(this.widths_[p]=_={}),this.instructions.push([um.DRAW_CHARS,t,e,h,n,o.overflow,l,o.maxAngle,function(t){let e=_[t];return e||(e=_[t]=Oc(p,t)),e*f*u},c,s,g*u,d,a,1]),this.hitDetectionInstructions.push([um.DRAW_CHARS,t,e,h,n,o.overflow,l,o.maxAngle,function(t){let e=_[t];return e||(e=_[t]=Oc(p,t)),e*f},c,s,g,d,a,1/u])},Cm.prototype.setTextStyle=function(t,e){let n,i,o;if(t){this.declutterGroup_=e;const r=t.getFill();r?((i=this.textFillState_)||(i=this.textFillState_={}),i.fillStyle=Zh(r.getColor()||Ec)):i=this.textFillState_=null;const s=t.getStroke();if(s){(o=this.textStrokeState_)||(o=this.textStrokeState_={});const t=s.getLineDash(),e=s.getLineDashOffset(),n=s.getWidth(),i=s.getMiterLimit();o.lineCap=s.getLineCap()||"round",o.lineDash=t?t.slice():Tc,o.lineDashOffset=void 0===e?0:e,o.lineJoin=s.getLineJoin()||"round",o.lineWidth=void 0===n?1:n,o.miterLimit=void 0===i?10:i,o.strokeStyle=Zh(s.getColor()||Sc)}else o=this.textStrokeState_=null;n=this.textState_;const a=t.getFont()||"10px sans-serif";Lc(a);const l=t.getScale();n.overflow=t.getOverflow(),n.font=a,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||"middle",n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Ic,n.scale=void 0===l?1:l;const u=t.getOffsetX(),h=t.getOffsetY(),c=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===d?0:d,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:ml(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+ml(i.fillStyle):""}else this.text_=""};const Em={Circle:bm,Default:gm,Image:ym,LineString:vm,Polygon:bm,Text:Cm},Tm=function(t,e,n,i,o,r,s){em.call(this),this.declutterTree_=r,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=qh(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]};_l(Tm,em);const Sm={0:[[!0]]};function Im(t,e,n){let i;const o=Math.floor(t.length/2);if(e>=o)for(i=o;i<e;i++)t[i][n]=!0;else if(e<o)for(i=e+1;i<o;i++)t[i][n]=!0}Tm.prototype.addDeclutter=function(t){let e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},Tm.prototype.clip=function(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},Tm.prototype.hasReplays=function(t){for(const e in this.replaysByZIndex_){const n=this.replaysByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1},Tm.prototype.finish=function(){for(const t in this.replaysByZIndex_){const e=this.replaysByZIndex_[t];for(const t in e)e[t].finish()}},Tm.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s){const a=2*(i=Math.round(i))+1,l=Nh(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),u=this.hitDetectionContext_;let h;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(mu(h=[1/0,1/0,-1/0,-1/0],t),ru(h,e*(this.renderBuffer_+i),h));const c=function(t){if(void 0!==Sm[t])return Sm[t];const e=2*t+1,n=new Array(e);for(let s=0;s<e;s++)n[s]=new Array(e);let i=t,o=0,r=0;for(;i>=o;)Im(n,t+i,t+o),Im(n,t+o,t+i),Im(n,t-o,t+i),Im(n,t-i,t+o),Im(n,t-i,t-o),Im(n,t-o,t-i),Im(n,t+o,t-i),Im(n,t+i,t-o),2*((r+=1+2*++o)-i)+1>0&&(r+=1-2*(i-=1));return Sm[t]=n,n}(i);let d,p;function f(t){const e=u.getImageData(0,0,a,a).data;for(let n=0;n<a;n++)for(let i=0;i<a;i++)if(c[n][i]&&e[4*(i*a+n)+3]>0){let e;return(!d||p!=nm.IMAGE&&p!=nm.TEXT||-1!==d.indexOf(t))&&(e=r(t)),e||void u.clearRect(0,0,a,a)}}this.declutterTree_&&(d=this.declutterTree_.all().map(function(t){return t.value}));const g=Object.keys(this.replaysByZIndex_).map(Number);let _,y,m,v,x;for(g.sort(id),_=g.length-1;_>=0;--_){const t=g[_].toString();for(m=this.replaysByZIndex_[t],y=hm.length-1;y>=0;--y)if(void 0!==(v=m[p=hm[y]]))if(!s||p!=nm.IMAGE&&p!=nm.TEXT){if(x=v.replayHitDetection(u,l,n,o,f,h))return x}else{const e=s[t];e?e.push(v,l.slice(0)):s[t]=[v,l.slice(0)]}}},Tm.prototype.getClipCoords=function(t){const e=this.maxExtent_,n=e[0],i=e[1],o=e[2],r=e[3],s=[n,i,n,r,o,r,o,i];return Ou(s,0,8,2,t,s),s},Tm.prototype.getReplay=function(t,e){const n=void 0!==t?t.toString():"0";let i=this.replaysByZIndex_[n];void 0===i&&(this.replaysByZIndex_[n]=i={});let o=i[e];return void 0===o&&(o=new(0,Em[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[e]=o),o},Tm.prototype.getReplays=function(){return this.replaysByZIndex_},Tm.prototype.isEmpty=function(){return El(this.replaysByZIndex_)},Tm.prototype.replay=function(t,e,n,i,o,r){const s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(id),t.save(),this.clip(t,e);const a=o||hm;let l,u,h,c,d,p;for(l=0,u=s.length;l<u;++l){const o=s[l].toString();for(d=this.replaysByZIndex_[o],h=0,c=a.length;h<c;++h){const s=a[h];if(void 0!==(p=d[s]))if(!r||s!=nm.IMAGE&&s!=nm.TEXT)p.replay(t,e,n,i);else{const t=r[o];t?t.push(p,e.slice(0)):r[o]=[p,e.slice(0)]}}}t.restore()};var Rm=Tm;const Pm=.5,Mm={Point:function(t,e,n,i){const o=n.getImage();if(o){if(o.getImageState()!=vc.LOADED)return;const r=t.getReplay(n.getZIndex(),nm.IMAGE);r.setImageStyle(o,t.addDeclutter(!1)),r.drawPoint(e,i)}const r=n.getText();if(r){const s=t.getReplay(n.getZIndex(),nm.TEXT);s.setTextStyle(r,t.addDeclutter(!!o)),s.drawText(e,i)}},LineString:function(t,e,n,i){const o=n.getStroke();if(o){const r=t.getReplay(n.getZIndex(),nm.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawLineString(e,i)}const r=n.getText();if(r){const o=t.getReplay(n.getZIndex(),nm.TEXT);o.setTextStyle(r,t.addDeclutter(!1)),o.drawText(e,i)}},Polygon:function(t,e,n,i){const o=n.getFill(),r=n.getStroke();if(o||r){const s=t.getReplay(n.getZIndex(),nm.POLYGON);s.setFillStrokeStyle(o,r),s.drawPolygon(e,i)}const s=n.getText();if(s){const o=t.getReplay(n.getZIndex(),nm.TEXT);o.setTextStyle(s,t.addDeclutter(!1)),o.drawText(e,i)}},MultiPoint:function(t,e,n,i){const o=n.getImage();if(o){if(o.getImageState()!=vc.LOADED)return;const r=t.getReplay(n.getZIndex(),nm.IMAGE);r.setImageStyle(o,t.addDeclutter(!1)),r.drawMultiPoint(e,i)}const r=n.getText();if(r){const s=t.getReplay(n.getZIndex(),nm.TEXT);s.setTextStyle(r,t.addDeclutter(!!o)),s.drawText(e,i)}},MultiLineString:function(t,e,n,i){const o=n.getStroke();if(o){const r=t.getReplay(n.getZIndex(),nm.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,i)}const r=n.getText();if(r){const o=t.getReplay(n.getZIndex(),nm.TEXT);o.setTextStyle(r,t.addDeclutter(!1)),o.drawText(e,i)}},MultiPolygon:function(t,e,n,i){const o=n.getFill(),r=n.getStroke();if(r||o){const s=t.getReplay(n.getZIndex(),nm.POLYGON);s.setFillStrokeStyle(o,r),s.drawMultiPolygon(e,i)}const s=n.getText();if(s){const o=t.getReplay(n.getZIndex(),nm.TEXT);o.setTextStyle(s,t.addDeclutter(!1)),o.drawText(e,i)}},GeometryCollection:function(t,e,n,i){const o=e.getGeometriesArray();let r,s;for(r=0,s=o.length;r<s;++r)(0,Mm[o[r].getType()])(t,o[r],n,i)},Circle:function(t,e,n,i){const o=n.getFill(),r=n.getStroke();if(o||r){const s=t.getReplay(n.getZIndex(),nm.CIRCLE);s.setFillStrokeStyle(o,r),s.drawCircle(e,i)}const s=n.getText();if(s){const o=t.getReplay(n.getZIndex(),nm.TEXT);o.setTextStyle(s,t.addDeclutter(!1)),o.drawText(e,i)}}};function km(t,e){return ml(t)-ml(e)}function Lm(t,e){const n=Fm(t,e);return n*n}function Fm(t,e){return Pm*t/e}function Dm(t,e,n,i,o,r){let s=!1;const a=n.getImage();if(a){let t=a.getImageState();t==vc.LOADED||t==vc.ERROR?a.unlistenImageChange(o,r):(t==vc.IDLE&&a.load(),t=a.getImageState(),a.listenImageChange(o,r),s=!0)}return function(t,e,n,i){const o=n.getGeometryFunction()(e);if(!o)return;const r=o.getSimplifiedGeometry(i);n.getRenderer()?function t(e,n,i,o){if(n.getType()!=Uu.GEOMETRY_COLLECTION)e.getReplay(i.getZIndex(),nm.DEFAULT).drawCustom(n,o,i.getRenderer());else{const r=n.getGeometries();for(let n=0,s=r.length;n<s;++n)t(e,r[n],i,o)}}(t,r,n,e):(0,Mm[r.getType()])(t,r,n,e)}(t,e,n,i),s}const Om=function(t){Wy.call(this,t),this.declutterTree_=t.getDeclutter()?L_()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=qh(),Pl(Rc,Wl.CLEAR,this.handleFontsChanged_,this)};_l(Om,Wy),Om.handles=function(t){return"VECTOR"===t.getType()},Om.create=function(t,e){return new Om(e)},Om.prototype.disposeInternal=function(){kl(Rc,Wl.CLEAR,this.handleFontsChanged_,this),Wy.prototype.disposeInternal.call(this)},Om.prototype.compose=function(t,e,n){const i=e.extent,o=e.pixelRatio,r=n.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,l=s.rotation,u=a.getExtent(),h=this.getLayer().getSource();let c=this.getTransform(e,0);const d=n.extent,p=void 0!==d;p&&this.clip(t,e,d);const f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();const s=this.getLayer();let d,p=0,g=0;const _=1!==n.opacity,y=s.hasListener("render");if(_||y){let e=t.canvas.width,n=t.canvas.height;if(l){const t=Math.round(Math.sqrt(e*e+n*n));p=(t-e)/2,g=(t-n)/2,e=n=t}this.context.canvas.width=e,this.context.canvas.height=n,d=this.context}else d=t;const m=d.globalAlpha;_||(d.globalAlpha=n.opacity),d!=t&&d.translate(p,g);const v=e.size[0]*o,x=e.size[1]*o;if(Ac(d,-l,v/2,x/2),f.replay(d,c,l,r),h.getWrapX()&&a.canWrapX()&&!uu(u,i)){let t=i[0];const n=ku(u);let o,s=0;for(;t<u[0];)c=this.getTransform(e,o=n*--s),f.replay(d,c,l,r),t+=n;for(s=0,t=i[2];t>u[2];)c=this.getTransform(e,o=n*++s),f.replay(d,c,l,r),t-=n}if(Ac(d,l,v/2,x/2),d!=t){if(y&&this.dispatchRenderEvent(d,e,c),_){const e=t.globalAlpha;t.globalAlpha=n.opacity,t.drawImage(d.canvas,-p,-g),t.globalAlpha=e}else t.drawImage(d.canvas,-p,-g);d.translate(-p,-g)}_||(d.globalAlpha=m)}p&&t.restore()},Om.prototype.composeFrame=function(t,e,n){const i=this.getTransform(t,0);this.preCompose(n,t,i),this.compose(n,t,e),this.postCompose(n,t,e,i)},Om.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){if(this.replayGroup_){const r=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,r,s,n,{},function(t){const e=ml(t).toString();if(!(e in l))return l[e]=!0,i.call(o,t,a)},null)}},Om.prototype.handleFontsChanged_=function(t){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},Om.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Om.prototype.prepareFrame=function(t,e){const n=this.getLayer(),i=n.getSource(),o=t.viewHints[vf.ANIMATING],r=t.viewHints[vf.INTERACTING],s=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(!this.dirty_&&!s&&o||!a&&r)return!0;const l=t.extent,u=t.viewState,h=u.projection,c=u.resolution,d=t.pixelRatio,p=n.getRevision(),f=n.getRenderBuffer();let g=n.getRenderOrder();void 0===g&&(g=km);const _=ru(l,f*c),y=u.projection.getExtent();if(i.getWrapX()&&u.projection.canWrapX()&&!uu(y,t.extent)){const t=ku(y),e=Math.max(ku(_)/2,t);_[0]=y[0]-e,_[2]=y[2]+e}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&uu(this.renderedExtent_,_))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;const m=new Rm(Fm(c,d),_,c,d,i.getOverlaps(),this.declutterTree_,n.getRenderBuffer());i.loadFeatures(_,c,h);const v=(function(t){let e;const i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,c)),e){const n=this.renderFeature(t,c,d,e,m);this.dirty_=this.dirty_||n}}).bind(this);if(g){const t=[];i.forEachFeatureInExtent(_,function(e){t.push(e)},this),t.sort(g);for(let e=0,n=t.length;e<n;++e)v(t[e])}else i.forEachFeatureInExtent(_,v,this);return m.finish(),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedExtent_=_,this.replayGroup_=m,this.replayGroupChanged=!0,!0},Om.prototype.renderFeature=function(t,e,n,i,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let s=0,a=i.length;s<a;++s)r=Dm(o,t,i[s],Lm(e,n),this.handleStyleImageChange_,this)||r;else r=Dm(o,t,i,Lm(e,n),this.handleStyleImageChange_,this);return r};var Am=Om;const Nm={image:[nm.POLYGON,nm.CIRCLE,nm.LINE_STRING,nm.IMAGE,nm.TEXT],hybrid:[nm.POLYGON,nm.LINE_STRING]},Gm={image:[nm.DEFAULT],hybrid:[nm.IMAGE,nm.TEXT,nm.DEFAULT],vector:hm},Vm=function(t){this.context=null,$y.call(this,t),this.declutterTree_=t.getDeclutter()?L_()(9,void 0):null,this.dirty_=!1,this.tmpTransform_=[1,0,0,1,0,0],this.zDirection="vector"==t.getRenderMode()?1:0,Pl(Rc,Wl.CLEAR,this.handleFontsChanged_,this)};_l(Vm,$y),Vm.handles=function(t){return"VECTOR_TILE"===t.getType()},Vm.create=function(t,e){return new Vm(e)},Vm.prototype.disposeInternal=function(){kl(Rc,Wl.CLEAR,this.handleFontsChanged_,this),$y.prototype.disposeInternal.call(this)},Vm.prototype.getTile=function(t,e,n,i,o){const r=$y.prototype.getTile.call(this,t,e,n,i,o);return 2===r.getState()&&(this.createReplayGroup_(r,i,o),this.context&&this.renderTileImage_(r,i,o)),r},Vm.prototype.prepareFrame=function(t,e){const n=this.getLayer(),i=n.getRevision();if(this.renderedLayerRevision_!=i){this.renderedTiles.length=0;const t=n.getRenderMode();this.context||"vector"==t||(this.context=qh()),this.context&&"vector"==t&&(this.context=null)}return this.renderedLayerRevision_=i,$y.prototype.prepareFrame.apply(this,arguments)},Vm.prototype.createReplayGroup_=function(t,e,n){const i=this.getLayer(),o=i.getRevision(),r=i.getRenderOrder()||null,s=t.getReplayState(i);if(!s.dirty&&s.renderedRevision==o&&s.renderedRenderOrder==r)return;const a=i.getSource(),l=a.getTileGrid(),u=a.getTileGridForProjection(n).getResolution(t.tileCoord[0]),h=t.extent,c={};for(let d=0,p=t.tileKeys.length;d<p;++d){const o=t.getTile(t.tileKeys[d]);if(2!=o.getState())continue;const p=l.getTileCoordExtent(o.tileCoord),f=Ru(h,p),g=_u(p,f)?null:ru(f,i.getRenderBuffer()*u,this.tmpExtent),_=o.getProjection();let y=!1;xh(n,_)||(y=!0,o.setProjection(n)),s.dirty=!1;const m=new Rm(0,f,u,e,a.getOverlaps(),this.declutterTree_,i.getRenderBuffer()),v=Lm(u,e),x=function(t){let e;const n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,u)),e){const n=this.renderFeature(t,v,e,m);this.dirty_=this.dirty_||n,s.dirty=s.dirty||n}},b=o.getFeatures();r&&r!==s.renderedRenderOrder&&b.sort(r);for(let t=0,e=b.length;t<e;++t){const e=b[t];y&&(_.getUnits()==Qu.TILE_PIXELS&&(_.setWorldExtent(p),_.setExtent(o.getExtent())),e.getGeometry().transform(_,n)),g&&!Lu(g,e.getGeometry().getExtent())||x.call(this,e)}m.finish();for(const t in m.getReplays())c[t]=!0;o.setReplayGroup(i,t.tileCoord.toString(),m)}s.renderedRevision=o,s.renderedRenderOrder=r},Vm.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){const r=e.viewState.resolution,s=e.viewState.rotation;n=void 0==n?0:n;const a=this.getLayer(),l={},u=this.renderedTiles;let h,c,d,p,f;for(d=0,p=u.length;d<p;++d){const e=u[d];if(lu(h=ru(e.extent,n*r,h),t))for(let u=0,h=e.tileKeys.length;u<h;++u){const h=e.getTile(e.tileKeys[u]);2==h.getState()&&(f=h.getReplayGroup(a,e.tileCoord.toString()),c=c||f.forEachFeatureAtCoordinate(t,r,s,n,{},function(t){const e=ml(t).toString();if(!(e in l))return l[e]=!0,i.call(o,t,a)},null))}}return c},Vm.prototype.getReplayTransform_=function(t,e){const n=this.getLayer().getSource().getTileGrid(),i=t.tileCoord,o=n.getResolution(i[0]),r=e.viewState,s=e.pixelRatio,a=r.resolution/s,l=n.getTileCoordExtent(i,this.tmpExtent),u=r.center,h=Pu(l),c=e.size,d=Math.round(s*c[0]/2),p=Math.round(s*c[1]/2);return Nh(this.tmpTransform_,d,p,o/a,o/a,r.rotation,(h[0]-u[0])/o,(u[1]-h[1])/o)},Vm.prototype.handleFontsChanged_=function(t){const e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},Vm.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Vm.prototype.postCompose=function(t,e,n){const i=this.getLayer(),o=i.getRenderMode();if("image"!=o){const r=i.getDeclutter()?{}:null,s=i.getSource(),a=Gm[o],l=e.pixelRatio,u=e.viewState.rotation,h=e.size;let c,d;u&&(c=Math.round(l*h[0]/2),d=Math.round(l*h[1]/2),Ac(t,-u,c,d)),r&&this.declutterTree_.clear();const p=this.renderedTiles,f=s.getTileGridForProjection(e.viewState.projection),g=[],_=[];for(let y=p.length-1;y>=0;--y){const s=p[y];if(5==s.getState())continue;const l=s.tileCoord,h=f.getTileCoordExtent(l,this.tmpExtent)[0]-s.extent[0];let c=void 0;for(let d=0,p=s.tileKeys.length;d<p;++d){const p=s.getTile(s.tileKeys[d]);if(2!=p.getState())continue;const f=p.getReplayGroup(i,l.toString());if("vector"!=o&&!f.hasReplays(a))continue;c||(c=this.getTransform(e,h));const y=p.tileCoord[0],m=f.getClipCoords(c);t.save(),t.globalAlpha=n.opacity;for(let e=0,n=g.length;e<n;++e){const n=g[e];y<_[e]&&(t.beginPath(),t.moveTo(m[0],m[1]),t.lineTo(m[2],m[3]),t.lineTo(m[4],m[5]),t.lineTo(m[6],m[7]),t.moveTo(n[6],n[7]),t.lineTo(n[4],n[5]),t.lineTo(n[2],n[3]),t.lineTo(n[0],n[1]),t.clip())}f.replay(t,c,u,{},a,r),t.restore(),g.push(m),_.push(y)}}r&&function(t,e,n){const i=Object.keys(t).map(Number).sort(id),o={};for(let r=0,s=i.length;r<s;++r){const s=t[i[r].toString()];for(let t=0,i=s.length;t<i;){const i=s[t++],r=s[t++];i.replay(e,r,n,o)}}}(r,t,u),u&&Ac(t,u,c,d)}$y.prototype.postCompose.apply(this,arguments)},Vm.prototype.renderFeature=function(t,e,n,i){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let r=0,s=n.length;r<s;++r)o=Dm(i,t,n[r],e,this.handleStyleImageChange_,this)||o;else o=Dm(i,t,n,e,this.handleStyleImageChange_,this);return o},Vm.prototype.renderTileImage_=function(t,e,n){const i=this.getLayer(),o=t.getReplayState(i),r=i.getRevision(),s=Nm[i.getRenderMode()];if(s&&o.renderedTileRevision!==r){o.renderedTileRevision=r;const a=t.wrappedTileCoord,l=a[0],u=i.getSource(),h=u.getTileGridForProjection(n),c=h.getResolution(l),d=t.getContext(i),p=u.getTilePixelSize(l,e,n);d.canvas.width=p[0],d.canvas.height=p[1];const f=h.getTileCoordExtent(a,this.tmpExtent);for(let n=0,o=t.tileKeys.length;n<o;++n){const o=t.getTile(t.tileKeys[n]);if(2!=o.getState())continue;const r=e/c,a=Ph(this.tmpTransform_);Oh(a,r,-r),Ah(a,-f[0],-f[3]),o.getReplayGroup(i,t.tileCoord.toString()).replay(d,a,0,{},s)}}};var jm=Vm;const Bm=function(t){(t=bl({},t)).controls||(t.controls=zf()),t.interactions||(t.interactions=Ey()),Rf.call(this,t)};_l(Bm,Rf),Bm.prototype.createRenderer=function(){const t=new jy(this);return t.registerLayerRenderers([Xy,$y,Am,jm]),t};var zm=Bm;const Hm=function(t){Ql.call(this),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.autoPanAnimation=t.autoPanAnimation||{},this.autoPanMargin=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Pl(this,ql("element"),this.handleElementChanged,this),Pl(this,ql("map"),this.handleMapChanged,this),Pl(this,ql("offset"),this.handleOffsetChanged,this),Pl(this,ql("position"),this.handlePositionChanged,this),Pl(this,ql("positioning"),this.handlePositioningChanged,this),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(void 0!==t.positioning?t.positioning:"top-left"),void 0!==t.position&&this.setPosition(t.position)};_l(Hm,Ql),Hm.prototype.getElement=function(){return this.get("element")},Hm.prototype.getId=function(){return this.id},Hm.prototype.getMap=function(){return this.get("map")},Hm.prototype.getOffset=function(){return this.get("offset")},Hm.prototype.getPosition=function(){return this.get("position")},Hm.prototype.getPositioning=function(){return this.get("positioning")},Hm.prototype.handleElementChanged=function(){$h(this.element);const t=this.getElement();t&&this.element.appendChild(t)},Hm.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Jh(this.element),Ll(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Pl(t,"postrender",this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},Hm.prototype.render=function(){this.updatePixelPosition()},Hm.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},Hm.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get("position")&&this.autoPan&&this.panIntoView()},Hm.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},Hm.prototype.setElement=function(t){this.set("element",t)},Hm.prototype.setMap=function(t){this.set("map",t)},Hm.prototype.setOffset=function(t){this.set("offset",t)},Hm.prototype.setPosition=function(t){this.set("position",t)},Hm.prototype.panIntoView=function(){const t=this.getMap();if(!t||!t.getTargetElement())return;const e=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),i=this.getRect(n,[function(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+(parseInt(n.marginLeft,10)+parseInt(n.marginRight,10))}(n),function(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+(parseInt(n.marginTop,10)+parseInt(n.marginBottom,10))}(n)]),o=this.autoPanMargin;if(!uu(e,i)){const n=i[0]-e[0],r=e[2]-i[2],s=i[1]-e[1],a=e[3]-i[3],l=[0,0];if(n<0?l[0]=n-o:r<0&&(l[0]=Math.abs(r)+o),s<0?l[1]=s-o:a<0&&(l[1]=Math.abs(a)+o),0!==l[0]||0!==l[1]){const e=t.getView().getCenter(),n=t.getPixelFromCoordinate(e),i=[n[0]+l[0],n[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(i),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}},Hm.prototype.getRect=function(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},Hm.prototype.setPositioning=function(t){this.set("positioning",t)},Hm.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},Hm.prototype.updatePixelPosition=function(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)},Hm.prototype.updateRenderedPosition=function(t,e){const n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let r=i[0],s=i[1];if("bottom-right"==o||"center-right"==o||"top-right"==o){""!==this.rendered.left_&&(this.rendered.left_=n.left="");const i=Math.round(e[0]-t[0]-r)+"px";this.rendered.right_!=i&&(this.rendered.right_=n.right=i)}else{""!==this.rendered.right_&&(this.rendered.right_=n.right=""),"bottom-center"!=o&&"center-center"!=o&&"top-center"!=o||(r-=this.element.offsetWidth/2);const e=Math.round(t[0]+r)+"px";this.rendered.left_!=e&&(this.rendered.left_=n.left=e)}if("bottom-left"==o||"bottom-center"==o||"bottom-right"==o){""!==this.rendered.top_&&(this.rendered.top_=n.top="");const i=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=i&&(this.rendered.bottom_=n.bottom=i)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=n.bottom=""),"center-left"!=o&&"center-center"!=o&&"center-right"!=o||(s-=this.element.offsetHeight/2);const e=Math.round(t[1]+s)+"px";this.rendered.top_!=e&&(this.rendered.top_=n.top=e)}},Hm.prototype.getOptions=function(){return this.options};var Wm=Hm;function Um(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function Ym(t,e,n){return t+"/"+e+"/"+n}function Km(t){return Ym(t[0],t[1],t[2])}const Xm=function(t){Cc.call(this,t)};_l(Xm,Cc),Xm.prototype.expireCache=function(t){for(;this.canExpireCache();){const e=this.peekLast(),n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord))break;this.pop().dispose()}},Xm.prototype.pruneExceptNewestZ=function(){if(0===this.getCount())return;const t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Km(e.tileCoord)),e.dispose())},this)};var Zm=Xm;const qm=function(t,e,n,i,o,r,s,a,l,u,h,c,d,p,f){if(Rp.call(this,t,e,{transition:0}),this.context_={},this.replayState_={},this.sourceTiles_=u,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=r,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],r){const g=this.extent=l.getTileCoordExtent(r),_=l.getResolution(f),y=a.getZForResolution(_),m=f!=t[0];let v=0;if(a.forEachTileCoord(g,y,(function(t){let e=Ru(g,a.getTileCoordExtent(t));const n=a.getExtent();if(n&&(e=Ru(e,n,e)),ku(e)/_>=.5&&Iu(e)/_>=.5){++v;const e=t.toString();let n=u[e];if(!n&&!m){const r=s(t,h,c);n=u[e]=new d(t,void 0==r?4:0,void 0==r?"":r,i,o),this.sourceTileListenerKeys_.push(Pl(n,Wl.CHANGE,p))}!n||m&&2!=n.getState()||(n.consumers++,this.tileKeys.push(e))}}).bind(this)),m&&v==this.tileKeys.length&&this.finishLoading_(),f<=t[0]&&2!=this.state)for(;f>l.getMinZoom();){const p=new qm(t,e,n,i,o,r,s,a,l,u,h,c,d,Al,--f);if(2==p.state){this.interimTile=p;break}}}};_l(qm,Rp),qm.prototype.disposeInternal=function(){this.state=5,this.changed(),this.interimTile&&this.interimTile.dispose();for(let t=0,e=this.tileKeys.length;t<e;++t){const e=this.tileKeys[t],n=this.getTile(e);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[e],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(Ll),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(Ll),this.sourceTileListenerKeys_.length=0,Rp.prototype.disposeInternal.call(this)},qm.prototype.getContext=function(t){const e=ml(t).toString();return e in this.context_||(this.context_[e]=qh()),this.context_[e]},qm.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},qm.prototype.getReplayState=function(t){const e=ml(t).toString();return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},qm.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},qm.prototype.getTile=function(t){return this.sourceTiles_[t]},qm.prototype.load=function(){let t=0;const e={};0==this.state&&this.setState(1),1==this.state&&this.tileKeys.forEach((function(n){const i=this.getTile(n);if(0==i.state&&(i.setLoader(this.loader_),i.load()),1==i.state){const n=Pl(i,Wl.CHANGE,(function(n){const o=i.getState();if(2==o||3==o){const n=ml(i);3==o?e[n]=!0:(--t,delete e[n]),t-Object.keys(e).length==0&&this.finishLoading_()}}).bind(this));this.loadListenerKeys_.push(n),++t}}).bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},qm.prototype.finishLoading_=function(){let t=this.tileKeys.length,e=0;for(let n=t-1;n>=0;--n){const i=this.getTile(this.tileKeys[n]).getState();2!=i&&--t,4==i&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(Ll),this.loadListenerKeys_.length=0,this.setState(2)):this.setState(e==this.tileKeys.length?4:3)};const Qm=function(t,e,n,i,o,r){Rp.call(this,t,e,r),this.consumers=0,this.extent_=null,this.format_=i,this.features_=null,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=o,this.url_=n};_l(Qm,Rp);const Jm=[0,0,4096,4096];Qm.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=5,this.changed(),Rp.prototype.disposeInternal.call(this)},Qm.prototype.getExtent=function(){return this.extent_||Jm},Qm.prototype.getFormat=function(){return this.format_},Qm.prototype.getFeatures=function(){return this.features_},Qm.prototype.getKey=function(){return this.url_},Qm.prototype.getProjection=function(){return this.projection_},Qm.prototype.getReplayGroup=function(t,e){return this.replayGroups_[ml(t)+","+e]},Qm.prototype.load=function(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},Qm.prototype.onLoad=function(t,e,n){this.setProjection(e),this.setFeatures(t),this.setExtent(n)},Qm.prototype.onError=function(){this.setState(3)},Qm.prototype.setExtent=function(t){this.extent_=t},Qm.prototype.setFeatures=function(t){this.features_=t,this.setState(2)},Qm.prototype.setProjection=function(t){this.projection_=t},Qm.prototype.setReplayGroup=function(t,e,n){this.replayGroups_[ml(t)+","+e]=n},Qm.prototype.setLoader=function(t){this.loader_=t};const $m=function(){let t;return function(){if(!t){const e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}(),tv=function(t){const e=t||{};this.cssClassName_=void 0!==e.className?e.className:"ol-full-screen";const n=void 0!==e.label?e.label:"\u2922";this.labelNode_="string"==typeof n?document.createTextNode(n):n;const i=void 0!==e.labelActive?e.labelActive:"\xd7";this.labelActiveNode_="string"==typeof i?document.createTextNode(i):i;const o=e.tipLabel?e.tipLabel:"Toggle full-screen",r=document.createElement("button");r.className=this.cssClassName_+"-"+nv(),r.setAttribute("type","button"),r.title=o,r.appendChild(this.labelNode_),Pl(r,Wl.CLICK,this.handleClick_,this);const s=this.cssClassName_+" ol-unselectable ol-control "+(ev()?"":"ol-unsupported"),a=document.createElement("div");a.className=s,a.appendChild(r),Mf.call(this,{element:a,target:e.target}),this.keys_=void 0!==e.keys&&e.keys,this.source_=e.source};function ev(){const t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function nv(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function iv(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}_l(tv,Mf),tv.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},tv.prototype.handleFullScreen_=function(){if(!ev())return;const t=this.getMap();if(t)if(nv())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let e;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?(e=e).mozRequestFullScreenWithKeys?e.mozRequestFullScreenWithKeys():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):iv(e):iv(e)}},tv.prototype.handleFullScreenChange_=function(){const t=this.element.firstElementChild,e=this.getMap();nv()?(t.className=this.cssClassName_+"-true",Qh(this.labelActiveNode_,this.labelNode_)):(t.className=this.cssClassName_+"-false",Qh(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()},tv.prototype.setMap=function(t){Mf.prototype.setMap.call(this,t),t&&this.listenerKeys.push(Pl(document,$m(),this.handleFullScreenChange_,this))};const ov=function(t){const e=t||{};this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const n=void 0!==e.className?e.className:"ol-overviewmap",i=void 0!==e.tipLabel?e.tipLabel:"Overview map",o=void 0!==e.collapseLabel?e.collapseLabel:"\xab";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;const r=void 0!==e.label?e.label:"\xbb";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(s),Pl(a,Wl.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("DIV"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new zm({controls:new tu,interactions:new tu,view:e.view});const l=this.ovmap_;e.layers&&e.layers.forEach((function(t){l.addLayer(t)}).bind(this));const u=document.createElement("DIV");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new Wm({position:[0,0],positioning:"bottom-left",element:u}),this.ovmap_.addOverlay(this.boxOverlay_);const h=n+" ol-unselectable ol-control"+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),c=document.createElement("div");c.className=h,c.appendChild(this.ovmapDiv_),c.appendChild(a),Mf.call(this,{element:c,render:e.render||rv,target:e.target});const d=this,p=this.boxOverlay_,f=this.boxOverlay_.getElement(),g=function(t){const e=l.getEventCoordinate({clientX:(n=t).clientX-f.offsetWidth/2,clientY:n.clientY+f.offsetHeight/2});var n;p.setPosition(e)},_=function(t){const e=l.getEventCoordinate(t);d.getMap().getView().setCenter(e),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",_)};f.addEventListener("mousedown",function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",_)})};function rv(t){this.validateExtent_(),this.updateBox_()}_l(ov,Mf),ov.prototype.setMap=function(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(Mf.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Pl(t,"propertychange",this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(t.getLayerGroup());const e=t.getView();e&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},ov.prototype.handleMapPropertyChange_=function(t){if("view"===t.key){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}},ov.prototype.bindView_=function(t){Pl(t,ql("rotation"),this.handleRotationChanged_,this)},ov.prototype.unbindView_=function(t){kl(t,ql("rotation"),this.handleRotationChanged_,this)},ov.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},ov.prototype.validateExtent_=function(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView().calculateExtent(n),o=e.getSize(),r=e.getView().calculateExtent(o),s=e.getPixelFromCoordinate(Pu(i)),a=e.getPixelFromCoordinate(Eu(i)),l=Math.abs(s[0]-a[0]),u=Math.abs(s[1]-a[1]),h=o[0],c=o[1];l<.1*h||u<.1*c||l>.75*h||u>.75*c?this.resetExtent_():uu(r,i)||this.recenter_()},ov.prototype.resetExtent_=function(){const t=this.getMap(),e=this.ovmap_,n=t.getSize(),i=t.getView().calculateExtent(n),o=e.getView(),r=Math.log(7.5)/Math.LN2;Du(i,1/(.1*Math.pow(2,r/2))),o.fit(i)},ov.prototype.recenter_=function(){const t=this.getMap(),e=this.ovmap_,n=t.getView();e.getView().setCenter(n.getCenter())},ov.prototype.updateBox_=function(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView(),o=e.getView(),r=i.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=i.calculateExtent(n),u=o.getResolution(),h=Cu(l),c=Mu(l),d=this.calculateCoordinateRotate_(r,h);s.setPosition(d),a&&(a.style.width=Math.abs((h[0]-c[0])/u)+"px",a.style.height=Math.abs((c[1]-h[1])/u)+"px")},ov.prototype.calculateCoordinateRotate_=function(t,e){let n;const i=this.getMap().getView().getCenter();return i&&(np(n=[e[0]-i[0],e[1]-i[1]],t),Jd(n,i)),n},ov.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},ov.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Qh(this.collapseLabel_,this.label_):Qh(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),Ml(t,"postrender",function(t){this.updateBox_()},this))},ov.prototype.getCollapsible=function(){return this.collapsible_},ov.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},ov.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},ov.prototype.getCollapsed=function(){return this.collapsed_},ov.prototype.getOverviewMap=function(){return this.ovmap_};const sv=[1,2,5],av=function(t){const e=t||{},n=void 0!==e.className?e.className:"ol-scale-line";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=n+"-inner",this.element_=document.createElement("DIV"),this.element_.className=n+" ol-unselectable",this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",Mf.call(this,{element:this.element_,render:e.render||lv,target:e.target}),Pl(this,ql("units"),this.handleUnitsChanged_,this),this.setUnits(e.units||"metric")};function lv(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}_l(av,Mf),av.prototype.getUnits=function(){return this.get("units")},av.prototype.handleUnitsChanged_=function(){this.updateElement_()},av.prototype.setUnits=function(t){this.set("units",t)},av.prototype.updateElement_=function(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,i=this.getUnits(),o="degrees"==i?Qu.DEGREES:Qu.METERS;let r=yh(n,t.resolution,e,o);n.getUnits()!=Qu.DEGREES&&n.getMetersPerUnit()&&o==Qu.METERS&&(r*=n.getMetersPerUnit());let s=this.minWidth_*r,a="";if("degrees"==i){const t=qu[Qu.DEGREES];n.getUnits()==Qu.DEGREES?s*=t:r/=t,s<t/60?(a="\u2033",r*=3600):s<t?(a="\u2032",r*=60):a="\xb0"}else"imperial"==i?s<.9144?(a="in",r/=.0254):s<1609.344?(a="ft",r/=.3048):(a="mi",r/=1609.344):"nautical"==i?(r/=1852,a="nm"):"metric"==i?s<.001?(a="\u03bcm",r*=1e6):s<1?(a="mm",r*=1e3):s<1e3?a="m":(a="km",r/=1e3):"us"==i?s<.9144?(a="in",r*=39.37):s<1609.344?(a="ft",r/=.30480061):(a="mi",r/=1609.3472):eu(!1,33);let l,u,h=3*Math.floor(Math.log(this.minWidth_*r)/Math.log(10));for(;;){if(l=sv[(h%3+3)%3]*Math.pow(10,Math.floor(h/3)),u=Math.round(l/r),isNaN(u))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(u>=this.minWidth_)break;++h}const c=l+" "+a;this.renderedHTML_!=c&&(this.innerElement_.innerHTML=c,this.renderedHTML_=c),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)};const uv=function(t){const e=t||{};this.currentResolution_=void 0,this.direction_=0,this.heightLimit_=0,this.widthLimit_=0,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;const n=void 0!==e.className?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=n+"-thumb ol-unselectable";const o=document.createElement("div");o.className=n+" ol-unselectable ol-control",o.appendChild(i),this.dragger_=new af(o),Pl(this.dragger_,"pointerdown",this.handleDraggerStart_,this),Pl(this.dragger_,"pointermove",this.handleDraggerDrag_,this),Pl(this.dragger_,"pointerup",this.handleDraggerEnd_,this),Pl(o,Wl.CLICK,this.handleContainerClick_,this),Pl(i,Wl.CLICK,jl),Mf.call(this,{element:o,render:e.render||hv})};function hv(t){if(!t.frameState)return;this.sliderInitialized_||this.initSlider_();const e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}_l(uv,Mf),uv.prototype.disposeInternal=function(){this.dragger_.dispose(),Mf.prototype.disposeInternal.call(this)},uv.prototype.setMap=function(t){Mf.prototype.setMap.call(this,t),t&&t.render()},uv.prototype.initSlider_=function(){const t=this.element,e=t.offsetWidth,n=t.offsetHeight,i=t.firstElementChild,o=getComputedStyle(i),r=i.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=i.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);this.thumbSize_=[r,s],e>n?(this.direction_=1,this.widthLimit_=e-r):(this.direction_=0,this.heightLimit_=n-s),this.sliderInitialized_=!0},uv.prototype.handleContainerClick_=function(t){const e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n);e.animate({resolution:e.constrainResolution(i),duration:this.duration_,easing:Ep})},uv.prototype.handleDraggerStart_=function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||(this.getMap().getView().setHint(vf.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)},uv.prototype.handleDraggerDrag_=function(t){if(this.dragging_){const e=this.element.firstElementChild,n=t.clientX-this.previousX_+parseInt(e.style.left,10),i=t.clientY-this.previousY_+parseInt(e.style.top,10),o=this.getRelativePosition_(n,i);this.currentResolution_=this.getResolutionForPosition_(o),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},uv.prototype.handleDraggerEnd_=function(t){if(this.dragging_){const t=this.getMap().getView();t.setHint(vf.INTERACTING,-1),t.animate({resolution:t.constrainResolution(this.currentResolution_),duration:this.duration_,easing:Ep}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},uv.prototype.setThumbPosition_=function(t){const e=this.getPositionForResolution_(t),n=this.element.firstElementChild;1==this.direction_?n.style.left=this.widthLimit_*e+"px":n.style.top=this.heightLimit_*e+"px"},uv.prototype.getRelativePosition_=function(t,e){let n;return Nu(n=1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,0,1)},uv.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},uv.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)};const cv=function(t){const e=t||{};this.extent=e.extent?e.extent:null;const n=void 0!==e.className?e.className:"ol-zoom-extent",i=void 0!==e.label?e.label:"E",o=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=o,r.appendChild("string"==typeof i?document.createTextNode(i):i),Pl(r,Wl.CLICK,this.handleClick_,this);const s=n+" ol-unselectable ol-control",a=document.createElement("div");a.className=s,a.appendChild(r),Mf.call(this,{element:a,target:e.target})};_l(cv,Mf),cv.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},cv.prototype.handleZoomToExtent=function(){const t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)};const dv=function(t){this.source_=t};dv.prototype.getType=function(){},dv.prototype.getSource=function(){return this.source_},dv.prototype.isAnimated=Ol;var pv=dv;const fv=function(t){pv.call(this,t)};_l(fv,pv),fv.prototype.getType=function(){return 35632};var gv=fv;const _v=function(t){pv.call(this,t)};_l(_v,pv),_v.prototype.getType=function(){return 35633};var yv=_v;const mv=new gv("precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n"),vv=new yv("varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n");function xv(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const bv=function(t,e){Ry.call(this),this.tolerance=t,this.maxExtent=e,this.origin=Tu(e),this.projectionMatrix_=[1,0,0,1,0,0],this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0};_l(bv,Ry),bv.prototype.getDeleteResourcesFunction=function(t){},bv.prototype.finish=function(t){},bv.prototype.setUpProgram=function(t,e,n,i){},bv.prototype.shutDownProgram=function(t,e){},bv.prototype.drawReplay=function(t,e,n,i){},bv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){},bv.prototype.drawHitDetectionReplay=function(t,e,n,i,o,r){return o?this.drawHitDetectionReplayOneByOne(t,e,n,i,r):this.drawHitDetectionReplayAll(t,e,n,i)},bv.prototype.drawHitDetectionReplayAll=function(t,e,n,i){return t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,n,!0),i(null)||void 0},bv.prototype.replay=function(t,e,n,i,o,r,s,a,l,u,h){const c=t.getGL();let d,p,f,g,_,y,m,v;this.lineStringReplay&&(d=c.isEnabled(c.STENCIL_TEST),p=c.getParameter(c.STENCIL_FUNC),f=c.getParameter(c.STENCIL_VALUE_MASK),g=c.getParameter(c.STENCIL_REF),_=c.getParameter(c.STENCIL_WRITEMASK),y=c.getParameter(c.STENCIL_FAIL),m=c.getParameter(c.STENCIL_PASS_DEPTH_PASS),v=c.getParameter(c.STENCIL_PASS_DEPTH_FAIL),c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),c.stencilMask(255),c.stencilFunc(c.ALWAYS,1,255),c.stencilOp(c.KEEP,c.KEEP,c.REPLACE),this.lineStringReplay.replay(t,e,n,i,o,r,s,a,l,u,h),c.stencilMask(0),c.stencilFunc(c.NOTEQUAL,1,255)),t.bindBuffer(34962,this.verticesBuffer),t.bindBuffer(34963,this.indicesBuffer);const x=this.setUpProgram(c,t,o,r),b=Ph(this.projectionMatrix_);Oh(b,2/(n*o[0]),2/(n*o[1])),Dh(b,-i),Ah(b,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));const w=Ph(this.offsetScaleMatrix_);Oh(w,2/o[0],2/o[1]);const C=Ph(this.offsetRotateMatrix_);let E;return 0!==i&&Dh(C,-i),c.uniformMatrix4fv(x.u_projectionMatrix,!1,xv(this.tmpMat4_,b)),c.uniformMatrix4fv(x.u_offsetScaleMatrix,!1,xv(this.tmpMat4_,w)),c.uniformMatrix4fv(x.u_offsetRotateMatrix,!1,xv(this.tmpMat4_,C)),c.uniform1f(x.u_opacity,s),void 0===l?this.drawReplay(c,t,a,!1):E=this.drawHitDetectionReplay(c,t,a,l,u,h),this.shutDownProgram(c,x),this.lineStringReplay&&(d||c.disable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),c.stencilFunc(p,g,f),c.stencilMask(_),c.stencilOp(y,v,m)),E},bv.prototype.drawElements=function(t,e,n,i){t.drawElements(4,i-n,e.hasOESElementIndexUint?5125:5123,n*(e.hasOESElementIndexUint?4:2))};var wv=bv;const Cv=[0,0,0,1],Ev=[],Tv=[0,0,0,1],Sv=Number.EPSILON||2.220446049250313e-16,Iv=function(t,e,n,i,o,r){const s=(n-t)*(r-e)-(o-t)*(i-e);return s<=Sv&&s>=-Sv?void 0:s>0},Rv=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:35044};Rv.prototype.getArray=function(){return this.arr_},Rv.prototype.getUsage=function(){return this.usage_};var Pv=Rv;const Mv=function(t,e){wv.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}};_l(Mv,wv),Mv.prototype.drawCoordinates_=function(t,e,n,i){let o,r,s=this.vertices.length,a=this.indices.length,l=s/4;for(o=e,r=n;o<r;o+=i)this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=0,this.vertices[s++]=this.radius_,this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=1,this.vertices[s++]=this.radius_,this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=2,this.vertices[s++]=this.radius_,this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=3,this.vertices[s++]=this.radius_,this.indices[a++]=l,this.indices[a++]=l+1,this.indices[a++]=l+2,this.indices[a++]=l+2,this.indices[a++]=l+3,this.indices[a++]=l,l+=4},Mv.prototype.drawCircle=function(t,e){const n=t.getRadius(),i=t.getStride();if(n){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=n;let o=t.getFlatCoordinates();o=Au(o,0,2,i,-this.origin[0],-this.origin[1]),this.drawCoordinates_(o,0,2,i)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){const t=this.styles_[this.styles_.length-1];this.state_.fillColor=t[0],this.state_.strokeColor=t[1],this.state_.lineWidth=t[2],this.state_.changed=!1}},Mv.prototype.finish=function(t){this.verticesBuffer=new Pv(this.vertices),this.indicesBuffer=new Pv(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},Mv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(n)}},Mv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(mv,vv);let r;return this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_fillColor=t.getUniformLocation(e,"u_fillColor"),this.u_strokeColor=t.getUniformLocation(e,"u_strokeColor"),this.u_size=t.getUniformLocation(e,"u_size"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_instruction=t.getAttribLocation(e,"a_instruction"),this.a_radius=t.getAttribLocation(e,"a_radius")}(t,o),this.defaultLocations_=r),e.useProgram(o),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,16,0),t.enableVertexAttribArray(r.a_instruction),t.vertexAttribPointer(r.a_instruction,1,5126,!1,16,8),t.enableVertexAttribArray(r.a_radius),t.vertexAttribPointer(r.a_radius,1,5126,!1,16,12),t.uniform2fv(r.u_size,n),t.uniform1f(r.u_pixelRatio,i),r},Mv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},Mv.prototype.drawReplay=function(t,e,n,i){if(El(n)){let n,i,o,r;for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)i=this.styleIndices_[n],this.setFillStyle_(t,(r=this.styles_[n])[0]),this.setStrokeStyle_(t,r[1],r[2]),this.drawElements(t,e,i,o),o=i}else this.drawReplaySkipping_(t,e,n)},Mv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,u,h,c,d;for(a=this.startIndices[1+(d=this.startIndices.length-2)],r=this.styleIndices_.length-1;r>=0;--r)for(this.setFillStyle_(t,(l=this.styles_[r])[0]),this.setStrokeStyle_(t,l[1],l[2]),u=this.styleIndices_[r];d>=0&&this.startIndices[d]>=u;){if(s=this.startIndices[d],void 0===n[c=ml(h=this.startIndicesFeature[d]).toString()]&&h.getGeometry()&&(void 0===o||Lu(o,h.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);const n=i(h);if(n)return n}d--,a=s}},Mv.prototype.drawReplaySkipping_=function(t,e,n){let i,o,r,s,a,l,u,h,c;for(r=o=this.startIndices[1+(h=this.startIndices.length-2)],i=this.styleIndices_.length-1;i>=0;--i){for(this.setFillStyle_(t,(s=this.styles_[i])[0]),this.setStrokeStyle_(t,s[1],s[2]),a=this.styleIndices_[i];h>=0&&this.startIndices[h]>=a;)c=this.startIndices[h],n[u=ml(l=this.startIndicesFeature[h]).toString()]&&(o!==r&&this.drawElements(t,e,o,r),r=c),h--,o=c;o!==r&&this.drawElements(t,e,o,r),o=r=a}},Mv.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},Mv.prototype.setStrokeStyle_=function(t,e,n){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,n)},Mv.prototype.setFillStrokeStyle=function(t,e){let n,i;if(e){const t=e.getLineDash();this.state_.lineDash=t||Ev;const o=e.getLineDashOffset();this.state_.lineDashOffset=o||0,n=(n=e.getColor())instanceof CanvasGradient||n instanceof CanvasPattern?Tv:Yh(n).map(function(t,e){return 3!=e?t/255:t})||Tv,i=void 0!==(i=e.getWidth())?i:1}else n=[0,0,0,0],i=0;let o=t?t.getColor():[0,0,0,0];o=o instanceof CanvasGradient||o instanceof CanvasPattern?Cv:Yh(o).map(function(t,e){return 3!=e?t/255:t})||Cv,this.state_.strokeColor&&ld(this.state_.strokeColor,n)&&this.state_.fillColor&&ld(this.state_.fillColor,o)&&this.state_.lineWidth===i||(this.state_.changed=!0,this.state_.fillColor=o,this.state_.strokeColor=n,this.state_.lineWidth=i,this.styles_.push([o,n,i]))};var kv=Mv;const Lv=new gv("precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Fv=new yv("varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n"),Dv=function(t,e){this.canvas_=t,this.gl_=e,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=od(sc,"OES_element_index_uint"),this.hasOESElementIndexUint&&e.getExtension("OES_element_index_uint"),Pl(this.canvas_,"webglcontextlost",this.handleWebGLContextLost,this),Pl(this.canvas_,"webglcontextrestored",this.handleWebGLContextRestored,this)};function Ov(t,e,n){const i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(nc,tc,e),void 0!==n&&t.texParameteri(nc,ec,n),i}function Av(t,e,n,i,o){const r=Ov(t,i,o);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),r}function Nv(t,e,n,i){const o=Ov(t,n,i);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),o}_l(Dv,Gl),Dv.prototype.bindBuffer=function(t,e){const n=this.getGL(),i=e.getArray(),o=String(ml(e));if(o in this.bufferCache_)n.bindBuffer(t,this.bufferCache_[o].buffer);else{const r=n.createBuffer();let s;n.bindBuffer(t,r),34962==t?s=new Float32Array(i):34963==t&&(s=this.hasOESElementIndexUint?new Uint32Array(i):new Uint16Array(i)),n.bufferData(t,s,e.getUsage()),this.bufferCache_[o]={buf:e,buffer:r}}},Dv.prototype.deleteBuffer=function(t){const e=this.getGL(),n=String(ml(t)),i=this.bufferCache_[n];e.isContextLost()||e.deleteBuffer(i.buffer),delete this.bufferCache_[n]},Dv.prototype.disposeInternal=function(){Fl(this.canvas_);const t=this.getGL();if(!t.isContextLost()){for(const e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(const e in this.programCache_)t.deleteProgram(this.programCache_[e]);for(const e in this.shaderCache_)t.deleteShader(this.shaderCache_[e]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},Dv.prototype.getCanvas=function(){return this.canvas_},Dv.prototype.getGL=function(){return this.gl_},Dv.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},Dv.prototype.getShader=function(t){const e=String(ml(t));if(e in this.shaderCache_)return this.shaderCache_[e];{const n=this.getGL(),i=n.createShader(t.getType());return n.shaderSource(i,t.getSource()),n.compileShader(i),this.shaderCache_[e]=i,i}},Dv.prototype.getProgram=function(t,e){const n=ml(t)+"/"+ml(e);if(n in this.programCache_)return this.programCache_[n];{const i=this.getGL(),o=i.createProgram();return i.attachShader(o,this.getShader(t)),i.attachShader(o,this.getShader(e)),i.linkProgram(o),this.programCache_[n]=o,o}},Dv.prototype.handleWebGLContextLost=function(){wl(this.bufferCache_),wl(this.shaderCache_),wl(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},Dv.prototype.handleWebGLContextRestored=function(){},Dv.prototype.initHitDetectionFramebuffer_=function(){const t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);const n=Av(t,1,1),i=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=n,this.hitDetectionRenderbuffer_=i},Dv.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)};var Gv=Dv;const Vv=function(t,e){wv.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0};_l(Vv,wv),Vv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer,i=this.getTextures(!0),o=t.getGL();return function(){if(!o.isContextLost()){let t,e;for(t=0,e=i.length;t<e;++t)o.deleteTexture(i[t])}t.deleteBuffer(e),t.deleteBuffer(n)}},Vv.prototype.drawCoordinates=function(t,e,n,i){const o=this.anchorX,r=this.anchorY,s=this.height,a=this.imageHeight,l=this.imageWidth,u=this.opacity,h=this.originX,c=this.originY,d=this.rotateWithView?1:0,p=-this.rotation,f=this.scale,g=this.width,_=Math.cos(p),y=Math.sin(p);let m,v,x,b,w,C,E=this.indices.length,T=this.vertices.length;for(m=e;m<n;m+=i)C=t[m+1]-this.origin[1],v=T/8,x=-f*o,b=-f*(s-r),this.vertices[T++]=w=t[m]-this.origin[0],this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=h/l,this.vertices[T++]=(c+s)/a,this.vertices[T++]=u,this.vertices[T++]=d,x=f*(g-o),b=-f*(s-r),this.vertices[T++]=w,this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=(h+g)/l,this.vertices[T++]=(c+s)/a,this.vertices[T++]=u,this.vertices[T++]=d,x=f*(g-o),b=f*r,this.vertices[T++]=w,this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=(h+g)/l,this.vertices[T++]=c/a,this.vertices[T++]=u,this.vertices[T++]=d,x=-f*o,b=f*r,this.vertices[T++]=w,this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=h/l,this.vertices[T++]=c/a,this.vertices[T++]=u,this.vertices[T++]=d,this.indices[E++]=v,this.indices[E++]=v+1,this.indices[E++]=v+2,this.indices[E++]=v,this.indices[E++]=v+2,this.indices[E++]=v+3;return T},Vv.prototype.createTextures=function(t,e,n,i){let o,r,s,a;const l=e.length;for(a=0;a<l;++a)(s=ml(r=e[a]).toString())in n?o=n[s]:(o=Nv(i,r,33071,33071),n[s]=o),t[a]=o},Vv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(Lv,Fv);let r;return this.defaultLocations?r=this.defaultLocations:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_image=t.getUniformLocation(e,"u_image"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord"),this.a_offsets=t.getAttribLocation(e,"a_offsets"),this.a_opacity=t.getAttribLocation(e,"a_opacity"),this.a_rotateWithView=t.getAttribLocation(e,"a_rotateWithView")}(t,o),this.defaultLocations=r),e.useProgram(o),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,32,0),t.enableVertexAttribArray(r.a_offsets),t.vertexAttribPointer(r.a_offsets,2,5126,!1,32,8),t.enableVertexAttribArray(r.a_texCoord),t.vertexAttribPointer(r.a_texCoord,2,5126,!1,32,16),t.enableVertexAttribArray(r.a_opacity),t.vertexAttribPointer(r.a_opacity,1,5126,!1,32,24),t.enableVertexAttribArray(r.a_rotateWithView),t.vertexAttribPointer(r.a_rotateWithView,1,5126,!1,32,28),r},Vv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},Vv.prototype.drawReplay=function(t,e,n,i){const o=i?this.getHitDetectionTextures():this.getTextures(),r=i?this.hitDetectionGroupIndices:this.groupIndices;if(El(n)){let n,i,s;for(n=0,i=o.length,s=0;n<i;++n){t.bindTexture(nc,o[n]);const i=r[n];this.drawElements(t,e,s,i),s=i}}else this.drawReplaySkipping(t,e,n,o,r)},Vv.prototype.drawReplaySkipping=function(t,e,n,i,o){let r,s,a=0;for(r=0,s=i.length;r<s;++r){t.bindTexture(nc,i[r]);const s=r>0?o[r-1]:0,l=o[r];let u=s,h=s;for(;a<this.startIndices.length&&this.startIndices[a]<=l;)void 0!==n[ml(this.startIndicesFeature[a]).toString()]?(u!==h&&this.drawElements(t,e,u,h),h=u=a===this.startIndices.length-1?l:this.startIndices[a+1]):h=a===this.startIndices.length-1?l:this.startIndices[a+1],a++;u!==h&&this.drawElements(t,e,u,h)}},Vv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,u,h,c=this.startIndices.length-1;const d=this.getHitDetectionTextures();for(r=d.length-1;r>=0;--r)for(t.bindTexture(nc,d[r]),s=r>0?this.hitDetectionGroupIndices[r-1]:0,l=this.hitDetectionGroupIndices[r];c>=0&&this.startIndices[c]>=s;){if(a=this.startIndices[c],void 0===n[h=ml(u=this.startIndicesFeature[c]).toString()]&&u.getGeometry()&&(void 0===o||Lu(o,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,l);const n=i(u);if(n)return n}l=a,c--}},Vv.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},Vv.prototype.getTextures=function(t){},Vv.prototype.getHitDetectionTextures=function(){};var jv=Vv;const Bv=function(t,e){jv.call(this,t,e),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]};_l(Bv,jv),Bv.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const n=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(n,0,n.length,i)},Bv.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const n=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(n,0,n.length,i)},Bv.prototype.finish=function(t){const e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new Pv(this.vertices),this.indicesBuffer=new Pv(this.indices);const n={};this.createTextures(this.textures_,this.images_,n,e),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,e),this.images_=null,this.hitDetectionImages_=null,jv.prototype.finish.call(this,t)},Bv.prototype.setImageStyle=function(t){const e=t.getAnchor(),n=t.getImage(1),i=t.getImageSize(),o=t.getHitDetectionImage(1),r=t.getOpacity(),s=t.getOrigin(),a=t.getRotateWithView(),l=t.getRotation(),u=t.getSize(),h=t.getScale();let c;0===this.images_.length?this.images_.push(n):ml(c=this.images_[this.images_.length-1])!=ml(n)&&(this.groupIndices.push(this.indices.length),this.images_.push(n)),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(o):ml(c=this.hitDetectionImages_[this.hitDetectionImages_.length-1])!=ml(o)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(o)),this.anchorX=e[0],this.anchorY=e[1],this.height=u[1],this.imageHeight=i[1],this.imageWidth=i[0],this.opacity=r,this.originX=s[0],this.originY=s[1],this.rotation=l,this.rotateWithView=a,this.scale=h,this.width=u[0]},Bv.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},Bv.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_};var zv=Bv;function Hv(t,e,n,i){const o=n-i;return t[e]===t[o]&&t[e+1]===t[o+1]&&(n-e)/i>3&&!!fd(t,e,n,i)}const Wv=new gv("precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Uv=new yv("varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n"),Yv=function(t,e){wv.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}};_l(Yv,wv),Yv.prototype.drawCoordinates_=function(t,e,n,i){let o,r,s=this.vertices.length,a=this.indices.length;const l="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,u="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,h=Hv(t,e,n,i);let c,d,p,f,g,_,y=a,m=1;for(o=e,r=n;o<r;o+=i){if(p=s/7,f=g,g=_||[t[o],t[o+1]],o===e){if(_=[t[o+i],t[o+i+1]],n-e==2*i&&ld(g,_))break;if(!h){u&&(s=this.addVertices_([0,0],g,_,7*m*u,s),s=this.addVertices_([0,0],g,_,7*-m*u,s),this.indices[a++]=p+2,this.indices[a++]=p,this.indices[a++]=p+1,this.indices[a++]=p+1,this.indices[a++]=p+3,this.indices[a++]=p+2),s=this.addVertices_([0,0],g,_,3*m*(u||1),s),y=(s=this.addVertices_([0,0],g,_,3*-m*(u||1),s))/7-1;continue}f=[t[n-2*i],t[n-2*i+1]],c=_}else{if(o===n-i){if(h){_=c;break}s=this.addVertices_(f=f||[0,0],g,[0,0],5*m*(u||1),s),s=this.addVertices_(f,g,[0,0],5*-m*(u||1),s),this.indices[a++]=p,this.indices[a++]=y-1,this.indices[a++]=y,this.indices[a++]=y,this.indices[a++]=p+1,this.indices[a++]=p,u&&(s=this.addVertices_(f,g,[0,0],11*m*u,s),s=this.addVertices_(f,g,[0,0],11*-m*u,s),this.indices[a++]=p+2,this.indices[a++]=p,this.indices[a++]=p+1,this.indices[a++]=p+1,this.indices[a++]=p+3,this.indices[a++]=p+2);break}_=[t[o+i],t[o+i+1]]}d=Iv(f[0],f[1],g[0],g[1],_[0],_[1])?-1:1,s=this.addVertices_(f,g,_,13*d*(l||1),s),s=this.addVertices_(f,g,_,17*d*(l||1),s),s=this.addVertices_(f,g,_,19*-d*(l||1),s),o>e&&(this.indices[a++]=p,this.indices[a++]=y-1,this.indices[a++]=y,this.indices[a++]=p+2,this.indices[a++]=p,this.indices[a++]=m*d>0?y:y-1),this.indices[a++]=p,this.indices[a++]=p+2,this.indices[a++]=p+1,y=p+2,m=d,l&&(s=this.addVertices_(f,g,_,23*d*l,s),this.indices[a++]=p+1,this.indices[a++]=p+3,this.indices[a++]=p)}h&&(p=p||s/7,d=Hd([f[0],f[1],g[0],g[1],_[0],_[1]],0,6,2)?1:-1,s=this.addVertices_(f,g,_,13*d*(l||1),s),s=this.addVertices_(f,g,_,19*-d*(l||1),s),this.indices[a++]=p,this.indices[a++]=y-1,this.indices[a++]=y,this.indices[a++]=p+1,this.indices[a++]=p,this.indices[a++]=m*d>0?y:y-1)},Yv.prototype.addVertices_=function(t,e,n,i,o){return this.vertices[o++]=t[0],this.vertices[o++]=t[1],this.vertices[o++]=e[0],this.vertices[o++]=e[1],this.vertices[o++]=n[0],this.vertices[o++]=n[1],this.vertices[o++]=i,o},Yv.prototype.isValid_=function(t,e,n,i){const o=n-e;return!(o<2*i||o===2*i&&ld([t[e],t[e+1]],[t[e+i],t[e+i+1]]))},Yv.prototype.drawLineString=function(t,e){let n=t.getFlatCoordinates();const i=t.getStride();this.isValid_(n,0,n.length,i)&&(n=Au(n,0,n.length,i,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(n,0,n.length,i))},Yv.prototype.drawMultiLineString=function(t,e){const n=this.indices.length,i=t.getEnds();i.unshift(0);const o=t.getFlatCoordinates(),r=t.getStride();let s,a;if(i.length>1)for(s=1,a=i.length;s<a;++s)if(this.isValid_(o,i[s-1],i[s],r)){const t=Au(o,i[s-1],i[s],r,-this.origin[0],-this.origin[1]);this.drawCoordinates_(t,0,t.length,r)}this.indices.length>n&&(this.startIndices.push(n),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1))},Yv.prototype.drawPolygonCoordinates=function(t,e,n){if(Hv(t,0,t.length,n)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,n),e.length){let t,i;for(t=0,i=e.length;t<i;++t)Hv(e[t],0,e[t].length,n)||(e[t].push(e[t][0]),e[t].push(e[t][1])),this.drawCoordinates_(e[t],0,e[t].length,n)}},Yv.prototype.setPolygonStyle=function(t,e){const n=void 0===e?this.indices.length:e;this.startIndices.push(n),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1)},Yv.prototype.getCurrentIndex=function(){return this.indices.length},Yv.prototype.finish=function(t){this.verticesBuffer=new Pv(this.vertices),this.indicesBuffer=new Pv(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},Yv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(n)}},Yv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(Wv,Uv);let r;return this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_miterLimit=t.getUniformLocation(e,"u_miterLimit"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_size=t.getUniformLocation(e,"u_size"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.a_lastPos=t.getAttribLocation(e,"a_lastPos"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_nextPos=t.getAttribLocation(e,"a_nextPos"),this.a_direction=t.getAttribLocation(e,"a_direction")}(t,o),this.defaultLocations_=r),e.useProgram(o),t.enableVertexAttribArray(r.a_lastPos),t.vertexAttribPointer(r.a_lastPos,2,5126,!1,28,0),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,28,8),t.enableVertexAttribArray(r.a_nextPos),t.vertexAttribPointer(r.a_nextPos,2,5126,!1,28,16),t.enableVertexAttribArray(r.a_direction),t.vertexAttribPointer(r.a_direction,1,5126,!1,28,24),t.uniform2fv(r.u_size,n),t.uniform1f(r.u_pixelRatio,i),r},Yv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},Yv.prototype.drawReplay=function(t,e,n,i){const o=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),El(n)){let n,i,o,r;for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)i=this.styleIndices_[n],this.setStrokeStyle_(t,(r=this.styles_[n])[0],r[1],r[2]),this.drawElements(t,e,i,o),t.clear(t.DEPTH_BUFFER_BIT),o=i}else this.drawReplaySkipping_(t,e,n);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(o))},Yv.prototype.drawReplaySkipping_=function(t,e,n){let i,o,r,s,a,l,u,h,c;for(r=o=this.startIndices[1+(h=this.startIndices.length-2)],i=this.styleIndices_.length-1;i>=0;--i){for(this.setStrokeStyle_(t,(s=this.styles_[i])[0],s[1],s[2]),a=this.styleIndices_[i];h>=0&&this.startIndices[h]>=a;)c=this.startIndices[h],n[u=ml(l=this.startIndicesFeature[h]).toString()]&&(o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),r=c),h--,o=c;o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),o=r=a}},Yv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,u,h,c,d;for(a=this.startIndices[1+(d=this.startIndices.length-2)],r=this.styleIndices_.length-1;r>=0;--r)for(this.setStrokeStyle_(t,(l=this.styles_[r])[0],l[1],l[2]),u=this.styleIndices_[r];d>=0&&this.startIndices[d]>=u;){if(s=this.startIndices[d],void 0===n[c=ml(h=this.startIndicesFeature[d]).toString()]&&h.getGeometry()&&(void 0===o||Lu(o,h.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);const n=i(h);if(n)return n}d--,a=s}},Yv.prototype.setStrokeStyle_=function(t,e,n,i){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,n),t.uniform1f(this.defaultLocations_.u_miterLimit,i)},Yv.prototype.setFillStrokeStyle=function(t,e){const n=e.getLineCap();this.state_.lineCap=void 0!==n?n:"round";const i=e.getLineDash();this.state_.lineDash=i||Ev;const o=e.getLineDashOffset();this.state_.lineDashOffset=o||0;const r=e.getLineJoin();this.state_.lineJoin=void 0!==r?r:"round";let s=e.getColor();s=s instanceof CanvasGradient||s instanceof CanvasPattern?Tv:Yh(s).map(function(t,e){return 3!=e?t/255:t})||Tv;let a=e.getWidth();a=void 0!==a?a:1;let l=e.getMiterLimit();l=void 0!==l?l:10,this.state_.strokeColor&&ld(this.state_.strokeColor,s)&&this.state_.lineWidth===a&&this.state_.miterLimit===l||(this.state_.changed=!0,this.state_.strokeColor=s,this.state_.lineWidth=a,this.state_.miterLimit=l,this.styles_.push([s,a,l]))};var Kv=Yv;const Xv=new gv("precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Zv=new yv("\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n"),qv=function(t){this.circular_=void 0===t||t,this.length_=0};qv.prototype.insertItem=function(t){const e={prev:void 0,next:void 0,data:t},n=this.head_;if(n){const t=n.next;e.prev=n,e.next=t,n.next=e,t&&(t.prev=e),n===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},qv.prototype.removeItem=function(){const t=this.head_;if(t){const e=t.next,n=t.prev;e&&(e.prev=n),n&&(n.next=e),this.head_=e||n,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=n?this.head_.prev:this.head_),this.length_--}},qv.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},qv.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},qv.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},qv.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},qv.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},qv.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},qv.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},qv.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},qv.prototype.concat=function(t){if(t.head_){if(this.head_){const e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},qv.prototype.getLength=function(){return this.length_};var Qv=qv;const Jv=function(t,e){wv.call(this,t,e),this.lineStringReplay=new Kv(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}};_l(Jv,wv),Jv.prototype.drawCoordinates_=function(t,e,n){const i=new Qv,o=new D_;this.processFlatCoordinates_(t,n,i,o,!0);const r=this.getMaxCoords_(i);if(e.length){let t,s;const a=[];for(t=0,s=e.length;t<s;++t){const i={list:new Qv,maxCoords:void 0,rtree:new D_};a.push(i),this.processFlatCoordinates_(e[t],n,i.list,i.rtree,!1),this.classifyPoints_(i.list,i.rtree,!0),i.maxCoords=this.getMaxCoords_(i.list)}for(a.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),t=0;t<a.length;++t){const e=a[t].list,n=e.firstItem();let s,l=n;do{if(this.getIntersections_(l,o).length){s=!0;break}l=e.nextItem()}while(n!==l);s||this.bridgeHole_(e,a[t].maxCoords[0],i,r[0],o)&&(o.concat(a[t].rtree),this.classifyPoints_(i,o,!1))}}else this.classifyPoints_(i,o,!1);this.triangulate_(i,o)},Jv.prototype.processFlatCoordinates_=function(t,e,n,i,o){const r=Hd(t,0,t.length,e);let s,a,l,u,h,c=this.vertices.length/2;const d=[],p=[];if(o===r){for(u=l=this.createPoint_(t[0],t[1],c++),s=e,a=t.length;s<a;s+=e)h=this.createPoint_(t[s],t[s+1],c++),p.push(this.insertItem_(u,h,n)),d.push([Math.min(u.x,h.x),Math.min(u.y,h.y),Math.max(u.x,h.x),Math.max(u.y,h.y)]),u=h;p.push(this.insertItem_(h,l,n)),d.push([Math.min(u.x,h.x),Math.min(u.y,h.y),Math.max(u.x,h.x),Math.max(u.y,h.y)])}else{const i=t.length-e;for(u=l=this.createPoint_(t[i],t[i+1],c++),s=i-e,a=0;s>=a;s-=e)h=this.createPoint_(t[s],t[s+1],c++),p.push(this.insertItem_(u,h,n)),d.push([Math.min(u.x,h.x),Math.min(u.y,h.y),Math.max(u.x,h.x),Math.max(u.y,h.y)]),u=h;p.push(this.insertItem_(h,l,n)),d.push([Math.min(u.x,h.x),Math.min(u.y,h.y),Math.max(u.x,h.x),Math.max(u.y,h.y)])}i.load(d,p)},Jv.prototype.getMaxCoords_=function(t){const e=t.firstItem();let n=e,i=[n.p0.x,n.p0.y];do{(n=t.nextItem()).p0.x>i[0]&&(i=[n.p0.x,n.p0.y])}while(n!==e);return i},Jv.prototype.classifyPoints_=function(t,e,n){let i=t.firstItem(),o=i,r=t.nextItem(),s=!1;do{const a=n?Iv(r.p1.x,r.p1.y,o.p1.x,o.p1.y,o.p0.x,o.p0.y):Iv(o.p0.x,o.p0.y,o.p1.x,o.p1.y,r.p1.x,r.p1.y);void 0===a?(this.removeItem_(o,r,t,e),s=!0,r===i&&(i=t.getNextItem()),r=o,t.prevItem()):o.p1.reflex!==a&&(o.p1.reflex=a,s=!0),o=r,r=t.nextItem()}while(o!==i);return s},Jv.prototype.bridgeHole_=function(t,e,n,i,o){let r=t.firstItem();for(;r.p1.x!==e;)r=t.nextItem();const s=r.p1,a={x:i,y:s.y,i:-1};let l,u,h,c,d=1/0;const p=this.getIntersections_({p0:s,p1:a},o,!0);for(l=0,u=p.length;l<u;++l){const t=p[l],e=this.calculateIntersection_(s,a,t.p0,t.p1,!0),n=Math.abs(s.x-e[0]);n<d&&void 0!==Iv(s.x,s.y,t.p0.x,t.p0.y,t.p1.x,t.p1.y)&&(d=n,c={x:e[0],y:e[1],i:-1},r=t)}if(d===1/0)return!1;if(h=r.p1,d>0){const t=this.getPointsInTriangle_(s,c,r.p1,o);if(t.length){let e=1/0;for(l=0,u=t.length;l<u;++l){const n=t[l],i=Math.atan2(s.y-n.y,a.x-n.x);(i<e||i===e&&n.x<h.x)&&(e=i,h=n)}}}for(r=n.firstItem();r.p1.x!==h.x||r.p1.y!==h.y;)r=n.nextItem();const f={x:s.x,y:s.y,i:s.i,reflex:void 0},g={x:r.p1.x,y:r.p1.y,i:r.p1.i,reflex:void 0};return t.getNextItem().p0=f,this.insertItem_(s,r.p1,t,o),this.insertItem_(g,f,t,o),r.p1=g,t.setFirstItem(),n.concat(t),!0},Jv.prototype.triangulate_=function(t,e){let n=!1,i=this.isSimple_(t,e);for(;t.getLength()>3;)if(i){if(!this.clipEars_(t,e,i,n)&&!this.classifyPoints_(t,e,n)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,i,n)&&!this.classifyPoints_(t,e,n)&&!this.resolveSelfIntersections_(t,e)){if(!(i=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}n=!this.isClockwise_(t),this.classifyPoints_(t,e,n)}if(3===t.getLength()){let e=this.indices.length;this.indices[e++]=t.getPrevItem().p0.i,this.indices[e++]=t.getCurrItem().p0.i,this.indices[e++]=t.getNextItem().p0.i}},Jv.prototype.clipEars_=function(t,e,n,i){let o,r,s,a=this.indices.length,l=t.firstItem(),u=t.getPrevItem(),h=l,c=t.nextItem(),d=t.getNextItem(),p=!1;do{if(o=h.p0,s=c.p1,!1===(r=h.p1).reflex){let f;f=n?0===this.getPointsInTriangle_(o,r,s,e,!0).length:i?this.diagonalIsInside_(d.p1,s,r,o,u.p0):this.diagonalIsInside_(u.p0,o,r,s,d.p1),(n||0===this.getIntersections_({p0:o,p1:s},e).length)&&f&&(n||!1===o.reflex||!1===s.reflex||Hd([u.p0.x,u.p0.y,o.x,o.y,r.x,r.y,s.x,s.y,d.p1.x,d.p1.y],0,10,2)===!i)&&(this.indices[a++]=o.i,this.indices[a++]=r.i,this.indices[a++]=s.i,this.removeItem_(h,c,t,e),c===l&&(l=d),p=!0)}u=t.getPrevItem(),h=t.getCurrItem(),c=t.nextItem(),d=t.getNextItem()}while(h!==l&&t.getLength()>3);return p},Jv.prototype.resolveSelfIntersections_=function(t,e,n){const i=t.firstItem();t.nextItem();let o=i,r=t.nextItem(),s=!1;do{const a=this.calculateIntersection_(o.p0,o.p1,r.p0,r.p1,n);if(a){let l=!1,u=this.indices.length;const h=this.vertices.length/2,c=t.prevItem();let d;if(t.removeItem(),e.remove(c),l=c===i,n?(a[0]===o.p0.x&&a[1]===o.p0.y?(t.prevItem(),r.p0=d=o.p0,e.remove(o),l=l||o===i):(o.p1=d=r.p1,e.remove(r),l=l||r===i),t.removeItem()):(d=this.createPoint_(a[0],a[1],h),o.p1=d,r.p0=d,e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o),e.update([Math.min(r.p0.x,r.p1.x),Math.min(r.p0.y,r.p1.y),Math.max(r.p0.x,r.p1.x),Math.max(r.p0.y,r.p1.y)],r)),this.indices[u++]=c.p0.i,this.indices[u++]=c.p1.i,this.indices[u++]=d.i,s=!0,l)break}o=t.getPrevItem(),r=t.nextItem()}while(o!==i);return s},Jv.prototype.isSimple_=function(t,e){const n=t.firstItem();let i=n;do{if(this.getIntersections_(i,e).length)return!1;i=t.nextItem()}while(i!==n);return!0},Jv.prototype.isClockwise_=function(t){const e=2*t.getLength(),n=new Array(e),i=t.firstItem();let o=i,r=0;do{n[r++]=o.p0.x,n[r++]=o.p0.y,o=t.nextItem()}while(o!==i);return Hd(n,0,e,2)},Jv.prototype.splitPolygon_=function(t,e){const n=t.firstItem();let i=n;do{const n=this.getIntersections_(i,e);if(n.length){const o=n[0],r=this.vertices.length/2,s=this.calculateIntersection_(i.p0,i.p1,o.p0,o.p1),a=this.createPoint_(s[0],s[1],r),l=new Qv,u=new D_;this.insertItem_(a,i.p1,l,u),i.p1=a,e.update([Math.min(i.p0.x,a.x),Math.min(i.p0.y,a.y),Math.max(i.p0.x,a.x),Math.max(i.p0.y,a.y)],i);let h=t.nextItem();for(;h!==o;)this.insertItem_(h.p0,h.p1,l,u),e.remove(h),t.removeItem(),h=t.getCurrItem();this.insertItem_(o.p0,a,l,u),o.p0=a,e.update([Math.min(o.p1.x,a.x),Math.min(o.p1.y,a.y),Math.max(o.p1.x,a.x),Math.max(o.p1.y,a.y)],o),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(l,u,!1),this.triangulate_(l,u);break}i=t.nextItem()}while(i!==n)},Jv.prototype.createPoint_=function(t,e,n){let i=this.vertices.length;return this.vertices[i++]=t,this.vertices[i++]=e,{x:t,y:e,i:n,reflex:void 0}},Jv.prototype.insertItem_=function(t,e,n,i){const o={p0:t,p1:e};return n.insertItem(o),i&&i.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],o),o},Jv.prototype.removeItem_=function(t,e,n,i){n.getCurrItem()===e&&(n.removeItem(),t.p1=e.p1,i.remove(e),i.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},Jv.prototype.getPointsInTriangle_=function(t,e,n,i,o){const r=[],s=i.getInExtent([Math.min(t.x,e.x,n.x),Math.min(t.y,e.y,n.y),Math.max(t.x,e.x,n.x),Math.max(t.y,e.y,n.y)]);for(let a=0,l=s.length;a<l;++a)for(const i in s[a]){const l=s[a][i];"object"!=typeof l||o&&!l.reflex||l.x===t.x&&l.y===t.y||l.x===e.x&&l.y===e.y||l.x===n.x&&l.y===n.y||-1!==r.indexOf(l)||!Ad([t.x,t.y,e.x,e.y,n.x,n.y],0,6,2,l.x,l.y)||r.push(l)}return r},Jv.prototype.getIntersections_=function(t,e,n){const i=t.p0,o=t.p1,r=e.getInExtent([Math.min(i.x,o.x),Math.min(i.y,o.y),Math.max(i.x,o.x),Math.max(i.y,o.y)]),s=[];for(let a=0,l=r.length;a<l;++a){const e=r[a];t!==e&&(n||e.p0!==o||e.p1!==i)&&this.calculateIntersection_(i,o,e.p0,e.p1,n)&&s.push(e)}return s},Jv.prototype.calculateIntersection_=function(t,e,n,i,o){const r=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(0!==r){const s=((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x))/r,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/r;if(!o&&s>Sv&&s<1-Sv&&a>Sv&&a<1-Sv||o&&s>=0&&s<=1&&a>=0&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},Jv.prototype.diagonalIsInside_=function(t,e,n,i,o){if(void 0===e.reflex||void 0===i.reflex)return!1;const r=(n.x-i.x)*(e.y-i.y)>(n.y-i.y)*(e.x-i.x),s=(o.x-i.x)*(e.y-i.y)<(o.y-i.y)*(e.x-i.x),a=(t.x-e.x)*(i.y-e.y)>(t.y-e.y)*(i.x-e.x),l=(n.x-e.x)*(i.y-e.y)<(n.y-e.y)*(i.x-e.x);return(i.reflex?s||r:s&&r)&&(e.reflex?l||a:l&&a)},Jv.prototype.drawMultiPolygon=function(t,e){const n=t.getEndss(),i=t.getStride(),o=this.indices.length,r=this.lineStringReplay.getCurrentIndex(),s=t.getFlatCoordinates();let a,l,u,h,c=0;for(a=0,l=n.length;a<l;++a){const t=n[a];if(t.length>0){const e=Au(s,c,t[0],i,-this.origin[0],-this.origin[1]);if(e.length){const n=[];let o;for(u=1,h=t.length;u<h;++u)t[u]!==t[u-1]&&(o=Au(s,t[u-1],t[u],i,-this.origin[0],-this.origin[1]),n.push(o));this.lineStringReplay.drawPolygonCoordinates(e,n,i),this.drawCoordinates_(e,n,i)}}c=t[t.length-1]}this.indices.length>o&&(this.startIndices.push(o),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(o),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>r&&this.lineStringReplay.setPolygonStyle(e,r)},Jv.prototype.drawPolygon=function(t,e){const n=t.getEnds(),i=t.getStride();if(n.length>0){const o=t.getFlatCoordinates().map(Number),r=Au(o,0,n[0],i,-this.origin[0],-this.origin[1]);if(r.length){const t=[];let s,a,l;for(s=1,a=n.length;s<a;++s)n[s]!==n[s-1]&&(l=Au(o,n[s-1],n[s],i,-this.origin[0],-this.origin[1]),t.push(l));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(r,t,i),this.drawCoordinates_(r,t,i)}}},Jv.prototype.finish=function(t){this.verticesBuffer=new Pv(this.vertices),this.indicesBuffer=new Pv(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},Jv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer,i=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(n),i()}},Jv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(Xv,Zv);let r;return this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.a_position=t.getAttribLocation(e,"a_position")}(t,o),this.defaultLocations_=r),e.useProgram(o),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,8,0),r},Jv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},Jv.prototype.drawReplay=function(t,e,n,i){const o=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),El(n)){let n,i,o,r;for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)i=this.styleIndices_[n],this.setFillStyle_(t,r=this.styles_[n]),this.drawElements(t,e,i,o),o=i}else this.drawReplaySkipping_(t,e,n);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(o))},Jv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,u,h,c,d;for(a=this.startIndices[1+(d=this.startIndices.length-2)],r=this.styleIndices_.length-1;r>=0;--r)for(this.setFillStyle_(t,l=this.styles_[r]),u=this.styleIndices_[r];d>=0&&this.startIndices[d]>=u;){if(s=this.startIndices[d],void 0===n[c=ml(h=this.startIndicesFeature[d]).toString()]&&h.getGeometry()&&(void 0===o||Lu(o,h.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);const n=i(h);if(n)return n}d--,a=s}},Jv.prototype.drawReplaySkipping_=function(t,e,n){let i,o,r,s,a,l,u,h,c;for(r=o=this.startIndices[1+(h=this.startIndices.length-2)],i=this.styleIndices_.length-1;i>=0;--i){for(this.setFillStyle_(t,s=this.styles_[i]),a=this.styleIndices_[i];h>=0&&this.startIndices[h]>=a;)c=this.startIndices[h],n[u=ml(l=this.startIndicesFeature[h]).toString()]&&(o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),r=c),h--,o=c;o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),o=r=a}},Jv.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},Jv.prototype.setFillStrokeStyle=function(t,e){let n=t?t.getColor():[0,0,0,0];if(n=n instanceof CanvasGradient||n instanceof CanvasPattern?Cv:Yh(n).map(function(t,e){return 3!=e?t/255:t})||Cv,this.state_.fillColor&&ld(n,this.state_.fillColor)||(this.state_.fillColor=n,this.state_.changed=!0,this.styles_.push(n)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{const t=new Xc({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,t)}};var $v=Jv;const tx=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=qh(t,t),this.canvas_=this.context_.canvas};tx.prototype.get=function(t){return this.entries_[t]||null},tx.prototype.add=function(t,e,n,i,o){for(let r=0,s=this.emptyBlocks_.length;r<s;++r){const s=this.emptyBlocks_[r];if(s.width>=e+this.space_&&s.height>=n+this.space_){const a={offsetX:s.x+this.space_,offsetY:s.y+this.space_,image:this.canvas_};return this.entries_[t]=a,i.call(o,this.context_,s.x+this.space_,s.y+this.space_),this.split_(r,s,e+this.space_,n+this.space_),a}}return null},tx.prototype.split_=function(t,e,n,i){let o,r;e.width-n>e.height-i?this.updateBlocks_(t,o={x:e.x+n,y:e.y,width:e.width-n,height:e.height},r={x:e.x,y:e.y+i,width:n,height:e.height-i}):this.updateBlocks_(t,o={x:e.x+n,y:e.y,width:e.width-n,height:i},r={x:e.x,y:e.y+i,width:e.width,height:e.height-i})},tx.prototype.updateBlocks_=function(t,e,n){const i=[t,1];e.width>0&&e.height>0&&i.push(e),n.width>0&&n.height>0&&i.push(n),this.emptyBlocks_.splice.apply(this.emptyBlocks_,i)};var ex=tx;const nx=function(t){const e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==rc?rc:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new ex(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new ex(this.currentHitSize_,this.space_)]};nx.prototype.getInfo=function(t){const e=this.getInfo_(this.atlases_,t);if(!e)return null;const n=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,n)},nx.prototype.getInfo_=function(t,e){for(let n=0,i=t.length;n<i;++n){const i=t[n].get(e);if(i)return i}return null},nx.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},nx.prototype.add=function(t,e,n,i,o,r){if(e+this.space_>this.maxSize_||n+this.space_>this.maxSize_)return null;const s=this.add_(!1,t,e,n,i,r);if(!s)return null;const a=this.add_(!0,t,e,n,void 0!==o?o:Al,r);return this.mergeInfos_(s,a)},nx.prototype.add_=function(t,e,n,i,o,r){const s=t?this.hitAtlases_:this.atlases_;let a,l,u,h;for(u=0,h=s.length;u<h;++u){if(l=(a=s[u]).add(e,n,i,o,r))return l;if(!l&&u===h-1){let e;t?(e=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=e):(e=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=e),a=new ex(e,this.space_),s.push(a),++h}}return null};var ix=nx;const ox=function(t,e){jv.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=qh(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1};_l(ox,jv),ox.prototype.drawText=function(t,e){if(this.text_){let n=null;const i=0;let o=2,r=2;switch(t.getType()){case Uu.POINT:case Uu.MULTI_POINT:o=(n=t.getFlatCoordinates()).length,r=t.getStride();break;case Uu.CIRCLE:n=t.getCenter();break;case Uu.LINE_STRING:n=t.getFlatMidpoint();break;case Uu.MULTI_LINE_STRING:o=(n=t.getFlatMidpoints()).length;break;case Uu.POLYGON:n=t.getFlatInteriorPoint();break;case Uu.MULTI_POLYGON:o=(n=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const s=this.currAtlas_,a=this.text_.split("\n"),l=this.getTextSize_(a);let u,h,c,d,p,f,g,_;const y=Math.round(l[0]*this.textAlign_-this.offsetX_),m=Math.round(l[1]*this.textBaseline_-this.offsetY_),v=this.state_.lineWidth/2*this.state_.scale;for(u=0,h=a.length;u<h;++u)for(p=0,f=s.height*u,g=a[u].split(""),c=0,d=g.length;c<d;++c){if(_=s.atlas.getInfo(g[c])){const t=_.image;this.anchorX=y-p,this.anchorY=m-f,this.originX=0===c?_.offsetX-v:_.offsetX,this.originY=_.offsetY,this.height=s.height,this.width=0===c||c===g.length-1?s.width[g[c]]+v:s.width[g[c]],this.imageHeight=t.height,this.imageWidth=t.width,0===this.images_.length?this.images_.push(t):ml(this.images_[this.images_.length-1])!=ml(t)&&(this.groupIndices.push(this.indices.length),this.images_.push(t)),this.drawText_(n,i,o,r)}p+=this.width}}},ox.prototype.getTextSize_=function(t){const e=this,n=this.currAtlas_,i=t.length*n.height;return[t.map(function(t){let i=0;for(let o=0,r=t.length;o<r;++o){const r=t[o];n.width[r]||e.addCharToAtlas_(r),i+=n.width[r]?n.width[r]:0}return i}).reduce(function(t,e){return Math.max(t,e)}),i]},ox.prototype.drawText_=function(t,e,n,i){for(let o=e,r=n;o<r;o+=i)this.drawCoordinates(t,e,n,i)},ox.prototype.addCharToAtlas_=function(t){if(1===t.length){const e=this.currAtlas_,n=this.state_,i=this.measureCanvas_.getContext("2d");i.font=n.font;const o=Math.ceil(i.measureText(t).width*n.scale);e.atlas.add(t,o,e.height,function(e,i,o){e.font=n.font,e.fillStyle=n.fillColor,e.strokeStyle=n.strokeColor,e.lineWidth=n.lineWidth,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.miterLimit=n.miterLimit,e.textAlign="left",e.textBaseline="top",fc&&n.lineDash&&(e.setLineDash(n.lineDash),e.lineDashOffset=n.lineDashOffset),1!==n.scale&&e.setTransform(n.scale,0,0,n.scale,0,0),n.strokeColor&&e.strokeText(t,i,o),n.fillColor&&e.fillText(t,i,o)})&&(e.width[t]=o)}},ox.prototype.finish=function(t){const e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new Pv(this.vertices),this.indicesBuffer=new Pv(this.indices),this.createTextures(this.textures_,this.images_,{},e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,jv.prototype.finish.call(this,t)},ox.prototype.setTextStyle=function(t){const e=this.state_,n=t.getFill(),i=t.getStroke();if(t&&t.getText()&&(n||i)){if(n){const t=n.getColor();e.fillColor=Zh(t||Cv)}else e.fillColor=null;if(i){const t=i.getColor();e.strokeColor=Zh(t||Tv),e.lineWidth=i.getWidth()||1,e.lineCap=i.getLineCap()||"round",e.lineDashOffset=i.getLineDashOffset()||0,e.lineJoin=i.getLineJoin()||"round",e.miterLimit=i.getMiterLimit()||10;const n=i.getLineDash();e.lineDash=n?n.slice():Ev}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||"10px sans-serif",e.scale=t.getScale()||1,this.text_=t.getText();const o=cm[t.getTextAlign()],r=cm[t.getTextBaseline()];this.textAlign_=void 0===o?.5:o,this.textBaseline_=void 0===r?.5:r,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},ox.prototype.getAtlas_=function(t){let e=[];for(const i in t)(t[i]||0===t[i])&&(Array.isArray(t[i])?e=e.concat(t[i]):e.push(t[i]));const n=this.calculateHash_(e);if(!this.atlases_[n]){const e=this.measureCanvas_.getContext("2d");e.font=t.font;const i=Math.ceil((1.5*e.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[n]={atlas:new ix({space:t.lineWidth+1}),width:{},height:i}}return this.atlases_[n]},ox.prototype.calculateHash_=function(t){let e="";for(let n=0,i=t.length;n<i;++n)e+=t[n];return e},ox.prototype.getTextures=function(t){return this.textures_},ox.prototype.getHitDetectionTextures=function(){return this.textures_};const rx=[1,1],sx={Circle:kv,Image:zv,LineString:Kv,Polygon:$v,Text:ox},ax=function(t,e,n){em.call(this),this.maxExtent_=e,this.tolerance_=t,this.renderBuffer_=n,this.replaysByZIndex_={}};_l(ax,em),ax.prototype.addDeclutter=function(t,e){},ax.prototype.getDeleteResourcesFunction=function(t){const e=[];let n;for(n in this.replaysByZIndex_){const i=this.replaysByZIndex_[n];for(const n in i)e.push(i[n].getDeleteResourcesFunction(t))}return function(){const t=e.length;let n;for(let i=0;i<t;i++)n=e[i].apply(this,arguments);return n}},ax.prototype.finish=function(t){let e;for(e in this.replaysByZIndex_){const n=this.replaysByZIndex_[e];for(const e in n)n[e].finish(t)}},ax.prototype.getReplay=function(t,e){const n=void 0!==t?t.toString():"0";let i=this.replaysByZIndex_[n];void 0===i&&(this.replaysByZIndex_[n]=i={});let o=i[e];return void 0===o&&(o=new(0,sx[e])(this.tolerance_,this.maxExtent_),i[e]=o),o},ax.prototype.isEmpty=function(){return El(this.replaysByZIndex_)},ax.prototype.replay=function(t,e,n,i,o,r,s,a){const l=Object.keys(this.replaysByZIndex_).map(Number);let u,h,c,d,p,f;for(l.sort(id),u=0,h=l.length;u<h;++u)for(p=this.replaysByZIndex_[l[u].toString()],c=0,d=hm.length;c<d;++c)void 0!==(f=p[hm[c]])&&f.replay(t,e,n,i,o,r,s,a,void 0,!1)},ax.prototype.replayHitDetection_=function(t,e,n,i,o,r,s,a,l,u,h){const c=Object.keys(this.replaysByZIndex_).map(Number);let d,p,f,g,_,y;for(c.sort(function(t,e){return e-t}),d=0,p=c.length;d<p;++d)for(g=this.replaysByZIndex_[c[d].toString()],f=hm.length-1;f>=0;--f)if(void 0!==(_=g[hm[f]])&&(y=_.replay(t,e,n,i,o,r,s,a,l,u,h)))return y},ax.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s,a,l,u){const h=e.getGL();let c;return h.bindFramebuffer(h.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(c=ru(fu(t),i*this.renderBuffer_)),this.replayHitDetection_(e,t,i,o,rx,s,a,l,function(t){const e=new Uint8Array(4);if(h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,e),e[3]>0){const e=u(t);if(e)return e}},!0,c)},ax.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o,r,s,a,l){const u=e.getGL();return u.bindFramebuffer(u.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,i,o,rx,s,a,l,function(t){const e=new Uint8Array(4);return u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e),e[3]>0},!1)};var lx=ax;const ux=function(t,e,n,i,o,r,s){Ry.call(this),this.context_=t,this.center_=e,this.extent_=r,this.pixelRatio_=s,this.size_=o,this.rotation_=i,this.resolution_=n,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null};_l(ux,Ry),ux.prototype.drawText_=function(t,e){const n=this.context_,i=t.getReplay(0,nm.TEXT);i.setTextStyle(this.textStyle_),i.drawText(e,null),i.finish(n),i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),i.getDeleteResourcesFunction(n)()},ux.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},ux.prototype.drawGeometry=function(t){switch(t.getType()){case Uu.POINT:this.drawPoint(t,null);break;case Uu.LINE_STRING:this.drawLineString(t,null);break;case Uu.POLYGON:this.drawPolygon(t,null);break;case Uu.MULTI_POINT:this.drawMultiPoint(t,null);break;case Uu.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case Uu.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case Uu.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case Uu.CIRCLE:this.drawCircle(t,null)}},ux.prototype.drawFeature=function(t,e){const n=e.getGeometryFunction()(t);n&&Lu(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},ux.prototype.drawGeometryCollection=function(t,e){const n=t.getGeometriesArray();let i,o;for(i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},ux.prototype.drawPoint=function(t,e){const n=this.context_,i=new lx(1,this.extent_),o=i.getReplay(0,nm.IMAGE);o.setImageStyle(this.imageStyle_),o.drawPoint(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},ux.prototype.drawMultiPoint=function(t,e){const n=this.context_,i=new lx(1,this.extent_),o=i.getReplay(0,nm.IMAGE);o.setImageStyle(this.imageStyle_),o.drawMultiPoint(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},ux.prototype.drawLineString=function(t,e){const n=this.context_,i=new lx(1,this.extent_),o=i.getReplay(0,nm.LINE_STRING);o.setFillStrokeStyle(null,this.strokeStyle_),o.drawLineString(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},ux.prototype.drawMultiLineString=function(t,e){const n=this.context_,i=new lx(1,this.extent_),o=i.getReplay(0,nm.LINE_STRING);o.setFillStrokeStyle(null,this.strokeStyle_),o.drawMultiLineString(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},ux.prototype.drawPolygon=function(t,e){const n=this.context_,i=new lx(1,this.extent_),o=i.getReplay(0,nm.POLYGON);o.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),o.drawPolygon(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},ux.prototype.drawMultiPolygon=function(t,e){const n=this.context_,i=new lx(1,this.extent_),o=i.getReplay(0,nm.POLYGON);o.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),o.drawMultiPolygon(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},ux.prototype.drawCircle=function(t,e){const n=this.context_,i=new lx(1,this.extent_),o=i.getReplay(0,nm.CIRCLE);o.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),o.drawCircle(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},ux.prototype.setImageStyle=function(t){this.imageStyle_=t},ux.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},ux.prototype.setTextStyle=function(t){this.textStyle_=t};var hx=ux;const cx=new gv("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"),dx=new yv("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n"),px=function(t,e){zy.call(this,e),this.mapRenderer=t,this.arrayBuffer_=new Pv([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=[1,0,0,1,0,0],this.projectionMatrix=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.defaultLocations_=null};_l(px,zy),px.prototype.bindFramebuffer=function(t,e){const n=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){const i=(function(t,e,n){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(n))}).bind(null,n,this.framebuffer,this.texture);t.postRenderFunctions.push(i);const o=Av(n,e,e),r=n.createFramebuffer();n.bindFramebuffer(36160,r),n.framebufferTexture2D(36160,36064,nc,o,0),this.texture=o,this.framebuffer=r,this.framebufferDimension=e}else n.bindFramebuffer(36160,this.framebuffer)},px.prototype.composeFrame=function(t,e,n){this.dispatchComposeEvent_("precompose",n,t),n.bindBuffer(34962,this.arrayBuffer_);const i=n.getGL(),o=n.getProgram(cx,dx);let r;this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,"u_texCoordMatrix"),this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")}(i,o),this.defaultLocations_=r),n.useProgram(o)&&(i.enableVertexAttribArray(r.a_position),i.vertexAttribPointer(r.a_position,2,5126,!1,16,0),i.enableVertexAttribArray(r.a_texCoord),i.vertexAttribPointer(r.a_texCoord,2,5126,!1,16,8),i.uniform1i(r.u_texture,0)),i.uniformMatrix4fv(r.u_texCoordMatrix,!1,xv(this.tmpMat4_,this.getTexCoordMatrix())),i.uniformMatrix4fv(r.u_projectionMatrix,!1,xv(this.tmpMat4_,this.getProjectionMatrix())),i.uniform1f(r.u_opacity,e.opacity),i.bindTexture(nc,this.getTexture()),i.drawArrays(5,0,4),this.dispatchComposeEvent_("postcompose",n,t)},px.prototype.dispatchComposeEvent_=function(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const o=n.viewState,r=new hx(e,o.center,o.resolution,o.rotation,n.size,n.extent,n.pixelRatio),s=new Sy(t,r,n,null,e);i.dispatchEvent(s)}},px.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},px.prototype.getTexture=function(){return this.texture},px.prototype.getProjectionMatrix=function(){return this.projectionMatrix},px.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},px.prototype.prepareFrame=function(t,e,n){},px.prototype.forEachLayerAtPixel=function(t,e,n,i){};var fx=px;const gx=function(t,e){fx.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null};_l(gx,fx),gx.handles=function(t){return"IMAGE"===t.getType()},gx.create=function(t,e){return new gx(t,e)},gx.prototype.createTexture_=function(t){const e=t.getImage();return Nv(this.mapRenderer.getGL(),e,33071,33071)},gx.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){const r=this.getLayer();return r.getSource().forEachFeatureAtCoordinate(t,e.viewState.resolution,e.viewState.rotation,n,e.skippedFeatureUids,function(t){return i.call(o,t,r)})},gx.prototype.prepareFrame=function(t,e,n){const i=this.mapRenderer.getGL(),o=t.pixelRatio,r=t.viewState,s=r.center,a=r.resolution,l=r.rotation;let u=this.image_,h=this.texture;const c=this.getLayer().getSource(),d=t.viewHints;let p=t.extent;if(void 0!==e.extent&&(p=Ru(p,e.extent)),!d[vf.ANIMATING]&&!d[vf.INTERACTING]&&!Fu(p)){const e=c.getImage(p,a,o,r.projection);if(e&&this.loadImage(e)&&(u=e,h=this.createTexture_(e),this.texture)){const e=(function(t,e){t.isContextLost()||t.deleteTexture(e)}).bind(null,i,this.texture);t.postRenderFunctions.push(e)}}if(u){const t=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(t.width,t.height,o,s,a,l,u.getExtent()),this.hitTransformationMatrix_=null;const e=this.texCoordMatrix;Ph(e),Oh(e,1,-1),Ah(e,0,-1),this.image_=u,this.texture=h}return!!u},gx.prototype.updateProjectionMatrix_=function(t,e,n,i,o,r,s){const a=t*o,l=e*o,u=this.projectionMatrix;Ph(u),Oh(u,2*n/a,2*n/l),Dh(u,-r),Ah(u,s[0]-i[0],s[1]-i[1]),Oh(u,(s[2]-s[0])/2,(s[3]-s[1])/2),Ah(u,1,1)},gx.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,Dl,this)},gx.prototype.forEachLayerAtPixel=function(t,e,n,i){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==Al){const o=Fh(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(o,e,0,Dl,this)?n.call(i,this.getLayer(),null):void 0}{const o=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,o));const r=Fh(this.hitTransformationMatrix_,t.slice());if(r[0]<0||r[0]>o[0]||r[1]<0||r[1]>o[1])return;this.hitCanvasContext_||(this.hitCanvasContext_=qh(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),r[0],r[1],1,1,0,0,1,1);const s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?n.call(i,this.getLayer(),s):void 0}}},gx.prototype.getHitTransformationMatrix_=function(t,e){const n=[1,0,0,1,0,0];Ah(n,-1,-1),Oh(n,2/t[0],2/t[1]),Ah(n,0,t[1]),Oh(n,1,-1);const i=Gh(this.projectionMatrix.slice()),o=[1,0,0,1,0,0];return Ah(o,0,e[1]),Oh(o,1,-1),Oh(o,e[0]/2,e[1]/2),Ah(o,1,1),Mh(o,i),Mh(o,n),o};var _x=gx;const yx=function(t){Ny.call(this,t);const e=t.getViewport();this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className="ol-unselectable",e.insertBefore(this.canvas_,e.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=qh(),this.renderedVisible_=!0,this.gl_=oc(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new Gv(this.canvas_,this.gl_),Pl(this.canvas_,"webglcontextlost",this.handleWebGLContextLost,this),Pl(this.canvas_,"webglcontextrestored",this.handleWebGLContextRestored,this),this.textureCache_=new Cc,this.focus_=null,this.tileTextureQueue_=new cf((function(t){const e=t[1],n=t[2],i=e[0]-this.focus_[0],o=e[1]-this.focus_[1];return 65536*Math.log(n)+Math.sqrt(i*i+o*o)/n}).bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=(function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();const t=this.tileTextureQueue_.dequeue();this.bindTileTexture(t[0],t[3],t[4],9729,9729)}return!1}).bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()};_l(yx,Ny),yx.prototype.bindTileTexture=function(t,e,n,i,o){const r=this.getGL(),s=t.getKey();if(this.textureCache_.containsKey(s)){const t=this.textureCache_.get(s);r.bindTexture(nc,t.texture),t.magFilter!=i&&(r.texParameteri(nc,10240,i),t.magFilter=i),t.minFilter!=o&&(r.texParameteri(nc,10241,o),t.minFilter=o)}else{const a=r.createTexture();if(r.bindTexture(nc,a),n>0){const i=this.clipTileContext_.canvas,o=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(i.width=e[0],i.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):o.clearRect(0,0,e[0],e[1]),o.drawImage(t.getImage(),n,n,e[0],e[1],0,0,e[0],e[1]),r.texImage2D(nc,0,6408,6408,5121,i)}else r.texImage2D(nc,0,6408,6408,5121,t.getImage());r.texParameteri(nc,10240,i),r.texParameteri(nc,10241,o),r.texParameteri(nc,tc,33071),r.texParameteri(nc,ec,33071),this.textureCache_.set(s,{texture:a,magFilter:i,minFilter:o})}},yx.prototype.dispatchComposeEvent_=function(t,e){const n=this.getMap();if(n.hasListener(t)){const i=this.context_,o=e.viewState,r=new hx(i,o.center,o.resolution,o.rotation,e.size,e.extent,e.pixelRatio),s=new Sy(t,r,e,null,i);n.dispatchEvent(s)}},yx.prototype.disposeInternal=function(){const t=this.getGL();t.isContextLost()||this.textureCache_.forEach(function(e){e&&t.deleteTexture(e.texture)}),this.context_.dispose(),Ny.prototype.disposeInternal.call(this)},yx.prototype.expireCache_=function(t,e){const n=this.getGL();let i;for(;this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024;){if(i=this.textureCache_.peekLast())n.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},yx.prototype.getContext=function(){return this.context_},yx.prototype.getGL=function(){return this.gl_},yx.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},yx.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;const e=this.getLayerRenderers();for(const n in e)e[n].handleWebGLContextLost()},yx.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},yx.prototype.initializeGL_=function(){const t=this.gl_;t.activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)},yx.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},yx.prototype.renderFrame=function(t){const e=this.getContext(),n=this.getGL();if(n.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_("precompose",t);const i=[],o=t.layerStatesArray;ud(o,Ay);const r=t.viewState.resolution;let s,a,l,u;for(s=0,a=o.length;s<a;++s)Lf(u=o[s],r)&&"ready"==u.sourceState&&(l=this.getLayerRenderer(u.layer)).prepareFrame(t,u,e)&&i.push(u);const h=t.size[0]*t.pixelRatio,c=t.size[1]*t.pixelRatio;for(this.canvas_.width==h&&this.canvas_.height==c||(this.canvas_.width=h,this.canvas_.height=c),n.bindFramebuffer(36160,null),n.clearColor(0,0,0,0),n.clear(16384),n.enable(3042),n.viewport(0,0,this.canvas_.width,this.canvas_.height),s=0,a=i.length;s<a;++s)(l=this.getLayerRenderer((u=i[s]).layer)).composeFrame(t,u,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_("postcompose",t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},yx.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s){let a;if(this.getGL().isContextLost())return!1;const l=e.viewState,u=e.layerStatesArray;let h;for(h=u.length-1;h>=0;--h){const c=u[h],d=c.layer;if(Lf(c,l.resolution)&&r.call(s,d)&&(a=this.getLayerRenderer(d).forEachFeatureAtCoordinate(t,e,n,i,o)))return a}},yx.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o){let r=!1;if(this.getGL().isContextLost())return!1;const s=e.viewState,a=e.layerStatesArray;let l;for(l=a.length-1;l>=0;--l){const n=a[l],u=n.layer;if(Lf(n,s.resolution)&&i.call(o,u)&&(r=this.getLayerRenderer(u).hasFeatureAtCoordinate(t,e)))return!0}return r},yx.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,s){if(this.getGL().isContextLost())return!1;const a=e.viewState;let l;const u=e.layerStatesArray;let h;for(h=u.length-1;h>=0;--h){const n=u[h],s=n.layer;if(Lf(n,a.resolution)&&r.call(o,s)&&(l=this.getLayerRenderer(s).forEachLayerAtPixel(t,e,i,o)))return l}};var mx=yx;const vx=new gv("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"),xx=new yv("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n"),bx=function(t,e){fx.call(this,t,e),this.fragmentShader_=vx,this.vertexShader_=xx,this.locations_=null,this.renderArrayBuffer_=new Pv([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]};_l(bx,fx),bx.handles=function(t){return"TILE"===t.getType()},bx.create=function(t,e){return new bx(t,e)},bx.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),fx.prototype.disposeInternal.call(this)},bx.prototype.createLoadedTileFinder=function(t,e,n){const i=this.mapRenderer;return function(o,r){return t.forEachLoadedTile(e,o,r,function(t){const e=i.isTileTextureLoaded(t);return e&&(n[o]||(n[o]={}),n[o][t.tileCoord.toString()]=t),e})}},bx.prototype.handleWebGLContextLost=function(){fx.prototype.handleWebGLContextLost.call(this),this.locations_=null},bx.prototype.prepareFrame=function(t,e,n){const i=this.mapRenderer,o=n.getGL(),r=t.viewState,s=r.projection,a=this.getLayer(),l=a.getSource(),u=l.getTileGridForProjection(s),h=u.getZForResolution(r.resolution),c=u.getResolution(h),d=l.getTilePixelSize(h,t.pixelRatio,s),p=d[0]/Sf(u.getTileSize(h),this.tmpSize_)[0],f=c/p,g=l.getTilePixelRatio(p)*l.getGutter(s),_=r.center,y=t.extent,m=u.getTileRangeForExtentAndZ(y,h);let v;if(this.renderedTileRange_&&this.renderedTileRange_.equals(m)&&this.renderedRevision_==l.getRevision())v=this.renderedFramebufferExtent_;else{const r=m.getSize(),c=(eu(0<(D=Math.max(r[0]*d[0],r[1]*d[1])),29),Math.pow(2,Math.ceil(Math.log(D)/Math.LN2))),_=f*c,y=u.getOrigin(h),x=y[0]+m.minX*d[0]*f,b=y[1]+m.minY*d[1]*f;v=[x,b,x+_,b+_],this.bindFramebuffer(t,c),o.viewport(0,0,c,c),o.clearColor(0,0,0,0),o.clear(16384),o.disable(3042);const w=n.getProgram(this.fragmentShader_,this.vertexShader_);n.useProgram(w),this.locations_||(this.locations_=new function(t,e){this.u_tileOffset=t.getUniformLocation(e,"u_tileOffset"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")}(o,w)),n.bindBuffer(34962,this.renderArrayBuffer_),o.enableVertexAttribArray(this.locations_.a_position),o.vertexAttribPointer(this.locations_.a_position,2,5126,!1,16,0),o.enableVertexAttribArray(this.locations_.a_texCoord),o.vertexAttribPointer(this.locations_.a_texCoord,2,5126,!1,16,8),o.uniform1i(this.locations_.u_texture,0);const C={};C[h]={};const E=this.createLoadedTileFinder(l,s,C),T=a.getUseInterimTilesOnError();let S=!0;const I=[1/0,1/0,-1/0,-1/0],R=new Qy(0,0,0,0);let P,M,k,L,F,D,O,A;for(D=m.minX;D<=m.maxX;++D)for(O=m.minY;O<=m.maxY;++O)if(L=l.getTile(h,D,O,p,s),void 0===e.extent||Lu(A=u.getTileCoordExtent(L.tileCoord,I),e.extent)){if((M=2==(F=L.getState())||4==F||3==F&&!T)||(L=L.getInterimTile()),2==(F=L.getState())){if(i.isTileTextureLoaded(L)){C[h][L.tileCoord.toString()]=L;continue}}else if(4==F||3==F&&!T)continue;S=!1,(k=u.forEachTileCoordParentTileRange(L.tileCoord,E,null,R,I))||(P=u.getTileCoordChildTileRange(L.tileCoord,R,I))&&E(h+1,P)}const N=Object.keys(C).map(Number);N.sort(id);const G=new Float32Array(4);for(let t=0,e=N.length;t<e;++t){const e=C[N[t]];for(const t in e)A=u.getTileCoordExtent((L=e[t]).tileCoord,I),G[0]=2*(A[2]-A[0])/_,G[1]=2*(A[3]-A[1])/_,G[2]=2*(A[0]-v[0])/_-1,G[3]=2*(A[1]-v[1])/_-1,o.uniform4fv(this.locations_.u_tileOffset,G),i.bindTileTexture(L,d,g*p,9729,9729),o.drawArrays(5,0,4)}S?(this.renderedTileRange_=m,this.renderedFramebufferExtent_=v,this.renderedRevision_=l.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,l,h,m);const x=i.getTileTextureQueue();this.manageTilePyramid(t,l,u,p,s,y,h,a.getPreload(),function(t){2!=t.getState()||i.isTileTextureLoaded(t)||x.isKeyQueued(t.getKey())||x.enqueue([t,u.getTileCoordCenter(t.tileCoord),u.getResolution(t.tileCoord[0]),d,g*p])},this),this.scheduleExpireCache(t,l);const b=this.texCoordMatrix;return Ph(b),Ah(b,(Math.round(_[0]/c)*c-v[0])/(v[2]-v[0]),(Math.round(_[1]/c)*c-v[1])/(v[3]-v[1])),0!==r.rotation&&Dh(b,r.rotation),Oh(b,t.size[0]*r.resolution/(v[2]-v[0]),t.size[1]*r.resolution/(v[3]-v[1])),Ah(b,-.5,-.5),!0},bx.prototype.forEachLayerAtPixel=function(t,e,n,i){if(!this.framebuffer)return;const o=Fh(this.texCoordMatrix,[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]].slice()),r=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],s=this.mapRenderer.getContext().getGL();s.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer);const a=new Uint8Array(4);return s.readPixels(r[0],r[1],1,1,s.RGBA,s.UNSIGNED_BYTE,a),a[3]>0?n.call(i,this.getLayer(),a):void 0};var wx=bx;const Cx=function(t,e){fx.call(this,t,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null};_l(Cx,fx),Cx.handles=function(t){return"VECTOR"===t.getType()},Cx.create=function(t,e){return new Cx(t,e)},Cx.prototype.composeFrame=function(t,e,n){this.layerState_=e;const i=t.viewState,o=this.replayGroup_,r=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();o&&!o.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,r[0]*s,r[1]*s),o.replay(n,i.center,i.resolution,i.rotation,r,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},Cx.prototype.disposeInternal=function(){const t=this.replayGroup_;if(t){const e=this.mapRenderer.getContext();t.getDeleteResourcesFunction(e)(),this.replayGroup_=null}fx.prototype.disposeInternal.call(this)},Cx.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){if(this.replayGroup_&&this.layerState_){const n=this.mapRenderer.getContext(),r=e.viewState,s=this.getLayer(),a={};return this.replayGroup_.forEachFeatureAtCoordinate(t,n,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,this.layerState_.opacity,{},function(t){const e=ml(t).toString();if(!(e in a))return a[e]=!0,i.call(o,t,s)})}},Cx.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){const n=this.mapRenderer.getContext(),i=e.viewState;return this.replayGroup_.hasFeatureAtCoordinate(t,n,i.center,i.resolution,i.rotation,e.size,e.pixelRatio,this.layerState_.opacity,e.skippedFeatureUids)}return!1},Cx.prototype.forEachLayerAtPixel=function(t,e,n,i){const o=Fh(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(o,e)?n.call(i,this.getLayer(),null):void 0},Cx.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Cx.prototype.prepareFrame=function(t,e,n){const i=this.getLayer(),o=i.getSource(),r=t.viewHints[vf.ANIMATING],s=t.viewHints[vf.INTERACTING],a=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!a&&r||!l&&s)return!0;const u=t.extent,h=t.viewState,c=h.projection,d=h.resolution,p=t.pixelRatio,f=i.getRevision(),g=i.getRenderBuffer();let _=i.getRenderOrder();void 0===_&&(_=km);const y=ru(u,g*d);if(!this.dirty_&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==_&&uu(this.renderedExtent_,y))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(n)),this.dirty_=!1;const m=new lx(Fm(d,p),y,i.getRenderBuffer());o.loadFeatures(y,d,c);const v=function(t){let e;const n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,d)),e){const n=this.renderFeature(t,d,p,e,m);this.dirty_=this.dirty_||n}};if(_){const t=[];o.forEachFeatureInExtent(y,function(e){t.push(e)},this),t.sort(_),t.forEach(v.bind(this))}else o.forEachFeatureInExtent(y,v,this);return m.finish(n),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=_,this.renderedExtent_=y,this.replayGroup_=m,!0},Cx.prototype.renderFeature=function(t,e,n,i,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let s=i.length-1,a=0;s>=a;--s)r=Dm(o,t,i[s],Lm(e,n),this.handleStyleImageChange_,this)||r;else r=Dm(o,t,i,Lm(e,n),this.handleStyleImageChange_,this)||r;return r};var Ex=Cx;const Tx=function(t){(t=bl({},t)).controls||(t.controls=zf()),t.interactions||(t.interactions=Ey()),Rf.call(this,t)};_l(Tx,Rf),Tx.prototype.createRenderer=function(){const t=new mx(this);return t.registerLayerRenderers([_x,wx,Ex]),t};const Sx=function(t){const e=t||{},n=bl({},e);delete n.preload,delete n.useInterimTilesOnError,Ff.call(this,n),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type="TILE"};_l(Sx,Ff),Sx.prototype.getPreload=function(){return this.get("preload")},Sx.prototype.setPreload=function(t){this.set("preload",t)},Sx.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},Sx.prototype.setUseInterimTilesOnError=function(t){this.set("useInterimTilesOnError",t)};var Ix=Sx;function Rx(t,e,n,i){const o=n-t,r=i-e,s=Math.sqrt(o*o+r*r);return[Math.round(n+o/s),Math.round(i+r/s)]}const Px=function(t,e,n,i,o){this.sourceProj_=t,this.targetProj_=e;let r={};const s=wh(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return r[e]||(r[e]=s(t)),r[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ku(i)==ku(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ku(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ku(this.targetProj_.getExtent()):null;const a=Pu(n),l=Mu(n),u=Eu(n),h=Cu(n),c=this.transformInv_(a),d=this.transformInv_(l),p=this.transformInv_(u),f=this.transformInv_(h);if(this.addQuad_(a,l,u,h,c,d,p,f,10),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach(function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach((function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}).bind(this))}r={}};Px.prototype.addTriangle_=function(t,e,n,i,o,r){this.triangles_.push({source:[i,o,r],target:[t,e,n]})},Px.prototype.addQuad_=function(t,e,n,i,o,r,s,a,l){const u=ou([o,r,s,a]),h=this.sourceWorldWidth_?ku(u)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1;let p=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p|=ku(ou([t,e,n,i]))/this.targetWorldWidth_>.25),!d&&this.sourceProj_.isGlobal()&&h&&(p|=h>.25)),p||!this.maxSourceExtent_||Lu(u,this.maxSourceExtent_)){if(!(p||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(l>0))return;p=!0}if(l>0){if(!p){const e=this.transformInv_([(t[0]+n[0])/2,(t[1]+n[1])/2]);let i;i=d?(Hu(o[0],c)+Hu(s[0],c))/2-Hu(e[0],c):(o[0]+s[0])/2-e[0];const r=(o[1]+s[1])/2-e[1];p=i*i+r*r>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const u=[(e[0]+n[0])/2,(e[1]+n[1])/2],h=this.transformInv_(u),c=[(i[0]+t[0])/2,(i[1]+t[1])/2],d=this.transformInv_(c);this.addQuad_(t,e,u,c,o,r,h,d,l-1),this.addQuad_(c,u,n,i,d,h,s,a,l-1)}else{const u=[(t[0]+e[0])/2,(t[1]+e[1])/2],h=this.transformInv_(u),c=[(n[0]+i[0])/2,(n[1]+i[1])/2],d=this.transformInv_(c);this.addQuad_(t,u,c,i,o,h,d,a,l-1),this.addQuad_(u,e,n,c,h,r,s,d,l-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,i,o,s,a),this.addTriangle_(t,e,n,o,r,s)}},Px.prototype.calculateSourceExtent=function(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,n,i){const o=e.source;mu(t,o[0]),mu(t,o[1]),mu(t,o[2])}),t},Px.prototype.getTriangles=function(){return this.triangles_};var Mx=Px;const kx=function(t,e,n,i,o,r,s,a,l,u,h){Rp.call(this,o,0),this.renderEdges_=void 0!==h&&h,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=r||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const c=i.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const f=d?Ru(c,d):c;if(0===wu(f))return void(this.state=4);const g=t.getExtent();g&&(p=p?Ru(p,g):g);const _=i.getResolution(this.wrappedTileCoord_[0]),y=function(t,e,n,i){const o=Ch(n,e,t);let r=yh(e,i,n);const s=e.getMetersPerUnit();void 0!==s&&(r*=s);const a=t.getMetersPerUnit();void 0!==a&&(r/=a);const l=t.getExtent();if(!l||lu(l,o)){const e=yh(t,r,o)/r;isFinite(e)&&e>0&&(r/=e)}return r}(t,n,Tu(f),_);if(!isFinite(y)||y<=0)return void(this.state=4);if(this.triangulation_=new Mx(t,n,f,p,y*(void 0!==u?u:.5)),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=e.getZForResolution(y);let m=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(m[1]=Nu(m[1],p[1],p[3]),m[3]=Nu(m[3],p[1],p[3])):m=Ru(m,p)),wu(m)){const t=e.getTileRangeForExtentAndZ(m,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=l(this.sourceZ_,e,n,s);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4};_l(kx,Rp),kx.prototype.disposeInternal=function(){1==this.state&&this.unlistenSources_(),Rp.prototype.disposeInternal.call(this)},kx.prototype.getImage=function(){return this.canvas_},kx.prototype.reproject_=function(){const t=[];if(this.sourceTiles_.forEach((function(e,n,i){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}).bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,i,o,r,s,a,l,u,h){const c=qh(Math.round(n*t),Math.round(n*e));if(0===l.length)return c.canvas;c.scale(n,n);const d=[1/0,1/0,-1/0,-1/0];l.forEach(function(t,e,n){yu(d,t.extent)});const p=ku(d),f=Iu(d),g=qh(Math.round(n*p/i),Math.round(n*f/i)),_=n/i;l.forEach(function(t,e,n){const i=t.extent[0]-d[0],o=-(t.extent[3]-d[3]),r=ku(t.extent),s=Iu(t.extent);g.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,i*_,o*_,r*_,s*_)});const y=Pu(s);return a.getTriangles().forEach(function(t,e,o){const s=t.source,a=t.target;let l=s[0][0],u=s[0][1],h=s[1][0],p=s[1][1],f=s[2][0],_=s[2][1];const m=(a[0][0]-y[0])/r,v=-(a[0][1]-y[1])/r,x=(a[1][0]-y[0])/r,b=-(a[1][1]-y[1])/r,w=(a[2][0]-y[0])/r,C=-(a[2][1]-y[1])/r,E=l,T=u;l=0,u=0;const S=function(t){const e=t.length;for(let i=0;i<e;i++){let n=i,o=Math.abs(t[i][i]);for(let s=i+1;s<e;s++){const e=Math.abs(t[s][i]);e>o&&(o=e,n=s)}if(0===o)return null;const r=t[n];t[n]=t[i],t[i]=r;for(let s=i+1;s<e;s++){const n=-t[s][i]/t[i][i];for(let o=i;o<e+1;o++)i==o?t[s][o]=0:t[s][o]+=n*t[i][o]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let o=i-1;o>=0;o--)t[o][e]-=t[o][i]*n[i]}return n}([[h-=E,p-=T,0,0,x-m],[f-=E,_-=T,0,0,w-m],[0,0,h,p,b-v],[0,0,f,_,C-v]]);if(!S)return;c.save(),c.beginPath();const I=(m+x+w)/3,R=(v+b+C)/3,P=Rx(I,R,m,v),M=Rx(I,R,x,b),k=Rx(I,R,w,C);c.moveTo(M[0],M[1]),c.lineTo(P[0],P[1]),c.lineTo(k[0],k[1]),c.clip(),c.transform(S[0],S[2],S[1],S[3],m,v),c.translate(d[0]-E,d[3]-T),c.scale(i/n,-i/n),c.drawImage(g.canvas,0,0),c.restore()}),h&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.getTriangles().forEach(function(t,e,n){const i=t.target,o=(i[0][0]-y[0])/r,s=-(i[0][1]-y[1])/r,a=(i[1][0]-y[0])/r,l=-(i[1][1]-y[1])/r,u=(i[2][0]-y[0])/r,h=-(i[2][1]-y[1])/r;c.beginPath(),c.moveTo(a,l),c.lineTo(o,s),c.lineTo(u,h),c.closePath(),c.stroke()}),c.restore()),c.canvas}(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=2}this.changed()},kx.prototype.load=function(){if(0==this.state){this.state=1,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(e,n,i){const o=e.getState();if(0==o||1==o){t++;const n=Pl(e,Wl.CHANGE,function(i){const o=e.getState();2!=o&&3!=o&&4!=o||(Ll(n),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(n)}}).bind(this)),this.sourceTiles_.forEach(function(t,e,n){0==t.getState()&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},kx.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Ll),this.sourcesListenerKeys_=null};var Lx=kx;function Fx(t,e){const n=/\{z\}/g,i=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(o,function(){return(-s[2]-1).toString()}).replace(r,function(){const t=e.getFullTileRange(s[0]);return eu(t,55),(t.getHeight()+s[2]).toString()}):void 0}}function Dx(t,e){const n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Fx(t[o],e);return function(t){return 1===t.length?t[0]:function(e,n,i){if(e){const o=Hu(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[o](e,n,i)}}}(i)}function Ox(t,e,n){}const Ax=function(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,eu(function(t,e,n){const i=function(t,e){return e-t}||id;return t.every(function(e,n){if(0===n)return!0;const o=i(t[n-1],e);return!(o>0||0===o)})}(this.resolutions_),17),!t.origins)for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,eu(this.origins_.length==this.resolutions_.length,20));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=Pu(n)),eu(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,eu(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:gf,eu(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Qy(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):n&&this.calculateTileRanges_(n)},Nx=[0,0,0];Ax.prototype.forEachTileCoord=function(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let o=i.minX,r=i.maxX;o<=r;++o)for(let t=i.minY,s=i.maxY;t<=s;++t)n([e,o,t])},Ax.prototype.forEachTileCoordParentTileRange=function(t,e,n,i,o){let r,s,a,l=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,o);u>=this.minZoom;){if(r=2===this.zoomFactor_?qy(s=Math.floor(s/2),s,a=Math.floor(a/2),a,i):this.getTileRangeForExtentAndZ(l,u,i),e.call(n,u,r))return!0;--u}return!1},Ax.prototype.getExtent=function(){return this.extent_},Ax.prototype.getMaxZoom=function(){return this.maxZoom},Ax.prototype.getMinZoom=function(){return this.minZoom},Ax.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Ax.prototype.getResolution=function(t){return this.resolutions_[t]},Ax.prototype.getResolutions=function(){return this.resolutions_},Ax.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2];return qy(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null},Ax.prototype.getTileRangeExtent=function(t,e,n){const i=this.getOrigin(t),o=this.getResolution(t),r=Sf(this.getTileSize(t),this.tmpSize_);return du(i[0]+e.minX*r[0]*o,i[1]+e.minY*r[1]*o,i[0]+(e.maxX+1)*r[0]*o,i[1]+(e.maxY+1)*r[1]*o,n)},Ax.prototype.getTileRangeForExtentAndZ=function(t,e,n){const i=Nx;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i);const o=i[1],r=i[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,i),qy(o,i[1],r,i[2],n)},Ax.prototype.getTileCoordCenter=function(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Sf(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]+(t[2]+.5)*i[1]*n]},Ax.prototype.getTileCoordExtent=function(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=Sf(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*o[0]*i,s=n[1]+t[2]*o[1]*i;return du(r,s,r+o[0]*i,s+o[1]*i,e)},Ax.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},Ax.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,o){const r=this.getZForResolution(n),s=n/this.getResolution(r),a=this.getOrigin(r),l=Sf(this.getTileSize(r),this.tmpSize_),u=i?0:.5,h=Math.floor((t-a[0])/n+(i?.5:0)),c=Math.floor((e-a[1])/n+u);let d=s*h/l[0],p=s*c/l[1];return i?(d=Math.ceil(d)-1,p=Math.ceil(p)-1):(d=Math.floor(d),p=Math.floor(p)),Um(r,d,p,o)},Ax.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,o){const r=this.getOrigin(n),s=this.getResolution(n),a=Sf(this.getTileSize(n),this.tmpSize_),l=i?0:.5,u=Math.floor((t-r[0])/s+(i?.5:0)),h=Math.floor((e-r[1])/s+l);let c=u/a[0],d=h/a[1];return i?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d)),Um(n,c,d,o)},Ax.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},Ax.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Ax.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Ax.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Ax.prototype.getZForResolution=function(t,e){return Nu(rd(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},Ax.prototype.calculateTileRanges_=function(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n};var Gx=Ax;function Vx(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){const o=nu.TOP_LEFT,r=jx(t,void 0,void 0);return new Gx({extent:t,origin:function(t,e){let n;return e===nu.BOTTOM_LEFT?n=Cu(t):e===nu.BOTTOM_RIGHT?n=Eu(t):e===nu.TOP_LEFT?n=Pu(t):e===nu.TOP_RIGHT?n=Mu(t):eu(!1,13),n}(t,o),resolutions:r,tileSize:void 0})}(Bx(t))}(t),t.setDefaultTileGrid(e)),e}function jx(t,e,n){const i=void 0!==e?e:ff,o=Iu(t),r=ku(t),s=Sf(void 0!==n?n:gf),a=Math.max(r/s[0],o/s[1]),l=i+1,u=new Array(l);for(let h=0;h<l;++h)u[h]=a/Math.pow(2,h);return u}function Bx(t){let e=(t=_h(t)).getExtent();if(!e){const n=180*qu[Qu.DEGREES]/t.getMetersPerUnit();e=du(-n,-n,n,n)}return e}const zx=function(t){M_.call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new Zm(t.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:t.transition}};_l(zx,M_),zx.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},zx.prototype.expireCache=function(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},zx.prototype.forEachLoadedTile=function(t,e,n,i){const o=this.getTileCacheForProjection(t);if(!o)return!1;let r,s,a,l=!0;for(let u=n.minX;u<=n.maxX;++u)for(let t=n.minY;t<=n.maxY;++t)s=Ym(e,u,t),a=!1,o.containsKey(s)&&(a=2===(r=o.get(s)).getState())&&(a=!1!==i(r)),a||(l=!1);return l},zx.prototype.getGutter=function(t){return 0},zx.prototype.getKey=function(){return this.key_},zx.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},zx.prototype.getOpaque=function(t){return this.opaque_},zx.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},zx.prototype.getTile=function(t,e,n,i,o){},zx.prototype.getTileGrid=function(){return this.tileGrid},zx.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Vx(t)},zx.prototype.getTileCacheForProjection=function(t){const e=this.getProjection();return e&&!xh(e,t)?null:this.tileCache},zx.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},zx.prototype.getTilePixelSize=function(t,e,n){const i=this.getTileGridForProjection(n),o=this.getTilePixelRatio(e),r=Sf(i.getTileSize(t),this.tmpSize);return 1==o?r:(s=r,a=o,void 0===(l=this.tmpSize)&&(l=[0,0]),l[0]=s[0]*a+.5|0,l[1]=s[1]*a+.5|0,l);var s,a,l},zx.prototype.getTileCoordForTileUrlFunction=function(t,e){const n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){const i=e[0],o=t.getTileCoordCenter(e),r=Bx(n);if(lu(r,o))return e;{const e=ku(r),n=Math.ceil((r[0]-o[0])/e);return o[0]+=e*n,t.getTileCoordForCoordAndZ(o,i)}}(i,t,n)),function(t,e){const n=t[0],i=t[1],o=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const r=e.getExtent();let s;return!(s=r?e.getTileRangeForExtentAndZ(r,n):e.getFullTileRange(n))||s.containsXY(i,o)}(t,i)?t:null},zx.prototype.refresh=function(){this.tileCache.clear(),this.changed()},zx.prototype.useTile=Al;const Hx=function(t,e){Bl.call(this,t),this.tile=e};_l(Hx,Bl);var Wx=zx;const Ux=function(t){Wx.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Ox,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}};_l(Ux,Wx),Ux.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},Ux.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},Ux.prototype.getUrls=function(){return this.urls},Ux.prototype.handleTileChange=function(t){const e=t.target,n=ml(e),i=e.getState();let o;1==i?(this.tileLoadingKeys_[n]=!0,o="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=3==i?"tileloaderror":2==i||5==i?"tileloadend":void 0),void 0!=o&&this.dispatchEvent(new Hx(o,e))},Ux.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},Ux.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},Ux.prototype.setUrl=function(t){const e=this.urls=function(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),o=n[2].charCodeAt(0);let r;for(r=i;r<=o;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=n=/\{(\d+)-(\d+)\}/.exec(t)){const i=parseInt(n[2],10);for(let o=parseInt(n[1],10);o<=i;o++)e.push(t.replace(n[0],o.toString()));return e}return e.push(t),e}(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Dx(e,this.tileGrid),t)},Ux.prototype.setUrls=function(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Dx(t,this.tileGrid),e)},Ux.prototype.useTile=function(t,e,n){const i=Ym(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)};var Yx=Ux;const Kx=function(t){Yx.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Xx,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:kp,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};function Xx(t,e){t.getImage().src=e}_l(Kx,Yx),Kx.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},Kx.prototype.expireCache=function(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection){const t=this.tileCacheForProjection[i];t.expireCache(t==n?e:{})}},Kx.prototype.getGutter=function(t){return this.getProjection()&&t&&!xh(this.getProjection(),t)?0:this.getGutterInternal()},Kx.prototype.getGutterInternal=function(){return 0},Kx.prototype.getOpaque=function(t){return!(this.getProjection()&&t&&!xh(this.getProjection(),t))&&Yx.prototype.getOpaque.call(this,t)},Kx.prototype.getTileGridForProjection=function(t){const e=this.getProjection();if(!this.tileGrid||e&&!xh(e,t)){const e=ml(t).toString();return e in this.tileGridForProjection||(this.tileGridForProjection[e]=Vx(t)),this.tileGridForProjection[e]}return this.tileGrid},Kx.prototype.getTileCacheForProjection=function(t){const e=this.getProjection();if(!e||xh(e,t))return this.tileCache;{const e=ml(t).toString();return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Zm(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}},Kx.prototype.createTile_=function(t,e,n,i,o,r){const s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,o),l=a?this.tileUrlFunction(a,i,o):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,Pl(u,Wl.CHANGE,this.handleTileChange,this),u},Kx.prototype.getTile=function(t,e,n,i,o){const r=this.getProjection();if(r&&o&&!xh(r,o)){const s=this.getTileCacheForProjection(o),a=[t,e,n];let l;const u=Km(a);s.containsKey(u)&&(l=s.get(u));const h=this.getKey();if(l&&l.key==h)return l;{const t=this.getTileGridForProjection(r),e=this.getTileGridForProjection(o),n=this.getTileCoordForTileUrlFunction(a,o),c=new Lx(r,t,o,e,a,n,this.getTilePixelRatio(i),this.getGutterInternal(),(function(t,e,n,i){return this.getTileInternal(t,e,n,i,r)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return c.key=h,l?(c.interimTile=l,c.refreshInterimChain(),s.replace(u,c)):s.set(u,c),c}}return this.getTileInternal(t,e,n,i,r||o)},Kx.prototype.getTileInternal=function(t,e,n,i,o){let r=null;const s=Ym(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){const l=r;(r=this.createTile_(t,e,n,i,o,a)).interimTile=0==l.getState()?l.interimTile:l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,n,i,o,a),this.tileCache.set(s,r);return r},Kx.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},Kx.prototype.setTileGridForProjection=function(t,e){{const n=_h(t);if(n){const t=ml(n).toString();t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}};var Zx=Kx;const qx=function(t){const e=t||{},n=void 0!==e.projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function(t){const e={};return bl(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=_h("EPSG:3857").getExtent()),e.resolutions=jx(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new Gx(e)}({extent:Bx(n),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});Zx.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};_l(qx,Zx);var Qx=qx;const Jx=function(t){const e=t||{};let n;Qx.call(this,{attributions:n=void 0!==e.attributions?e.attributions:['&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'],cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",opaque:void 0===e.opaque||e.opaque,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX})};_l(Jx,Qx);var $x=Jx;const tb=function(t,e,n,i,o,r){Hl.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==i&&(this.image_.crossOrigin=i),this.canvas_=r?document.createElement("CANVAS"):null,this.color_=r,this.imageListenerKeys_=null,this.imageState_=o,this.size_=n,this.src_=e,this.tainting_=!1,this.imageState_==vc.LOADED&&this.determineTainting_()};_l(tb,Hl),tb.prototype.determineTainting_=function(){const t=qh(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},tb.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Wl.CHANGE)},tb.prototype.handleImageError_=function(){this.imageState_=vc.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},tb.prototype.handleImageLoad_=function(){this.imageState_=vc.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},tb.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},tb.prototype.getImageState=function(){return this.imageState_},tb.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){const t=this.size_[0],e=this.size_[1],n=qh(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},tb.prototype.getSize=function(){return this.size_},tb.prototype.getSrc=function(){return this.src_},tb.prototype.load=function(){if(this.imageState_==vc.IDLE){this.imageState_=vc.LOADING,this.imageListenerKeys_=[Ml(this.image_,Wl.ERROR,this.handleImageError_,this),Ml(this.image_,Wl.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},tb.prototype.replaceColor_=function(){if(this.tainting_||null===this.color_)return;this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;const t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);const e=t.getImageData(0,0,this.image_.width,this.image_.height),n=e.data,i=this.color_[0]/255,o=this.color_[1]/255,r=this.color_[2]/255;for(let s=0,a=n.length;s<a;s+=4)n[s]*=i,n[s+1]*=o,n[s+2]*=r;t.putImageData(e,0,0)},tb.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(Ll),this.imageListenerKeys_=null};const eb=function(t){const e=t||{};this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const n=void 0!==e.img?e.img:null,i=void 0!==e.imgSize?e.imgSize:null;let o=e.src;eu(!(void 0!==o&&n),4),eu(!n||n&&i,5),void 0!==o&&0!==o.length||!n||(o=n.src||ml(n).toString()),eu(void 0!==o&&o.length>0,6);const r=void 0!==e.src?vc.IDLE:vc.LOADED;this.color_=void 0!==e.color?Yh(e.color):null,this.iconImage_=function(t,e,n,i,o,r){let s=Fy.get(e,i,r);return s||(s=new tb(t,e,n,i,o,r),Fy.set(e,i,r,s)),s}(n,o,i,this.crossOrigin_,r,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,jc.call(this,{opacity:void 0!==e.opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,snapToPixel:void 0===e.snapToPixel||e.snapToPixel,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView})};_l(eb,jc),eb.prototype.clone=function(){return new eb({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},eb.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;let t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},eb.prototype.getColor=function(){return this.color_},eb.prototype.getImage=function(t){return this.iconImage_.getImage(t)},eb.prototype.getImageSize=function(){return this.iconImage_.getSize()},eb.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},eb.prototype.getImageState=function(){return this.iconImage_.getImageState()},eb.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},eb.prototype.getOrigin=function(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},eb.prototype.getSrc=function(){return this.iconImage_.getSrc()},eb.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},eb.prototype.listenImageChange=function(t,e){return Pl(this.iconImage_,Wl.CHANGE,t,e)},eb.prototype.load=function(){this.iconImage_.load()},eb.prototype.unlistenImageChange=function(t,e){kl(this.iconImage_,Wl.CHANGE,t,e)};var nb=n("1SRF"),ib=function(){function t(t){this.http=t,this.sights=[],this.maxYear=100,this.minYear=0,this.count=0,this.currentYear=0,this.filterType="Total",this.propability=0}return t.prototype.ngAfterViewInit=function(){var t=this;document.getElementById("myRange").oninput=function(e){t.currentYear=parseInt(e.target.value,10),t.filterByDate()},this.vectorSource=new N_({}),this.predictionSource=new N_({}),this.centroidSource=new N_({}),this.currentPredictionSource=new N_({}),this.view=new bf({center:Ch([-97.9411111,29.8830556],"EPSG:4326","EPSG:3857"),zoom:4}),this.map=new zm({target:"map",layers:[new Ix({source:new $x}),new C_({source:this.centroidSource,style:this.createStyle("orange","orange",5)}),new C_({source:this.currentPredictionSource,style:this.createStyle("red","red",10)}),new C_({source:this.vectorSource}),new C_({source:this.predictionSource,style:this.createStyle("green","green",3)})],view:this.view}),this.http.get("./assets/complete.json").subscribe(function(e){e.forEach(function(t){t.datetime=new Date(t.datetime)}),t.sights=e,t.sights.sort(function(t,e){return t.datetime>e.datetime?1:t.datetime<e.datetime?-1:0}),t.minYear=t.sights[0].datetime.getFullYear(),t.currentYear=t.sights[0].datetime.getFullYear(),t.maxYear=t.sights[t.sights.length-1].datetime.getFullYear(),t.filterByDate(),setInterval(function(){t.checkPropability()},1e3)})},t.prototype.filterByDate=function(){var t,e=this,n=new Date(this.currentYear+"-12-31"),i=[];this.vectorSource.clear(),t=this.sights.filter("Total"===this.filterType?function(t){return t.datetime<=n}:function(t){return t.datetime.getFullYear()===e.currentYear}),this.count=t.length;for(var o=0,r=t;o<r.length;o++){var s=r[o],a=new nd({shape:s.shape,datetime:s.datetime,country:s.country,city:s.city,state:s.state,duration:s.duration,geometry:this.createPoint(s.longitude,s.latitude)});i.push(a)}this.vectorSource.addFeatures(i)},t.prototype.changeType=function(){this.filterType="Total"===this.filterType?"Yearly":"Total",this.filterByDate()},t.prototype.getPrediction=function(t){if(this.centroidSource.clear(),this.predictionSource.clear(),t){t=new Date(t);for(var e=this.sights.filter(function(e){return e.datetime.getDate()===t.getDate()&&e.datetime.getMonth()===t.getMonth()}),n=[],i=0,o=e;i<o.length;i++)n.push([(h=o[i]).longitude,h.latitude]);nb.data(n);for(var r=0,s=nb.clusters().map(function(t){return t.centroid});r<s.length;r++){var a=s[r];this.centroidSource.addFeature(new nd({datetime:t,geometry:this.createPoint(a[0],a[1])}))}for(var l=0,u=e;l<u.length;l++){var h;this.predictionSource.addFeature(new nd({datetime:t,duration:(h=u[l]).duration,geometry:this.createPoint(h.longitude,h.latitude)}))}}},t.prototype.getAvg=function(t,e){var n=t.map(function(t){return t[e]});return n.reduce(function(t,e){return t+e})/n.length},t.prototype.createStyle=function(t,e,n){return new td({fill:new Yc({color:t}),stroke:new Xc({color:e,width:2}),image:new Wc({radius:n,fill:new Yc({color:t})})})},t.prototype.checkPropability=function(){var t=new Date,e=this.sights.filter(function(e){return e.datetime.getHours()===t.getHours()&&e.datetime.getMinutes()===t.getMinutes()}),n=this.sights.filter(function(e){return e.datetime.getDate()===t.getDate()});if(n.length&&(this.propability=e.length/n.length*100,this.propability<0&&(this.propability=0)),e.length){var i=new function(){};i.latitude=this.getAvg(e,"latitude"),i.longitude=this.getAvg(e,"longitude"),i.duration=this.getAvg(e,"duration");var o=this.createPoint(i.longitude,i.latitude);this.currentPredictionSource.clear(),this.currentPredictionSource.addFeature(new nd({datetime:t,duration:i.duration,geometry:o}))}},t.prototype.createPoint=function(t,e){return new Dd(Ch([t,e],"EPSG:4326","EPSG:3857"))},t}(),ob=function(){},rb=void 0,sb=["en",[["a","p"],["AM","PM"],rb],[["AM","PM"],rb,rb],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rb,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rb,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rb,"{1} 'at' {0}",rb],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],ab={},lb=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),ub=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),hb=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),cb=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),db=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function pb(t,e,n){var i=wb(t);return xb(xb([i[3],i[4]],e),n)}function fb(t,e,n){var i=wb(t);return xb(xb([i[5],i[6]],e),n)}function gb(t,e){return xb(wb(t)[10],e)}function _b(t,e){return xb(wb(t)[11],e)}function yb(t,e){return xb(wb(t)[12],e)}function mb(t,e){var n=wb(t),i=n[13][e];if(void 0===i){if(e===db.CurrencyDecimal)return n[13][db.Decimal];if(e===db.CurrencyGroup)return n[13][db.Group]}return i}function vb(t){if(!t[19])throw new Error('Missing extra locale data for the locale "'+t[0]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function xb(t,e){for(var n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function bb(t){var e=h(t.split(":"),2);return{hours:+e[0],minutes:+e[1]}}function wb(t){var e=t.toLowerCase().replace(/_/g,"-"),n=ab[e];if(n)return n;var i=e.split("-")[0];if(n=ab[i])return n;if("en"===i)return sb;throw new Error('Missing locale data for the locale "'+t+'".')}var Cb=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Eb={},Tb=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Sb=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Ib=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Rb=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function Pb(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function Mb(t,e,n,i,o){void 0===n&&(n="-");var r="";(t<0||o&&t<=0)&&(o?t=1-t:(t=-t,r=n));for(var s=String(t);s.length<e;)s="0"+s;return i&&(s=s.substr(s.length-e)),r+s}function kb(t,e,n,i,o){return void 0===n&&(n=0),void 0===i&&(i=!1),void 0===o&&(o=!1),function(r,s){var a,l=function(t,e){switch(t){case Ib.FullYear:return e.getFullYear();case Ib.Month:return e.getMonth();case Ib.Date:return e.getDate();case Ib.Hours:return e.getHours();case Ib.Minutes:return e.getMinutes();case Ib.Seconds:return e.getSeconds();case Ib.FractionalSeconds:return e.getMilliseconds();case Ib.Day:return e.getDay();default:throw new Error('Unknown DateType value "'+t+'".')}}(t,r);if((n>0||l>-n)&&(l+=n),t===Ib.Hours)0===l&&-12===n&&(l=12);else if(t===Ib.FractionalSeconds)return a=e,Mb(l,3).substr(0,a);var u=mb(s,db.MinusSign);return Mb(l,e,u,i,o)}}function Lb(t,e,n,i){return void 0===n&&(n=ub.Format),void 0===i&&(i=!1),function(o,r){return function(t,e,n,i,o,r){switch(n){case Rb.Months:return fb(e,o,i)[t.getMonth()];case Rb.Days:return pb(e,o,i)[t.getDay()];case Rb.DayPeriods:var s=t.getHours(),a=t.getMinutes();if(r){var l,u=function(t){var e=wb(t);return vb(e),(e[19][2]||[]).map(function(t){return"string"==typeof t?bb(t):[bb(t[0]),bb(t[1])]})}(e),h=function(t,e,n){var i=wb(t);return vb(i),xb(xb([i[19][0],i[19][1]],e)||[],n)||[]}(e,o,i);if(u.forEach(function(t,e){if(Array.isArray(t)){var n=t[0],i=t[1],o=i.hours;s>=n.hours&&a>=n.minutes&&(s<o||s===o&&a<i.minutes)&&(l=h[e])}else t.hours===s&&t.minutes===a&&(l=h[e])}),l)return l}return function(t,e,n){var i=wb(t);return xb(xb([i[1],i[2]],e),n)}(e,o,i)[s<12?0:1];case Rb.Eras:return function(t,e){return xb(wb(t)[7],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,r,t,e,n,i)}}function Fb(t){return function(e,n,i){var o=-1*i,r=mb(n,db.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(t){case Sb.Short:return(o>=0?"+":"")+Mb(s,2,r)+Mb(Math.abs(o%60),2,r);case Sb.ShortGMT:return"GMT"+(o>=0?"+":"")+Mb(s,1,r);case Sb.Long:return"GMT"+(o>=0?"+":"")+Mb(s,2,r)+":"+Mb(Math.abs(o%60),2,r);case Sb.Extended:return 0===i?"Z":(o>=0?"+":"")+Mb(s,2,r)+":"+Mb(Math.abs(o%60),2,r);default:throw new Error('Unknown zone width "'+t+'"')}}}var Db=0,Ob=4;function Ab(t,e){return void 0===e&&(e=!1),function(n,i){var o,r,s,a;if(e){var l=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,u=n.getDate();o=1+Math.floor((u+l)/7)}else{var h=(s=n.getFullYear(),a=new Date(s,Db,1).getDay(),new Date(s,0,1+(a<=Ob?Ob:Ob+7)-a)),c=(r=n,new Date(r.getFullYear(),r.getMonth(),r.getDate()+(Ob-r.getDay()))).getTime()-h.getTime();o=1+Math.round(c/6048e5)}return Mb(o,t,mb(i,db.MinusSign))}}var Nb={};function Gb(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Vb(t){return t instanceof Date&&!isNaN(t.valueOf())}var jb=new ct("UseV4Plurals"),Bb=function(){},zb=function(t){function e(e,n){var i=t.call(this)||this;return i.locale=e,i.deprecatedPluralFn=n,i}return o(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return wb(t)[18]}(e||this.locale)(t)){case lb.Zero:return"zero";case lb.One:return"one";case lb.Two:return"two";case lb.Few:return"few";case lb.Many:return"many";default:return"other"}},s([a(0,Tt(Jn)),a(1,St()),a(1,Tt(jb))],e)}(Bb);function Hb(t,e){var n,i;e=encodeURIComponent(e);try{for(var o=u(t.split(";")),r=o.next();!r.done;r=o.next()){var s=r.value,a=s.indexOf("="),l=h(-1==a?[s,""]:[s.slice(0,a),s.slice(a+1)],2),c=l[1];if(l[0].trim()===e)return decodeURIComponent(c)}}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}var Wb=function(){function t(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),Ub=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){hn()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,i,o){if(null==t.previousIndex){var r=e._viewContainer.createEmbeddedView(e._template,new Wb(null,e._ngForOf,-1,-1),o),s=new Yb(t,r);n.push(s)}else null==o?e._viewContainer.remove(i):(r=e._viewContainer.get(i),e._viewContainer.move(r,o),s=new Yb(t,r),n.push(s))});for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);i=0;for(var o=this._viewContainer.length;i<o;i++){var r=this._viewContainer.get(i);r.context.index=i,r.context.count=o,r.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),Yb=function(t,e){this.record=t,this.view=e},Kb=function(){function t(t,e){this._viewContainer=t,this._context=new Xb,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){Zb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){Zb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),Xb=function(){this.$implicit=null,this.ngIf=null};function Zb(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+wt(e)+"'.")}var qb=function(){function t(t){this._viewContainerRef=t}return t.prototype.ngOnChanges=function(t){this._shouldRecreateView(t)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)},t.prototype._shouldRecreateView=function(t){var e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)},t.prototype._hasContextShapeChanged=function(t){var e,n,i=Object.keys(t.previousValue||{}),o=Object.keys(t.currentValue||{});if(i.length===o.length){try{for(var r=u(o),s=r.next();!s.done;s=r.next())if(-1===i.indexOf(s.value))return!0}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return!1}return!0},t.prototype._updateExistingContext=function(t){var e,n;try{for(var i=u(Object.keys(t)),o=i.next();!o.done;o=i.next()){var r=o.value;this._viewRef.context[r]=this.ngTemplateOutletContext[r]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t}(),Qb=function(){},Jb=new ct("DocumentToken"),$b="server",tw=new M(function(t){return t.complete()});var ew=null;function nw(){return ew}var iw,ow={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},rw={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};_t.Node&&(iw=_t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var aw,lw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,ew||(ew=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var i;(i=t)[e].apply(i,c(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return ow},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return iw.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(t,e),i},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var i=this.getStyle(t,e)||"";return n?i==n:i.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,i=0;i<n.length;i++){var o=n.item(i);e.set(o.name,o.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,i){t.setAttributeNS(e,n,i)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&sw.hasOwnProperty(e)&&(e=sw[e]))}return rw[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=uw||(uw=document.querySelector("base"))?uw.getAttribute("href"):null;return null==n?null:(e=n,aw||(aw=document.createElement("a")),aw.setAttribute("href",e),"/"===aw.pathname.charAt(0)?aw.pathname:"/"+aw.pathname)},e.prototype.resetBaseElement=function(){uw=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return Hb(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],o=0;o<i.length;o++)if(null!=e.getStyle(n,i[o]+"AnimationName")){e._animationPrefix="-"+i[o].toLowerCase()+"-";break}var r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(r).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=r[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return o(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),uw=null,hw=Jb;function cw(){return!!window.history.pushState}var dw=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return o(e,t),e.prototype._init=function(){this.location=nw().getLocation(),this._history=nw().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return nw().getBaseHref(this._doc)},e.prototype.onPopState=function(t){nw().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){nw().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){cw()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){cw()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},s([a(0,Tt(hw)),l("design:paramtypes",[Object])],e)}(ob),pw=new ct("TRANSITION_ID"),fw=[{provide:xe,useFactory:function(t,e,n){return function(){n.get(be).donePromise.then(function(){var n=nw();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[pw,hw,Ot],multi:!0}],gw=function(){function t(){}return t.init=function(){var e;e=new t,sn=e},t.prototype.addToWindow=function(t){_t.getAngularTestability=function(e,n){void 0===n&&(n=!0);var i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},_t.getAllAngularTestabilities=function(){return t.getAllTestabilities()},_t.getAllAngularRootElements=function(){return t.getAllRootElements()},_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(function(t){var e=_t.getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?nw().isShadowRoot(e)?this.findTestabilityInTree(t,nw().getHost(e),!0):this.findTestabilityInTree(t,nw().parentElement(e),!0):null},t}();function _w(t,e){"undefined"!=typeof COMPILED&&COMPILED||((_t.ng=_t.ng||{})[t]=e)}var yw={ApplicationRef:_n,NgZone:Ze};function mw(t){return Pn(t)}var vw=new ct("EventManagerPlugins"),xw=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,i=0;i<n.length;i++){var o=n[i];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error("No event manager plugin found for event "+t)},s([a(0,Tt(vw))],t)}(),bw=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var i=nw().getGlobalEventTarget(this._doc,t);if(!i)throw new Error("Unsupported event target "+i+" for event "+e);return this.addEventListener(i,e,n)},t}(),ww=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Cw=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return o(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var i=n._doc.createElement("style");i.textContent=t,n._styleNodes.add(e.appendChild(i))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return nw().remove(t)})},s([a(0,Tt(hw))],e)}(ww),Ew={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tw=/%COMP%/g,Sw="_nghost-%COMP%",Iw="_ngcontent-%COMP%";function Rw(t,e,n){for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?Rw(t,o,n):(o=o.replace(Tw,t),n.push(o))}return n}function Pw(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Mw=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new kw(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case $t.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Ow(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case $t.Native:case $t.ShadowDom:return new Aw(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=Rw(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),kw=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Ew[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,i){if(i){e=i+":"+e;var o=Ew[i];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var i=Ew[n];i?t.removeAttributeNS(i,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,i){i&vn.DashCase?t.style.setProperty(e,n,i&vn.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&vn.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){Fw(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Fw(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Pw(n)):this.eventManager.addEventListener(t,e,Pw(n))},t}(),Lw="@".charCodeAt(0);function Fw(t,e){if(t.charCodeAt(0)===Lw)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Dw,Ow=function(t){function e(e,n,i){var o=t.call(this,e)||this;o.component=i;var r=Rw(i.id,i.styles,[]);return n.addStyles(r),o.contentAttr=Iw.replace(Tw,i.id),o.hostAttr=Sw.replace(Tw,i.id),o}return o(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var i=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,i,this.contentAttr,""),i},e}(kw),Aw=function(t){function e(e,n,i,o){var r=t.call(this,e)||this;r.sharedStylesHost=n,r.hostEl=i,r.component=o,r.shadowRoot=o.encapsulation===$t.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),r.sharedStylesHost.addHost(r.shadowRoot);for(var s=Rw(o.id,o.styles,[]),a=0;a<s.length;a++){var l=document.createElement("style");l.textContent=s[a],r.shadowRoot.appendChild(l)}return r}return o(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,i){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,i)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(kw),Nw="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Gw=Nw("addEventListener"),Vw=Nw("removeEventListener"),jw={},Bw="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Nw("BLACK_LISTED_EVENTS")]&&(Dw={});var zw=function(t){return!!Dw&&Dw.hasOwnProperty(t)},Hw=function(t){var e=jw[t.type];if(e){var n=this[e];if(n){var i=[t];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,i):s.handler.apply(this,i);for(var o=n.slice(),r=0;r<o.length&&!0!==t[Bw];r++){var s;(s=o[r]).zone!==Zone.current?s.zone.run(s.handler,this,i):s.handler.apply(this,i)}}}},Ww=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.ngZone=n,i&&function(t){return t===$b}(i)||o.patchEvent(),o}return o(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Bw]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var i=this,o=n;if(!t[Gw]||Ze.isInAngularZone()&&!zw(e))t.addEventListener(e,o,!1);else{var r=jw[e];r||(r=jw[e]=Nw("ANGULAR"+e+"FALSE"));var s=t[r],a=s&&s.length>0;s||(s=t[r]=[]);var l=zw(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:o});else{for(var u=!1,h=0;h<s.length;h++)if(s[h].handler===o){u=!0;break}u||s.push({zone:l,handler:o})}a||t[Gw](e,Hw,!1)}return function(){return i.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var i=t[Vw];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);var o=jw[e],r=o&&t[o];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);for(var s=!1,a=0;a<r.length;a++)if(r[a].handler===n){s=!0,r.splice(a,1);break}s?0===r.length&&i.apply(t,[e,Hw,!1]):t.removeEventListener.apply(t,[e,n,!1])},s([a(0,Tt(hw)),a(2,St()),a(2,Tt(Se))],e)}(bw),Uw={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Yw=new ct("HammerGestureConfig"),Kw=new ct("HammerLoader"),Xw=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Zw=function(t){function e(e,n,i,o){var r=t.call(this,e)||this;return r._config=n,r.console=i,r.loader=o,r}return o(e,t),e.prototype.supports=function(t){return!(!Uw.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var i=this,o=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var r=!1,s=function(){r=!0};return this.loader().then(function(){if(!window.Hammer)return i.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=function(){});r||(s=i.addEventListener(t,e,n))}).catch(function(){i.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),s=function(){}}),function(){s()}}return o.runOutsideAngular(function(){var r=i._config.buildHammer(t),s=function(t){o.runGuarded(function(){n(t)})};return r.on(e,s),function(){r.off(e,s),"function"==typeof r.destroy&&r.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},s([a(0,Tt(hw)),a(1,Tt(Yw)),a(3,St()),a(3,Tt(Kw))],e)}(bw),qw=["alt","control","meta","shift"],Qw={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Jw=function(t){function e(e){return t.call(this,e)||this}var n;return o(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,i){var o=n.parseEventName(e),r=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return nw().onAndCancel(t,o.domEventName,r)})},e.parseEventName=function(t){var e=t.toLowerCase().split("."),i=e.shift();if(0===e.length||"keydown"!==i&&"keyup"!==i)return null;var o=n._normalizeKey(e.pop()),r="";if(qw.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),r+=t+".")}),r+=o,0!=e.length||0===o.length)return null;var s={};return s.domEventName=i,s.fullKey=r,s},e.getEventFullKey=function(t){var e="",n=nw().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),qw.forEach(function(i){i!=n&&(0,Qw[i])(t)&&(e+=i+".")}),e+=n},e.eventCallback=function(t,e,i){return function(o){n.getEventFullKey(o)===t&&i.runGuarded(function(){return e(o)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},n=s([a(0,Tt(hw))],e)}(bw),$w=function(){},tC=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return o(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case Ti.NONE:return e;case Ti.HTML:return e instanceof nC?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{ui=ui||new ii(t);var i=e?String(e):"";n=ui.getInertBodyElement(i);var o=5,r=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=r,r=n.innerHTML,n=ui.getInertBodyElement(i)}while(i!==r);var s=new mi,a=s.sanitizeChildren(wi(n)||n);return hn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),a}finally{if(n)for(var l=wi(n)||n;l.firstChild;)l.removeChild(l.firstChild)}}(this._doc,String(e)));case Ti.STYLE:return e instanceof iC?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Ei);return e&&si(e[1])===e[1]||t.match(Ci)&&function(t){for(var e=!0,n=!0,i=0;i<t.length;i++){var o=t.charAt(i);"'"===o&&n?e=!e:'"'===o&&e&&(n=!n)}return e&&n}(t)?t:(hn()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case Ti.SCRIPT:if(e instanceof oC)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Ti.URL:return e instanceof sC||e instanceof rC?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),si(String(e)));case Ti.RESOURCE_URL:if(e instanceof sC)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof eC)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new nC(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new iC(t)},e.prototype.bypassSecurityTrustScript=function(t){return new oC(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new rC(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new sC(t)},s([a(0,Tt(hw))],e)}($w),eC=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),nC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(eC),iC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"Style"},e}(eC),oC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"Script"},e}(eC),rC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"URL"},e}(eC),sC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(eC),aC=dn(Qn,"browser",[{provide:Se,useValue:"browser"},{provide:Te,useValue:function(){lw.makeCurrent(),gw.init()},multi:!0},{provide:ob,useClass:dw,deps:[hw]},{provide:hw,useFactory:function(){return document},deps:[]}]);function lC(){return new ae}var uC=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:we,useValue:t.appId},{provide:pw,useExisting:we},fw]}},e=s([a(0,St()),a(0,Rt()),a(0,Tt(e))],t)}();"undefined"!=typeof window&&window;var hC=new ct("NgValueAccessor"),cC=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name},t}(),dC=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},s([a(2,St()),a(2,Pt())],t)}();function pC(t,e){return null==t?""+e:("string"==typeof e&&(e="'"+e+"'"),e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}var fC=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._value=t,this._setElementValue(pC(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._select?(this._value=t,this._setElementValue(pC(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype._setSelected=function(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},s([a(2,St()),a(2,Pt())],t)}(),gC=function(){},_C=function(){};function yC(t,e,n,i){return f(n)&&(i=n,n=void 0),i?yC(t,e,n).pipe(Z(function(t){return d(t)?i.apply(void 0,t):i(t)})):new M(function(i){!function t(e,n,i,o,r){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,i,r),s=function(){return a.removeEventListener(n,i,r)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var l=e;e.on(n,i),s=function(){return l.off(n,i)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var u=e;e.addListener(n,i),s=function(){return u.removeListener(n,i)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var h=0,c=e.length;h<c;h++)t(e[h],n,i,o,r)}o.add(s)}(t,e,function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},i,n)})}function mC(t,e){return function(n){return n.lift(new vC(t,e))}}Object;var vC=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new xC(t,this.predicate,this.thisArg))},t}(),xC=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(I);function bC(t){return function(e){return e.lift(new wC(t))}}var wC=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new CC(t),i=K(n,this.notifier);return i&&!i.closed?(n.add(i),e.subscribe(n)):n},t}(),CC=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.complete()},e.prototype.notifyComplete=function(){},e}(X),EC=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error),TC=function(){function t(t){if(this.total=t,this.total<0)throw new EC}return t.prototype.call=function(t,e){return e.subscribe(new SC(t,this.total))},t}(),SC=function(t){function e(e,n){var i=t.call(this,e)||this;return i.total=n,i.count=0,i}return o(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(I);function IC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new RC(t,n))}}var RC=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new PC(t,this.observables,this.project))},t}(),PC=function(t){function e(e,n,i){var o=t.call(this,e)||this;o.observables=n,o.project=i,o.toRespond=[];var r=n.length;o.values=new Array(r);for(var s=0;s<r;s++)o.toRespond.push(s);for(s=0;s<r;s++){var a=n[s];o.add(K(o,a,a,s))}return o}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.values[n]=e;var r=this.toRespond;if(r.length>0){var s=r.indexOf(n);-1!==s&&r.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(X);function MC(t){return parseInt(""+t,10)}function kC(t){return void 0!==t&&null!==t?""+t:""}function LC(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function FC(t){return void 0!==t&&null!==t}var DC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),OC=function(){function t(){this.dismissible=!0,this.type="warning"}return t.ngInjectableDef=ht({factory:function(){return new t},token:t,providedIn:"root"}),t}(),AC=function(){function t(t,e,n){this._renderer=e,this._element=n,this.close=new Xe,this.dismissible=t.dismissible,this.type=t.type}return t.prototype.closeHandler=function(){this.close.emit(null)},t.prototype.ngOnChanges=function(t){var e=t.type;e&&!e.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+e.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+e.currentValue))},t.prototype.ngOnInit=function(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)},t}(),NC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),GC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),VC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),jC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),BC=function(){function t(t,e,n){this.year=LC(t)?t:null,this.month=LC(e)?e:null,this.day=LC(n)?n:null}return t.from=function(e){return e instanceof t?e:e?new t(e.year,e.month,e.day):null},t.prototype.equals=function(t){return t&&this.year===t.year&&this.month===t.month&&this.day===t.day},t.prototype.before=function(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)},t.prototype.after=function(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)},t}();function zC(t){return new BC(t.getFullYear(),t.getMonth()+1,t.getDate())}function HC(t){var e=new Date(t.year,t.month-1,t.day,12);return isNaN(e.getTime())||e.setFullYear(t.year),e}function WC(){return new YC}var UC=function(){function t(){}return t.ngInjectableDef=ht({factory:WC,token:t,providedIn:"root"}),t}(),YC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDaysPerWeek=function(){return 7},e.prototype.getMonths=function(){return[1,2,3,4,5,6,7,8,9,10,11,12]},e.prototype.getWeeksPerMonth=function(){return 6},e.prototype.getNext=function(t,e,n){void 0===e&&(e="d"),void 0===n&&(n=1);var i=HC(t);switch(e){case"y":return new BC(t.year+n,1,1);case"m":i=new Date(t.year,t.month+n-1,1,12);break;case"d":i.setDate(i.getDate()+n);break;default:return t}return zC(i)},e.prototype.getPrev=function(t,e,n){return void 0===e&&(e="d"),void 0===n&&(n=1),this.getNext(t,e,-n)},e.prototype.getWeekday=function(t){var e=HC(t).getDay();return 0===e?7:e},e.prototype.getWeekNumber=function(t,e){7===e&&(e=0);var n=HC(t[(11-e)%7]);n.setDate(n.getDate()+4-(n.getDay()||7));var i=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((i-n.getTime())/864e5)/7)+1},e.prototype.getToday=function(){return zC(new Date)},e.prototype.isValid=function(t){if(!(t&&LC(t.year)&&LC(t.month)&&LC(t.day)))return!1;if(0===t.year)return!1;var e=HC(t);return!isNaN(e.getTime())&&e.getFullYear()===t.year&&e.getMonth()+1===t.month&&e.getDate()===t.day},e}(UC);function KC(t,e){return!function(t,e){return!t&&!e||!!t&&!!e&&t.equals(e)}(t,e)}function XC(t,e,n){return t&&e&&t.before(e)?e:t&&n&&t.after(n)?n:t}function ZC(t,e){var n=e.minDate,i=e.maxDate,o=e.disabled,r=e.markDisabled;return!(!FC(t)||o||r&&r(t,{year:t.year,month:t.month})||n&&t.before(n)||i&&t.after(i))}var qC=function(){function t(){}return t.prototype.getDayNumerals=function(t){return""+t.day},t.prototype.getWeekNumerals=function(t){return""+t},t.prototype.getYearNumerals=function(t){return""+t},t.ngInjectableDef=ht({factory:function(){return t=Qt(Jn),new QC(t);var t},token:t,providedIn:"root"}),t}(),QC=function(t){function e(e){var n=t.call(this)||this;n._locale=e;var i=pb(e,ub.Standalone,hb.Short);return n._weekdaysShort=i.map(function(t,e){return i[(e+1)%7]}),n._monthsShort=fb(e,ub.Standalone,hb.Abbreviated),n._monthsFull=fb(e,ub.Standalone,hb.Wide),n}return o(e,t),e.prototype.getWeekdayShortName=function(t){return this._weekdaysShort[t-1]},e.prototype.getMonthShortName=function(t){return this._monthsShort[t-1]},e.prototype.getMonthFullName=function(t){return this._monthsFull[t-1]},e.prototype.getDayAriaLabel=function(t){return function(t,e,n,i){var o=function(t){if(Vb(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();var e,n=parseFloat(t);if(!isNaN(t-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){var i=h(t.split("-").map(function(t){return+t}),3);return new Date(i[0],i[1]-1,i[2])}if(e=t.match(Cb))return function(t){var e=new Date(0),n=0,i=0,o=t[8]?e.setUTCFullYear:e.setFullYear,r=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),o.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));var s=Number(t[4]||0)-n,a=Number(t[5]||0)-i,l=Number(t[6]||0),u=Math.round(1e3*parseFloat("0."+(t[7]||0)));return r.call(e,s,a,l,u),e}(e)}var o=new Date(t);if(!Vb(o))throw new Error('Unable to convert "'+t+'" into a date');return o}(t);e=function t(e,n){var i=function(t){return wb(t)[0]}(e);if(Eb[i]=Eb[i]||{},Eb[i][n])return Eb[i][n];var o="";switch(n){case"shortDate":o=gb(e,cb.Short);break;case"mediumDate":o=gb(e,cb.Medium);break;case"longDate":o=gb(e,cb.Long);break;case"fullDate":o=gb(e,cb.Full);break;case"shortTime":o=_b(e,cb.Short);break;case"mediumTime":o=_b(e,cb.Medium);break;case"longTime":o=_b(e,cb.Long);break;case"fullTime":o=_b(e,cb.Full);break;case"short":var r=t(e,"shortTime"),s=t(e,"shortDate");o=Pb(yb(e,cb.Short),[r,s]);break;case"medium":var a=t(e,"mediumTime"),l=t(e,"mediumDate");o=Pb(yb(e,cb.Medium),[a,l]);break;case"long":var u=t(e,"longTime"),h=t(e,"longDate");o=Pb(yb(e,cb.Long),[u,h]);break;case"full":var c=t(e,"fullTime"),d=t(e,"fullDate");o=Pb(yb(e,cb.Full),[c,d])}return o&&(Eb[i][n]=o),o}(n,e)||e;for(var r,s=[];e;){if(!(r=Tb.exec(e))){s.push(e);break}var a=(s=s.concat(r.slice(1))).pop();if(!a)break;e=a}var l=o.getTimezoneOffset();i&&(l=Gb(i,l),o=function(t,e,n){var i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Gb(e,i)-i))}(o,i));var u="";return s.forEach(function(t){var e=function(t){if(Nb[t])return Nb[t];var e;switch(t){case"G":case"GG":case"GGG":e=Lb(Rb.Eras,hb.Abbreviated);break;case"GGGG":e=Lb(Rb.Eras,hb.Wide);break;case"GGGGG":e=Lb(Rb.Eras,hb.Narrow);break;case"y":e=kb(Ib.FullYear,1,0,!1,!0);break;case"yy":e=kb(Ib.FullYear,2,0,!0,!0);break;case"yyy":e=kb(Ib.FullYear,3,0,!1,!0);break;case"yyyy":e=kb(Ib.FullYear,4,0,!1,!0);break;case"M":case"L":e=kb(Ib.Month,1,1);break;case"MM":case"LL":e=kb(Ib.Month,2,1);break;case"MMM":e=Lb(Rb.Months,hb.Abbreviated);break;case"MMMM":e=Lb(Rb.Months,hb.Wide);break;case"MMMMM":e=Lb(Rb.Months,hb.Narrow);break;case"LLL":e=Lb(Rb.Months,hb.Abbreviated,ub.Standalone);break;case"LLLL":e=Lb(Rb.Months,hb.Wide,ub.Standalone);break;case"LLLLL":e=Lb(Rb.Months,hb.Narrow,ub.Standalone);break;case"w":e=Ab(1);break;case"ww":e=Ab(2);break;case"W":e=Ab(1,!0);break;case"d":e=kb(Ib.Date,1);break;case"dd":e=kb(Ib.Date,2);break;case"E":case"EE":case"EEE":e=Lb(Rb.Days,hb.Abbreviated);break;case"EEEE":e=Lb(Rb.Days,hb.Wide);break;case"EEEEE":e=Lb(Rb.Days,hb.Narrow);break;case"EEEEEE":e=Lb(Rb.Days,hb.Short);break;case"a":case"aa":case"aaa":e=Lb(Rb.DayPeriods,hb.Abbreviated);break;case"aaaa":e=Lb(Rb.DayPeriods,hb.Wide);break;case"aaaaa":e=Lb(Rb.DayPeriods,hb.Narrow);break;case"b":case"bb":case"bbb":e=Lb(Rb.DayPeriods,hb.Abbreviated,ub.Standalone,!0);break;case"bbbb":e=Lb(Rb.DayPeriods,hb.Wide,ub.Standalone,!0);break;case"bbbbb":e=Lb(Rb.DayPeriods,hb.Narrow,ub.Standalone,!0);break;case"B":case"BB":case"BBB":e=Lb(Rb.DayPeriods,hb.Abbreviated,ub.Format,!0);break;case"BBBB":e=Lb(Rb.DayPeriods,hb.Wide,ub.Format,!0);break;case"BBBBB":e=Lb(Rb.DayPeriods,hb.Narrow,ub.Format,!0);break;case"h":e=kb(Ib.Hours,1,-12);break;case"hh":e=kb(Ib.Hours,2,-12);break;case"H":e=kb(Ib.Hours,1);break;case"HH":e=kb(Ib.Hours,2);break;case"m":e=kb(Ib.Minutes,1);break;case"mm":e=kb(Ib.Minutes,2);break;case"s":e=kb(Ib.Seconds,1);break;case"ss":e=kb(Ib.Seconds,2);break;case"S":e=kb(Ib.FractionalSeconds,1);break;case"SS":e=kb(Ib.FractionalSeconds,2);break;case"SSS":e=kb(Ib.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Fb(Sb.Short);break;case"ZZZZZ":e=Fb(Sb.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Fb(Sb.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Fb(Sb.Long);break;default:return null}return Nb[t]=e,e}(t);u+=e?e(o,n,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)},e}(qC),JC=function(){function t(t,e){this._calendar=t,this._i18n=e,this._model$=new O,this._select$=new O,this._state={disabled:!1,displayMonths:1,firstDayOfWeek:1,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectBoxes:{years:[],months:[]},selectedDate:null}}return Object.defineProperty(t.prototype,"model$",{get:function(){return this._model$.pipe(mC(function(t){return t.months.length>0}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"select$",{get:function(){return this._select$.pipe(mC(function(t){return null!==t}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayTemplateData",{set:function(t){this._state.dayTemplateData!==t&&this._nextState({dayTemplateData:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{set:function(t){this._state.disabled!==t&&this._nextState({disabled:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMonths",{set:function(t){LC(t=MC(t))&&t>0&&this._state.displayMonths!==t&&this._nextState({displayMonths:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{set:function(t){LC(t=MC(t))&&t>=0&&this._state.firstDayOfWeek!==t&&this._nextState({firstDayOfWeek:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusVisible",{set:function(t){this._state.focusVisible===t||this._state.disabled||this._nextState({focusVisible:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDate",{set:function(t){var e=this.toValidDate(t,null);KC(this._state.maxDate,e)&&this._nextState({maxDate:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markDisabled",{set:function(t){this._state.markDisabled!==t&&this._nextState({markDisabled:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minDate",{set:function(t){var e=this.toValidDate(t,null);KC(this._state.minDate,e)&&this._nextState({minDate:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"navigation",{set:function(t){this._state.navigation!==t&&this._nextState({navigation:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outsideDays",{set:function(t){this._state.outsideDays!==t&&this._nextState({outsideDays:t})},enumerable:!0,configurable:!0}),t.prototype.focus=function(t){!this._state.disabled&&this._calendar.isValid(t)&&KC(this._state.focusDate,t)&&this._nextState({focusDate:t})},t.prototype.focusMove=function(t,e){this.focus(this._calendar.getNext(this._state.focusDate,t,e))},t.prototype.focusSelect=function(){ZC(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})},t.prototype.open=function(t){var e=this.toValidDate(t,this._calendar.getToday());this._state.disabled||this._nextState({firstDate:e})},t.prototype.select=function(t,e){void 0===e&&(e={});var n=this.toValidDate(t,null);this._state.disabled||(KC(this._state.selectedDate,n)&&this._nextState({selectedDate:n}),e.emitEvent&&ZC(n,this._state)&&this._select$.next(n))},t.prototype.toValidDate=function(t,e){var n=BC.from(t);return void 0===e&&(e=this._calendar.getToday()),this._calendar.isValid(n)?n:e},t.prototype._nextState=function(t){var e=this._updateState(t);this._patchContexts(e),this._state=e,this._model$.next(this._state)},t.prototype._patchContexts=function(t){var e=t.months,n=t.displayMonths,i=t.selectedDate,o=t.focusDate,r=t.focusVisible,s=t.disabled,a=t.outsideDays;t.months.forEach(function(t){t.weeks.forEach(function(l){l.days.forEach(function(l){o&&(l.context.focused=o.equals(l.date)&&r),l.tabindex=!s&&l.date.equals(o)&&o.month===t.number?0:-1,!0===s&&(l.context.disabled=!0),void 0!==i&&(l.context.selected=null!==i&&i.equals(l.date)),t.number!==l.date.month&&(l.hidden="hidden"===a||"collapsed"===a||n>1&&l.date.after(e[0].firstDate)&&l.date.before(e[n-1].lastDate))})})})},t.prototype._updateState=function(t){var e,n,i=Object.assign({},this._state,t),o=i.firstDate;if(("minDate"in t||"maxDate"in t)&&(function(t,e){if(e&&t&&e.before(t))throw new Error("'maxDate' "+e+" should be greater than 'minDate' "+t)}(i.minDate,i.maxDate),i.focusDate=XC(i.focusDate,i.minDate,i.maxDate),i.firstDate=XC(i.firstDate,i.minDate,i.maxDate),o=i.focusDate),"disabled"in t&&(i.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(o=i.selectedDate),"focusDate"in t&&(i.focusDate=XC(i.focusDate,i.minDate,i.maxDate),o=i.focusDate,0!==i.months.length&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in t&&(i.firstDate=XC(i.firstDate,i.minDate,i.maxDate),o=i.firstDate),o){var r=function(t,e,n,i,o){var r=n.displayMonths,s=n.months,a=s.splice(0,s.length);return Array.from({length:r},function(n,i){var r=t.getNext(e,"m",i);if(s[i]=null,!o){var l=a.findIndex(function(t){return t.firstDate.equals(r)});-1!==l&&(s[i]=a.splice(l,1)[0])}return r}).forEach(function(e,o){null===s[o]&&(s[o]=function(t,e,n,i,o){void 0===o&&(o={});var r=n.dayTemplateData,s=n.minDate,a=n.maxDate,l=n.firstDayOfWeek,u=n.markDisabled,h=n.outsideDays;o.firstDate=null,o.lastDate=null,o.number=e.month,o.year=e.year,o.weeks=o.weeks||[],o.weekdays=o.weekdays||[],e=function(t,e,n){var i=t.getDaysPerWeek(),o=new BC(e.year,e.month,1),r=t.getWeekday(o)%i;return t.getPrev(o,"d",(i+r-n)%i)}(t,e,l);for(var c=0;c<t.getWeeksPerMonth();c++){var d=o.weeks[c];d||(d=o.weeks[c]={number:0,days:[],collapsed:!0});for(var p=d.days,f=0;f<t.getDaysPerWeek();f++){0===c&&(o.weekdays[f]=t.getWeekday(e));var g=new BC(e.year,e.month,e.day),_=t.getNext(g),y=i.getDayAriaLabel(g),m=!!(s&&g.before(s)||a&&g.after(a));!m&&u&&(m=u(g,{month:o.number,year:o.year}));var v=r?r(g,{month:o.number,year:o.year}):void 0;null===o.firstDate&&g.month===o.number&&(o.firstDate=g),g.month===o.number&&_.month!==o.number&&(o.lastDate=g);var x=p[f];x||(x=p[f]={}),x.date=g,x.context=Object.assign(x.context||{},{$implicit:g,date:g,data:v,currentMonth:o.number,disabled:m,focused:!1,selected:!1}),x.tabindex=-1,x.ariaLabel=y,x.hidden=!1,e=_}d.number=t.getWeekNumber(p.map(function(t){return t.date}),l),d.collapsed="collapsed"===h&&p[0].date.month!==o.number&&p[p.length-1].date.month!==o.number}return o}(t,e,n,i,a.shift()||{}))}),s}(this._calendar,o,i,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t);i.months=r,i.firstDate=r.length>0?r[0].firstDate:void 0,i.lastDate=r.length>0?r[r.length-1].lastDate:void 0,"selectedDate"in t&&!ZC(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in t&&(void 0===i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=o);var s=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,a=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;"select"===i.navigation?(("minDate"in t||"maxDate"in t||0===i.selectBoxes.years.length||s)&&(i.selectBoxes.years=function(t,e,n){if(!t)return[];var i=e&&e.year||t.year-10;return Array.from({length:(n&&n.year||t.year+10)-i+1},function(t,e){return i+e})}(i.firstDate,i.minDate,i.maxDate)),("minDate"in t||"maxDate"in t||0===i.selectBoxes.months.length||s)&&(i.selectBoxes.months=function(t,e,n,i){if(!e)return[];var o=t.getMonths(e.year);if(n&&e.year===n.year){var r=o.findIndex(function(t){return t===n.month});o=o.slice(r)}return i&&e.year===i.year&&(r=o.findIndex(function(t){return t===i.month}),o=o.slice(0,r+1)),o}(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},"arrows"!==i.navigation&&"select"!==i.navigation||!(a||s||"minDate"in t||"maxDate"in t||"disabled"in t)||(i.prevDisabled=i.disabled||(e=i.minDate,n=this._calendar.getPrev(i.firstDate,"m"),e&&(n.year===e.year&&n.month<e.month||n.year<e.year&&1===e.month)),i.nextDisabled=i.disabled||function(t,e,n){return n&&t.getNext(i.lastDate,"m").after(n)}(this._calendar,0,i.maxDate))}return i},t}(),$C=function(){var t={Tab:9,Enter:13,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40};return t[t.Tab]="Tab",t[t.Enter]="Enter",t[t.Escape]="Escape",t[t.Space]="Space",t[t.PageUp]="PageUp",t[t.PageDown]="PageDown",t[t.End]="End",t[t.Home]="Home",t[t.ArrowLeft]="ArrowLeft",t[t.ArrowUp]="ArrowUp",t[t.ArrowRight]="ArrowRight",t[t.ArrowDown]="ArrowDown",t}(),tE=function(){function t(t,e){var n=this;this._service=t,this._calendar=e,t.model$.subscribe(function(t){n._minDate=t.minDate,n._maxDate=t.maxDate,n._firstViewDate=t.firstDate,n._lastViewDate=t.lastDate})}return t.prototype.processKey=function(t){if($C[kC(t.which)]){switch(t.which){case $C.PageUp:this._service.focusMove(t.shiftKey?"y":"m",-1);break;case $C.PageDown:this._service.focusMove(t.shiftKey?"y":"m",1);break;case $C.End:this._service.focus(t.shiftKey?this._maxDate:this._lastViewDate);break;case $C.Home:this._service.focus(t.shiftKey?this._minDate:this._firstViewDate);break;case $C.ArrowLeft:this._service.focusMove("d",-1);break;case $C.ArrowUp:this._service.focusMove("d",-this._calendar.getDaysPerWeek());break;case $C.ArrowRight:this._service.focusMove("d",1);break;case $C.ArrowDown:this._service.focusMove("d",this._calendar.getDaysPerWeek());break;case $C.Enter:case $C.Space:this._service.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}},t}(),eE=function(){var t={PREV:0,NEXT:1};return t[t.PREV]="PREV",t[t.NEXT]="NEXT",t}(),nE=function(){function t(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1}return t.ngInjectableDef=ht({factory:function(){return new t},token:t,providedIn:"root"}),t}();function iE(){return new rE}var oE=function(){function t(){}return t.ngInjectableDef=ht({factory:iE,token:t,providedIn:"root"}),t}(),rE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.fromModel=function(t){return t&&LC(t.year)&&LC(t.month)&&LC(t.day)?{year:t.year,month:t.month,day:t.day}:null},e.prototype.toModel=function(t){return t&&LC(t.year)&&LC(t.month)&&LC(t.day)?{year:t.year,month:t.month,day:t.day}:null},e}(oE),sE=function(){function t(t,e,n,i,o,r,s,a,l){var u=this;this._keyMapService=t,this._service=e,this._calendar=n,this.i18n=i,this._cd=r,this._elementRef=s,this._ngbDateAdapter=a,this._ngZone=l,this.navigate=new Xe,this.select=new Xe,this.onChange=function(t){},this.onTouched=function(){},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate"].forEach(function(t){return u[t]=o[t]}),this._selectSubscription=e.select$.subscribe(function(t){u.select.emit(t)}),this._subscription=e.model$.subscribe(function(t){var e=t.firstDate,n=u.model?u.model.firstDate:null,i=t.selectedDate,o=t.focusDate,s=u.model?u.model.focusDate:null;u.model=t,KC(i,u._controlValue)&&(u._controlValue=i,u.onTouched(),u.onChange(u._ngbDateAdapter.toModel(i))),KC(o,s)&&s&&t.focusVisible&&u.focus(),e.equals(n)||u.navigate.emit({current:n?{year:n.year,month:n.month}:null,next:{year:e.year,month:e.month}}),r.markForCheck()})}return t.prototype.focus=function(){var t=this;this._ngZone.onStable.asObservable().pipe(function(t){return t.lift(new TC(1))}).subscribe(function(){var e=t._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})},t.prototype.navigateTo=function(t){this._service.open(BC.from(t?r({},t,{day:1}):null))},t.prototype.ngOnDestroy=function(){this._subscription.unsubscribe(),this._selectSubscription.unsubscribe()},t.prototype.ngOnInit=function(){var t=this;void 0===this.model&&(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].forEach(function(e){return t._service[e]=t[e]}),this.navigateTo(this.startDate))},t.prototype.ngOnChanges=function(t){var e=this;["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].filter(function(e){return e in t}).forEach(function(t){return e._service[t]=e[t]}),"startDate"in t&&this.navigateTo(this.startDate)},t.prototype.onDateSelect=function(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})},t.prototype.onKeyDown=function(t){this._keyMapService.processKey(t)},t.prototype.onNavigateDateSelect=function(t){this._service.open(t)},t.prototype.onNavigateEvent=function(t){switch(t){case eE.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case eE.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._service.disabled=t},t.prototype.showFocus=function(t){this._service.focusVisible=t},t.prototype.writeValue=function(t){this._controlValue=BC.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)},t}(),aE=function(){function t(t){this.i18n=t,this.select=new Xe}return t.prototype.doSelect=function(t){t.context.disabled||t.hidden||this.select.emit(t.date)},t}(),lE=function(){return function(t){this.i18n=t,this.navigation=eE,this.months=[],this.navigate=new Xe,this.select=new Xe}}(),uE=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function hE(t){var e=t.querySelectorAll(uE);return[e[0],e[e.length-1]]}var cE=function(t,e,n){void 0===n&&(n=!1);var i=yC(t,"focusin").pipe(bC(e),Z(function(t){return t.target}));yC(t,"keydown").pipe(bC(e),mC(function(t){return t.which===$C.Tab}),IC(i)).subscribe(function(e){var n=h(e,2),i=n[0],o=n[1],r=h(hE(t),2),s=r[0],a=r[1];o!==s&&o!==t||!i.shiftKey||(a.focus(),i.preventDefault()),o!==a||i.shiftKey||(s.focus(),i.preventDefault())}),n&&yC(t,"click").pipe(bC(e),IC(i),Z(function(t){return t[1]})).subscribe(function(t){return t.focus()})},dE=function(){function t(t){this.i18n=t}return t.prototype.isMuted=function(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)},t}(),pE=function(){function t(t){this.i18n=t,this.select=new Xe}return t.prototype.changeMonth=function(t){this.select.emit(new BC(this.date.year,MC(t),1))},t.prototype.changeYear=function(t){this.select.emit(new BC(MC(t),this.date.month,1))},t}(),fE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),gE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),_E=function(){function t(){this.backdrop=!0,this.keyboard=!0}return t.ngInjectableDef=ht({factory:function(){return new t},token:t,providedIn:"root"}),t}(),yE=function(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n},mE=function(){},vE=function(){function t(t){this._document=t}return t.prototype.compensate=function(){return this._isPresent()?this._adjustBody(this._getWidth()):mE},t.prototype._adjustBody=function(t){var e=this._document.body,n=e.style.paddingRight,i=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=i+t+"px",function(){return e.style["padding-right"]=n}},t.prototype._isPresent=function(){var t=this._document.body.getBoundingClientRect();return t.left+t.right<window.innerWidth},t.prototype._getWidth=function(){var t=this._document.createElement("div");t.className="modal-scrollbar-measure";var e=this._document.body;e.appendChild(t);var n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n},t.ngInjectableDef=ht({factory:function(){return new t(Qt(Jb))},token:t,providedIn:"root"}),t}(),xE=function(){},bE=function(){function t(){}return t.prototype.close=function(t){},t.prototype.dismiss=function(t){},t}(),wE=function(){function t(t,e,n,i){var o=this;this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,t.instance.dismissEvent.subscribe(function(t){o.dismiss(t)}),this.result=new Promise(function(t,e){o._resolve=t,o._reject=e}),this.result.then(null,function(){})}return Object.defineProperty(t.prototype,"componentInstance",{get:function(){if(this._contentRef.componentRef)return this._contentRef.componentRef.instance},enumerable:!0,configurable:!0}),t.prototype.close=function(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())},t.prototype._dismiss=function(t){this._reject(t),this._removeModalElements()},t.prototype.dismiss=function(t){var e=this;if(this._windowCmptRef)if(this._beforeDismiss){var n=this._beforeDismiss();n&&n.then?n.then(function(n){!1!==n&&e._dismiss(t)},function(){}):!1!==n&&this._dismiss(t)}else this._dismiss(t)},t.prototype._removeModalElements=function(){var t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){var e=this._backdropCmptRef.location.nativeElement;e.parentNode.removeChild(e),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null},t}(),CE=function(){var t={BACKDROP_CLICK:0,ESC:1};return t[t.BACKDROP_CLICK]="BACKDROP_CLICK",t[t.ESC]="ESC",t}(),EE=function(){function t(t,e){this._document=t,this._elRef=e,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Xe}return t.prototype.backdropClick=function(t){!0===this.backdrop&&this._elRef.nativeElement===t.target&&this.dismiss(CE.BACKDROP_CLICK)},t.prototype.escKey=function(t){this.keyboard&&!t.defaultPrevented&&this.dismiss(CE.ESC)},t.prototype.dismiss=function(t){this.dismissEvent.emit(t)},t.prototype.ngOnInit=function(){this._elWithFocus=this._document.activeElement},t.prototype.ngAfterViewInit=function(){if(!this._elRef.nativeElement.contains(document.activeElement)){var t=this._elRef.nativeElement.querySelector("[ngbAutofocus]"),e=hE(this._elRef.nativeElement)[0];(t||e||this._elRef.nativeElement).focus()}},t.prototype.ngOnDestroy=function(){var t=this._document.body,e=this._elWithFocus;(e&&e.focus&&t.contains(e)?e:t).focus(),this._elWithFocus=null},t}(),TE=function(){function t(t,e,n,i,o){var r=this;this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._windowAttributes=["ariaLabelledBy","backdrop","centered","keyboard","size","windowClass"],this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowCmpts=[],this._activeWindowCmptHasChanged=new O,this._activeWindowCmptHasChanged.subscribe(function(){r._windowCmpts.length&&cE(r._windowCmpts[r._windowCmpts.length-1].location.nativeElement,r._activeWindowCmptHasChanged)})}return t.prototype.open=function(t,e,n,i){var o=this,r=FC(i.container)?this._document.querySelector(i.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),a=this._scrollBar.compensate(),l=function(){o._modalRefs.length||s.removeClass(o._document.body,"modal-open")};if(!r)throw new Error('The specified modal container "'+(i.container||"body")+'" was not found in the DOM.');var u=new bE,h=this._getContentRef(t,i.injector||e,n,u),c=!1!==i.backdrop?this._attachBackdrop(t,r):null,d=this._attachWindowComponent(t,r,h),p=new wE(d,h,c,i.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(d),p.result.then(a,a),p.result.then(l,l),u.close=function(t){p.close(t)},u.dismiss=function(t){p.dismiss(t)},this._applyWindowOptions(d.instance,i),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),c&&c.instance&&this._applyBackdropOptions(c.instance,i),p},t.prototype.dismissAll=function(t){this._modalRefs.forEach(function(e){return e.dismiss(t)})},t.prototype.hasOpenModals=function(){return this._modalRefs.length>0},t.prototype._attachBackdrop=function(t,e){var n=t.resolveComponentFactory(xE).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n},t.prototype._attachWindowComponent=function(t,e,n){var i=t.resolveComponentFactory(EE).create(this._injector,n.nodes);return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i},t.prototype._applyWindowOptions=function(t,e){this._windowAttributes.forEach(function(n){FC(e[n])&&(t[n]=e[n])})},t.prototype._applyBackdropOptions=function(t,e){this._backdropAttributes.forEach(function(n){FC(e[n])&&(t[n]=e[n])})},t.prototype._getContentRef=function(t,e,n,i){return n?n instanceof Cn?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i):new yE([])},t.prototype._createFromTemplateRef=function(t,e){var n=t.createEmbeddedView({$implicit:e,close:function(t){e.close(t)},dismiss:function(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new yE([n.rootNodes],n)},t.prototype._createFromString=function(t){var e=this._document.createTextNode(""+t);return new yE([[e]])},t.prototype._createFromComponent=function(t,e,n,i){var o=t.resolveComponentFactory(n),r=Ot.create({providers:[{provide:bE,useValue:i}],parent:e}),s=o.create(r);return this._applicationRef.attachView(s.hostView),new yE([[s.location.nativeElement]],s.hostView,s)},t.prototype._registerModalRef=function(t){var e=this,n=function(){var n=e._modalRefs.indexOf(t);n>-1&&e._modalRefs.splice(n,1)};this._modalRefs.push(t),t.result.then(n,n)},t.prototype._registerWindowCmpt=function(t){var e=this;this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(function(){var n=e._windowCmpts.indexOf(t);n>-1&&(e._windowCmpts.splice(n,1),e._activeWindowCmptHasChanged.next())})},t.ngInjectableDef=ht({factory:function(){return new t(Qt(_n),Qt(Ft),Qt(Jb),Qt(vE),Qt(mn))},token:t,providedIn:"root"}),t}(),SE=function(){function t(t,e,n,i){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=i}return t.prototype.open=function(t,e){void 0===e&&(e={});var n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)},t.prototype.dismissAll=function(t){this._modalStack.dismissAll(t)},t.prototype.hasOpenModals=function(){return this._modalStack.hasOpenModals()},t.ngInjectableDef=ht({factory:function(){return new t(Qt(Ve),Qt(Ft),Qt(TE),Qt(_E))},token:t,providedIn:"root"}),t}(),IE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),RE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),PE=function(){function t(t,e){this._element=t,this._renderer=e,this.placement="top"}return t.prototype.isTitleTemplate=function(){return this.title instanceof Cn},t.prototype.applyPlacement=function(t){this._renderer.removeClass(this._element.nativeElement,"bs-popover-"+this.placement.toString().split("-")[0]),this._renderer.removeClass(this._element.nativeElement,"bs-popover-"+this.placement.toString()),this.placement=t,this._renderer.addClass(this._element.nativeElement,"bs-popover-"+this.placement.toString().split("-")[0]),this._renderer.addClass(this._element.nativeElement,"bs-popover-"+this.placement.toString())},t.prototype.isEventFrom=function(t){return this._element.nativeElement.contains(t.target)},t}(),ME=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),kE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),LE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),FE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),DE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),OE=function(){function t(t,e){this._element=t,this._renderer=e,this.placement="top"}return t.prototype.applyPlacement=function(t){this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString()),this.placement=t,this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString())},t.prototype.isEventFrom=function(t){return this._element.nativeElement.contains(t.target)},t}(),AE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),NE=function(){function t(){this.highlightClass="ngb-highlight"}return t.prototype.ngOnChanges=function(t){var e,n=kC(this.result),i=n.toLowerCase(),o=kC(this.term).toLowerCase(),r=0;this.parts=o.length>0?i.split(new RegExp("("+(e=o,e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))+")")).map(function(t){var e=n.substr(r,t.length);return r+=t.length,e}):[n]},t}(),GE=function(){function t(){this.activeIdx=0,this.focusFirst=!0,this.formatter=kC,this.selectEvent=new Xe,this.activeChangeEvent=new Xe}return t.prototype.hasActive=function(){return this.activeIdx>-1&&this.activeIdx<this.results.length},t.prototype.getActive=function(){return this.results[this.activeIdx]},t.prototype.markActive=function(t){this.activeIdx=t,this._activeChanged()},t.prototype.next=function(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()},t.prototype.prev=function(){this.activeIdx<0?this.activeIdx=this.results.length-1:0===this.activeIdx?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()},t.prototype.resetActive=function(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()},t.prototype.select=function(t){this.selectEvent.emit(t)},t.prototype.ngOnInit=function(){this.resetActive()},t.prototype._activeChanged=function(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)},t}(),VE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),jE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),BE=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{display:block}"],data:{}});function zE(t){return Fr(0,[(t()(),xo(0,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.closeHandler()&&i),i},null,null)),(t()(),xo(1,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),Mr(-1,null,["\xd7"]))],null,null)}function HE(t){return Fr(2,[(t()(),vo(16777216,null,null,1,null,zE)),lr(1,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),Rr(null,0)],function(t,e){t(e,1,0,e.component.dismissible)},null)}var WE=Go("ngb-alert",AC,function(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-alert",[["class","alert"],["role","alert"]],[[2,"alert-dismissible",null]],null,null,HE,BE)),lr(1,638976,null,0,AC,[OC,xn,bn],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,Zo(e,1).dismissible)})},{dismissible:"dismissible",type:"type"},{close:"close"},["*"]),UE=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{display:block}.ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday[_ngcontent-%COMP%]{color:#5bc0de;color:var(--info)}.ngb-dp-week[_ngcontent-%COMP%]{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0}.ngb-dp-day[_ngcontent-%COMP%], .ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{width:2rem;height:2rem}.ngb-dp-day[_ngcontent-%COMP%]{cursor:pointer}.ngb-dp-day.disabled[_ngcontent-%COMP%], .ngb-dp-day.hidden[_ngcontent-%COMP%]{cursor:default}"],data:{}});function YE(t){return Fr(0,[(t()(),xo(0,0,null,null,0,"div",[["class","ngb-dp-weekday ngb-dp-showweek"]],null,null,null,null,null))],null,null)}function KE(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"div",[["class","ngb-dp-weekday small"]],null,null,null,null,null)),(t()(),Mr(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.component.i18n.getWeekdayShortName(e.context.$implicit))})}function XE(t){return Fr(0,[(t()(),xo(0,0,null,null,4,"div",[["class","ngb-dp-week ngb-dp-weekdays bg-light"]],null,null,null,null,null)),(t()(),vo(16777216,null,null,1,null,YE)),lr(2,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(16777216,null,null,1,null,KE)),lr(4,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.showWeekNumbers),t(e,4,0,n.month.weekdays)},null)}function ZE(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"div",[["class","ngb-dp-week-number small text-muted"]],null,null,null,null,null)),(t()(),Mr(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.i18n.getWeekNumerals(e.parent.parent.context.$implicit.number))})}function qE(t){return Fr(0,[(t()(),vo(0,null,null,0))],null,null)}function QE(t){return Fr(0,[(t()(),vo(16777216,null,null,1,null,qE)),lr(1,540672,null,0,qb,[En],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),(t()(),vo(0,null,null,0))],function(t,e){t(e,1,0,e.parent.context.$implicit.context,e.component.dayTemplate)},null)}function JE(t){return Fr(0,[(t()(),xo(0,0,null,null,2,"div",[["class","ngb-dp-day"],["role","gridcell"]],[[2,"disabled",null],[8,"tabIndex",0],[2,"hidden",null],[1,"aria-label",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.doSelect(t.context.$implicit)&&i),i},null,null)),(t()(),vo(16777216,null,null,1,null,QE)),lr(2,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,!e.context.$implicit.hidden)},function(t,e){t(e,0,0,e.context.$implicit.context.disabled,e.context.$implicit.tabindex,e.context.$implicit.hidden,e.context.$implicit.ariaLabel)})}function $E(t){return Fr(0,[(t()(),xo(0,0,null,null,4,"div",[["class","ngb-dp-week"],["role","row"]],null,null,null,null,null)),(t()(),vo(16777216,null,null,1,null,ZE)),lr(2,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(16777216,null,null,1,null,JE)),lr(4,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.showWeekNumbers),t(e,4,0,e.parent.context.$implicit.days)},null)}function tT(t){return Fr(0,[(t()(),vo(16777216,null,null,1,null,$E)),lr(1,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(0,null,null,0))],function(t,e){t(e,1,0,!e.context.$implicit.collapsed)},null)}function eT(t){return Fr(0,[(t()(),vo(16777216,null,null,1,null,XE)),lr(1,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(16777216,null,null,1,null,tT)),lr(3,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.showWeekdays),t(e,3,0,n.month.weeks)},null)}var nT=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}.outside[_nghost-%COMP%]{opacity:.5}"],data:{}});function iT(t){return Fr(2,[(t()(),Mr(0,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.i18n.getDayNumerals(n.date))})}var oT=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron[_ngcontent-%COMP%]{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right[_ngcontent-%COMP%]   .ngb-dp-navigation-chevron[_ngcontent-%COMP%]{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right[_ngcontent-%COMP%]{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn[_ngcontent-%COMP%]{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn[_ngcontent-%COMP%]:focus{outline:auto 1px}.ngb-dp-month-name[_ngcontent-%COMP%]{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],data:{}});function rT(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-datepicker-navigation-select",[["class","ngb-dp-navigation-select"]],null,[[null,"select"]],function(t,e,n){var i=!0;return"select"===e&&(i=!1!==t.component.select.emit(n)&&i),i},fT,cT)),lr(1,49152,null,0,pE,[qC],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],years:[3,"years"]},{select:"select"})],function(t,e){var n=e.component;t(e,1,0,n.date,n.disabled,n.selectBoxes.months,n.selectBoxes.years)},null)}function sT(t){return Fr(0,[(t()(),xo(0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function aT(t){return Fr(0,[(t()(),xo(0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function lT(t){return Fr(0,[(t()(),vo(16777216,null,null,1,null,sT)),lr(1,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),xo(2,0,null,null,1,"div",[["class","ngb-dp-month-name"]],null,null,null,null,null)),(t()(),Mr(3,null,[" "," "," "])),(t()(),vo(16777216,null,null,1,null,aT)),lr(5,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,e.context.index>0),t(e,5,0,e.context.index!==n.months.length-1)},function(t,e){var n=e.component;t(e,3,0,n.i18n.getMonthFullName(e.context.$implicit.number,e.context.$implicit.year),n.i18n.getYearNumerals(e.context.$implicit.year))})}function uT(t){return Fr(0,[(t()(),vo(16777216,null,null,1,null,lT)),lr(1,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null),(t()(),vo(0,null,null,0))],function(t,e){t(e,1,0,e.component.months)},null)}function hT(t){return Fr(2,[(t()(),xo(0,0,null,null,2,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null)),(t()(),xo(1,0,null,null,1,"button",[["aria-label","Previous month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Previous month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==o.navigate.emit(o.navigation.PREV)&&i),i},null,null)),(t()(),xo(2,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null)),(t()(),vo(16777216,null,null,1,null,rT)),lr(4,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(16777216,null,null,1,null,uT)),lr(6,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),xo(7,0,null,null,2,"div",[["class","ngb-dp-arrow right"]],null,null,null,null,null)),(t()(),xo(8,0,null,null,1,"button",[["aria-label","Next month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Next month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==o.navigate.emit(o.navigation.NEXT)&&i),i},null,null)),(t()(),xo(9,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,4,0,n.showSelect),t(e,6,0,!n.showSelect)},function(t,e){var n=e.component;t(e,1,0,n.prevDisabled),t(e,8,0,n.nextDisabled)})}var cT=Hi({encapsulation:0,styles:["[_nghost-%COMP%] > select[_ngcontent-%COMP%]{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}"],data:{}});function dT(t){return Fr(0,[(t()(),xo(0,0,null,null,3,"option",[],[[1,"aria-label",0]],null,null,null,null)),lr(1,147456,null,0,dC,[bn,xn,[8,null]],{value:[0,"value"]},null),lr(2,147456,null,0,fC,[bn,xn,[8,null]],{value:[0,"value"]},null),(t()(),Mr(3,null,["",""]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){var n=e.component;t(e,0,0,n.i18n.getMonthFullName(e.context.$implicit,null==n.date?null:n.date.year)),t(e,3,0,n.i18n.getMonthShortName(e.context.$implicit,null==n.date?null:n.date.year))})}function pT(t){return Fr(0,[(t()(),xo(0,0,null,null,3,"option",[],null,null,null,null,null)),lr(1,147456,null,0,dC,[bn,xn,[8,null]],{value:[0,"value"]},null),lr(2,147456,null,0,fC,[bn,xn,[8,null]],{value:[0,"value"]},null),(t()(),Mr(3,null,["",""]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){t(e,3,0,e.component.i18n.getYearNumerals(e.context.$implicit))})}function fT(t){return Fr(2,[(t()(),xo(0,0,null,null,2,"select",[["aria-label","Select month"],["class","custom-select"],["title","Select month"]],[[8,"disabled",0],[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.changeMonth(n.target.value)&&i),i},null,null)),(t()(),vo(16777216,null,null,1,null,dT)),lr(2,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null),(t()(),xo(3,0,null,null,2,"select",[["aria-label","Select year"],["class","custom-select"],["title","Select year"]],[[8,"disabled",0],[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.changeYear(n.target.value)&&i),i},null,null)),(t()(),vo(16777216,null,null,1,null,pT)),lr(5,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.months),t(e,5,0,n.years)},function(t,e){var n=e.component;t(e,0,0,n.disabled,null==n.date?null:n.date.month),t(e,3,0,n.disabled,null==n.date?null:n.date.year)})}var gT=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}.ngb-dp-month[_ngcontent-%COMP%]{pointer-events:none}.ngb-dp-header[_ngcontent-%COMP%]{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem}ngb-datepicker-month-view[_ngcontent-%COMP%]{pointer-events:auto}.ngb-dp-month-name[_ngcontent-%COMP%]{font-size:larger;height:2rem;line-height:2rem;text-align:center}  .ngb-dp-month+.ngb-dp-month>ngb-datepicker-month-view>.ngb-dp-week{padding-left:1rem}  .ngb-dp-month+.ngb-dp-month>.ngb-dp-month-name{padding-left:1rem}  .ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}  .ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}  .ngb-dp-month>ngb-datepicker-month-view>.ngb-dp-week:last-child{padding-bottom:.25rem}.ngb-dp-months[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}"],data:{}});function _T(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"div",[["class","btn-light"],["ngbDatepickerDayView",""]],[[2,"bg-primary",null],[2,"text-white",null],[2,"text-muted",null],[2,"outside",null],[2,"active",null]],null,null,iT,nT)),lr(1,49152,null,0,dE,[qC],{currentMonth:[0,"currentMonth"],date:[1,"date"],disabled:[2,"disabled"],focused:[3,"focused"],selected:[4,"selected"]},null)],function(t,e){t(e,1,0,e.context.currentMonth,e.context.date,e.context.disabled,e.context.focused,e.context.selected)},function(t,e){t(e,0,0,Zo(e,1).selected,Zo(e,1).selected,Zo(e,1).isMuted(),Zo(e,1).isMuted(),Zo(e,1).focused)})}function yT(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-datepicker-navigation",[],null,[[null,"navigate"],[null,"select"]],function(t,e,n){var i=!0,o=t.component;return"navigate"===e&&(i=!1!==o.onNavigateEvent(n)&&i),"select"===e&&(i=!1!==o.onNavigateDateSelect(n)&&i),i},hT,oT)),lr(1,49152,null,0,lE,[qC],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],showSelect:[3,"showSelect"],prevDisabled:[4,"prevDisabled"],nextDisabled:[5,"nextDisabled"],selectBoxes:[6,"selectBoxes"]},{navigate:"navigate",select:"select"})],function(t,e){var n=e.component;t(e,1,0,n.model.firstDate,n.model.disabled,n.model.months,"select"===n.model.navigation,n.model.prevDisabled,n.model.nextDisabled,n.model.selectBoxes)},null)}function mT(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"div",[["class","ngb-dp-month-name bg-light"]],null,null,null,null,null)),(t()(),Mr(1,null,[" "," "," "]))],null,function(t,e){var n=e.component;t(e,1,0,n.i18n.getMonthFullName(e.parent.context.$implicit.number,e.parent.context.$implicit.year),n.i18n.getYearNumerals(e.parent.context.$implicit.year))})}function vT(t){return Fr(0,[(t()(),xo(0,0,null,null,4,"div",[["class","ngb-dp-month"]],null,null,null,null,null)),(t()(),vo(16777216,null,null,1,null,mT)),lr(2,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),xo(3,0,null,null,1,"ngb-datepicker-month-view",[["role","grid"]],null,[[null,"select"]],function(t,e,n){var i=!0;return"select"===e&&(i=!1!==t.component.onDateSelect(n)&&i),i},eT,UE)),lr(4,49152,null,0,aE,[qC],{dayTemplate:[0,"dayTemplate"],month:[1,"month"],showWeekdays:[2,"showWeekdays"],showWeekNumbers:[3,"showWeekNumbers"]},{select:"select"})],function(t,e){var n=e.component;t(e,2,0,"none"===n.navigation||n.displayMonths>1&&"select"===n.navigation),t(e,4,0,n.dayTemplate||Zo(e.parent,0),e.context.$implicit,n.showWeekdays,n.showWeekNumbers)},null)}function xT(t){return Fr(0,[(t()(),vo(0,null,null,0))],null,null)}function bT(t){return Fr(2,[(t()(),vo(0,[["dt",2]],null,0,null,_T)),(t()(),xo(1,0,null,null,2,"div",[["class","ngb-dp-header bg-light"]],null,null,null,null,null)),(t()(),vo(16777216,null,null,1,null,yT)),lr(3,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),xo(4,0,null,null,2,"div",[["class","ngb-dp-months"]],null,[[null,"keydown"],[null,"focusin"],[null,"focusout"]],function(t,e,n){var i=!0,o=t.component;return"keydown"===e&&(i=!1!==o.onKeyDown(n)&&i),"focusin"===e&&(i=!1!==o.showFocus(!0)&&i),"focusout"===e&&(i=!1!==o.showFocus(!1)&&i),i},null,null)),(t()(),vo(16777216,null,null,1,null,vT)),lr(6,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null),(t()(),vo(16777216,null,null,1,null,xT)),lr(8,540672,null,0,qb,[En],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,3,0,"none"!==n.navigation),t(e,6,0,n.model.months),t(e,8,0,n.footerTemplate)},null)}var wT=Go("ngb-datepicker",sE,function(t){return Fr(0,[(t()(),xo(0,0,null,null,4,"ngb-datepicker",[],null,null,null,bT,gT)),ur(5120,null,hC,function(t){return[t]},[sE]),ur(512,null,JC,JC,[UC,qC]),ur(512,null,tE,tE,[JC,UC]),lr(4,770048,null,0,sE,[tE,JC,UC,qC,nE,Tn,bn,oE,Ze],null,null)],function(t,e){t(e,4,0)},null)},{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},{navigate:"navigate",select:"select"},[]),CT=Hi({encapsulation:0,styles:[".bs-popover-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:50%;margin-left:-5px}.bs-popover-bottom-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:2em}.bs-popover-bottom-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:auto;right:2em}.bs-popover-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:50%;margin-top:-5px}.bs-popover-left-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:.7em}.bs-popover-left-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:auto;bottom:.7em}"],data:{}});function ET(t){return Fr(0,[(t()(),Mr(0,null,["",""]))],null,function(t,e){t(e,0,0,e.component.title)})}function TT(t){return Fr(0,[(t()(),vo(0,null,null,0))],null,null)}function ST(t){return Fr(0,[(t()(),xo(0,0,null,null,3,"h3",[["class","popover-header"]],null,null,null,null,null)),(t()(),vo(0,[["simpleTitle",2]],null,0,null,ET)),(t()(),vo(16777216,null,null,1,null,TT)),lr(3,540672,null,0,qb,[En],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,3,0,n.context,n.isTitleTemplate()?n.title:Zo(e,1))},null)}function IT(t){return Fr(2,[(t()(),xo(0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(t()(),vo(16777216,null,null,1,null,ST)),lr(2,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),xo(3,0,null,null,1,"div",[["class","popover-body"]],null,null,null,null,null)),Rr(null,0)],function(t,e){t(e,2,0,null!=e.component.title)},null)}var RT=Go("ngb-popover-window",PE,function(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-popover-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,IT,CT)),lr(1,49152,null,0,PE,[bn,xn],null,null)],null,function(t,e){t(e,0,0,"popover bs-popover-"+Zo(e,1).placement.split("-")[0]+" bs-popover-"+Zo(e,1).placement+(Zo(e,1).popoverClass?" "+Zo(e,1).popoverClass:""),Zo(e,1).id)})},{placement:"placement",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},{},["*"]),PT=Hi({encapsulation:0,styles:[".bs-tooltip-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:calc(50% - .4rem)}.bs-tooltip-bottom-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:1em}.bs-tooltip-bottom-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:auto;right:.8rem}.bs-tooltip-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - .4rem)}.bs-tooltip-left-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:.4rem}.bs-tooltip-left-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:auto;bottom:.4rem}"],data:{}});function MT(t){return Fr(2,[(t()(),xo(0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(t()(),xo(1,0,null,null,1,"div",[["class","tooltip-inner"]],null,null,null,null,null)),Rr(null,0)],null,null)}var kT=Go("ngb-tooltip-window",OE,function(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-tooltip-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,MT,PT)),lr(1,49152,null,0,OE,[bn,xn],null,null)],null,function(t,e){t(e,0,0,"tooltip show bs-tooltip-"+Zo(e,1).placement.split("-")[0]+" bs-tooltip-"+Zo(e,1).placement+(Zo(e,1).tooltipClass?" "+Zo(e,1).tooltipClass:""),Zo(e,1).id)})},{placement:"placement",id:"id",tooltipClass:"tooltipClass"},{},["*"]),LT=Hi({encapsulation:2,styles:[],data:{}});function FT(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-highlight",[],null,null,null,zT,GT)),lr(1,573440,null,0,NE,[],{result:[0,"result"],term:[1,"term"]},null)],function(t,e){t(e,1,0,e.context.formatter(e.context.result),e.context.term)},null)}function DT(t){return Fr(0,[(t()(),vo(0,null,null,0))],null,null)}function OT(t){return Fr(0,[(t()(),xo(0,0,null,null,3,"button",[["class","dropdown-item"],["role","option"],["type","button"]],[[8,"id",0],[2,"active",null]],[[null,"mouseenter"],[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"mouseenter"===e&&(i=!1!==o.markActive(t.context.index)&&i),"click"===e&&(i=!1!==o.select(t.context.$implicit)&&i),i},null,null)),(t()(),vo(16777216,null,null,2,null,DT)),lr(2,540672,null,0,qb,[En],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),function(t,e){for(var n=Object.keys(e),i=n.length,o=new Array(i),r=0;r<i;r++){var s=n[r];o[e[s]]=s}return function(t,e,n){for(var i=new Array(n.length),o=0;o<n.length;o++){var r=n[o];i[o]={flags:8,name:r,ns:null,nonMinifiedName:r,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:3,flags:64,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:_o(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,0,o)}(0,{result:0,term:1,formatter:2})],function(t,e){var n=e.component;t(e,2,0,t(e,3,0,e.context.$implicit,n.term,n.formatter),n.resultTemplate||Zo(e.parent,0))},function(t,e){var n=e.component;t(e,0,0,n.id+"-"+e.context.index,e.context.index===n.activeIdx)})}function AT(t){return Fr(0,[(t()(),vo(0,[["rt",2]],null,0,null,FT)),(t()(),vo(16777216,null,null,1,null,OT)),lr(2,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.results)},null)}var NT=Go("ngb-typeahead-window",GE,function(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-typeahead-window",[["class","dropdown-menu show"],["role","listbox"]],[[8,"id",0]],null,null,AT,LT)),lr(1,114688,null,0,GE,[],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,Zo(e,1).id)})},{id:"id",focusFirst:"focusFirst",results:"results",term:"term",formatter:"formatter",resultTemplate:"resultTemplate"},{selectEvent:"select",activeChangeEvent:"activeChange"},[]),GT=Hi({encapsulation:0,styles:[".ngb-highlight[_ngcontent-%COMP%]{font-weight:700}"],data:{}});function VT(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"span",[],[[8,"className",0]],null,null,null,null)),(t()(),Mr(1,null,["",""]))],null,function(t,e){t(e,0,0,e.component.highlightClass),t(e,1,0,e.parent.context.$implicit)})}function jT(t){return Fr(0,[(t()(),Mr(0,null,["",""]))],null,function(t,e){t(e,0,0,e.parent.context.$implicit)})}function BT(t){return Fr(0,[(t()(),vo(16777216,null,null,1,null,VT)),lr(1,16384,null,0,Kb,[En,Cn],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),vo(0,[["even",2]],null,0,null,jT))],function(t,e){t(e,1,0,e.context.odd,Zo(e,2))},null)}function zT(t){return Fr(2,[(t()(),vo(16777216,null,null,1,null,BT)),lr(1,278528,null,0,Ub,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,1,0,e.component.parts)},null)}var HT=Hi({encapsulation:2,styles:[],data:{}});function WT(t){return Fr(0,[],null,null)}var UT=Go("ngb-modal-backdrop",xE,function(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-modal-backdrop",[["style","z-index: 1050"]],[[8,"className",0]],null,null,WT,HT)),lr(1,49152,null,0,xE,[],null,null)],null,function(t,e){t(e,0,0,"modal-backdrop fade show"+(Zo(e,1).backdropClass?" "+Zo(e,1).backdropClass:""))})},{backdropClass:"backdropClass"},{},[]),YT=Hi({encapsulation:2,styles:[],data:{}});function KT(t){return Fr(0,[(t()(),xo(0,0,null,null,2,"div",[["role","document"]],[[8,"className",0]],null,null,null,null)),(t()(),xo(1,0,null,null,1,"div",[["class","modal-content"]],null,null,null,null,null)),Rr(null,0)],null,function(t,e){var n=e.component;t(e,0,0,"modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":""))})}var XT=Go("ngb-modal-window",EE,function(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"ngb-modal-window",[["role","dialog"],["tabindex","-1"]],[[8,"className",0],[1,"aria-labelledby",0]],[[null,"keyup.esc"],[null,"click"]],function(t,e,n){var i=!0;return"keyup.esc"===e&&(i=!1!==Zo(t,1).escKey(n)&&i),"click"===e&&(i=!1!==Zo(t,1).backdropClick(n)&&i),i},KT,YT)),lr(1,4440064,null,0,EE,[Jb,bn],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,"modal fade show d-block"+(Zo(e,1).windowClass?" "+Zo(e,1).windowClass:""),Zo(e,1).ariaLabelledBy)})},{ariaLabelledBy:"ariaLabelledBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",size:"size",windowClass:"windowClass"},{dismissEvent:"dismiss"},["*"]),ZT=function(){function t(t){this.modalService=t}return t.prototype.open=function(){this.modalService.open(this.content,{ariaLabelledBy:"modal",size:"lg"}).result.then(function(t){})},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout(function(){t.open()})},t}(),qT=Hi({encapsulation:2,styles:[],data:{}});function QT(t){return Fr(0,[(t()(),xo(0,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),xo(1,0,null,null,1,"h4",[["class","modal-title"],["id","modal-basic-title"]],null,null,null,null,null)),(t()(),Mr(-1,null,["UFO-tracker"])),(t()(),xo(3,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.context.$implicit.dismiss("Cross click")&&i),i},null,null)),(t()(),xo(4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),Mr(-1,null,["\xd7"])),(t()(),xo(6,0,null,null,43,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),xo(7,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Mr(-1,null,["UFO-tracker is Angular based web-application built on top of "])),(t()(),xo(9,0,null,null,1,"a",[["href","https://openlayers.org/"]],null,null,null,null,null)),(t()(),Mr(-1,null,["Openlayers"])),(t()(),Mr(-1,null,[" map engine."])),(t()(),xo(12,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),Mr(-1,null,["Datasets"])),(t()(),xo(14,0,null,null,6,"ul",[],null,null,null,null,null)),(t()(),xo(15,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),xo(16,0,null,null,1,"a",[["href","https://www.kaggle.com/NUFORC/ufo-sightings/home"]],null,null,null,null,null)),(t()(),Mr(-1,null,["UFO sights"])),(t()(),xo(18,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),xo(19,0,null,null,1,"a",[["href","https://openflights.org/data.html"]],null,null,null,null,null)),(t()(),Mr(-1,null,["Airport data"])),(t()(),xo(21,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),Mr(-1,null,["How to use?"])),(t()(),xo(23,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Mr(-1,null,["Slider"])),(t()(),xo(25,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Mr(-1,null,["With slider it is possible to visualize UFO sights per year or as total count from 1906 all the way to 2014. Default slider type is total but by clicking "])),(t()(),xo(27,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Mr(-1,null,["Total count"])),(t()(),Mr(-1,null,[" text it is possible to change slider type to yearly."])),(t()(),xo(30,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Mr(-1,null,["Current probability"])),(t()(),xo(32,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),Mr(-1,null,["From top right corner there is possibility to check current best probability to see UFO. Value is recalculated in every minute. Red dot ("])),(t()(),xo(34,0,null,null,1,"span",[["style","color: red"]],null,null,null,null,null)),(t()(),Mr(-1,null,["\u2022"])),(t()(),Mr(-1,null,[") is the current best place to see UFO."])),(t()(),xo(37,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Mr(-1,null,["Predict UFO location"])),(t()(),xo(39,0,null,null,10,"p",[],null,null,null,null,null)),(t()(),Mr(-1,null,["With this tool it is possible to check daily best places to see UFO. Usage is simple, just select the date you are intrested in "])),(t()(),xo(41,0,null,null,1,"i",[],null,null,null,null,null)),(t()(),Mr(-1,null,["(year does not matter since data calculations are daily based)"])),(t()(),Mr(-1,null,['. Predictions use K-means clustering so multiple "best" locations are calculated. Green dots ('])),(t()(),xo(44,0,null,null,1,"span",[["style","color: green"]],null,null,null,null,null)),(t()(),Mr(-1,null,["\u2022"])),(t()(),Mr(-1,null,[") are reference points so user can easily see where UFO sights have been made on selected date. Orange dots ("])),(t()(),xo(47,0,null,null,1,"span",[["style","color: orange"]],null,null,null,null,null)),(t()(),Mr(-1,null,["\u2022"])),(t()(),Mr(-1,null,[") are calculated best locations based on day selected from the date input. "])),(t()(),xo(50,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),xo(51,0,null,null,1,"button",[["class","btn btn-outline-dark"],["ngbAutofocus",""],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.context.$implicit.close("Save click")&&i),i},null,null)),(t()(),Mr(-1,null,["OK"]))],null,null)}function JT(t){return Fr(0,[function(t,e,n){var i=[];for(var o in n)i.push({propName:o,bindingType:n[o]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:402653184,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:1,filterId:no(1),bindings:i},ngContent:null}}(0,0,{content:0}),(t()(),vo(0,[[1,2],["content",2]],null,0,null,QT))],null,null)}var $T=function(){},tS=function(){},eS=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var i=t.slice(0,n),o=i.toLowerCase(),r=t.slice(n+1).trim();e.maybeSetNormalizedName(i,o),e.headers.has(o)?e.headers.get(o).push(r):e.headers.set(o,[r])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var i=t[n],o=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(e.headers.set(o,i),e.maybeSetNormalizedName(n,o))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,c(n)),this.headers.set(e,i);break;case"d":var o=t.value;if(o){var r=this.headers.get(e);if(!r)return;0===(r=r.filter(function(t){return-1===o.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,r)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),nS=function(){function t(){}return t.prototype.encodeKey=function(t){return iS(t)},t.prototype.encodeValue=function(t){return iS(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function iS(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var oS=function(){function t(t){void 0===t&&(t={});var e,n,i,o=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new nS,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,i=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),o=h(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),r=o[0],s=o[1],a=i.get(r)||[];a.push(s),i.set(r,a)}),i)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];o.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var i=t.map.get(e.param)||[],o=i.indexOf(e.value);-1!==o&&i.splice(o,1),i.length>0?t.map.set(e.param,i):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function rS(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function sS(t){return"undefined"!=typeof Blob&&t instanceof Blob}function aS(t){return"undefined"!=typeof FormData&&t instanceof FormData}var lS=function(){function t(t,e,n,i){var o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,o=i):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new eS),this.params){var r=this.params.toString();if(0===r.length)this.urlWithParams=e;else{var s=e.indexOf("?");this.urlWithParams=e+(-1===s?"?":s<e.length-1?"&":"")+r}}else this.params=new oS,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:rS(this.body)||sS(this.body)||aS(this.body)||"string"==typeof this.body?this.body:this.body instanceof oS?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:aS(this.body)?null:sS(this.body)?this.body.type||null:rS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof oS?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,l=e.headers||this.headers,u=e.params||this.params;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},l)),e.setParams&&(u=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},u)),new t(n,i,r,{params:u,headers:l,reportProgress:a,responseType:o,withCredentials:s})},t}(),uS=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),hS=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new eS,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),cS=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=uS.ResponseHeader,n}return o(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(hS),dS=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=uS.Response,n.body=void 0!==e.body?e.body:null,n}return o(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(hS),pS=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return o(e,t),e}(hS);function fS(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var gS=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var i,o=this;if(void 0===n&&(n={}),t instanceof lS)i=t;else{var r;r=n.headers instanceof eS?n.headers:new eS(n.headers);var s=void 0;n.params&&(s=n.params instanceof oS?n.params:new oS({fromObject:n.params})),i=new lS(t,e,void 0!==n.body?n.body:null,{headers:r,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,i,o=t[t.length-1];switch(N(o)?t.pop():o=void 0,t.length){case 0:return function(t){return t?function(t){return new M(function(e){return t.schedule(function(){return e.complete()})})}(t):tw}(o);case 1:return o?J(t,o):(n=t[0],(i=new M(function(t){t.next(n),t.complete()}))._isScalar=!0,i.value=n,i);default:return J(t,o)}}(i).pipe($(function(t){return o.handler.handle(t)},void 0,1));if(t instanceof lS||"events"===n.observe)return a;var l=a.pipe(mC(function(t){return t instanceof dS}));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(Z(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return l.pipe(Z(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return l.pipe(Z(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return l.pipe(Z(function(t){return t.body}))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new oS).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,fS(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,fS(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,fS(n,e))},t}(),_S=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),yS=new ct("HTTP_INTERCEPTORS"),mS=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),vS=/^\)\]\}',?\n/,xS=function(){},bS=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),wS=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new M(function(n){var i=e.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach(function(t,e){return i.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var o=t.detectContentTypeHeader();null!==o&&i.setRequestHeader("Content-Type",o)}if(t.responseType){var r=t.responseType.toLowerCase();i.responseType="json"!==r?r:"text"}var s=t.serializeBody(),a=null,l=function(){if(null!==a)return a;var e=1223===i.status?204:i.status,n=i.statusText||"OK",o=new eS(i.getAllResponseHeaders()),r=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return a=new cS({headers:o,status:e,statusText:n,url:r})},u=function(){var e=l(),o=e.headers,r=e.status,s=e.statusText,a=e.url,u=null;204!==r&&(u=void 0===i.response?i.responseText:i.response),0===r&&(r=u?200:0);var h=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof u){var c=u;u=u.replace(vS,"");try{u=""!==u?JSON.parse(u):null}catch(t){u=c,h&&(h=!1,u={error:t,text:u})}}h?(n.next(new dS({body:u,headers:o,status:r,statusText:s,url:a||void 0})),n.complete()):n.error(new pS({error:u,headers:o,status:r,statusText:s,url:a||void 0}))},h=function(t){var e=new pS({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error"});n.error(e)},c=!1,d=function(e){c||(n.next(l()),c=!0);var o={type:uS.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(o.total=e.total),"text"===t.responseType&&i.responseText&&(o.partialText=i.responseText),n.next(o)},p=function(t){var e={type:uS.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return i.addEventListener("load",u),i.addEventListener("error",h),t.reportProgress&&(i.addEventListener("progress",d),null!==s&&i.upload&&i.upload.addEventListener("progress",p)),i.send(s),n.next({type:uS.Sent}),function(){i.removeEventListener("error",h),i.removeEventListener("load",u),t.reportProgress&&(i.removeEventListener("progress",d),null!==s&&i.upload&&i.upload.removeEventListener("progress",p)),i.abort()}})},t}(),CS=new ct("XSRF_COOKIE_NAME"),ES=new ct("XSRF_HEADER_NAME"),TS=function(){},SS=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hb(t,this.cookieName),this.lastCookieString=t),this.lastToken},s([a(0,Tt(Jb)),a(1,Tt(Se)),a(2,Tt(CS))],t)}(),IS=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)},s([a(1,Tt(ES))],t)}(),RS=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(yS,[]);this.chain=e.reduceRight(function(t,e){return new _S(t,e)},this.backend)}return this.chain.handle(t)},t}(),PS=function(){function t(){}var e;return e=t,t.disable=function(){return{ngModule:e,providers:[{provide:IS,useClass:mS}]}},t.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:CS,useValue:t.cookieName}:[],t.headerName?{provide:ES,useValue:t.headerName}:[]]}},t}(),MS=function(){},kS=Hi({encapsulation:0,styles:[[""]],data:{}});function LS(t){return Fr(0,[(t()(),xo(0,0,null,null,8,"div",[["class","prediction"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getPrediction()&&i),i},null,null)),(t()(),xo(1,0,null,null,3,"p",[],null,null,null,null,null)),(t()(),xo(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Mr(-1,null,["Current propability:"])),(t()(),Mr(4,null,[" "," %"])),(t()(),xo(5,0,null,null,3,"p",[["style","text-align: center"]],null,null,null,null,null)),(t()(),xo(6,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Mr(-1,null,["Predict UFO location"])),(t()(),xo(8,0,null,null,0,"input",[["class","form-control"],["type","date"]],[[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.getPrediction(n.target.value)&&i),i},null,null)),(t()(),xo(9,0,null,null,2,"div",[["class","year"]],null,null,null,null,null)),(t()(),xo(10,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Mr(11,null,[" "," "])),(t()(),xo(12,0,null,null,0,"div",[["id","map"]],null,null,null,null,null)),(t()(),xo(13,0,null,null,7,"div",[["class","slidecontainer"]],null,null,null,null,null)),(t()(),xo(14,0,null,null,1,"h2",[["style","text-align: center; margin-top: -15px"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.changeType()&&i),i},null,null)),(t()(),Mr(15,null,[""," count: ",""])),(t()(),xo(16,0,null,null,0,"input",[["class","slider"],["id","myRange"],["type","range"]],[[8,"min",0],[8,"max",0],[8,"value",0]],null,null,null,null)),(t()(),xo(17,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Mr(18,null,["",""])),(t()(),xo(19,0,null,null,1,"span",[["style","float: right"]],null,null,null,null,null)),(t()(),Mr(20,null,["",""])),(t()(),xo(21,0,null,null,1,"app-info",[],null,null,null,JT,qT)),lr(22,4243456,null,0,ZT,[SE],null,null)],null,function(t,e){var n=e.component;t(e,4,0,n.propability.toFixed(2)),t(e,8,0,n.predictionDate),t(e,11,0,n.currentYear),t(e,15,0,n.filterType,n.count),t(e,16,0,yo(1,"",n.minYear,""),yo(1,"",n.maxYear,""),yo(1,"",n.currentYear,"")),t(e,18,0,n.minYear),t(e,20,0,n.maxYear)})}var FS=Go("app-root",ib,function(t){return Fr(0,[(t()(),xo(0,0,null,null,1,"app-root",[],null,null,null,LS,kS)),lr(1,4243456,null,0,ib,[gS],null,null)],null,null)},{},{},[]),DS=function(t,e,n){return new js(gl,[ib],function(t){return function(t){for(var e={},n=[],i=!1,o=0;o<t.length;o++){var r=t[o];r.token===le&&!0===r.value&&(i=!0),1073741824&r.flags&&n.push(r.token),r.index=o,e[ji(r.token)]=r}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:i}}([Po(512,Ve,je,[[8,[WE,wT,UT,XT,RT,kT,NT,FS]],[3,Ve],ze]),Po(5120,Jn,ei,[[3,Jn]]),Po(4608,Bb,zb,[Jn,[2,jb]]),Po(4608,Me,Me,[]),Po(5120,we,Ce,[]),Po(5120,Yn,$n,[]),Po(5120,Kn,ti,[]),Po(4608,$w,tC,[Jb]),Po(6144,Si,null,[$w]),Po(4608,Yw,Xw,[]),Po(5120,vw,function(t,e,n,i,o,r,s,a){return[new Ww(t,e,n),new Jw(i),new Zw(o,r,s,a)]},[Jb,Ze,Se,Jb,Jb,Yw,Re,[2,Kw]]),Po(4608,xw,xw,[vw,Ze]),Po(135680,Cw,Cw,[Jb]),Po(4608,Mw,Mw,[xw,Cw]),Po(6144,mn,null,[Mw]),Po(6144,ww,null,[Cw]),Po(4608,on,on,[Ze]),Po(4608,TS,SS,[Jb,Se,CS]),Po(4608,IS,IS,[TS,ES]),Po(5120,yS,function(t){return[t]},[IS]),Po(4608,bS,bS,[]),Po(6144,xS,null,[bS]),Po(4608,wS,wS,[xS]),Po(6144,tS,null,[wS]),Po(4608,$T,RS,[tS,Ot]),Po(4608,gS,gS,[$T]),Po(4608,cC,cC,[]),Po(4608,SE,SE,[Ve,Ot,TE,_E]),Po(1073742336,Qb,Qb,[]),Po(1024,ae,lC,[]),Po(1024,xe,function(t){return[(e=t,_w("probe",mw),_w("coreTokens",r({},yw,(e||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return mw})];var e},[[2,cn]]),Po(512,be,be,[[2,xe]]),Po(131584,_n,_n,[Ze,Re,Ot,ae,Ve,be]),Po(1073742336,ni,ni,[_n]),Po(1073742336,uC,uC,[[3,uC]]),Po(1073742336,PS,PS,[]),Po(1073742336,MS,MS,[]),Po(1073742336,gC,gC,[]),Po(1073742336,_C,_C,[]),Po(1073742336,DC,DC,[]),Po(1073742336,NC,NC,[]),Po(1073742336,GC,GC,[]),Po(1073742336,VC,VC,[]),Po(1073742336,jC,jC,[]),Po(1073742336,fE,fE,[]),Po(1073742336,gE,gE,[]),Po(1073742336,IE,IE,[]),Po(1073742336,RE,RE,[]),Po(1073742336,ME,ME,[]),Po(1073742336,kE,kE,[]),Po(1073742336,LE,LE,[]),Po(1073742336,FE,FE,[]),Po(1073742336,DE,DE,[]),Po(1073742336,AE,AE,[]),Po(1073742336,VE,VE,[]),Po(1073742336,jE,jE,[]),Po(1073742336,gl,gl,[]),Po(256,le,!0,[]),Po(256,CS,"XSRF-TOKEN",[]),Po(256,ES,"X-XSRF-TOKEN",[])])})}();(function(){if(ln)throw new Error("Cannot enable prod mode after platform setup.");an=!1})(),aC().bootstrapModuleFactory(DS).catch(function(t){return console.error(t)})}},[[0,0]]]);