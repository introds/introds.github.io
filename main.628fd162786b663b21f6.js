(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"1SRF":function(t,e,n){"use strict";function i(t,e){var n=this;this.location=o(t),this.label=o(e),this.updateLocation=function(t){var e=t.filter(function(t){return t.label()==n.label()});e.length>0&&n.location(function(t){var e=t[0].location().map(function(){return 0});return t.map(function(t){return t.location()}).reduce(function(t,e){return function(t,e){return t.map(function(t,n){return t+e[n]})}(t,e)},e).map(function(e){return e/t.length})}(e))}}function o(t,e){var n=t,i=e||function(t){return!0};return function(t){if(void 0===t)return n;i(t)&&(n=t)}}t.exports={data:o([],function(t){var e=t[0].length;return t.map(function(t){return t.length==e}).reduce(function(t,e){return t&e},!0)}),clusters:function(){var t=function(t,e){for(var n=e.k||Math.round(Math.sqrt(t.length/2)),r=e.iterations,s=t.map(function(t){return new function(e){var n=this;this.location=o(t),this.label=o(),this.updateLabel=function(t){var e,i,o=t.map(function(t){return e=n.location(),i=t.location(),e.map(function(t,e){return Math.pow(t-i[e],2)}).reduce(function(t,e){return t+e},0);var e,i});n.label((i=(e=o).reduce(function(t,e){return Math.min(t,e)}),e.indexOf(i)))}}(0)}),a=[],l=0;l<n;l++)a.push(new i(s[l%s.length].location(),l));for(var h=0;h<r;h++)s.forEach(function(t){t.updateLabel(a)}),a.forEach(function(t){t.updateLocation(s)});return{points:s,centroids:a}}(this.data(),{k:this.k(),iterations:this.iterations()}),e=t.points;return t.centroids.map(function(t){return{centroid:t.location(),points:e.filter(function(e){return e.label()==t.label()}).map(function(t){return t.location()})}})},k:o(void 0,function(t){return t%1==0&t>0}),iterations:o(Math.pow(10,3),function(t){return t%1==0&t>0})}},"A1R+":function(t,e,n){"use strict";t.exports=o,t.exports.default=o;var i=n("YcpW");function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,o){o||(o=g(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,s=e;s<n;s++)r=t.children[s],l(o,t.leaf?i(r):r);return o}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,n,o,r){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=o||(s=e+Math.ceil((n-e)/o/2)*o,i(t,s,e,n,r),a.push(e,s,s,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!f(t,e))return n;for(var o,r,s,a,l=[];e;){for(o=0,r=e.children.length;o<r;o++)s=e.children[o],f(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!f(t,e))return!1;for(var i,o,r,s,a=[];e;){for(i=0,o=e.children.length;i<o;i++)if(r=e.children[i],f(t,s=e.leaf?n(r):r)){if(e.leaf||p(t,s))return!0;a.push(r)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var o=this.data;this.data=i,i=o}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,o,s,a=this.data,l=this.toBBox(t),h=[],u=[];a||h.length;){if(a||(a=h.pop(),i=h[h.length-1],n=u.pop(),s=!0),a.leaf&&-1!==(o=r(t,a.children,e)))return a.children.splice(o,1),h.push(a),this._condense(h),this;s||a.leaf||!p(a,l)?i?(a=i.children[++n],s=!1):a=null:(h.push(a),u.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:h,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var o,r=n-e+1,a=this._maxEntries;if(r<=a)return s(o=g(t.slice(e,n+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,i-1))),(o=g([])).leaf=!1,o.height=i;var l,h,u,c,d=Math.ceil(r/a),p=d*Math.ceil(Math.sqrt(a));for(_(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(_(t,l,u=Math.min(l+p-1,n),d,this.compareMinY),h=l;h<=u;h+=d)c=Math.min(h+d-1,u),o.children.push(this._build(t,h,c,i-1));return s(o,this.toBBox),o},_chooseSubtree:function(t,e,n,i){for(var o,r,s,a,l,h,u,d,p,f;i.push(e),!e.leaf&&i.length-1!==n;){for(u=d=1/0,o=0,r=e.children.length;o<r;o++)l=c(s=e.children[o]),p=t,f=s,(h=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l)<d?(d=h,u=l<u?l:u,a=s):h===d&&l<u&&(u=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),o=[],r=this._chooseSubtree(i,this.data,e,o);for(r.children.push(t),l(r,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);var r=this._chooseSplitIndex(n,o,i),a=g(n.children.splice(r,n.children.length-r));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,o,r,s,l,h,u,d,p,f,g,_,y,m;for(h=u=1/0,i=e;i<=n-e;i++)p=o=a(t,0,i,this.toBBox),f=r=a(t,i,n,this.toBBox),g=Math.max(p.minX,f.minX),_=Math.max(p.minY,f.minY),y=Math.min(p.maxX,f.maxX),m=Math.min(p.maxY,f.maxY),s=Math.max(0,y-g)*Math.max(0,m-_),l=c(o)+c(r),s<h?(h=s,d=i,u=l<u?l:u):s===h&&l<u&&(u=l,d=i);return d},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:h,o=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,o)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var o,r,s=this.toBBox,h=a(t,0,e,s),u=a(t,n-e,n,s),c=d(h)+d(u);for(o=e;o<n-e;o++)r=t.children[o],l(h,t.leaf?s(r):r),c+=d(h);for(o=n-e-1;o>=e;o--)r=t.children[o],l(u,t.leaf?s(r):r),c+=d(u);return c},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},"W8A/":function(t,e){t.exports='.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 2px solid blue;\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: rgba(0,60,136,0.3);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid #eee;\n  border-top: none;\n  color: #eee;\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n}\n\n.ol-overlay-container {\n  will-change: left,right,top,bottom;\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport, .ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: rgba(255,255,255,0.4);\n  border-radius: 4px;\n  padding: 2px;\n}\n\n.ol-control:hover {\n  background-color: rgba(255,255,255,0.6);\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n@media print {\n  .ol-control {\n    display: none;\n  }\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: white;\n  font-size: 1.14em;\n  font-weight: bold;\n  text-decoration: none;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: rgba(0,60,136,0.5);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  font-size: 1.2em;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  background-color: rgba(0,60,136,0.7);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 0 .5em;\n  font-size: .7rem;\n  line-height: 1.375em;\n  color: #000;\n  text-shadow: 0 0 2px #fff;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n  line-height: inherit;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution ul, .ol-attribution button {\n  display: inline-block;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n  height: 1.1em;\n  line-height: 1em;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: inline-block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid #7b98bc;\n  height: 150px;\n  margin: 2px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button{\n  bottom: 1px;\n  left: 2px;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n\n.ol-overviewmap-box {\n  border: 2px dotted rgba(0,60,136,0.7);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n'},YcpW:function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function e(t,e){return t<e?-1:t>e?1:0}return function(n,i,o,r,s){!function e(n,i,o,r,s){for(;r>o;){if(r-o>600){var a=r-o+1,l=i-o+1,h=Math.log(a),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(a-u)/a)*(l-a/2<0?-1:1);e(n,i,Math.max(o,Math.floor(i-l*u/a+c)),Math.min(r,Math.floor(i+(a-l)*u/a+c)),s)}var d=n[i],p=o,f=r;for(t(n,o,i),s(n[r],d)>0&&t(n,o,r);p<f;){for(t(n,p,f),p++,f--;s(n[p],d)<0;)p++;for(;s(n[f],d)>0;)f--}0===s(n[o],d)?t(n,o,f):t(n,++f,r),f<=i&&(o=f+1),i<=f&&(r=f-1)}}(n,i,o||0,r||n.length-1,s||e)}}()},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},zUnb:function(t,e,n){"use strict";n.r(e);var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e){return function(n,i){e(n,i,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}var d=Array.isArray||function(t){return t&&"number"==typeof t.length};function p(t){return null!=t&&"object"==typeof t}function f(t){return"function"==typeof t}var g,_={e:{}};function y(){try{return g.apply(this,arguments)}catch(t){return _.e=t,_}}function m(t){return g=t,y}var v=function(t){function e(n){var i=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return i.errors=n,i.name="UnsubscriptionError",Object.setPrototypeOf(i,e.prototype),i}return o(e,t),e}(Error),x=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,i=this._parents,o=this._unsubscribe,r=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=i?i.length:0;n;)n.remove(this),n=++s<a&&i[s]||null;if(f(o)&&m(o).call(this)===_&&(e=!0,t=t||(_.e instanceof v?b(_.e.errors):[_.e])),d(r))for(s=-1,a=r.length;++s<a;){var l=r[s];if(p(l)&&m(l.unsubscribe).call(l)===_){e=!0,t=t||[];var h=_.e;h instanceof v?t=t.concat(b(h.errors)):t.push(h)}}if(e)throw new v(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function b(t){return t.reduce(function(t,e){return t.concat(e instanceof v?e.errors:e)},[])}var w=!1,C={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){w=t},get useDeprecatedSynchronousErrorHandling(){return w}};function E(t){setTimeout(function(){throw t})}var T={closed:!0,next:function(t){},error:function(t){if(C.useDeprecatedSynchronousErrorHandling)throw t;E(t)},complete:function(){}},S="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",I=function(t){function e(e,n,i){var o,r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=T;break;case 1:if(!e){r.destination=T;break}if("object"==typeof e){if((o=e)instanceof I||"syncErrorThrowable"in o&&o[S]){var s=e[S]();r.syncErrorThrowable=s.syncErrorThrowable,r.destination=s,s.add(r)}else r.syncErrorThrowable=!0,r.destination=new R(r,e);break}default:r.syncErrorThrowable=!0,r.destination=new R(r,e,n,i)}return r}return o(e,t),e.prototype[S]=function(){return this},e.create=function(t,n,i){var o=new e(t,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(x),R=function(t){function e(e,n,i,o){var r,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return f(n)?r=n:n&&(r=n.next,i=n.error,o=n.complete,n!==T&&(f((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=r,s._error=i,s._complete=o,s}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=C.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):E(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;E(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),C.useDeprecatedSynchronousErrorHandling)throw t;E(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!C.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return C.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(E(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(I),P="function"==typeof Symbol&&Symbol.observable||"@@observable";var M=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,o=function(t,e,n){if(t){if(t instanceof I)return t;if(t[S])return t[S]()}return t||e||n?new I(t,e,n):new I(T)}(t,e,n);if(i?i.call(o,this.source):o.add(this.source||C.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),C.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){C.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=k(e))(function(e,i){var o;o=n.subscribe(function(e){try{t(e)}catch(t){i(t),o&&o.unsubscribe()}},i,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[P]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce(function(t,e){return e(t)},t)}:function(){})(this);var n},t.prototype.toPromise=function(t){var e=this;return new(t=k(t))(function(t,n){var i;e.subscribe(function(t){return i=t},function(t){return n(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}();function k(t){if(t||(t=C.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var L=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error),F=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(x),D=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return o(e,t),e}(I),O=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[S]=function(){return new D(this)},e.prototype.lift=function(t){var e=new A(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new L;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new L;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new L;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new L;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new L;return this.hasError?(t.error(this.thrownError),x.EMPTY):this.isStopped?(t.complete(),x.EMPTY):(this.observers.push(t),new F(this,t))},e.prototype.asObservable=function(){var t=new M;return t.source=this,t},e.create=function(t,e){return new A(t,e)},e}(M),A=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):x.EMPTY},e}(O);function N(t){return t&&"function"==typeof t.schedule}var G=function(t){function e(e,n,i){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(I),V=function(t){return function(e){for(var n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},j=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,E),e}},B=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),z=function(t){return function(e){for(var n=t[B]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},H=function(t){return function(e){var n=t[P]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},W=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function U(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Y=function(t){if(t instanceof M)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[P])return H(t);if(W(t))return V(t);if(U(t))return j(t);if(t&&"function"==typeof t[B])return z(t);var e=p(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function K(t,e,n,i){var o=new G(t,n,i);return Y(e)(o)}var X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(I);function Z(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new q(t,e))}}var q=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new J(t,this.project,this.thisArg))},t}(),J=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(I);function Q(t,e){return new M(e?function(n){var i=new x,o=0;return i.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||i.add(this.schedule())):n.complete()})),i}:V(t))}function $(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(i){return i.pipe($(function(n,i){return(o=t(n,i),o instanceof M?o:new M(Y(o))).pipe(Z(function(t,o){return e(n,t,i,o)}));var o},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new tt(t,n))})}var tt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.project,this.concurrent))},t}(),et=function(t){function e(e,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(K(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(X);function nt(t){return t}function it(){return function(t){return t.lift(new ot(t))}}var ot=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new rt(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},t}(),rt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.connectable=n,i}return o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},e}(I),st=function(t){function e(e,n){var i=t.call(this)||this;return i.source=e,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return o(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new x).add(this.source.subscribe(new lt(this.getSubject(),this))),t.closed?(this._connection=null,t=x.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return it()(this)},e}(M).prototype,at={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:st._subscribe},_isComplete:{value:st._isComplete,writable:!0},getSubject:{value:st.getSubject},connect:{value:st.connect},refCount:{value:st.refCount}},lt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.connectable=n,i}return o(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(D);function ht(){return new O}function ut(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}var ct=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?ut({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),dt="__parameters__";function pt(t,e,n){var i=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,c(e));for(var o in i)this[o]=i[o]}}}(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var r=new((t=o).bind.apply(t,c([void 0],e)));return s.annotation=r,s;function s(t,e,n){for(var i=t.hasOwnProperty(dt)?t[dt]:Object.defineProperty(t,dt,{value:[]})[dt];i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(r),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}Function;var ft="undefined"!=typeof window&&window,gt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_t="undefined"!=typeof global&&global||ft||gt,yt=Promise.resolve(0),mt=null;function vt(){if(!mt){var t=_t.Symbol;if(t&&t.iterator)mt=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(mt=i)}}return mt}function xt(t){"undefined"==typeof Zone?yt.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function bt(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function wt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ct(t){return t.__forward_ref__=Ct,t.toString=function(){return wt(this())},t}function Et(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===Ct?t():t}var Tt=pt("Inject",function(t){return{token:t}}),St=pt("Optional"),It=pt("Self"),Rt=pt("SkipSelf"),Pt=pt("Host"),Mt="__source",kt=new Object,Lt=kt,Ft=new ct("INJECTOR"),Dt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=kt),e===kt)throw new Error("NullInjectorError: No provider for "+wt(t)+"!");return e},t}(),Ot=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new Ut(t,e):new Ut(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=kt,t.NULL=new Dt,t.ngInjectableDef=ut({providedIn:"any",factory:function(){return Jt(Ft)}}),t}(),At=function(t){return t},Nt=[],Gt=At,Vt=function(){return Array.prototype.slice.call(arguments)},jt={},Bt=function(t){for(var e in t)if(t[e]===jt)return e;throw Error("!prop")}({provide:String,useValue:jt}),zt=Ot.NULL,Ht=/\n/gm,Wt="\u0275",Ut=function(){function t(t,e,n){void 0===e&&(e=zt),void 0===n&&(n=null),this.parent=e,this.source=n;var i=this._records=new Map;i.set(Ot,{token:Ot,fn:At,deps:Nt,value:this,useNew:!1}),i.set(Ft,{token:Ft,fn:At,deps:Nt,value:this,useNew:!1}),function t(e,n){if(n)if((n=Et(n))instanceof Array)for(var i=0;i<n.length;i++)t(e,n[i]);else{if("function"==typeof n)throw Xt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Xt("Unexpected provider",n);var o=Et(n.provide),r=function(t){var e=function(t){var e=Nt,n=t.deps;if(n&&n.length){e=[];for(var i=0;i<n.length;i++){var o=6;if((l=Et(n[i]))instanceof Array)for(var r=0,s=l;r<s.length;r++){var a=s[r];a instanceof St||a==St?o|=1:a instanceof Rt||a==Rt?o&=-3:a instanceof It||a==It?o&=-5:l=a instanceof Tt?a.token:Et(a)}e.push({token:l,options:o})}}else if(t.useExisting){var l;e=[{token:l=Et(t.useExisting),options:6}]}else if(!(n||Bt in t))throw Xt("'deps' required",t);return e}(t),n=At,i=Nt,o=!1,r=Et(t.provide);if(Bt in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)o=!0,n=Et(t.useClass);else{if("function"!=typeof r)throw Xt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);o=!0,n=r}return{deps:e,fn:n,useNew:o,value:i}}(n);if(!0===n.multi){var s=e.get(o);if(s){if(s.fn!==Vt)throw Yt(o)}else e.set(o,s={token:n.provide,deps:[],useNew:!1,fn:Vt,value:Nt});s.deps.push({token:o=n,options:6})}var a=e.get(o);if(a&&a.fn==Vt)throw Yt(o);e.set(o,r)}}(i,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=0);var i=this._records.get(t);try{return function t(e,n,i,o,r,s){try{return function(e,n,i,o,r,s){var a,l;if(!n||4&s)2&s||(l=o.get(e,r,0));else{if((l=n.value)==Gt)throw Error(Wt+"Circular dependency");if(l===Nt){n.value=Gt;var h=n.useNew,u=n.fn,d=n.deps,p=Nt;if(d.length){p=[];for(var f=0;f<d.length;f++){var g=d[f],_=g.options,y=2&_?i.get(g.token):void 0;p.push(t(g.token,y,i,y||4&_?o:zt,1&_?null:Ot.THROW_IF_NOT_FOUND,0))}}n.value=l=h?new((a=u).bind.apply(a,c([void 0],p))):u.apply(void 0,p)}}return l}(e,n,i,o,r,s)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==Gt&&(n.value=Nt),t}}(t,i,this._records,this.parent,e,n)}catch(e){var o=e.ngTempTokenPath;throw t[Mt]&&o.unshift(t[Mt]),e.message=Kt("\n"+e.message,o,this.source),e.ngTokenPath=o,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(wt(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Yt(t){return Xt("Cannot mix multi providers and regular providers",t)}function Kt(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Wt?t.substr(2):t;var i=wt(e);if(e instanceof Array)i=e.map(wt).join(" -> ");else if("object"==typeof e){var o=[];for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];o.push(r+":"+("string"==typeof s?JSON.stringify(s):wt(s)))}i="{"+o.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+i+"]: "+t.replace(Ht,"\n  ")}function Xt(t,e){return new Error(Kt(t,e))}var Zt=void 0;function qt(t){var e=Zt;return Zt=t,e}function Jt(t,e){if(void 0===e&&(e=0),void 0===Zt)throw new Error("inject() must be called from an injection context");if(null===Zt){var n=t.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&e)return null;throw new Error("Injector: NOT_FOUND ["+wt(t)+"]")}return Zt.get(t,8&e?null:void 0,e)}function Qt(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,r=0,s=0;s<i.length;s++){var a=i[s];a instanceof St||"Optional"===a.ngMetadataName?r|=8:a instanceof Rt||"SkipSelf"===a.ngMetadataName?r|=4:a instanceof It||"Self"===a.ngMetadataName?r|=2:o=a instanceof Tt?a.token:a}e.push(Jt(o,r))}else e.push(Jt(i))}return e}String;var $t=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),te=new function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("6.1.10"),ee="ngDebugContext",ne="ngOriginalError",ie="ngErrorLogger";function oe(t){return t[ee]}function re(t){return t[ne]}function se(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,c(e))}var ae=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t[ie]||se}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?oe(t)?oe(t):this._findContext(re(t)):null},t.prototype._findOriginalError=function(t){for(var e=re(t);e&&re(e);)e=re(e);return e},t}(),le=new ct("The presence of this token marks an injector as being the root injector."),he={},ue={},ce=[],de=void 0;function pe(){return void 0===de&&(de=new Dt),de}var fe=function(){function t(t,e,n){var i=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,ye([t],function(t){return i.processInjectorType(t,new Set)}),e&&ye(e,function(t){return i.processProvider(t)}),this.records.set(Ft,_e(void 0,this)),this.isRootInjector=this.records.has(le),this.injectorDefTypes.forEach(function(t){return i.get(t)})}return t.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},t.prototype.get=function(t,e,n){void 0===e&&(e=Lt),void 0===n&&(n=0),this.assertNotDestroyed();var i,o=qt(this);try{if(!(4&n)){var r=this.records.get(t);if(void 0===r){var s=("function"==typeof(i=t)||"object"==typeof i&&i instanceof ct)&&t.ngInjectableDef||void 0;void 0!==s&&this.injectableDefInScope(s)&&(r=ge(t),this.records.set(t,r))}if(void 0!==r)return this.hydrate(t,r)}return 2&n&&pe(),this.parent.get(t,e)}finally{qt(o)}},t.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},t.prototype.processInjectorType=function(t,e){var n=this,i=(t=Et(t)).ngInjectorDef,o=null==i&&t.ngModule||void 0,r=void 0===o?t:o,s=void 0!==o&&t.providers||ce;if(void 0!==o&&(i=o.ngInjectorDef),null!=i){if(e.has(r))throw new Error("Circular dependency: type "+wt(r)+" ends up importing itself.");if(this.injectorDefTypes.add(r),this.records.set(r,_e(i.factory)),null!=i.imports){e.add(r);try{ye(i.imports,function(t){return n.processInjectorType(t,e)})}finally{e.delete(r)}}null!=i.providers&&ye(i.providers,function(t){return n.processProvider(t)}),ye(s,function(t){return n.processProvider(t)})}},t.prototype.processProvider=function(t){var e=me(t=Et(t))?t:Et(t.provide),n=function(t){var e=Et(t),n=he,i=void 0;if(me(t))return ge(t);if(e=Et(t.provide),Bt in t)n=t.useValue;else if(t.useExisting)i=function(){return Jt(t.useExisting)};else if(t.useFactory)i=function(){return t.useFactory.apply(t,c(Qt(t.deps||[])))};else{var o=t.useClass||e;if(!t.deps)return ge(o);i=function(){return new(o.bind.apply(o,c([void 0],Qt(t.deps))))}}return _e(i,n)}(t);if(me(t)||!0!==t.multi){var i=this.records.get(e);if(i&&void 0!==i.multi)throw new Error("Mixed multi-provider for "+wt(e))}else{var o=this.records.get(e);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+e+".")}else(o=_e(void 0,he,!0)).factory=function(){return Qt(o.multi)},this.records.set(e,o);e=t,o.multi.push(t)}this.records.set(e,n)},t.prototype.hydrate=function(t,e){if(e.value===ue)throw new Error("Circular dep for "+wt(t));var n;return e.value===he&&(e.value=ue,e.value=e.factory()),"object"==typeof e.value&&e.value&&"object"==typeof(n=e.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value},t.prototype.injectableDefInScope=function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))},t}();function ge(t){var e=t.ngInjectableDef;if(void 0===e){if(t instanceof ct)throw new Error("Token "+wt(t)+" is missing an ngInjectableDef definition.");return _e(function(){return new t})}return _e(e.factory)}function _e(t,e,n){return void 0===e&&(e=he),void 0===n&&(n=!1),{factory:t,value:e,multi:n?[]:void 0}}function ye(t,e){t.forEach(function(t){return Array.isArray(t)?ye(t,e):e(t)})}function me(t){return"function"==typeof t}function ve(t){return!!t&&"function"==typeof t.then}var xe=new ct("Application Initializer"),be=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var o=this.appInits[i]();ve(o)&&e.push(o)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},s([a(0,Tt(xe)),a(0,St())],t)}(),we=new ct("AppId");function Ce(){return""+Ee()+Ee()+Ee()}function Ee(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Te=new ct("Platform Initializer"),Se=new ct("Platform ID"),Ie=new ct("appBootstrapListener"),Re=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Pe(){throw new Error("Runtime compiler is not loaded")}var Me=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw Pe()},t.prototype.compileModuleAsync=function(t){throw Pe()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw Pe()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw Pe()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),ke=function(){},Le=function(){},Fe=function(){};function De(t){var e=Error("No component factory found for "+wt(t)+". Did you add it to @NgModule.entryComponents?");return e[Ne]=t,e}var Oe,Ae,Ne="ngComponent",Ge=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw De(t)},t}(),Ve=function(){function t(){}return t.NULL=new Ge,t}(),je=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var i=0;i<t.length;i++){var o=t[i];this._factories.set(o.componentType,o)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw De(t);return new Be(e,this._ngModule)},t}(),Be=function(t){function e(e,n){var i=t.call(this)||this;return i.factory=e,i.ngModule=n,i.selector=e.selector,i.componentType=e.componentType,i.ngContentSelectors=e.ngContentSelectors,i.inputs=e.inputs,i.outputs=e.outputs,i}return o(e,t),e.prototype.create=function(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)},e}(Fe),ze=function(){},He=function(){},We=function(){var t=_t.wtf;return!(!t||!(Oe=t.trace)||(Ae=Oe.events,0))}();function Ue(t,e){return null}var Ye=We?function(t,e){return void 0===e&&(e=null),Ae.createScope(t,e)}:function(t,e){return Ue},Ke=We?function(t,e){return Oe.leaveScope(t,e),e}:function(t,e){return e},Xe=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return o(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,i){var o,r=function(t){return null},s=function(){return null};e&&"object"==typeof e?(o=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(r=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(r=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),i&&(s=this.__isAsync?function(){setTimeout(function(){return i()})}:function(){i()}));var a=t.prototype.subscribe.call(this,o,r,s);return e instanceof x&&e.add(a),a},e}(O),Ze=function(){function t(t){var e,n=t.enableLongStackTrace,i=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,i,o,r,s){try{return $e(e),t.invokeTask(i,o,r,s)}finally{tn(e)}},onInvoke:function(t,n,i,o,r,s,a){try{return $e(e),t.invoke(i,o,r,s,a)}finally{tn(e)}},onHasTask:function(t,n,i,o){t.hasTask(i,o),n===i&&("microTask"==o.change?(e.hasPendingMicrotasks=o.microTask,Qe(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:function(t,n,i,o){return t.handleError(i,o),e.runOutsideAngular(function(){return e.onError.emit(o)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,i){var o=this._inner,r=o.scheduleEventTask("NgZoneEvent: "+i,t,Je,qe,qe);try{return o.runTask(r,e,n)}finally{o.cancelTask(r)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function qe(){}var Je={};function Qe(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function $e(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tn(t){t._nesting--,Qe(t)}var en,nn=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),on=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Ze.assertNotInAngularZone(),xt(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())xt(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,isPeriodic:t.data.isPeriodic,delay:t.data.delay,creationLocation:t.creationLocation,xhr:t.data.target}}):[]},t.prototype.addCallback=function(t,e,n){var i=this,o=-1;e&&e>0&&(o=setTimeout(function(){i._callbacks=i._callbacks.filter(function(t){return t.timeoutId!==o}),t(i._didWork,i.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),rn=function(){function t(){this._applications=new Map,sn.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),sn.findTestabilityInTree(this,t,e)},s([l("design:paramtypes",[])],t)}(),sn=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),an=!0,ln=!1,hn=new ct("AllowMultipleToken");function un(){return ln=!0,an}var cn=function(t,e){this.name=t,this.token=e};function dn(t,e,n){void 0===n&&(n=[]);var i="Platform: "+e,o=new ct(i);return function(e){void 0===e&&(e=[]);var r=pn();if(!r||r.injector.get(hn,!1))if(t)t(n.concat(e).concat({provide:o,useValue:!0}));else{var s=n.concat(e).concat({provide:o,useValue:!0});!function(t){if(en&&!en.destroyed&&!en.injector.get(hn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");en=t.get(fn);var e=t.get(Te,null);e&&e.forEach(function(t){return t()})}(Ot.create({providers:s,name:i}))}return function(t){var e=pn();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(o)}}function pn(){return en&&!en.destroyed?en:null}var fn=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,i=this,o="noop"===(n=e?e.ngZone:void 0)?new nn:("zone.js"===n?void 0:n)||new Ze({enableLongStackTrace:un()}),r=[{provide:Ze,useValue:o}];return o.run(function(){var e=Ot.create({providers:r,parent:i.injector,name:t.moduleType.name}),n=t.create(e),s=n.injector.get(ae,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return yn(i._modules,n)}),o.runOutsideAngular(function(){return o.onError.subscribe({next:function(t){s.handleError(t)}})}),function(t,e,o){try{var r=((s=n.injector.get(be)).runInitializers(),s.donePromise.then(function(){return i._moduleDoBootstrap(n),n}));return ve(r)?r.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):r}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var s}(s,o)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var i=this.injector.get(ke),o=gn({},e);return i.createCompiler([o]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,o)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(_n);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+wt(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function gn(t,e){return Array.isArray(e)?e.reduce(gn,t):r({},t,e)}var _n=function(){function t(t,e,n,i,o,r){var s=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=un(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run(function(){s.tick()})}});var a=new M(function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular(function(){t.next(s._stable),t.complete()})}),l=new M(function(t){var e;s._zone.runOutsideAngular(function(){e=s._zone.onStable.subscribe(function(){Ze.assertNotInAngularZone(),xt(function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))})})});var n=s._zone.onUnstable.subscribe(function(){Ze.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return N(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof M?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),$(nt,t)}(n)(Q(t,i))}(a,l.pipe(function(t){return it()((e=ht,function(t){var n;n="function"==typeof e?e:function(){return e};var i=Object.create(t,at);return i.source=t,i.subjectFactory=n,i})(t));var e}))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Fe?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var o=n instanceof Be?null:this._injector.get(ze),r=n.create(Ot.NULL,[],e||n.selector,o);r.onDestroy(function(){i._unloadComponent(r)});var s=r.injector.get(on,null);return s&&r.injector.get(rn).registerApplication(r.location.nativeElement,s),this._loadComponent(r),un()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,Ke(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;yn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ie,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),yn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Ye("ApplicationRef#tick()"),t}();function yn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var mn=function(){},vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),xn=function(){},bn=function(t){this.nativeElement=t},wn=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Xe,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[vt()]=function(){return this._results[vt()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var i=Array.isArray(n)?t(n):n;return e.concat(i)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),Cn=function(){},En=function(){},Tn=function(){},Sn=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof In?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),In=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=e,o}return o(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,c([o+1,0],e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,i){e.childNodes.forEach(function(e){e instanceof In&&(n(e)&&i.push(e),t(e,n,i))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,i){e instanceof In&&e.childNodes.forEach(function(e){n(e)&&i.push(e),e instanceof In&&t(e,n,i)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Sn),Rn=new Map;function Pn(t){return Rn.get(t)||null}function Mn(t){Rn.set(t.nativeNode,t)}function kn(t,e){var n=Dn(t),i=Dn(e);return n&&i?function(t,e,n){for(var i=t[vt()](),o=e[vt()]();;){var r=i.next(),s=o.next();if(r.done&&s.done)return!0;if(r.done||s.done)return!1;if(!n(r.value,s.value))return!1}}(t,e,kn):!(n||!t||"object"!=typeof t&&"function"!=typeof t||i||!e||"object"!=typeof e&&"function"!=typeof e)||bt(t,e)}var Ln=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Fn=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Dn(t){return!!On(t)&&(Array.isArray(t)||!(t instanceof Map)&&vt()in t)}function On(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var An=function(){function t(){}return t.prototype.supports=function(t){return Dn(t)},t.prototype.create=function(t){return new Gn(t)},t}(),Nn=function(t,e){return e},Gn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Nn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,i=0,o=null;e||n;){var r=!n||e&&e.currentIndex<zn(n,i,o)?e:n,s=zn(r,i,o),a=r.currentIndex;if(r===n)i--,n=n._nextRemoved;else if(e=e._next,null==r.previousIndex)i++;else{o||(o=[]);var l=s-i,h=a-i;if(l!=h){for(var u=0;u<l;u++){var c=u<o.length?o[u]:o[u]=0,d=c+u;h<=d&&d<l&&(o[u]=c+1)}o[r.previousIndex]=h-l}}s!==a&&t(r,s,a)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Dn(t))throw new Error("Error trying to diff '"+wt(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,i,o,r=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)o=this._trackByFn(a,i=t[a]),null!==r&&bt(r.trackById,o)?(s&&(r=this._verifyReinsertion(r,i,o,a)),bt(r.item,i)||this._addIdentityChange(r,i)):(r=this._mismatch(r,i,o,a),s=!0),r=r._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var i=t[vt()](),o=void 0;!(o=i.next()).done;)e(o.value)}(t,function(t){o=e._trackByFn(n,t),null!==r&&bt(r.trackById,o)?(s&&(r=e._verifyReinsertion(r,t,o,n)),bt(r.item,t)||e._addIdentityChange(r,t)):(r=e._mismatch(r,t,o,n),s=!0),r=r._next,n++}),this.length=n;return this._truncate(r),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,i){var o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(bt(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(bt(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):t=this._addAfter(new Vn(e,n),o,i),t},t.prototype._verifyReinsertion=function(t,e,n,i){var o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Bn),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Vn=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},jn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&bt(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Bn=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new jn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function zn(t,e,n){var i=t.previousIndex;if(null===i)return i;var o=0;return n&&i<n.length&&(o=n[i]),i+e+o}var Hn=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||On(t)},t.prototype.create=function(){return new Wn},t}(),Wn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||On(t)))throw new Error("Error trying to diff '"+wt(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,i){if(n&&n.key===i)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var o=e._getOrCreateRecordForKey(i,t);n=e._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var i=n._prev,o=n._next;return i&&(i._next=o),o&&(o._prev=i),n._next=null,n._prev=null,n}var r=new Un(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){bt(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Un=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Yn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var i=n.factories.slice();e=e.concat(i)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Rt,new St]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=ut({providedIn:"root",factory:function(){return new t([new An])}}),t}(),Kn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var i=n.factories.slice();e=e.concat(i)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Rt,new St]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Xn=[new Hn],Zn=new Yn([new An]),qn=new Kn(Xn),Jn=dn(null,"core",[{provide:Se,useValue:"unknown"},{provide:fn,deps:[Ot]},{provide:rn,deps:[]},{provide:Re,deps:[]}]),Qn=new ct("LocaleId");function $n(){return Zn}function ti(){return qn}function ei(t){return t||"en-US"}var ni=function(t){},ii=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var i=e.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||t.removeAttribute(i)}for(var o=t.firstChild;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling},t}(),oi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ri=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function si(t){return(t=String(t)).match(oi)||t.match(ri)?t:(un()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function ai(t){var e,n,i={};try{for(var o=h(t.split(",")),r=o.next();!r.done;r=o.next())i[r.value]=!0}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function li(){for(var t,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var r=h(n),s=r.next();!s.done;s=r.next()){var a=s.value;for(var l in a)a.hasOwnProperty(l)&&(o[l]=!0)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return o}var hi,ui=ai("area,br,col,hr,img,wbr"),ci=ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),di=ai("rp,rt"),pi=li(di,ci),fi=li(ui,li(ci,ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),li(di,ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pi),gi=ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_i=ai("srcset"),yi=li(gi,_i,ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),mi=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(e.nodeType===Node.ELEMENT_NODE?this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var n=this.checkClobberedElement(e,e.nextSibling);if(n){e=n;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e=t.nodeName.toLowerCase();if(fi.hasOwnProperty(e)){this.buf.push("<"),this.buf.push(e);for(var n,i=t.attributes,o=0;o<i.length;o++){var r=i.item(o),s=r.name,a=s.toLowerCase();if(yi.hasOwnProperty(a)){var l=r.value;gi[a]&&(l=si(l)),_i[a]&&(n=l,l=(n=String(n)).split(",").map(function(t){return si(t.trim())}).join(", ")),this.buf.push(" ",s,'="',bi(l),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();fi.hasOwnProperty(e)&&!ui.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(bi(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),vi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xi=/([^\#-~ |!])/g;function bi(t){return t.replace(/&/g,"&amp;").replace(vi,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(xi,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function wi(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ci=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Ei=/^url\(([^)]+)\)$/,Ti=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),Si=function(){};function Ii(t,e,n){var i=t.state,o=1792&i;return o===e?(t.state=-1793&i|n,t.initIndex=-1,!0):o===n}function Ri(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Pi(t,e){return t.nodes[e]}function Mi(t,e){return t.nodes[e]}function ki(t,e){return t.nodes[e]}function Li(t,e){return t.nodes[e]}function Fi(t,e){return t.nodes[e]}var Di={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Oi(t,e,n,i){var o="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return i&&(o+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Ai(n,e),n}(o,t)}function Ai(t,e){t[ee]=e,t[ie]=e.logError.bind(e)}function Ni(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Gi=function(){},Vi=new Map;function ji(t){var e=Vi.get(t);return e||(e=wt(t)+"_"+Vi.size,Vi.set(t,e)),e}var Bi="$$undefined",zi="$$empty";function Hi(t){return{id:Bi,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Wi=0;function Ui(t,e,n,i){return!(!(2&t.state)&&bt(t.oldValues[e.bindingIndex+n],i))}function Yi(t,e,n,i){return!!Ui(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function Ki(t,e,n,i){var o=t.oldValues[e.bindingIndex+n];if(1&t.state||!kn(o,i)){var r=e.bindings[n].name;throw Oi(Di.createDebugContext(t,e.nodeIndex),r+": "+o,r+": "+i,0!=(1&t.state))}}function Xi(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Zi(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function qi(t,e,n,i){try{return Xi(33554432&t.def.nodes[e].flags?Mi(t,e).componentView:t),Di.handleEvent(t,e,n,i)}catch(e){t.root.errorHandler.handleError(e)}}function Ji(t){return t.parent?Mi(t.parent,t.parentNodeDef.nodeIndex):null}function Qi(t){return t.parent?t.parentNodeDef.parent:null}function $i(t,e){switch(201347067&e.flags){case 1:return Mi(t,e.nodeIndex).renderElement;case 2:return Pi(t,e.nodeIndex).renderText}}function to(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function eo(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function no(t){var e={},n=0,i={};return t&&t.forEach(function(t){var o=u(t,2),r=o[0],s=o[1];"number"==typeof r?(e[r]=s,n|=function(t){return 1<<t%32}(r)):i[r]=s}),{matchedQueries:e,references:i,matchedQueryIds:n}}function io(t,e){return t.map(function(t){var n,i,o;return Array.isArray(t)?(o=(n=u(t,2))[0],i=n[1]):(o=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,Mt,{value:e,configurable:!0}),{flags:o,token:i,tokenKey:ji(i)}})}function oo(t,e,n){var i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===$t.Native?Mi(t,n.renderParent.nodeIndex).renderElement:void 0:e}var ro=new WeakMap;function so(t){var e=ro.get(t);return e||((e=t(function(){return Gi})).factory=t,ro.set(t,e)),e}function ao(t,e,n,i,o){3===e&&(n=t.renderer.parentNode($i(t,t.def.lastRenderRootNode))),lo(t,e,0,t.def.nodes.length-1,n,i,o)}function lo(t,e,n,i,o,r,s){for(var a=n;a<=i;a++){var l=t.def.nodes[a];11&l.flags&&uo(t,l,e,o,r,s),a+=l.childCount}}function ho(t,e,n,i,o,r){for(var s=t;s&&!to(s);)s=s.parent;for(var a=s.parent,l=Qi(s),h=l.nodeIndex+l.childCount,u=l.nodeIndex+1;u<=h;u++){var c=a.def.nodes[u];c.ngContentIndex===e&&uo(a,c,n,i,o,r),u+=c.childCount}if(!a.parent){var d=t.root.projectableNodes[e];if(d)for(u=0;u<d.length;u++)co(t,d[u],n,i,o,r)}}function uo(t,e,n,i,o,r){if(8&e.flags)ho(t,e.ngContent.index,n,i,o,r);else{var s=$i(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&co(t,s,n,i,o,r),32&e.bindingFlags&&co(Mi(t,e.nodeIndex).componentView,s,n,i,o,r)):co(t,s,n,i,o,r),16777216&e.flags)for(var a=Mi(t,e.nodeIndex).viewContainer._embeddedViews,l=0;l<a.length;l++)ao(a[l],n,i,o,r);1&e.flags&&!e.element.name&&lo(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,o,r)}}function co(t,e,n,i,o,r){var s=t.renderer;switch(n){case 1:s.appendChild(i,e);break;case 2:s.insertBefore(i,e,o);break;case 3:s.removeChild(i,e);break;case 0:r.push(e)}}var po=/^:([^:]+):(.+)$/;function fo(t){if(":"===t[0]){var e=t.match(po);return[e[1],e[2]]}return["",t]}function go(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function _o(t,e,n,i,o,r,s,a,l,h,u,c,d,p,f,g,_,y,m,v){switch(t){case 1:return e+yo(n)+i;case 2:return e+yo(n)+i+yo(o)+r;case 3:return e+yo(n)+i+yo(o)+r+yo(s)+a;case 4:return e+yo(n)+i+yo(o)+r+yo(s)+a+yo(l)+h;case 5:return e+yo(n)+i+yo(o)+r+yo(s)+a+yo(l)+h+yo(u)+c;case 6:return e+yo(n)+i+yo(o)+r+yo(s)+a+yo(l)+h+yo(u)+c+yo(d)+p;case 7:return e+yo(n)+i+yo(o)+r+yo(s)+a+yo(l)+h+yo(u)+c+yo(d)+p+yo(f)+g;case 8:return e+yo(n)+i+yo(o)+r+yo(s)+a+yo(l)+h+yo(u)+c+yo(d)+p+yo(f)+g+yo(_)+y;case 9:return e+yo(n)+i+yo(o)+r+yo(s)+a+yo(l)+h+yo(u)+c+yo(d)+p+yo(f)+g+yo(_)+y+yo(m)+v;default:throw new Error("Does not support more than 9 expressions")}}function yo(t){return null!=t?t.toString():""}function mo(t,e,n,i,o,r){t|=1;var s=no(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s.matchedQueries,matchedQueryIds:s.matchedQueryIds,references:s.references,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:r?so(r):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:o||Gi},provider:null,text:null,query:null,ngContent:null}}function vo(t,e,n,i,o,r,s,a,l,h,c,d){var p;void 0===s&&(s=[]),h||(h=Gi);var f=no(n),g=f.matchedQueries,_=f.references,y=f.matchedQueryIds,m=null,v=null;r&&(m=(p=u(fo(r),2))[0],v=p[1]),a=a||[];for(var x=new Array(a.length),b=0;b<a.length;b++){var w=u(a[b],3),C=w[0],E=w[2],T=u(fo(w[1]),2),S=T[0],I=T[1],R=void 0,P=void 0;switch(15&C){case 4:P=E;break;case 1:case 8:R=E}x[b]={flags:C,ns:S,name:I,nonMinifiedName:I,securityContext:R,suffix:P}}l=l||[];var M=new Array(l.length);for(b=0;b<l.length;b++){var k=u(l[b],2);M[b]={type:0,target:k[0],eventName:k[1],propName:null}}var L=(s=s||[]).map(function(t){var e=u(t,2),n=e[1],i=u(fo(e[0]),2);return[i[0],i[1],n]});return d=function(t){if(t&&t.id===Bi){var e=null!=t.encapsulation&&t.encapsulation!==$t.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Wi++:zi}return t&&t.id===zi&&(t=null),t||null}(d),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:g,matchedQueryIds:y,references:_,ngContentIndex:i,childCount:o,bindings:x,bindingFlags:go(x),outputs:M,element:{ns:m,name:v,attrs:L,template:null,componentProvider:null,componentView:c||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:h||Gi},provider:null,text:null,query:null,ngContent:null}}function xo(t,e,n){var i,o=n.element,r=t.root.selectorOrNode,s=t.renderer;if(t.parent||!r){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var a=oo(t,e,n);a&&s.appendChild(a,i)}else i=s.selectRootElement(r);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var h=u(o.attrs[l],3);s.setAttribute(i,h[1],h[2],h[0])}return i}function bo(t,e,n,i){for(var o=0;o<n.outputs.length;o++){var r=n.outputs[o],s=wo(t,n.nodeIndex,(c=r.eventName,(u=r.target)?u+":"+c:c)),a=r.target,l=t;"component"===r.target&&(a=null,l=e);var h=l.renderer.listen(a||i,r.eventName,s);t.disposables[n.outputIndex+o]=h}var u,c}function wo(t,e,n){return function(i){return qi(t,e,n,i)}}function Co(t,e,n,i){if(!Yi(t,e,n,i))return!1;var o=e.bindings[n],r=Mi(t,e.nodeIndex),s=r.renderElement,a=o.name;switch(15&o.flags){case 1:!function(t,e,n,i,o,r){var s=e.securityContext,a=s?t.root.sanitizer.sanitize(s,r):r;a=null!=a?a.toString():null;var l=t.renderer;null!=r?l.setAttribute(n,o,a,i):l.removeAttribute(n,o,i)}(t,o,s,o.ns,a,i);break;case 2:!function(t,e,n,i){var o=t.renderer;i?o.addClass(e,n):o.removeClass(e,n)}(t,s,a,i);break;case 4:!function(t,e,n,i,o){var r=t.root.sanitizer.sanitize(Ti.STYLE,o);if(null!=r){r=r.toString();var s=e.suffix;null!=s&&(r+=s)}else r=null;var a=t.renderer;null!=r?a.setStyle(n,i,r):a.removeStyle(n,i)}(t,o,s,a,i);break;case 8:!function(t,e,n,i,o){var r=e.securityContext,s=r?t.root.sanitizer.sanitize(r,o):o;t.renderer.setProperty(n,i,s)}(33554432&e.flags&&32&o.flags?r.componentView:t,o,s,a,i)}return!0}var Eo=new Object,To=ji(Ot),So=ji(Ft),Io=ji(ze);function Ro(t,e,n,i){return n=Et(n),{index:-1,deps:io(i,wt(e)),flags:t,token:e,value:n}}function Po(t,e,n){void 0===n&&(n=Ot.THROW_IF_NOT_FOUND);var i,o,r=qt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var s=e.tokenKey;switch(s){case To:case So:case Io:return t}var a=t._def.providersByKey[s];if(a){var l=t._providers[a.index];return void 0===l&&(l=t._providers[a.index]=Mo(t,a)),l===Eo?void 0:l}if(e.token.ngInjectableDef&&(i=t,null!=(o=e.token.ngInjectableDef).providedIn&&(function(t,e){return t._def.modules.indexOf(o.providedIn)>-1}(i)||"root"===o.providedIn&&i._def.isRoot))){var h=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:e.token.ngInjectableDef.factory,deps:[],index:h,token:e.token},t._providers[h]=Eo,t._providers[h]=Mo(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{qt(r)}}function Mo(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(Po(t,n[0]));case 2:return new e(Po(t,n[0]),Po(t,n[1]));case 3:return new e(Po(t,n[0]),Po(t,n[1]),Po(t,n[2]));default:for(var o=new Array(i),r=0;r<i;r++)o[r]=Po(t,n[r]);return new(e.bind.apply(e,c([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(Po(t,n[0]));case 2:return e(Po(t,n[0]),Po(t,n[1]));case 3:return e(Po(t,n[0]),Po(t,n[1]),Po(t,n[2]));default:for(var o=Array(i),r=0;r<i;r++)o[r]=Po(t,n[r]);return e.apply(void 0,c(o))}}(t,e.value,e.deps);break;case 2048:n=Po(t,e.deps[0]);break;case 256:n=e.value}return n===Eo||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Eo:n}function ko(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var i=n[e];return i.viewContainerParent=null,Oo(n,e),Di.dirtyParentQueries(i),Fo(i),i}function Lo(t,e,n){var i=e?$i(e,e.def.lastRenderRootNode):t.renderElement;ao(n,2,n.renderer.parentNode(i),n.renderer.nextSibling(i),void 0)}function Fo(t){ao(t,3,null,null,void 0)}function Do(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Oo(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Ao=new Object;function No(t,e,n,i,o,r){return new Go(t,e,n,i,o,r)}var Go=function(t){function e(e,n,i,o,r,s){var a=t.call(this)||this;return a.selector=e,a.componentType=n,a._inputs=o,a._outputs=r,a.ngContentSelectors=s,a.viewDefFactory=i,a}return o(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,i){if(!i)throw new Error("ngModule should be provided");var o=so(this.viewDefFactory),r=o.nodes[0].element.componentProvider.nodeIndex,s=Di.createRootView(t,e||[],n,o,i,Ao),a=ki(s,r).instance;return n&&s.renderer.setAttribute(Mi(s,0).renderElement,"ng-version",te.full),new Vo(s,new Ho(s),a)},e}(Fe),Vo=function(t){function e(e,n,i){var o=t.call(this)||this;return o._view=e,o._viewRef=n,o._component=i,o._elDef=o._view.def.nodes[0],o.hostView=n,o.changeDetectorRef=n,o.instance=i,o}return o(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new bn(Mi(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Ko(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Le);function jo(t,e,n){return new Bo(t,e,n)}var Bo=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new bn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Ko(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=Qi(t),t=t.parent;return t?new Ko(t,e):new Ko(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=ko(this._data,t);Di.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Ho(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var i=t.createEmbeddedView(e||{});return this.insert(i,n),i},t.prototype.createComponent=function(t,e,n,i,o){var r=n||this.parentInjector;o||t instanceof Be||(o=r.get(ze));var s=t.create(r,i,void 0,o);return this.insert(s.hostView,e),s},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,i,o,r,s=t;return o=s._view,r=(n=this._data).viewContainer._embeddedViews,null!==(i=e)&&void 0!==i||(i=r.length),o.viewContainerParent=this._view,Do(r,i,o),function(t,e){var n=Ji(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var i=n.parent;i;)i.childFlags|=4,i=i.parent}}(0,e.parentNodeDef)}}(n,o),Di.dirtyParentQueries(o),Lo(n,i>0?r[i-1]:null,o),s.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,i,o,r,s,a=this._embeddedViews.indexOf(t._view);return o=e,s=(r=(n=this._data).viewContainer._embeddedViews)[i=a],Oo(r,i),null==o&&(o=r.length),Do(r,o,s),Di.dirtyParentQueries(s),Fo(s),Lo(n,o>0?r[o-1]:null,s),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=ko(this._data,t);e&&Di.destroyView(e)},t.prototype.detach=function(t){var e=ko(this._data,t);return e?new Ho(e):null},t}();function zo(t){return new Ho(t)}var Ho=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return ao(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Xi(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Di.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Di.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Di.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Fo(this._view),Di.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Wo(t,e){return new Uo(t,e)}var Uo=function(t){function e(e,n){var i=t.call(this)||this;return i._parentView=e,i._def=n,i}return o(e,t),e.prototype.createEmbeddedView=function(t){return new Ho(Di.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new bn(Mi(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Cn);function Yo(t,e){return new Ko(t,e)}var Ko=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=Ot.THROW_IF_NOT_FOUND),Di.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:ji(t)},e)},t}();function Xo(t,e){var n=t.def.nodes[e];if(1&n.flags){var i=Mi(t,n.nodeIndex);return n.element.template?i.template:i.renderElement}if(2&n.flags)return Pi(t,n.nodeIndex).renderText;if(20240&n.flags)return ki(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function Zo(t){return new qo(t.renderer)}var qo=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=u(fo(e),2),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t),o=0;o<e.length;o++)this.delegate.insertBefore(n,e[o],i)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=u(fo(e),2),o=i[0],r=i[1];null!=n?this.delegate.setAttribute(t,r,n,o):this.delegate.removeAttribute(t,r,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Jo(t,e,n,i){return new Qo(t,e,n,i)}var Qo=function(){function t(t,e,n,i){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),i=0;i<e.providers.length;i++){var o=e.providers[i];4096&o.flags||void 0===n[i]&&(n[i]=Mo(t,o))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=Ot.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var i=0;return 4&n?i|=1:2&n&&(i|=4),Po(this,{token:t,tokenKey:ji(t),flags:i},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Ve)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+wt(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,i=new Set,o=0;o<n.providers.length;o++)if(131072&n.providers[o].flags){var r=t._providers[o];if(r&&r!==Eo){var s=r.ngOnDestroy;"function"!=typeof s||i.has(r)||(s.apply(r),i.add(r))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),$o=ji(function(){}),tr=ji(xn),er=ji(bn),nr=ji(En),ir=ji(Cn),or=ji(Tn),rr=ji(Ot),sr=ji(Ft);function ar(t,e,n,i,o,r,s,a){var l=[];if(s)for(var h in s){var c=u(s[h],2);l[c[0]]={flags:8,name:h,nonMinifiedName:c[1],ns:null,securityContext:null,suffix:null}}var d=[];if(a)for(var p in a)d.push({type:1,propName:p,target:null,eventName:a[p]});return hr(t,e|=16384,n,i,o,o,r,l,d)}function lr(t,e,n,i,o){return hr(-1,t,e,0,n,i,o)}function hr(t,e,n,i,o,r,s,a,l){var h=no(n),u=h.matchedQueries,c=h.references,d=h.matchedQueryIds;l||(l=[]),a||(a=[]),r=Et(r);var p=io(s,wt(o));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:d,references:c,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:go(a),outputs:l,element:null,provider:{token:o,value:r,deps:p},text:null,query:null,ngContent:null}}function ur(t,e){return fr(t,e)}function cr(t,e){for(var n=t;n.parent&&!to(n);)n=n.parent;return gr(n.parent,Qi(n),!0,e.provider.value,e.provider.deps)}function dr(t,e){var n=gr(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var o=e.outputs[i],r=n[o.propName].subscribe(pr(t,e.parent.nodeIndex,o.eventName));t.disposables[e.outputIndex+i]=r.unsubscribe.bind(r)}return n}function pr(t,e,n){return function(i){return qi(t,e,n,i)}}function fr(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return gr(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,o){var r=o.length;switch(r){case 0:return i();case 1:return i(yr(t,e,n,o[0]));case 2:return i(yr(t,e,n,o[0]),yr(t,e,n,o[1]));case 3:return i(yr(t,e,n,o[0]),yr(t,e,n,o[1]),yr(t,e,n,o[2]));default:for(var s=Array(r),a=0;a<r;a++)s[a]=yr(t,e,n,o[a]);return i.apply(void 0,c(s))}}(t,e.parent,n,i.value,i.deps);case 2048:return yr(t,e.parent,n,i.deps[0]);case 256:return i.value}}function gr(t,e,n,i,o){var r=o.length;switch(r){case 0:return new i;case 1:return new i(yr(t,e,n,o[0]));case 2:return new i(yr(t,e,n,o[0]),yr(t,e,n,o[1]));case 3:return new i(yr(t,e,n,o[0]),yr(t,e,n,o[1]),yr(t,e,n,o[2]));default:for(var s=new Array(r),a=0;a<r;a++)s[a]=yr(t,e,n,o[a]);return new(i.bind.apply(i,c([void 0],s)))}}var _r={};function yr(t,e,n,i,o){if(void 0===o&&(o=Ot.THROW_IF_NOT_FOUND),8&i.flags)return i.token;var r=t;2&i.flags&&(o=null);var s=i.tokenKey;s===or&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);for(var a=t;a;){if(e)switch(s){case $o:return Zo(mr(a,e,n));case tr:return mr(a,e,n).renderer;case er:return new bn(Mi(a,e.nodeIndex).renderElement);case nr:return Mi(a,e.nodeIndex).viewContainer;case ir:if(e.element.template)return Mi(a,e.nodeIndex).template;break;case or:return zo(mr(a,e,n));case rr:case sr:return Yo(a,e);default:var l=(n?e.element.allProviders:e.element.publicProviders)[s];if(l){var h=ki(a,l.nodeIndex);return h||(h={instance:fr(a,l)},a.nodes[l.nodeIndex]=h),h.instance}}n=to(a),e=Qi(a),a=a.parent,4&i.flags&&(a=null)}var u=r.root.injector.get(i.token,_r);return u!==_r||o===_r?u:r.root.ngModule.injector.get(i.token,o)}function mr(t,e,n){var i;if(n)i=Mi(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!to(i);)i=i.parent;return i}function vr(t,e,n,i,o,r){if(32768&n.flags){var s=Mi(t,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(e.instance[n.bindings[i].name]=o,524288&n.flags){r=r||{};var a=Ln.unwrap(t.oldValues[n.bindingIndex+i]);r[n.bindings[i].nonMinifiedName]=new Fn(a,o,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=o,r}function xr(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,i=0,o=0;o<n.length;o++){var r=n[o],s=r.parent;for(!s&&r.flags&e&&wr(t,o,r.flags&e,i++),0==(r.childFlags&e)&&(o+=r.childCount);s&&1&s.flags&&o===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(i=br(t,s,e,i)),s=s.parent}}function br(t,e,n,i){for(var o=e.nodeIndex+1;o<=e.nodeIndex+e.childCount;o++){var r=t.def.nodes[o];r.flags&n&&wr(t,o,r.flags&n,i++),o+=r.childCount}return i}function wr(t,e,n,i){var o=ki(t,e);if(o){var r=o.instance;r&&(Di.setCurrentNode(t,e),1048576&n&&Ri(t,512,i)&&r.ngAfterContentInit(),2097152&n&&r.ngAfterContentChecked(),4194304&n&&Ri(t,768,i)&&r.ngAfterViewInit(),8388608&n&&r.ngAfterViewChecked(),131072&n&&r.ngOnDestroy())}}function Cr(t){for(var e=t.def.nodeMatchedQueries;t.parent&&eo(t);){var n=t.parentNodeDef;t=t.parent;for(var i=n.nodeIndex+n.childCount,o=0;o<=i;o++)67108864&(r=t.def.nodes[o]).flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&Fi(t,o).setDirty(),!(1&r.flags&&o+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(o+=r.childCount)}if(134217728&t.def.nodeFlags)for(o=0;o<t.def.nodes.length;o++){var r;134217728&(r=t.def.nodes[o]).flags&&536870912&r.flags&&Fi(t,o).setDirty(),o+=r.childCount}}function Er(t,e){var n=Fi(t,e.nodeIndex);if(n.dirty){var i,o=void 0;if(67108864&e.flags){var r=e.parent.parent;o=Tr(t,r.nodeIndex,r.nodeIndex+r.childCount,e.query,[]),i=ki(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(o=Tr(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(o);for(var s=e.query.bindings,a=!1,l=0;l<s.length;l++){var h=s[l],u=void 0;switch(h.bindingType){case 0:u=n.first;break;case 1:u=n,a=!0}i[h.propName]=u}a&&n.notifyOnChanges()}}function Tr(t,e,n,i,o){for(var r=e;r<=n;r++){var s=t.def.nodes[r],a=s.matchedQueries[i.id];if(null!=a&&o.push(Sr(t,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&i.filterId)===i.filterId){var l=Mi(t,r);if((s.childMatchedQueries&i.filterId)===i.filterId&&(Tr(t,r+1,r+s.childCount,i,o),r+=s.childCount),16777216&s.flags)for(var h=l.viewContainer._embeddedViews,u=0;u<h.length;u++){var c=h[u],d=Ji(c);d&&d===l&&Tr(c,0,c.def.nodes.length-1,i,o)}var p=l.template._projectedViews;if(p)for(u=0;u<p.length;u++){var f=p[u];Tr(f,0,f.def.nodes.length-1,i,o)}}(s.childMatchedQueries&i.filterId)!==i.filterId&&(r+=s.childCount)}return o}function Sr(t,e,n){if(null!=n)switch(n){case 1:return Mi(t,e.nodeIndex).renderElement;case 0:return new bn(Mi(t,e.nodeIndex).renderElement);case 2:return Mi(t,e.nodeIndex).template;case 3:return Mi(t,e.nodeIndex).viewContainer;case 4:return ki(t,e.nodeIndex).instance}}function Ir(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Rr(t,e,n){var i=oo(t,e,n);i&&ho(t,n.ngContent.index,1,i,null,void 0)}function Pr(t,e,n){for(var i=new Array(n.length-1),o=1;o<n.length;o++)i[o-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[o]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Mr(t,e,n){var i,o=t.renderer;i=o.createText(n.text.prefix);var r=oo(t,e,n);return r&&o.appendChild(r,i),{renderText:i}}function kr(t,e){return(null!=t?t.toString():"")+e.suffix}function Lr(t,e,n,i){for(var o=0,r=0,s=0,a=0,l=0,h=null,u=null,c=!1,d=!1,p=null,f=0;f<e.length;f++){var g=e[f];if(g.nodeIndex=f,g.parent=h,g.bindingIndex=o,g.outputIndex=r,g.renderParent=u,s|=g.flags,l|=g.matchedQueryIds,g.element){var _=g.element;_.publicProviders=h?h.element.publicProviders:Object.create(null),_.allProviders=_.publicProviders,c=!1,d=!1,g.element.template&&(l|=g.element.template.nodeMatchedQueries)}if(Dr(h,g,e.length),o+=g.bindings.length,r+=g.outputs.length,!u&&3&g.flags&&(p=g),20224&g.flags){c||(c=!0,h.element.publicProviders=Object.create(h.element.publicProviders),h.element.allProviders=h.element.publicProviders);var y=0!=(32768&g.flags);0==(8192&g.flags)||y?h.element.publicProviders[ji(g.provider.token)]=g:(d||(d=!0,h.element.allProviders=Object.create(h.element.publicProviders)),h.element.allProviders[ji(g.provider.token)]=g),y&&(h.element.componentProvider=g)}if(h?(h.childFlags|=g.flags,h.directChildFlags|=g.flags,h.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(h.childMatchedQueries|=g.element.template.nodeMatchedQueries)):a|=g.flags,g.childCount>0)h=g,Fr(g)||(u=g);else for(;h&&f===h.nodeIndex+h.childCount;){var m=h.parent;m&&(m.childFlags|=h.childFlags,m.childMatchedQueries|=h.childMatchedQueries),u=(h=m)&&Fr(h)?h.renderParent:h}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||Gi,updateRenderer:i||Gi,handleEvent:function(t,n,i,o){return e[n].element.handleEvent(t,i,o)},bindingCount:o,outputCount:r,lastRenderRootNode:p}}function Fr(t){return 0!=(1&t.flags)&&null===t.element.name}function Dr(t,e,n){var i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var o=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=o&&e.nodeIndex+e.childCount>o)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Or(t,e,n,i){var o=Gr(t.root,t.renderer,t,e,n);return Vr(o,t.component,i),jr(o),o}function Ar(t,e,n){var i=Gr(t,t.renderer,null,null,e);return Vr(i,n,n),jr(i),i}function Nr(t,e,n,i){var o,r=e.element.componentRendererType;return o=r?t.root.rendererFactory.createRenderer(i,r):t.root.renderer,Gr(t.root,o,t,e.element.componentProvider,n)}function Gr(t,e,n,i,o){var r=new Array(o.nodes.length),s=o.outputCount?new Array(o.outputCount):null;return{def:o,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:r,state:13,root:t,renderer:e,oldValues:new Array(o.bindingCount),disposables:s,initIndex:-1}}function Vr(t,e,n){t.component=e,t.context=n}function jr(t){var e;to(t)&&(e=Mi(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,i=t.nodes,o=0;o<n.nodes.length;o++){var r=n.nodes[o];Di.setCurrentNode(t,o);var s=void 0;switch(201347067&r.flags){case 1:var a=xo(t,e,r),l=void 0;if(33554432&r.flags){var h=so(r.element.componentView);l=Di.createComponentView(t,r,h,a)}bo(t,l,r,a),s={renderElement:a,componentView:l,viewContainer:null,template:r.element.template?Wo(t,r):void 0},16777216&r.flags&&(s.viewContainer=jo(t,r,s));break;case 2:s=Mr(t,e,r);break;case 512:case 1024:case 2048:case 256:(s=i[o])||4096&r.flags||(s={instance:ur(t,r)});break;case 16:s={instance:cr(t,r)};break;case 16384:(s=i[o])||(s={instance:dr(t,r)}),32768&r.flags&&Vr(Mi(t,r.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new wn;break;case 8:Rr(t,e,r),s=void 0}i[o]=s}Zr(t,Xr.CreateViewNodes),$r(t,201326592,268435456,0)}function Br(t){Wr(t),Di.updateDirectives(t,1),qr(t,Xr.CheckNoChanges),Di.updateRenderer(t,1),Zr(t,Xr.CheckNoChanges),t.state&=-97}function zr(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Ii(t,0,256),Wr(t),Di.updateDirectives(t,0),qr(t,Xr.CheckAndUpdate),$r(t,67108864,536870912,0);var e=Ii(t,256,512);xr(t,2097152|(e?1048576:0)),Di.updateRenderer(t,0),Zr(t,Xr.CheckAndUpdate),$r(t,134217728,536870912,0),xr(t,8388608|((e=Ii(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Ii(t,768,1024)}function Hr(t,e,n,i,o,r,s,a,l,h,u,d,p){return 0===n?function(t,e,n,i,o,r,s,a,l,h,u,c){switch(201347067&e.flags){case 1:return function(t,e,n,i,o,r,s,a,l,h,u,c){var d=e.bindings.length,p=!1;return d>0&&Co(t,e,0,n)&&(p=!0),d>1&&Co(t,e,1,i)&&(p=!0),d>2&&Co(t,e,2,o)&&(p=!0),d>3&&Co(t,e,3,r)&&(p=!0),d>4&&Co(t,e,4,s)&&(p=!0),d>5&&Co(t,e,5,a)&&(p=!0),d>6&&Co(t,e,6,l)&&(p=!0),d>7&&Co(t,e,7,h)&&(p=!0),d>8&&Co(t,e,8,u)&&(p=!0),d>9&&Co(t,e,9,c)&&(p=!0),p}(t,e,n,i,o,r,s,a,l,h,u,c);case 2:return function(t,e,n,i,o,r,s,a,l,h,u,c){var d=!1,p=e.bindings,f=p.length;if(f>0&&Yi(t,e,0,n)&&(d=!0),f>1&&Yi(t,e,1,i)&&(d=!0),f>2&&Yi(t,e,2,o)&&(d=!0),f>3&&Yi(t,e,3,r)&&(d=!0),f>4&&Yi(t,e,4,s)&&(d=!0),f>5&&Yi(t,e,5,a)&&(d=!0),f>6&&Yi(t,e,6,l)&&(d=!0),f>7&&Yi(t,e,7,h)&&(d=!0),f>8&&Yi(t,e,8,u)&&(d=!0),f>9&&Yi(t,e,9,c)&&(d=!0),d){var g=e.text.prefix;f>0&&(g+=kr(n,p[0])),f>1&&(g+=kr(i,p[1])),f>2&&(g+=kr(o,p[2])),f>3&&(g+=kr(r,p[3])),f>4&&(g+=kr(s,p[4])),f>5&&(g+=kr(a,p[5])),f>6&&(g+=kr(l,p[6])),f>7&&(g+=kr(h,p[7])),f>8&&(g+=kr(u,p[8])),f>9&&(g+=kr(c,p[9]));var _=Pi(t,e.nodeIndex).renderText;t.renderer.setValue(_,g)}return d}(t,e,n,i,o,r,s,a,l,h,u,c);case 16384:return function(t,e,n,i,o,r,s,a,l,h,u,c){var d=ki(t,e.nodeIndex),p=d.instance,f=!1,g=void 0,_=e.bindings.length;return _>0&&Ui(t,e,0,n)&&(f=!0,g=vr(t,d,e,0,n,g)),_>1&&Ui(t,e,1,i)&&(f=!0,g=vr(t,d,e,1,i,g)),_>2&&Ui(t,e,2,o)&&(f=!0,g=vr(t,d,e,2,o,g)),_>3&&Ui(t,e,3,r)&&(f=!0,g=vr(t,d,e,3,r,g)),_>4&&Ui(t,e,4,s)&&(f=!0,g=vr(t,d,e,4,s,g)),_>5&&Ui(t,e,5,a)&&(f=!0,g=vr(t,d,e,5,a,g)),_>6&&Ui(t,e,6,l)&&(f=!0,g=vr(t,d,e,6,l,g)),_>7&&Ui(t,e,7,h)&&(f=!0,g=vr(t,d,e,7,h,g)),_>8&&Ui(t,e,8,u)&&(f=!0,g=vr(t,d,e,8,u,g)),_>9&&Ui(t,e,9,c)&&(f=!0,g=vr(t,d,e,9,c,g)),g&&p.ngOnChanges(g),65536&e.flags&&Ri(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,i,o,r,s,a,l,h,u,c);case 32:case 64:case 128:return function(t,e,n,i,o,r,s,a,l,h,u,c){var d=e.bindings,p=!1,f=d.length;if(f>0&&Yi(t,e,0,n)&&(p=!0),f>1&&Yi(t,e,1,i)&&(p=!0),f>2&&Yi(t,e,2,o)&&(p=!0),f>3&&Yi(t,e,3,r)&&(p=!0),f>4&&Yi(t,e,4,s)&&(p=!0),f>5&&Yi(t,e,5,a)&&(p=!0),f>6&&Yi(t,e,6,l)&&(p=!0),f>7&&Yi(t,e,7,h)&&(p=!0),f>8&&Yi(t,e,8,u)&&(p=!0),f>9&&Yi(t,e,9,c)&&(p=!0),p){var g=Li(t,e.nodeIndex),_=void 0;switch(201347067&e.flags){case 32:_=new Array(d.length),f>0&&(_[0]=n),f>1&&(_[1]=i),f>2&&(_[2]=o),f>3&&(_[3]=r),f>4&&(_[4]=s),f>5&&(_[5]=a),f>6&&(_[6]=l),f>7&&(_[7]=h),f>8&&(_[8]=u),f>9&&(_[9]=c);break;case 64:_={},f>0&&(_[d[0].name]=n),f>1&&(_[d[1].name]=i),f>2&&(_[d[2].name]=o),f>3&&(_[d[3].name]=r),f>4&&(_[d[4].name]=s),f>5&&(_[d[5].name]=a),f>6&&(_[d[6].name]=l),f>7&&(_[d[7].name]=h),f>8&&(_[d[8].name]=u),f>9&&(_[d[9].name]=c);break;case 128:var y=n;switch(f){case 1:_=y.transform(n);break;case 2:_=y.transform(i);break;case 3:_=y.transform(i,o);break;case 4:_=y.transform(i,o,r);break;case 5:_=y.transform(i,o,r,s);break;case 6:_=y.transform(i,o,r,s,a);break;case 7:_=y.transform(i,o,r,s,a,l);break;case 8:_=y.transform(i,o,r,s,a,l,h);break;case 9:_=y.transform(i,o,r,s,a,l,h,u);break;case 10:_=y.transform(i,o,r,s,a,l,h,u,c)}}g.value=_}return p}(t,e,n,i,o,r,s,a,l,h,u,c);default:throw"unreachable"}}(t,e,i,o,r,s,a,l,h,u,d,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var i=!1,o=0;o<n.length;o++)Co(t,e,o,n[o])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){for(var i=e.bindings,o=!1,r=0;r<n.length;r++)Yi(t,e,r,n[r])&&(o=!0);if(o){var s="";for(r=0;r<n.length;r++)s+=kr(n[r],i[r]);s=e.text.prefix+s;var a=Pi(t,e.nodeIndex).renderText;t.renderer.setValue(a,s)}return o}(t,e,n);case 16384:return function(t,e,n){for(var i=ki(t,e.nodeIndex),o=i.instance,r=!1,s=void 0,a=0;a<n.length;a++)Ui(t,e,a,n[a])&&(r=!0,s=vr(t,i,e,a,n[a],s));return s&&o.ngOnChanges(s),65536&e.flags&&Ri(t,256,e.nodeIndex)&&o.ngOnInit(),262144&e.flags&&o.ngDoCheck(),r}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,o=!1,r=0;r<n.length;r++)Yi(t,e,r,n[r])&&(o=!0);if(o){var s=Li(t,e.nodeIndex),a=void 0;switch(201347067&e.flags){case 32:a=n;break;case 64:for(a={},r=0;r<n.length;r++)a[i[r].name]=n[r];break;case 128:var l=n[0],h=n.slice(1);a=l.transform.apply(l,c(h))}s.value=a}return o}(t,e,n);default:throw"unreachable"}}(t,e,i)}function Wr(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(4&i.flags){var o=Mi(t,n).template._projectedViews;if(o)for(var r=0;r<o.length;r++){var s=o[r];s.state|=32,Zi(s,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function Ur(t,e,n,i,o,r,s,a,l,h,u,c,d){return 0===n?function(t,e,n,i,o,r,s,a,l,h,u,c){var d=e.bindings.length;d>0&&Ki(t,e,0,n),d>1&&Ki(t,e,1,i),d>2&&Ki(t,e,2,o),d>3&&Ki(t,e,3,r),d>4&&Ki(t,e,4,s),d>5&&Ki(t,e,5,a),d>6&&Ki(t,e,6,l),d>7&&Ki(t,e,7,h),d>8&&Ki(t,e,8,u),d>9&&Ki(t,e,9,c)}(t,e,i,o,r,s,a,l,h,u,c,d):function(t,e,n){for(var i=0;i<n.length;i++)Ki(t,e,i,n[i])}(t,e,i),!1}function Yr(t,e){if(Fi(t,e.nodeIndex).dirty)throw Oi(Di.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function Kr(t){if(!(128&t.state)){if(qr(t,Xr.Destroy),Zr(t,Xr.Destroy),xr(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Ji(t);if(e){var n=e.template._projectedViews;n&&(Oo(n,n.indexOf(t)),Di.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var i=t.def.nodes[n];1&i.flags?t.renderer.destroyNode(Mi(t,n).renderElement):2&i.flags?t.renderer.destroyNode(Pi(t,n).renderText):(67108864&i.flags||134217728&i.flags)&&Fi(t,n).destroy()}}(t),to(t)&&t.renderer.destroy(),t.state|=128}}var Xr=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function Zr(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var o=n.nodes[i];33554432&o.flags?Jr(Mi(t,i).componentView,e):0==(33554432&o.childFlags)&&(i+=o.childCount)}}function qr(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var o=n.nodes[i];if(16777216&o.flags)for(var r=Mi(t,i).viewContainer._embeddedViews,s=0;s<r.length;s++)Jr(r[s],e);else 0==(16777216&o.childFlags)&&(i+=o.childCount)}}function Jr(t,e){var n=t.state;switch(e){case Xr.CheckNoChanges:0==(128&n)&&(12==(12&n)?Br(t):64&n&&Qr(t,Xr.CheckNoChangesProjectedViews));break;case Xr.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Br(t):64&n&&Qr(t,e));break;case Xr.CheckAndUpdate:0==(128&n)&&(12==(12&n)?zr(t):64&n&&Qr(t,Xr.CheckAndUpdateProjectedViews));break;case Xr.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?zr(t):64&n&&Qr(t,e));break;case Xr.Destroy:Kr(t);break;case Xr.CreateViewNodes:jr(t)}}function Qr(t,e){qr(t,e),Zr(t,e)}function $r(t,e,n,i){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var o=t.def.nodes.length,r=0;r<o;r++){var s=t.def.nodes[r];if(s.flags&e&&s.flags&n)switch(Di.setCurrentNode(t,s.nodeIndex),i){case 0:Er(t,s);break;case 1:Yr(t,s)}s.childFlags&e&&s.childFlags&n||(r+=s.childCount)}}var ts=!1;function es(t,e,n,i,o,r){return Ar(is(t,o,o.injector.get(mn),e,n),i,r)}function ns(t,e,n,i,o,r){var s=o.injector.get(mn),a=is(t,o,new Ns(s),e,n),l=ps(i);return Os(ws.create,Ar,null,[a,l,r])}function is(t,e,n,i,o){var r=e.injector.get(Si),s=e.injector.get(ae);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:o,sanitizer:r,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:s}}function os(t,e,n,i){var o=ps(n);return Os(ws.create,Or,null,[t,e,o,i])}function rs(t,e,n,i){return n=hs.get(e.element.componentProvider.provider.token)||ps(n),Os(ws.create,Nr,null,[t,e,n,i])}function ss(t,e,n,i){return Jo(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===as.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var i=as.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)}),t.modules.forEach(function(t){ls.forEach(function(i,o){o.ngInjectableDef.providedIn===t&&(e=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var i=t.providers[e];n&&(i.flags|=4096);var o=as.get(i.token);o&&(i.flags=-3841&i.flags|o.flags,i.deps=io(o.deps),i.value=o.value)}if(ls.size>0){var r=new Set(t.modules);ls.forEach(function(e,i){if(r.has(i.ngInjectableDef.providedIn)){var o={token:i,flags:e.flags|(n?4096:0),deps:io(e.deps),value:e.value,index:t.providers.length};t.providers.push(o),t.providersByKey[ji(i)]=o}})}}(t=t.factory(function(){return Gi})),t):t}(i))}var as=new Map,ls=new Map,hs=new Map;function us(t){as.set(t.token,t),"function"==typeof t.token&&t.token.ngInjectableDef&&"function"==typeof t.token.ngInjectableDef.providedIn&&ls.set(t.token,t)}function cs(t,e){var n=so(so(e.viewDefFactory).nodes[0].element.componentView);hs.set(t,n)}function ds(){as.clear(),ls.clear(),hs.clear()}function ps(t){if(0===as.size)return t;var e=function(t){for(var e=[],n=null,i=0;i<t.nodes.length;i++){var o=t.nodes[i];1&o.flags&&(n=o),n&&3840&o.flags&&as.has(o.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Gi});for(var n=0;n<e.length;n++)i(t,e[n]);return t;function i(t,e){for(var n=e+1;n<t.nodes.length;n++){var i=t.nodes[n];if(1&i.flags)return;if(3840&i.flags){var o=i.provider,r=as.get(o.token);r&&(i.flags=-3841&i.flags|r.flags,o.deps=io(r.deps),o.value=r.value)}}}}function fs(t,e,n,i,o,r,s,a,l,h,u,c,d){var p=t.def.nodes[e];return Hr(t,p,n,i,o,r,s,a,l,h,u,c,d),224&p.flags?Li(t,e).value:void 0}function gs(t,e,n,i,o,r,s,a,l,h,u,c,d){var p=t.def.nodes[e];return Ur(t,p,n,i,o,r,s,a,l,h,u,c,d),224&p.flags?Li(t,e).value:void 0}function _s(t){return Os(ws.detectChanges,zr,null,[t])}function ys(t){return Os(ws.checkNoChanges,Br,null,[t])}function ms(t){return Os(ws.destroy,Kr,null,[t])}var vs,xs,bs,ws=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Cs(t,e){xs=t,bs=e}function Es(t,e,n,i){return Cs(t,e),Os(ws.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function Ts(t,e){if(128&t.state)throw Ni(ws[vs]);return Cs(t,ks(t,0)),t.def.updateDirectives(function(t,n,i){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var s=t.def.nodes[n];return 0===e?Is(t,s,i,o):Rs(t,s,i,o),16384&s.flags&&Cs(t,ks(t,n)),224&s.flags?Li(t,s.nodeIndex).value:void 0},t)}function Ss(t,e){if(128&t.state)throw Ni(ws[vs]);return Cs(t,Ls(t,0)),t.def.updateRenderer(function(t,n,i){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var s=t.def.nodes[n];return 0===e?Is(t,s,i,o):Rs(t,s,i,o),3&s.flags&&Cs(t,Ls(t,n)),224&s.flags?Li(t,s.nodeIndex).value:void 0},t)}function Is(t,e,n,i){if(Hr.apply(void 0,c([t,e,n],i))){var o=1===n?i[0]:i;if(16384&e.flags){for(var r={},s=0;s<e.bindings.length;s++){var a=e.bindings[s],l=o[s];8&a.flags&&(r[(p=a.nonMinifiedName,"ng-reflect-"+(p=p.replace(/[$@]/g,"_").replace(Ps,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Ms(l))}var h=e.parent,u=Mi(t,h.nodeIndex).renderElement;if(h.element.name)for(var d in r)null!=(l=r[d])?t.renderer.setAttribute(u,d,l):t.renderer.removeAttribute(u,d);else t.renderer.setValue(u,"bindings="+JSON.stringify(r,null,2))}}var p}function Rs(t,e,n,i){Ur.apply(void 0,c([t,e,n],i))}var Ps=/([A-Z])/g;function Ms(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function ks(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(16384&i.flags&&i.bindings&&i.bindings.length)return n}return null}function Ls(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(3&i.flags&&i.bindings&&i.bindings.length)return n}return null}var Fs=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,i=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=Qi(i),i=i.parent;this.elDef=n,this.elView=i}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Mi(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Yo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Ds(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Ds(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!to(t);)t=t.parent;return t.parent?Mi(t.parent,Qi(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?$i(this.view,this.nodeDef):$i(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var r=function(t,e){for(var n=-1,i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(e,n),s=-1;e.factory(function(){var e;return++s===r?(e=t.error).bind.apply(e,c([t],i)):Gi}),s<r&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,c(i)))},t}();function Ds(t,e,n){for(var i in e.references)n[i]=Sr(t,e,e.references[i])}function Os(t,e,n,i){var o=vs,r=xs,s=bs;try{vs=t;var a=e.apply(n,i);return xs=r,bs=s,vs=o,a}catch(t){if(oe(t)||!xs)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Ai(t,e),t}(t,As())}}function As(){return xs?new Fs(xs,bs):null}var Ns=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new Gs(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),Gs=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){Rn.delete(t.nativeNode)}(Pn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),i=As();if(i){var o=new In(n,null,i);o.name=t,Mn(o)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=As();return n&&Mn(new Sn(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=As();return n&&Mn(new Sn(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Pn(t),i=Pn(e);n&&i&&n instanceof In&&n.addChild(i),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var i=Pn(t),o=Pn(e),r=Pn(n);i&&o&&i instanceof In&&i.insertBefore(r,o),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Pn(t),i=Pn(e);n&&i&&n instanceof In&&n.removeChild(i),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=As();return n&&Mn(new In(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,i){var o=Pn(t);o&&o instanceof In&&(o.attributes[i?i+":"+e:e]=n),this.delegate.setAttribute(t,e,n,i)},t.prototype.removeAttribute=function(t,e,n){var i=Pn(t);i&&i instanceof In&&(i.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Pn(t);n&&n instanceof In&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Pn(t);n&&n instanceof In&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,i){var o=Pn(t);o&&o instanceof In&&(o.styles[e]=n),this.delegate.setStyle(t,e,n,i)},t.prototype.removeStyle=function(t,e,n){var i=Pn(t);i&&i instanceof In&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var i=Pn(t);i&&i instanceof In&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var i=Pn(t);i&&i.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}(),Vs=function(t){function e(e,n,i){var o=t.call(this)||this;return o.moduleType=e,o._bootstrapComponents=n,o._ngModuleDefFactory=i,o}return o(e,t),e.prototype.create=function(t){!function(){if(!ts){ts=!0;var t=un()?{setCurrentNode:Cs,createRootView:ns,createEmbeddedView:os,createComponentView:rs,createNgModuleRef:ss,overrideProvider:us,overrideComponentView:cs,clearOverrides:ds,checkAndUpdateView:_s,checkNoChangesView:ys,destroyView:ms,createDebugContext:function(t,e){return new Fs(t,e)},handleEvent:Es,updateDirectives:Ts,updateRenderer:Ss}:{setCurrentNode:function(){},createRootView:es,createEmbeddedView:Or,createComponentView:Nr,createNgModuleRef:Jo,overrideProvider:Gi,overrideComponentView:Gi,clearOverrides:Gi,checkAndUpdateView:zr,checkNoChangesView:Br,destroyView:Kr,createDebugContext:function(t,e){return new Fs(t,e)},handleEvent:function(t,e,n,i){return t.def.handleEvent(t,e,n,i)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?fs:gs,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?fs:gs,t)}};Di.setCurrentNode=t.setCurrentNode,Di.createRootView=t.createRootView,Di.createEmbeddedView=t.createEmbeddedView,Di.createComponentView=t.createComponentView,Di.createNgModuleRef=t.createNgModuleRef,Di.overrideProvider=t.overrideProvider,Di.overrideComponentView=t.overrideComponentView,Di.clearOverrides=t.clearOverrides,Di.checkAndUpdateView=t.checkAndUpdateView,Di.checkNoChangesView=t.checkNoChangesView,Di.destroyView=t.destroyView,Di.resolveDep=yr,Di.createDebugContext=t.createDebugContext,Di.handleEvent=t.handleEvent,Di.updateDirectives=t.updateDirectives,Di.updateRenderer=t.updateRenderer,Di.dirtyParentQueries=Cr}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),i={};for(var o in t.providersByKey)i[o]=t.providersByKey[o];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:i}}(so(this._ngModuleDefFactory));return Di.createNgModuleRef(this.moduleType,t||Ot.NULL,this._bootstrapComponents,e)},e}(He),js=16,Bs=0,zs=1,Hs=2,Ws=3,Us=4,Ys=5,Ks=6,Xs=7,Zs=8,qs=9,Js=10,Qs=11,$s=14;function ta(t,e,n){t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked))}function ea(t,e,n){t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked))}function na(t,e,n){null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}function ia(t,e,n){16&t[Us]&&(oa(t[Xs],e.initHooks,e.checkHooks,n),t[Us]&=-17)}function oa(t,e,n,i){var o=i?e:n;o&&ra(t,o)}function ra(t,e){for(var n=0;n<e.length;n+=2)e[n+1].call(t[e[n]])}var sa=0,aa=4,la="ngProjectAs";function ha(t){return!!t.listen}var ua={createRenderer:function(t,e){return document}};function ca(t){return Array.isArray(t)?t[0]:t}function da(t){if(2===t.tNode.type){var e=t.data;return e[Hs]?e[Hs][Ys]:null}return t.tNode.next?t.view[t.tNode.next.index]:null}function pa(t){return t.tNode.child?ca((2===t.tNode.type?t.data:t.view)[t.tNode.child.index]):null}function fa(t){if(-1===t.tNode.index&&2===t.tNode.type){var e=t.data[$s];return-1===e?null:t.view[e].dynamicLContainerNode}var n=t.tNode.parent;return ca(n?t.view[n.index]:t.view[Ys])}var ga=[];function _a(t){for(var e=t[Ys];2===e.tNode.type;)e=(t=t[zs])[Ys];return e}function ya(t,e,n,i,o){0===t?ha(e)?e.insertBefore(n,i,o):n.insertBefore(i,o,!0):1===t?ha(e)?e.removeChild(n,i):n.removeChild(i):2===t&&e.destroyNode(i)}function ma(t){if(-1===t[Bs].childIndex)return null;var e=t[t[Bs].childIndex];return e.data?e.data:e.dynamicLContainerNode.data}function va(t,e){var n;return(n=t[Ys])&&2===n.tNode.type?fa(n).data:t[zs]===e?null:t[zs]}function xa(t){if(t[Bs]){var e=t;!function(t){var e=t[Bs].cleanup;if(null!=e){for(var n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(ca(t[e[n+1]]).native.removeEventListener(e[n],t[Zs][e[n+2]],e[n+3]),n+=2):"number"==typeof e[n]?(0,t[Zs][e[n]])():e[n].call(t[Zs][e[n+1]]);t[Zs]=null}}(e),function(t){var e,n=t[Bs];null!=n&&null!=(e=n.destroyHooks)&&ra(t[Xs],e)}(e),(i=(n=e)[Bs]&&n[Bs].pipeDestroyHooks)&&ra(n,i),-1===e[Bs].id&&ha(e[Qs])&&e[Qs].destroy()}var n,i}var ba,wa,Ca,Ea,Ta,Sa,Ia,Ra,Pa,Ma="__ngHostLNode__",ka=Promise.resolve(null),La=[0,0],Fa=new Array(js).fill(null),Da=!1,Oa=!0;function Aa(t,e){var n=Ra;return Pa=t&&t[Xs],Ta=t&&t[Bs],Ia=t&&1==(1&t[Us]),Oa=t&&Ta.firstTemplatePass,ba=t&&t[Qs],null!=e&&(Ca=e,Ea=!0),Ra=t,Sa=t&&t[Ws],n}function Na(t,e){e||(Da||oa(Pa,Ta.viewHooks,Ta.viewCheckHooks,Ia),Ra[Us]&=-6),Ra[Us]|=16,Ra[Ks]=-1,Aa(t,null)}function Ga(){Da||ia(Ra,Ta,Ia),function(t){for(var e=ma(Ra);null!==e;e=e[Hs])if(e.length<js&&null===e[sa])for(var n=e,i=0;i<n[aa].length;i++){var o=n[aa][i],r=o.data;za(o,r[Bs],r[qs],2)}}(),Da||oa(Pa,Ta.contentHooks,Ta.contentCheckHooks,Ia),Ta.firstTemplatePass=Oa=!1,Va(Ta.hostBindings),function(t){if(null!=t.contentQueries)for(var e=0;e<t.contentQueries.length;e+=2){var n=t.contentQueries[e];t.directives[n].contentQueriesRefresh(n,t.contentQueries[e+1])}}(Ta),function(t){if(null!=t)for(var e=0;e<t.length;e+=2)qa(t[e],t[e+1])}(Ta.components)}function Va(t){if(null!=t)for(var e=Ta.directives,n=0;n<t.length;n+=2){var i=t[n],o=e[i];o.hostBindings&&o.hostBindings(i,t[n+1])}}function ja(t,e,n,i,o){return[e,Ra,null,null,25|i,null,-1,null,null,n,Ra&&Ra[Js],t,o||null,null,-1,null]}function Ba(t,e,n,i,o,r){var s=Ea?Ca:Ca&&fa(Ca),a=s&&s.view===Ra?s.tNode:null,l=(Ea?Sa:Ca&&Ca.queries)||s&&s.queries&&s.queries.child(),h=null!=r,u=function(t,e,n,i,o,r){return{native:i,view:Ra,nodeInjector:n?n.nodeInjector:null,data:o,queries:r,tNode:null,dynamicLContainerNode:null}}(0,0,s,n,h?r:null,l);if(-1===t||2===e)u.tNode=(r?r[Bs].node:null)||Za(e,t,null,null,a,null);else{var c=t+js,d=Ta.data;if(Ra[c]=u,c>=d.length){var p=d[c]=Za(e,c,i,o,a,null);if(!Ea&&Ca){var f=Ca.tNode;f.next=p,f.dynamicContainerNode&&(f.dynamicContainerNode.next=p)}}u.tNode=d[c],Ea&&(Sa=null,(null==Ca.tNode.child&&Ca.view===Ra||2===Ca.tNode.type)&&(Ca.tNode.child=u.tNode))}if(2==(2&e)&&h){var g=r;g[Ys]=u,Oa&&(g[Bs].node=u.tNode)}return Ca=u,Ea=!0,u}function za(t,e,n,i){var o,r=Ea,s=Ca;if(null==t.data[zs]&&t.data[qs]&&!e.template)Qa(t.data[qs]);else try{Ea=!0,Ca=null,o=Aa(t.data,t),Ya(),e.template(i,n),2&i?Ga():t.data[Bs].firstTemplatePass=Oa=!1}finally{Na(o,1==(1&i)),Ea=r,Ca=s}return t}function Ha(t,e,n,i){var o=Aa(e,t);try{wa.begin&&wa.begin(),i?(Ya(),i(Wa(e),n),Ga()):(Da||(ia(Ra,Ta,Ia),oa(Pa,Ta.contentHooks,Ta.contentCheckHooks,Ia)),Va(La),qa(0,js))}finally{wa.end&&wa.end(),Na(o)}}function Wa(t){return 1&t[Us]?3:2}var Ua=null;function Ya(){Ua=null}function Ka(t,e,n,i,o){return{id:t,template:e,viewQuery:o,node:null,data:Fa.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof i?i():i,currentMatches:null}}function Xa(t,e){wa=t;var n=t.createRenderer(null,null);return"string"==typeof e?ha(n)?n.selectRootElement(e):n.querySelector(e):e}function Za(t,e,n,i,o,r){return{type:t,index:e,flags:0,tagName:n,attrs:i,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:r,next:null,child:null,parent:o,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function qa(t,e){var n=Ra[e],i=n.data;Ja(i)&&6&i[Us]&&el(i,n,Pa[t])}function Ja(t){return 8==(8&t[Us])}function Qa(t){for(var e=0;e<t.components.length;e++){var n=t.components[e];Ha(nl(n),$a(n),n)}}function $a(t){for(var e=nl(t).view;e[zs];)e=e[zs];return e}function tl(t){var e=nl(t);el(e.data,e,t)}function el(t,e,n){var i=Aa(t,e),o=t[Bs],r=o.template,s=o.viewQuery;try{Ya(),function(e,n,i){e&&1&t[Us]&&e(1,i)}(s,0,n),r(Wa(t),n),Ga(),function(t,e){t&&t(2,e)}(s,n)}finally{Na(i)}}function nl(t){return t[Ma]}var il=ka;function ol(t){return{components:[],scheduler:t,clean:il}}var rl=function(){function t(t,e){this._view=t,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=e}return t.prototype._setComponentContext=function(t,e){this._view=t,this.context=e},Object.defineProperty(t.prototype,"destroyed",{get:function(){return 32==(32&this._view[Us])},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t,e;this._viewContainerRef&&Ja(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),ha(e=(t=this._view)[Qs])&&e.destroyNode&&function(e,n,i,o,r,s){for(var a=t[Ys],l=-1;a;){var h=null,u=a.tNode.type;if(3===u)ya(2,o,null,a.native,s),a.dynamicLContainerNode&&ya(2,o,null,a.dynamicLContainerNode.native,s);else if(0===u){ya(2,o,null,a.native,s);var c=a,d=c.dynamicLContainerNode?c.dynamicLContainerNode.data:c.data;(h=d[aa].length?pa(d[aa][0]):null)&&(s=c.dynamicLContainerNode?c.dynamicLContainerNode.native:c.native)}else if(1===u){var p=_a(a.view),f=p.tNode.projection[a.tNode.projection];ga[++l]=a,h=f?p.data[zs][f.index]:null}else h=pa(a);if(null===h)for(null===(h=da(a))&&8192&a.tNode.flags&&(h=da(ga[l--]));a&&!h;){if(null===(a=fa(a))||a===n)return null;a.tNode.next||0!==u||(s=a.native),h=da(a)}a=h}}(0,t[Ys],0,e),function(t){if(-1===t[Bs].childIndex)return xa(t);for(var e=ma(t);e;){var n=null;if(e.length>=js?e[Bs].childIndex>-1&&(n=ma(e)):e[aa].length&&(n=e[aa][0].data),null==n){for(;e&&!e[Hs]&&e!==t;)xa(e),e=va(e,t);xa(e||t),n=e&&e[Hs]}e=n}}(t),t[Us]|=32},t.prototype.onDestroy=function(t){var e,n;n=t,function(t){return t[Zs]||(t[Zs]=[])}(e=this._view).push(n),e[Bs].firstTemplatePass&&function(t){return t[Bs].cleanup||(t[Bs].cleanup=[])}(e).push(e[Zs].length-1,null)},t.prototype.markForCheck=function(){!function(t){for(var e=t;null!=e[zs];)e[Us]|=4,e=e[zs];var n,i;e[Us]|=4,(n=e[qs]).clean==ka&&(n.clean=new Promise(function(t){return i=t}),n.scheduler(function(){Qa(n),i(null),n.clean=ka}))}(this._view)},t.prototype.detach=function(){this._view[Us]&=-9},t.prototype.reattach=function(){this._view[Us]|=8},t.prototype.detectChanges=function(){tl(this.context)},t.prototype.checkNoChanges=function(){!function(t){Da=!0;try{tl(t)}finally{Da=!1}}(this.context)},t.prototype.attachToViewContainerRef=function(t){this._viewContainerRef=t},t.prototype.detachFromAppRef=function(){this._appRef=null},t.prototype.attachToAppRef=function(t){this._appRef=t},t}(),sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.resolveComponentFactory=function(t){return new ul(t.ngComponentDef)},e}(Ve);function al(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var ll=new ct("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return ol(Jt(hl))}}),hl=new ct("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),ul=function(t){function e(e){var n=t.call(this)||this;return n.componentDef=e,n.componentType=e.type,n.selector=e.selectors[0][0],n.ngContentSelectors=[],n}return o(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return al(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return al(this.componentDef.outputs)},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,i){var o,r,s=void 0===n,a=i?i.injector.get(mn):ua,l=s?(o=this.selector,ha(r=a.createRenderer(null,this.componentDef.rendererType)||ba)?r.createElement(o,Ua):null===Ua?r.createElement(o):r.createElementNS(Ua,o)):Xa(a,n),h=i&&!s?i.injector.get(ll):ol(requestAnimationFrame.bind(window)),u=ja(a.createRenderer(l,this.componentDef.rendererType),Ka(-1,null,null,null,null),h,this.componentDef.onPush?4:2);u[Js]=i&&i.injector||null;var c,d,p=Aa(u,null);try{if(a.begin&&a.begin(),d=function(t,e,n,i){Ea=!1,Ca=null;var o,r=Ba(0,3,e,null,null,ja(ba,(o=n.template).ngPrivateData||(o.ngPrivateData=Ka(-1,o,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,i));return Oa&&(r.tNode.flags=4096,n.diPublic&&n.diPublic(n),Ta.directives=[n]),r}(0,l,this.componentDef),h.components.push(c=function(t,e,n){if(Object.defineProperty(e,Ma,{enumerable:!1,value:Ca}),null==Pa&&(Ra[Xs]=Pa=[]),Pa[t]=e,Oa){var i=Ca.tNode.flags;0==(4095&i)?Ca.tNode.flags=t<<14|4096&i|1:Ca.tNode.flags++}else{var o=n.diPublic;o&&o(n)}return null!=n.attributes&&3==Ca.tNode.type&&function(t,e){for(var n=ha(ba),i=0;i<e.length;){var o=e[i];if(1===o)break;if(o===la)i+=2;else if(0===o){var r=e[i+1],s=e[i+2],a=e[i+3];n?ba.setAttribute(t,s,a,r):t.setAttributeNS(r,s,a),i+=4}else a=e[i+1],n?ba.setAttribute(t,o,a):t.setAttribute(o,a),i+=2}}(Ca.native,n.attributes),e}(0,this.componentDef.factory(),this.componentDef)),function(t,e,n){t&&null!=t.changeDetectorRef&&t.changeDetectorRef._setComponentContext(d.data,c)}(d.nodeInjector),function(t,e){var n=nl(t),i=n.view[Bs];(function(t,e,n,i){e&&(i.initHooks||(i.initHooks=[])).push(0,e),n&&((i.initHooks||(i.initHooks=[])).push(0,n),(i.checkHooks||(i.checkHooks=[])).push(0,n))})(0,e.onInit,e.doCheck,i),function(t,e){if(e.firstTemplatePass)for(var n=t>>14,i=n+(4095&t),o=n;o<i;o++){var r=e.directives[o];ta(r,e,o),ea(r,e,o),na(r,e,o)}}(n.tNode.flags,i)}(c,this.componentDef),e)for(var f=0,g=d.tNode.projection=[],_=0;_<e.length;_++){for(var y=e[_],m=null,v=null,x=0;x<y.length;x++){var b=Ba(++f,3,y[x],null,null);v?v.next=b.tNode:m=b.tNode,v=b.tNode}g.push(m)}za(d,d.data[Bs],c,1),d.data[Us]&=-2}finally{Aa(p,null),a.end&&a.end()}var w=new cl(this.componentType,c,u,t,l);return s&&(w.hostView._lViewNode.tNode.child=d.tNode),w},e}(Fe),cl=function(t){function e(e,n,i,o,r){var s=t.call(this)||this;return s.destroyCbs=[],s.instance=n,s.hostView=s.changeDetectorRef=new rl(i,n),s.hostView._lViewNode=Ba(-1,2,null,null,null,i),s.injector=o,s.location=new bn(r),s.componentType=e,s}return o(e,t),e.prototype.destroy=function(){this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){this.destroyCbs.push(t)},e}(Le),dl={provide:Ve,useFactory:function(){return new sl},deps:[]},pl=function(t){function e(e,n){var i=t.call(this)||this;return i._bootstrapComponents=[],i.destroyCbs=[],i._bootstrapComponents=e.ngModuleDef.bootstrap,i.injector=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),e=e||pe(),new fe(t,n,e)}(e,n,[dl,{provide:ze,useValue:i}]),i.instance=i.injector.get(e),i.componentFactoryResolver=new sl,i}return o(e,t),e.prototype.destroy=function(){this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){this.destroyCbs.push(t)},e}(ze);!function(t){function e(e){var n=t.call(this)||this;return n.moduleType=e,n}o(e,t),e.prototype.create=function(t){return new pl(this.moduleType,t)}}(He);var fl=function(){};function gl(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}n("W8A/");let _l=0;function yl(t){return t.ol_uid||(t.ol_uid=++_l)}const ml=function(t){const e="5.0.0".split("-")[0];this.message="Assertion failed. See https://openlayers.org/en/"+e+"/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"};gl(ml,Error);var vl=ml;const xl="function"==typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");const n=Object(t);for(let i=1,o=arguments.length;i<o;++i){const t=arguments[i];if(void 0!==t&&null!==t)for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}return n};function bl(t){for(const e in t)delete t[e]}function wl(t){const e=[];for(const n in t)e.push(t[n]);return e}function Cl(t){let e;for(e in t)return!1;return!e}function El(t,e,n,i){let o;for(let r=0,s=t.length;r<s;++r)if((o=t[r]).listener===e&&o.bindTo===n)return i&&(o.deleteIndex=r),o}function Tl(t,e){const n=t.ol_lm;return n?n[e]:void 0}function Sl(t){let e=t.ol_lm;return e||(e=t.ol_lm={}),e}function Il(t,e){const n=Tl(t,e);if(n){for(let o=0,r=n.length;o<r;++o)t.removeEventListener(e,n[o].boundListener),bl(n[o]);n.length=0;const i=t.ol_lm;i&&(delete i[e],0===Object.keys(i).length&&delete t.ol_lm)}}function Rl(t,e,n,i,o){const r=Sl(t);let s=r[e];s||(s=r[e]=[]);let a=El(s,n,i,!1);return a?o||(a.callOnce=!1):(t.addEventListener(e,function(t){const e=function(e){const n=t.listener,i=t.bindTo||t.target;return t.callOnce&&kl(t),n.call(i,e)};return t.boundListener=e,e}(a={bindTo:i,callOnce:!!o,listener:n,target:t,type:e})),s.push(a)),a}function Pl(t,e,n,i){return Rl(t,e,n,i,!0)}function Ml(t,e,n,i){const o=Tl(t,e);if(o){const t=El(o,n,i,!0);t&&kl(t)}}function kl(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);const e=Tl(t.target,t.type);if(e){const n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&Il(t.target,t.type)}bl(t)}}function Ll(t){const e=Sl(t);for(const n in e)Il(t,n)}function Fl(){return!0}function Dl(){return!1}function Ol(){}const Al=function(){};Al.prototype.disposed_=!1,Al.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},Al.prototype.disposeInternal=Ol;var Nl=Al;const Gl=function(t){this.type=t,this.target=null};function Vl(t){t.stopPropagation()}Gl.prototype.preventDefault=Gl.prototype.stopPropagation=function(){this.propagationStopped=!0};var jl=Gl;const Bl=function(){Nl.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}};gl(Bl,Nl),Bl.prototype.addEventListener=function(t,e){let n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},Bl.prototype.dispatchEvent=function(t){const e="string"==typeof t?new jl(t):t,n=e.type;e.target=this;const i=this.listeners_[n];let o;if(i){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(let t=0,n=i.length;t<n;++t)if(!1===i[t].call(this,e)||e.propagationStopped){o=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){let t=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];t--;)this.removeEventListener(n,Ol);delete this.dispatching_[n]}return o}},Bl.prototype.disposeInternal=function(){Ll(this)},Bl.prototype.getListeners=function(t){return this.listeners_[t]},Bl.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},Bl.prototype.removeEventListener=function(t,e){const n=this.listeners_[t];if(n){const i=n.indexOf(e);t in this.pendingRemovals_?(n[i]=Ol,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t])}};var zl=Bl,Hl={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};const Wl=function(){zl.call(this),this.revision_=0};gl(Wl,zl),Wl.prototype.changed=function(){++this.revision_,this.dispatchEvent(Hl.CHANGE)},Wl.prototype.getRevision=function(){return this.revision_},Wl.prototype.on=function(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Rl(this,t[o],e);return i}return Rl(this,t,e)},Wl.prototype.once=function(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Pl(this,t[o],e);return i}return Pl(this,t,e)},Wl.prototype.un=function(t,e){if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)Ml(this,t[n],e);else Ml(this,t,e)};var Ul=Wl;const Yl=function(t,e,n){jl.call(this,t),this.key=e,this.oldValue=n};gl(Yl,jl);const Kl=function(t){Ul.call(this),yl(this),this.values_={},void 0!==t&&this.setProperties(t)};gl(Kl,Ul);const Xl={};function Zl(t){return Xl.hasOwnProperty(t)?Xl[t]:Xl[t]="change:"+t}Kl.prototype.get=function(t){let e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},Kl.prototype.getKeys=function(){return Object.keys(this.values_)},Kl.prototype.getProperties=function(){return xl({},this.values_)},Kl.prototype.notify=function(t,e){let n;n=Zl(t),this.dispatchEvent(new Yl(n,t,e)),this.dispatchEvent(new Yl(n="propertychange",t,e))},Kl.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{const n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},Kl.prototype.setProperties=function(t,e){for(const n in t)this.set(n,t[n],e)},Kl.prototype.unset=function(t,e){if(t in this.values_){const n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}};var ql=Kl;const Jl=function(t,e){jl.call(this,t),this.element=e};gl(Jl,jl);const Ql=function(t,e){if(ql.call(this),this.unique_=!!(e||{}).unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()};gl(Ql,ql),Ql.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},Ql.prototype.extend=function(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this},Ql.prototype.forEach=function(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)},Ql.prototype.getArray=function(){return this.array_},Ql.prototype.item=function(t){return this.array_[t]},Ql.prototype.getLength=function(){return this.get("length")},Ql.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Jl("add",e))},Ql.prototype.pop=function(){return this.removeAt(this.getLength()-1)},Ql.prototype.push=function(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()},Ql.prototype.remove=function(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},Ql.prototype.removeAt=function(t){const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Jl("remove",e)),e},Ql.prototype.setAt=function(t,e){const n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Jl("remove",n)),this.dispatchEvent(new Jl("add",e))}else{for(let e=n;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,e)}},Ql.prototype.updateLength_=function(){this.set("length",this.array_.length)},Ql.prototype.assertUnique_=function(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new vl(58)};var $l=Ql;function th(t,e){if(!t)throw new vl(e)}var eh={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},nh={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ih(t){const e=[1/0,1/0,-1/0,-1/0];for(let n=0,i=t.length;n<i;++n)yh(e,t[n]);return e}function oh(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function rh(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function sh(t,e,n){let i,o;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*o}function ah(t,e){return hh(t,e[0],e[1])}function lh(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function hh(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function uh(t,e){const n=e[0],i=e[1];let o=nh.UNKNOWN;return n<t[0]?o|=nh.LEFT:n>t[2]&&(o|=nh.RIGHT),i<t[1]?o|=nh.BELOW:i>t[3]&&(o|=nh.ABOVE),o===nh.UNKNOWN&&(o=nh.INTERSECTING),o}function ch(t,e,n,i,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=i,o):[t,e,n,i]}function dh(t){return ch(1/0,1/0,-1/0,-1/0,t)}function ph(t,e){const n=t[0],i=t[1];return ch(n,i,n,i,e)}function fh(t,e,n,i,o){return mh(dh(o),t,e,n,i)}function gh(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function _h(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function yh(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function mh(t,e,n,i,o){for(;n<i;n+=o)vh(t,e[n],e[n+1]);return t}function vh(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function xh(t,e,n){let i;return(i=e.call(n,wh(t)))?i:(i=e.call(n,Ch(t)))?i:(i=e.call(n,Ph(t)))?i:(i=e.call(n,Rh(t)))||!1}function bh(t){let e=0;return Lh(t)||(e=Mh(t)*Sh(t)),e}function wh(t){return[t[0],t[1]]}function Ch(t){return[t[2],t[1]]}function Eh(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Th(t,e,n,i,o){const r=e*i[0]/2,s=e*i[1]/2,a=Math.cos(n),l=Math.sin(n),h=r*a,u=r*l,c=s*a,d=s*l,p=t[0],f=t[1],g=p-h+d,_=p-h-d,y=p+h-d,m=p+h+d,v=f-u-c,x=f-u+c,b=f+u+c,w=f+u-c;return ch(Math.min(g,_,y,m),Math.min(v,x,b,w),Math.max(g,_,y,m),Math.max(v,x,b,w),o)}function Sh(t){return t[3]-t[1]}function Ih(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return kh(t,e)?(i[0]=t[0]>e[0]?t[0]:e[0],i[1]=t[1]>e[1]?t[1]:e[1],i[2]=t[2]<e[2]?t[2]:e[2],i[3]=t[3]<e[3]?t[3]:e[3]):dh(i),i}function Rh(t){return[t[0],t[3]]}function Ph(t){return[t[2],t[3]]}function Mh(t){return t[2]-t[0]}function kh(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Lh(t){return t[2]<t[0]||t[3]<t[1]}function Fh(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function Dh(t,e,n,i,o,r){const s=r||[];let a=0;for(let l=e;l<n;l+=i){const e=t[l],n=t[l+1];s[a++]=o[0]*e+o[2]*n+o[4],s[a++]=o[1]*e+o[3]*n+o[5]}return r&&s.length!=a&&(s.length=a),s}function Oh(t,e,n,i,o,r,s){const a=s||[];let l=0;for(let h=e;h<n;h+=i){a[l++]=t[h]+o,a[l++]=t[h+1]+r;for(let e=h+2;e<h+i;++e)a[l++]=t[e]}return s&&a.length!=l&&(a.length=l),a}function Ah(t,e,n){return Math.min(Math.max(t,e),n)}const Nh="cosh"in Math?Math.cosh:function(t){const e=Math.exp(t);return(e+1/e)/2};function Gh(t,e,n,i,o,r){const s=o-n,a=r-i;if(0!==s||0!==a){const l=((t-n)*s+(e-i)*a)/(s*s+a*a);l>1?(n=o,i=r):l>0&&(n+=s*l,i+=a*l)}return Vh(t,e,n,i)}function Vh(t,e,n,i){const o=n-t,r=i-e;return o*o+r*r}function jh(t){return 180*t/Math.PI}function Bh(t){return t*Math.PI/180}function zh(t,e){const n=t%e;return n*e<0?n+e:n}function Hh(t,e,n){return t+n*(e-t)}var Wh={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};const Uh=6371008.8;function Yh(t,e,n){const i=n||Uh,o=Bh(t[1]),r=Bh(e[1]),s=(r-o)/2,a=Bh(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(o)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function Kh(t,e,n,i){const o=i||Uh,r=Bh(t[1]),s=Bh(t[0]),a=e/o,l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(n));return[jh(s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l))),jh(l)]}const Xh={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Zh={};Zh[Xh.DEGREES]=2*Math.PI*6370997/360,Zh[Xh.FEET]=.3048,Zh[Xh.METERS]=1,Zh[Xh.USFEET]=1200/3937;var qh=Xh;const Jh=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};Jh.prototype.canWrapX=function(){return this.canWrapX_},Jh.prototype.getCode=function(){return this.code_},Jh.prototype.getExtent=function(){return this.extent_},Jh.prototype.getUnits=function(){return this.units_},Jh.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Zh[this.units_]},Jh.prototype.getWorldExtent=function(){return this.worldExtent_},Jh.prototype.getAxisOrientation=function(){return this.axisOrientation_},Jh.prototype.isGlobal=function(){return this.global_},Jh.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Jh.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Jh.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Jh.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Jh.prototype.setWorldExtent=function(t){this.worldExtent_=t},Jh.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Jh.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var Qh=Jh;const $h=6378137,tu=Math.PI*$h,eu=[-tu,-tu,tu,tu],nu=[-180,-85,180,85];function iu(t){Qh.call(this,{code:t,units:qh.METERS,extent:eu,global:!0,worldExtent:nu,getPointResolution:function(t,e){return t/Nh(e[1]/$h)}})}gl(iu,Qh);const ou=[new iu("EPSG:3857"),new iu("EPSG:102100"),new iu("EPSG:102113"),new iu("EPSG:900913"),new iu("urn:ogc:def:crs:EPSG:6.18:3:3857"),new iu("urn:ogc:def:crs:EPSG::3857"),new iu("http://www.opengis.net/gml/srs/epsg.xml#3857")],ru=[-180,-90,180,90],su=6378137*Math.PI/180;function au(t,e){Qh.call(this,{code:t,units:qh.DEGREES,extent:ru,axisOrientation:e,global:!0,metersPerUnit:su,worldExtent:ru})}gl(au,Qh);const lu=[new au("CRS:84"),new au("EPSG:4326","neu"),new au("urn:ogc:def:crs:EPSG::4326","neu"),new au("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new au("urn:ogc:def:crs:OGC:1.3:CRS84"),new au("urn:ogc:def:crs:OGC:2:84"),new au("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new au("urn:x-ogc:def:crs:EPSG:4326","neu")];let hu={},uu={};function cu(t,e,n){const i=t.getCode(),o=e.getCode();i in uu||(uu[i]={}),uu[i][o]=n}function du(t,e,n){let i;if(void 0!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];i=e}else i=t.slice();return i}function pu(t,e,n){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function fu(t){!function(t,e){hu[t]=e}(t.getCode(),t),cu(t,t,du)}function gu(t){let e=null;return t instanceof Qh?e=t:"string"==typeof t&&(e=hu[t]||null),e}function _u(t,e,n,i){let o;const r=(t=gu(t)).getPointResolutionFunc();if(r)o=r(e,n);else if(t.getUnits()==qh.DEGREES&&!i||i==qh.DEGREES)o=e;else{const r=xu(t,gu("EPSG:4326"));let s=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];o=(Yh((s=r(s,s,2)).slice(0,2),s.slice(2,4))+Yh(s.slice(4,6),s.slice(6,8)))/2;const a=i?Zh[i]:t.getMetersPerUnit();void 0!==a&&(o/=a)}return o}function yu(t){!function(t){t.forEach(fu)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&cu(e,t,du)})})}function mu(t,e){return t?"string"==typeof t?gu(t):t:gu(e)}function vu(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?n:xu(t,e)===du&&n}function xu(t,e){let n=function(t,e){let n;return t in uu&&e in uu[t]&&(n=uu[t][e]),n}(t.getCode(),e.getCode());return n||(n=pu),n}function bu(t,e){return xu(gu(t),gu(e))}function wu(t,e,n){return bu(e,n)(t,void 0,t.length)}function Cu(t,e,n){return function(t,e,n){const i=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(i,i,2),o=[i[0],i[2],i[4],i[6]],r=[i[1],i[3],i[5],i[7]],ch(Math.min.apply(null,o),Math.min.apply(null,r),Math.max.apply(null,o),Math.max.apply(null,r),void 0);var o,r}(t,bu(e,n))}var Eu,Tu,Su;yu(ou),yu(lu),Eu=ou,Tu=function(t,e,n){const i=t.length,o=n>1?n:2;let r=e;void 0===r&&(r=o>2?t.slice():new Array(i));const s=tu;for(let a=0;a<i;a+=o){r[a]=s*t[a]/180;let e=$h*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));e>s?e=s:e<-s&&(e=-s),r[a+1]=e}return r},Su=function(t,e,n){const i=t.length,o=n>1?n:2;let r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(let s=0;s<i;s+=o)r[s]=180*t[s]/tu,r[s+1]=360*Math.atan(Math.exp(t[s+1]/$h))/Math.PI-90;return r},lu.forEach(function(t){Eu.forEach(function(e){cu(t,e,Tu),cu(e,t,Su)})});const Iu=new Array(6);function Ru(t){return Mu(t,1,0,0,1,0,0)}function Pu(t,e){const n=t[0],i=t[1],o=t[2],r=t[3],s=t[4],a=t[5],l=e[0],h=e[1],u=e[2],c=e[3],d=e[4],p=e[5];return t[0]=n*l+o*h,t[1]=i*l+r*h,t[2]=n*u+o*c,t[3]=i*u+r*c,t[4]=n*d+o*p+s,t[5]=i*d+r*p+a,t}function Mu(t,e,n,i,o,r,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=s,t}function ku(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Lu(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Fu(t,e){const n=Math.cos(e),i=Math.sin(e);return Pu(t,Mu(Iu,n,i,-i,n,0,0))}function Du(t,e,n){return Pu(t,Mu(Iu,e,0,0,n,0,0))}function Ou(t,e,n){return Pu(t,Mu(Iu,1,0,0,1,e,n))}function Au(t,e,n,i,o,r,s,a){const l=Math.sin(r),h=Math.cos(r);return t[0]=i*h,t[1]=o*l,t[2]=-i*l,t[3]=o*h,t[4]=s*i*h-a*i*l+e,t[5]=s*o*l+a*o*h+n,t}function Nu(t){const e=(n=t)[0]*n[3]-n[1]*n[2];var n;th(0!==e,32);const i=t[0],o=t[1],r=t[2],s=t[3],a=t[4],l=t[5];return t[0]=s/e,t[1]=-o/e,t[2]=-r/e,t[3]=i/e,t[4]=(r*l-s*a)/e,t[5]=-(i*l-o*a)/e,t}const Gu=function(){ql.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0};gl(Gu,ql);const Vu=[1,0,0,1,0,0];Gu.prototype.clone=function(){},Gu.prototype.closestPointXY=function(t,e,n,i){},Gu.prototype.getClosestPoint=function(t,e){const n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},Gu.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},Gu.prototype.computeExtent=function(t){},Gu.prototype.containsXY=Dl,Gu.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},Gu.prototype.rotate=function(t,e){},Gu.prototype.scale=function(t,e,n){},Gu.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},Gu.prototype.getSimplifiedGeometry=function(t){},Gu.prototype.getType=function(){},Gu.prototype.applyTransform=function(t){},Gu.prototype.intersectsExtent=function(t){},Gu.prototype.translate=function(t,e){},Gu.prototype.transform=function(t,e){const n=(t=gu(t)).getUnits()==qh.TILE_PIXELS?function(n,i,o){const r=t.getExtent(),s=t.getWorldExtent(),a=Sh(s)/Sh(r);return Au(Vu,s[0],s[3],a,-a,0,0,0),Dh(n,0,n.length,o,Vu,i),bu(t,e)(n,i,o)}:bu(t,e);return this.applyTransform(n),this};var ju=Gu;const Bu=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,zu=/^([a-z]*)$/i;function Hu(t){return"string"==typeof t?t:Ku(t)}const Wu=function(){const t={};let e=0;return function(n){let i;if(t.hasOwnProperty(n))i=t[n];else{if(e>=1024){let n=0;for(const i in t)0==(3&n++)&&(delete t[i],--e)}i=function(t){let e,n,i,o,r;if(zu.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t)),Bu.exec(t)){const s=t.length-1;let a;a=s<=4?1:2;const l=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),n=parseInt(t.substr(1+1*a,a),16),i=parseInt(t.substr(1+2*a,a),16),o=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,n=(n<<4)+n,i=(i<<4)+i,l&&(o=(o<<4)+o)),r=[e,n,i,o/255]}else 0==t.indexOf("rgba(")?Yu(r=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((r=t.slice(4,-1).split(",").map(Number)).push(1),Yu(r)):th(!1,14);return r}(n),t[n]=i,++e}return i}}();function Uu(t){return Array.isArray(t)?t:Wu(t)}function Yu(t){return t[0]=Ah(t[0]+.5|0,0,255),t[1]=Ah(t[1]+.5|0,0,255),t[2]=Ah(t[2]+.5|0,0,255),t[3]=Ah(t[3],0,1),t}function Ku(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:t[3])+")"}function Xu(t){return function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}(t)?t:Ku(t)}function Zu(t,e){const n=document.createElement("CANVAS");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function qu(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function Ju(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Qu(t){for(;t.lastChild;)t.removeChild(t.lastChild)}const $u=10242,tc=10243,ec=3553,nc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function ic(t,e){const n=nc.length;for(let i=0;i<n;++i)try{const n=t.getContext(nc[i],e);if(n)return n}catch(t){}return null}let oc,rc,sc=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{const t=ic(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});t&&(sc=!0,oc=t.getParameter(t.MAX_TEXTURE_SIZE),rc=t.getSupportedExtensions())}catch(t){}const ac="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",lc=-1!==ac.indexOf("firefox"),hc=-1!==ac.indexOf("safari")&&-1==ac.indexOf("chrom"),uc=-1!==ac.indexOf("webkit")&&-1==ac.indexOf("edge"),cc=-1!==ac.indexOf("macintosh"),dc=window.devicePixelRatio||1,pc=function(){let t=!1;try{t=!!document.createElement("CANVAS").getContext("2d").setLineDash}catch(t){}return t}(),fc="geolocation"in navigator,gc="ontouchstart"in window,_c="PointerEvent"in window,yc=!!navigator.msPointerEnabled;var mc={IDLE:0,LOADING:1,LOADED:2,ERROR:3};const vc="ol-hidden",xc=function(){let t;const e={};return function(n){if(t||(t=document.createElement("div").style),!(n in e)){t.font=n;const i=t.fontFamily;if(t.font="",!i)return null;e[n]=i.split(/,\s?/)}return e[n]}}(),bc=function(t){zl.call(this),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null};gl(bc,zl),bc.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},bc.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(Hl.CLEAR)},bc.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},bc.prototype.forEach=function(t,e){let n=this.oldest_;for(;n;)t.call(e,n.value_,n.key_,this),n=n.newer},bc.prototype.get=function(t){const e=this.entries_[t];return th(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},bc.prototype.remove=function(t){const e=this.entries_[t];return th(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},bc.prototype.getCount=function(){return this.count_},bc.prototype.getKeys=function(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t},bc.prototype.getValues=function(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t},bc.prototype.peekLast=function(){return this.oldest_.value_},bc.prototype.peekLastKey=function(){return this.oldest_.key_},bc.prototype.peekFirstKey=function(){return this.newest_.key_},bc.prototype.pop=function(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},bc.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},bc.prototype.set=function(t,e){th(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},bc.prototype.setSize=function(t){this.highWaterMark=t},bc.prototype.prune=function(){for(;this.canExpireCache();)this.pop()};var wc=bc;const Cc=[0,0,0,1],Ec=[],Tc=[0,0,0,1],Sc=[0,0,0,0],Ic=new wc,Rc={};let Pc=null;const Mc={},kc=function(){const t=60,e=Rc,n="32px ",i=["monospace","serif"],o=i.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";let s,a;function l(t){const e=Lc();let s=!0;for(let l=0;l<o;++l){const o=i[l];if(e.font=n+o,a=e.measureText(r).width,t!=o){e.font=n+t+","+o;const i=e.measureText(r).width;s=s&&i!=a}}return s}function h(){let n=!0;for(const i in e)e[i]<t&&(l(i)?(e[i]=t,bl(Mc),Pc=null,Ic.clear()):(++e[i],n=!1));n&&(clearInterval(s),s=void 0)}return function(n){const i=xc(n);if(i)for(let o=0,r=i.length;o<r;++o){const n=i[o];n in e||(e[n]=t,l(n)||(e[n]=0,void 0===s&&(s=setInterval(h,32))))}}}();function Lc(){return Pc||(Pc=Zu(1,1)),Pc}const Fc=function(){let t;const e=Mc;return function(n){let i=e[n];return void 0==i&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=n,document.body.appendChild(t),i=e[n]=t.offsetHeight,document.body.removeChild(t)),i}}();function Dc(t,e){const n=Lc();return t!=n.font&&(n.font=t),n.measureText(e).width}function Oc(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))}const Ac=[1,0,0,1,0,0];function Nc(t,e,n,i,o,r,s,a,l,h,u){let c;1!=n&&(t.globalAlpha=(c=t.globalAlpha)*n),e&&t.setTransform.apply(t,e),t.drawImage(i,o,r,s,a,l,h,s*u,a*u),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,Ac)}const Gc=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};Gc.prototype.getOpacity=function(){return this.opacity_},Gc.prototype.getRotateWithView=function(){return this.rotateWithView_},Gc.prototype.getRotation=function(){return this.rotation_},Gc.prototype.getScale=function(){return this.scale_},Gc.prototype.getSnapToPixel=function(){return this.snapToPixel_},Gc.prototype.getAnchor=function(){},Gc.prototype.getImage=function(t){},Gc.prototype.getHitDetectionImage=function(t){},Gc.prototype.getImageState=function(){},Gc.prototype.getImageSize=function(){},Gc.prototype.getHitDetectionImageSize=function(){},Gc.prototype.getOrigin=function(){},Gc.prototype.getSize=function(){},Gc.prototype.setOpacity=function(t){this.opacity_=t},Gc.prototype.setRotateWithView=function(t){this.rotateWithView_=t},Gc.prototype.setRotation=function(t){this.rotation_=t},Gc.prototype.setScale=function(t){this.scale_=t},Gc.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},Gc.prototype.listenImageChange=function(t,e){},Gc.prototype.load=function(){},Gc.prototype.unlistenImageChange=function(t,e){};var Vc=Gc;const jc=function(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_),Vc.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel})};gl(jc,Vc),jc.prototype.clone=function(){const t=new jc({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},jc.prototype.getAnchor=function(){return this.anchor_},jc.prototype.getAngle=function(){return this.angle_},jc.prototype.getFill=function(){return this.fill_},jc.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},jc.prototype.getImage=function(t){return this.canvas_},jc.prototype.getImageSize=function(){return this.imageSize_},jc.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},jc.prototype.getImageState=function(){return mc.LOADED},jc.prototype.getOrigin=function(){return this.origin_},jc.prototype.getPoints=function(){return this.points_},jc.prototype.getRadius=function(){return this.radius_},jc.prototype.getRadius2=function(){return this.radius2_},jc.prototype.getSize=function(){return this.size_},jc.prototype.getStroke=function(){return this.stroke_},jc.prototype.listenImageChange=function(t,e){},jc.prototype.load=function(){},jc.prototype.unlistenImageChange=function(t,e){},jc.prototype.render_=function(t){let e,n,i="",o="",r=0,s=null,a=0,l=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=Tc),n=Xu(n),void 0===(l=this.stroke_.getWidth())&&(l=1),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),pc||(s=null,a=0),void 0===(o=this.stroke_.getLineJoin())&&(o="round"),void 0===(i=this.stroke_.getLineCap())&&(i="round"),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));let h=2*(this.radius_+l)+1;const u={strokeStyle:n,strokeWidth:l,size:h,lineCap:i,lineDash:s,lineDashOffset:a,lineJoin:o,miterLimit:r};if(void 0===t){const t=Zu(h,h);this.canvas_=t.canvas,e=h=this.canvas_.width,this.draw_(u,t,0,0),this.createHitDetectionCanvas_(u)}else{h=Math.round(h);const n=!this.fill_;let i;n&&(i=this.drawHitDetectionCanvas_.bind(this,u));const o=this.getChecksum(),r=t.add(o,h,h,this.draw_.bind(this,u),i);this.canvas_=r.image,this.origin_=[r.offsetX,r.offsetY],e=r.image.width,n?(this.hitDetectionCanvas_=r.hitImage,this.hitDetectionImageSize_=[r.hitImage.width,r.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[h/2,h/2],this.size_=[h,h],this.imageSize_=[e,e]},jc.prototype.draw_=function(t,e,n,i){let o,r,s;e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();let a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const n=void 0!==this.radius2_?this.radius2_:this.radius_;for(n!==this.radius_&&(a*=2),o=0;o<=a;o++)r=2*o*Math.PI/a-Math.PI/2+this.angle_,e.lineTo(t.size/2+(s=o%2==0?this.radius_:n)*Math.cos(r),t.size/2+s*Math.sin(r))}if(this.fill_){let t=this.fill_.getColor();null===t&&(t=Cc),e.fillStyle=Xu(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},jc.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)return void(this.hitDetectionCanvas_=this.canvas_);const e=Zu(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)},jc.prototype.drawHitDetectionCanvas_=function(t,e,n,i){e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();let o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const n=void 0!==this.radius2_?this.radius2_:this.radius_;let i,r,s;for(n!==this.radius_&&(o*=2),i=0;i<=o;i++)s=2*i*Math.PI/o-Math.PI/2+this.angle_,e.lineTo(t.size/2+(r=i%2==0?this.radius_:n)*Math.cos(s),t.size/2+r*Math.sin(s))}e.fillStyle=Cc,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},jc.prototype.getChecksum=function(){const t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){const n="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[n,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};var Bc=jc;const zc=function(t){const e=t||{};Bc.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})};gl(zc,Bc),zc.prototype.clone=function(){const t=new zc({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},zc.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)};var Hc=zc;const Wc=function(t){const e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};Wc.prototype.clone=function(){const t=this.getColor();return new Wc({color:t&&t.slice?t.slice():t||void 0})},Wc.prototype.getColor=function(){return this.color_},Wc.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Wc.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_=this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?yl(this.color_).toString():"f"+(this.color_?Hu(this.color_):"-")),this.checksum_};var Uc=Wc;const Yc=function(t){const e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};Yc.prototype.clone=function(){const t=this.getColor();return new Yc({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},Yc.prototype.getColor=function(){return this.color_},Yc.prototype.getLineCap=function(){return this.lineCap_},Yc.prototype.getLineDash=function(){return this.lineDash_},Yc.prototype.getLineDashOffset=function(){return this.lineDashOffset_},Yc.prototype.getLineJoin=function(){return this.lineJoin_},Yc.prototype.getMiterLimit=function(){return this.miterLimit_},Yc.prototype.getWidth=function(){return this.width_},Yc.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Yc.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},Yc.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},Yc.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},Yc.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},Yc.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},Yc.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},Yc.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.checksum_+=this.color_?"string"==typeof this.color_?this.color_:yl(this.color_).toString():"-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var Kc=Yc;const Xc=function(t){const e=t||{};this.geometry_=null,this.geometryFunction_=Qc,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};Xc.prototype.clone=function(){let t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new Xc({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},Xc.prototype.getRenderer=function(){return this.renderer_},Xc.prototype.setRenderer=function(t){this.renderer_=t},Xc.prototype.getGeometry=function(){return this.geometry_},Xc.prototype.getGeometryFunction=function(){return this.geometryFunction_},Xc.prototype.getFill=function(){return this.fill_},Xc.prototype.setFill=function(t){this.fill_=t},Xc.prototype.getImage=function(){return this.image_},Xc.prototype.setImage=function(t){this.image_=t},Xc.prototype.getStroke=function(){return this.stroke_},Xc.prototype.setStroke=function(t){this.stroke_=t},Xc.prototype.getText=function(){return this.text_},Xc.prototype.setText=function(t){this.text_=t},Xc.prototype.getZIndex=function(){return this.zIndex_},Xc.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Qc,this.geometry_=t},Xc.prototype.setZIndex=function(t){this.zIndex_=t};let Zc=null;function qc(t,e){if(!Zc){const t=new Uc({color:"rgba(255,255,255,0.4)"}),e=new Kc({color:"#3399CC",width:1.25});Zc=[new Xc({image:new Hc({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return Zc}function Jc(){const t={},e=[255,255,255,1],n=[0,153,255,1];return t[Wh.POLYGON]=[new Xc({fill:new Uc({color:[255,255,255,.5]})})],t[Wh.MULTI_POLYGON]=t[Wh.POLYGON],t[Wh.LINE_STRING]=[new Xc({stroke:new Kc({color:e,width:5})}),new Xc({stroke:new Kc({color:n,width:3})})],t[Wh.MULTI_LINE_STRING]=t[Wh.LINE_STRING],t[Wh.CIRCLE]=t[Wh.POLYGON].concat(t[Wh.LINE_STRING]),t[Wh.POINT]=[new Xc({image:new Hc({radius:6,fill:new Uc({color:n}),stroke:new Kc({color:e,width:1.5})}),zIndex:1/0})],t[Wh.MULTI_POINT]=t[Wh.POINT],t[Wh.GEOMETRY_COLLECTION]=t[Wh.POLYGON].concat(t[Wh.LINE_STRING],t[Wh.POINT]),t}function Qc(t){return t.getGeometry()}var $c=Xc;const td=function(t){ql.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Rl(this,Zl(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t&&(t instanceof ju||!t?this.setGeometry(t):this.setProperties(t))};gl(td,ql),td.prototype.clone=function(){const t=new td(this.getProperties());t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t},td.prototype.getGeometry=function(){return this.get(this.geometryName_)},td.prototype.getId=function(){return this.id_},td.prototype.getGeometryName=function(){return this.geometryName_},td.prototype.getStyle=function(){return this.style_},td.prototype.getStyleFunction=function(){return this.styleFunction_},td.prototype.handleGeometryChange_=function(){this.changed()},td.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(kl(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Rl(t,Hl.CHANGE,this.handleGeometryChange_,this)),this.changed()},td.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},td.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;{let e;return Array.isArray(t)?e=t:(th(t instanceof $c,41),e=[t]),function(){return e}}}(t):void 0,this.changed()},td.prototype.setId=function(t){this.id_=t,this.changed()},td.prototype.setGeometryName=function(t){Ml(this,Zl(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Rl(this,Zl(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()};var ed=td;function nd(t,e){return t>e?1:t<e?-1:0}function id(t,e){return t.indexOf(e)>=0}function od(t,e,n){const i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;{let o;if(n>0){for(o=1;o<i;++o)if(t[o]<e)return o-1}else if(n<0){for(o=1;o<i;++o)if(t[o]<=e)return o}else for(o=1;o<i;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return i-1}}function rd(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function sd(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let o=0;o<i;o++)t[t.length]=n[o]}function ad(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function ld(t,e){const n=t.length,i=Array(t.length);let o;for(o=0;o<n;o++)i[o]={index:o,value:t[o]};for(i.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),o=0;o<t.length;o++)t[o]=i[o].value}var hd={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};const ud=function(){ju.call(this),this.layout=hd.XY,this.stride=2,this.flatCoordinates=null};function cd(t){let e;return t==hd.XY?e=2:t==hd.XYZ||t==hd.XYM?e=3:t==hd.XYZM&&(e=4),e}gl(ud,ju),ud.prototype.containsXY=Dl,ud.prototype.computeExtent=function(t){return fh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},ud.prototype.getCoordinates=function(){},ud.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},ud.prototype.getFlatCoordinates=function(){return this.flatCoordinates},ud.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},ud.prototype.getLayout=function(){return this.layout},ud.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(bl(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];{const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=n,n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},ud.prototype.getSimplifiedGeometryInternal=function(t){return this},ud.prototype.getStride=function(){return this.stride},ud.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=cd(t),this.layout=t,this.flatCoordinates=e},ud.prototype.setCoordinates=function(t,e){},ud.prototype.setLayout=function(t,e,n){let i;if(t)i=cd(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout=hd.XY,void(this.stride=2);e=e[0]}t=function(t){let e;return 2==t?e=hd.XY:3==t?e=hd.XYZ:4==t&&(e=hd.XYZM),e}(i=e.length)}this.layout=t,this.stride=i},ud.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},ud.prototype.rotate=function(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,o,r,s){const a=s||[],l=Math.cos(o),h=Math.sin(o),u=r[0],c=r[1];let d=0;for(let p=0;p<n;p+=i){const e=t[p]-u,n=t[p+1]-c;a[d++]=u+e*l-n*h,a[d++]=c+e*h+n*l;for(let o=p+2;o<p+i;++o)a[d++]=t[o]}s&&a.length!=d&&(a.length=d)}(n,0,n.length,i,t,e,n),this.changed()}},ud.prototype.scale=function(t,e,n){let i=e;void 0===i&&(i=t);let o=n;o||(o=Eh(this.getExtent()));const r=this.getFlatCoordinates();if(r){const e=this.getStride();!function(t,e,n,i,o,r,s,a){const l=a||[],h=s[0],u=s[1];let c=0;for(let d=0;d<n;d+=i){const e=t[d+1]-u;l[c++]=h+o*(t[d]-h),l[c++]=u+r*e;for(let n=d+2;n<d+i;++n)l[c++]=t[n]}a&&l.length!=c&&(l.length=c)}(r,0,r.length,e,t,i,o,r),this.changed()}},ud.prototype.translate=function(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Oh(n,0,n.length,i,t,e,n),this.changed()}};var dd=ud;function pd(t,e,n,i){let o=0,r=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];o+=s*n-r*i,r=n,s=i}return o/2}function fd(t,e,n,i){let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r];o+=pd(t,e,s,i),e=s}return o}function gd(t,e,n,i,o,r,s){const a=t[e],l=t[e+1],h=t[n]-a,u=t[n+1]-l;let c;if(0===h&&0===u)c=e;else{const d=((o-a)*h+(r-l)*u)/(h*h+u*u);if(d>1)c=n;else{if(d>0){for(let o=0;o<i;++o)s[o]=Hh(t[e+o],t[n+o],d);return void(s.length=i)}c=e}}for(let d=0;d<i;++d)s[d]=t[c+d];s.length=i}function _d(t,e,n,i,o){let r=t[e],s=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=Vh(r,s,n,i);a>o&&(o=a),r=n,s=i}return o}function yd(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r];o=_d(t,e,s,i,o),e=s}return o}function md(t,e,n,i,o,r,s,a,l,h,u){if(e==n)return h;let c,d;if(0===o){if((d=Vh(s,a,t[e],t[e+1]))<h){for(c=0;c<i;++c)l[c]=t[e+c];return l.length=i,d}return h}const p=u||[NaN,NaN];let f=e+i;for(;f<n;)if(gd(t,f-i,f,i,s,a,p),(d=Vh(s,a,p[0],p[1]))<h){for(h=d,c=0;c<i;++c)l[c]=p[c];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(h))/o|0,1);if(r&&(gd(t,n-i,e,i,s,a,p),(d=Vh(s,a,p[0],p[1]))<h)){for(h=d,c=0;c<i;++c)l[c]=p[c];l.length=i}return h}function vd(t,e,n,i,o,r,s,a,l,h,u){const c=u||[NaN,NaN];for(let d=0,p=n.length;d<p;++d){const u=n[d];h=md(t,e,u,i,o,r,s,a,l,h,c),e=u}return h}function xd(t,e,n,i){for(let o=0,r=n.length;o<r;++o)t[e++]=n[o];return e}function bd(t,e,n,i){for(let o=0,r=n.length;o<r;++o){const r=n[o];for(let n=0;n<i;++n)t[e++]=r[n]}return e}function wd(t,e,n,i,o){const r=o||[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=bd(t,e,n[a],i);r[s++]=o,e=o}return r.length=s,r}function Cd(t,e,n,i,o){const r=void 0!==o?o:[];let s=0;for(let a=e;a<n;a+=i)r[s++]=t.slice(a,a+i);return r.length=s,r}function Ed(t,e,n,i,o){const r=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=n[a];r[s++]=Cd(t,e,o,i,r[s]),e=o}return r.length=s,r}function Td(t,e,n,i,o){const r=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=n[a];r[s++]=Ed(t,e,o,i,r[s]),e=o[o.length-1]}return r.length=s,r}function Sd(t,e,n,i,o,r,s){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)r[s++]=t[e],r[s++]=t[e+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[e,n-i];let u=0;for(;h.length>0;){const n=h.pop(),r=h.pop();let s=0;const a=t[r],c=t[r+1],d=t[n],p=t[n+1];for(let e=r+i;e<n;e+=i){const n=Gh(t[e],t[e+1],a,c,d,p);n>s&&(u=e,s=n)}s>o&&(l[(u-e)/i]=1,r+i<u&&h.push(r,u),u+i<n&&h.push(u,n))}for(let c=0;c<a;++c)l[c]&&(r[s++]=t[e+c*i],r[s++]=t[e+c*i+1]);return s}function Id(t,e){return e*Math.round(t/e)}function Rd(t,e,n,i,o,r,s){if(e==n)return s;let a,l,h=Id(t[e],o),u=Id(t[e+1],o);e+=i,r[s++]=h,r[s++]=u;do{if(a=Id(t[e],o),l=Id(t[e+1],o),(e+=i)==n)return r[s++]=a,r[s++]=l,s}while(a==h&&l==u);for(;e<n;){const n=Id(t[e],o),c=Id(t[e+1],o);if(e+=i,n==a&&c==l)continue;const d=a-h,p=l-u,f=n-h,g=c-u;d*g==p*f&&(d<0&&f<d||d==f||d>0&&f>d)&&(p<0&&g<p||p==g||p>0&&g>p)?(a=n,l=c):(r[s++]=a,r[s++]=l,h=a,u=l,a=n,l=c)}return r[s++]=a,r[s++]=l,s}function Pd(t,e,n,i,o,r,s,a){for(let l=0,h=n.length;l<h;++l){const h=n[l];s=Rd(t,e,h,i,o,r,s),a.push(s),e=h}return s}const Md=function(t,e){dd.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};gl(Md,dd),Md.prototype.clone=function(){const t=new Md(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},Md.prototype.closestPointXY=function(t,e,n,i){return i<sh(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_d(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},Md.prototype.getArea=function(){return pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},Md.prototype.getCoordinates=function(){return Cd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},Md.prototype.getSimplifiedGeometryInternal=function(t){const e=[];e.length=Sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);const n=new Md(null);return n.setFlatCoordinates(hd.XY,e),n},Md.prototype.getType=function(){return Wh.LINEAR_RING},Md.prototype.intersectsExtent=function(t){},Md.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bd(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(hd.XY,null)},Md.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var kd=Md;const Ld=function(t,e){dd.call(this),this.setCoordinates(t,e)};gl(Ld,dd),Ld.prototype.clone=function(){const t=new Ld(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},Ld.prototype.closestPointXY=function(t,e,n,i){const o=this.flatCoordinates,r=Vh(t,e,o[0],o[1]);if(r<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=o[e];return n.length=t,r}return i},Ld.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},Ld.prototype.computeExtent=function(t){return ph(this.flatCoordinates,t)},Ld.prototype.getType=function(){return Wh.POINT},Ld.prototype.intersectsExtent=function(t){return hh(t,this.flatCoordinates[0],this.flatCoordinates[1])},Ld.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xd(this.flatCoordinates,0,t),this.changed()):this.setFlatCoordinates(hd.XY,null)},Ld.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var Fd=Ld;function Dd(t,e,n,i,o){return!xh(o,function(o){return!Od(t,e,n,i,o[0],o[1])})}function Od(t,e,n,i,o,r){let s=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=r?i>r&&(n-a)*(r-l)-(o-a)*(i-l)>0&&s++:i<=r&&(n-a)*(r-l)-(o-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function Ad(t,e,n,i,o,r){if(0===n.length)return!1;if(!Od(t,e,n[0],i,o,r))return!1;for(let s=1,a=n.length;s<a;++s)if(Od(t,n[s-1],n[s],i,o,r))return!1;return!0}function Nd(t,e,n,i,o,r,s){let a,l,h,u,c,d,p;const f=o[r+1],g=[];for(let m=0,v=n.length;m<v;++m){const o=n[m];for(u=t[o-i],d=t[o-i+1],a=e;a<o;a+=i)c=t[a],p=t[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&g.push(h=(f-d)/(p-d)*(c-u)+u),u=c,d=p}let _=NaN,y=-1/0;for(g.sort(nd),u=g[0],a=1,l=g.length;a<l;++a){c=g[a];const o=Math.abs(c-u);o>y&&Ad(t,e,n,i,h=(u+c)/2,f)&&(_=h,y=o),u=c}return isNaN(_)&&(_=o[r]),s?(s.push(_,f,y),s):[_,f,y]}function Gd(t,e,n,i,o,r){const s=[t[e],t[e+1]],a=[];let l;for(;e+i<n;e+=i){if(a[0]=t[e+i],a[1]=t[e+i+1],l=o.call(r,s,a))return l;s[0]=a[0],s[1]=a[1]}return!1}function Vd(t,e,n,i,o){const r=mh([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!kh(o,r)&&(!!lh(o,r)||r[0]>=o[0]&&r[2]<=o[2]||r[1]>=o[1]&&r[3]<=o[3]||Gd(t,e,n,i,function(t,e){return function(t,e,n){let i=!1;const o=uh(t,e),r=uh(t,n);if(o===nh.INTERSECTING||r===nh.INTERSECTING)i=!0;else{const s=t[0],a=t[1],l=t[2],h=t[3],u=n[0],c=n[1],d=(c-e[1])/(u-e[0]);let p,f;r&nh.ABOVE&&!(o&nh.ABOVE)&&(i=(p=u-(c-h)/d)>=s&&p<=l),i||!(r&nh.RIGHT)||o&nh.RIGHT||(i=(f=c-(u-l)*d)>=a&&f<=h),i||!(r&nh.BELOW)||o&nh.BELOW||(i=(p=u-(c-a)/d)>=s&&p<=l),i||!(r&nh.LEFT)||o&nh.LEFT||(i=(f=c-(u-s)*d)>=a&&f<=h)}return i}(o,t,e)}))}function jd(t,e,n,i,o){if(!function(t,e,n,i,o){return!!(Vd(t,e,n,i,o)||Od(t,e,n,i,o[0],o[1])||Od(t,e,n,i,o[0],o[3])||Od(t,e,n,i,o[2],o[1])||Od(t,e,n,i,o[2],o[3]))}(t,e,n[0],i,o))return!1;if(1===n.length)return!0;for(let r=1,s=n.length;r<s;++r)if(Dd(t,n[r-1],n[r],i,o))return!1;return!0}function Bd(t,e,n,i){for(;e<n-i;){for(let o=0;o<i;++o){const r=t[e+o];t[e+o]=t[n-i+o],t[n-i+o]=r}e+=i,n-=i}}function zd(t,e,n,i){let o=0,r=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];o+=(n-r)*(i+s),r=n,s=i}return o>0}function Hd(t,e,n,i,o){const r=void 0!==o&&o;for(let s=0,a=n.length;s<a;++s){const o=n[s],a=zd(t,e,o,i);if(0===s){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=o}return!0}function Wd(t,e,n,i,o){const r=void 0!==o&&o;for(let s=0,a=n.length;s<a;++s){const o=n[s],a=zd(t,e,o,i);(0===s?r&&a||!r&&!a:r&&!a||!r&&a)&&Bd(t,e,o,i),e=o}return e}function Ud(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r)e=Wd(t,e,n[r],i,o);return e}const Yd=function(t,e){dd.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};gl(Yd,dd),Yd.prototype.appendLinearRing=function(t){this.flatCoordinates?sd(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},Yd.prototype.clone=function(){const t=new Yd(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},Yd.prototype.closestPointXY=function(t,e,n,i){return i<sh(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},Yd.prototype.containsXY=function(t,e){return Ad(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},Yd.prototype.getArea=function(){return fd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},Yd.prototype.getCoordinates=function(t){let e;return void 0!==t?Wd(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Ed(e,0,this.ends_,this.stride)},Yd.prototype.getEnds=function(){return this.ends_},Yd.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Eh(this.getExtent());this.flatInteriorPoint_=Nd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},Yd.prototype.getInteriorPoint=function(){return new Fd(this.getFlatInteriorPoint(),hd.XYM)},Yd.prototype.getLinearRingCount=function(){return this.ends_.length},Yd.prototype.getLinearRing=function(t){if(t<0||this.ends_.length<=t)return null;const e=new kd(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},Yd.prototype.getLinearRings=function(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r],a=new kd(null);a.setFlatCoordinates(t,e.slice(o,s)),i.push(a),o=s}return i},Yd.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Hd(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Wd(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},Yd.prototype.getSimplifiedGeometryInternal=function(t){const e=[],n=[];e.length=Pd(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n);const i=new Yd(null);return i.setFlatCoordinates(hd.XY,e,n),i},Yd.prototype.getType=function(){return Wh.POLYGON},Yd.prototype.intersectsExtent=function(t){return jd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},Yd.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=wd(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}else this.setFlatCoordinates(hd.XY,null,this.ends_)},Yd.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.ends_=n,this.changed()};var Kd=Yd;function Xd(t){const e=t[0],n=t[1],i=t[2],o=t[3],r=[e,n,e,o,i,o,i,n,e,n],s=new Yd(null);return s.setFlatCoordinates(hd.XY,r,[r.length]),s}const Zd=function(t){ql.call(this);const e=t||{};this.position_=null,this.transform_=pu,this.watchId_=void 0,Rl(this,Zl("projection"),this.handleProjectionChanged_,this),Rl(this,Zl("tracking"),this.handleTrackingChanged_,this),void 0!==e.projection&&this.setProjection(e.projection),void 0!==e.trackingOptions&&this.setTrackingOptions(e.trackingOptions),this.setTracking(void 0!==e.tracking&&e.tracking)};function qd(t,e,n){const i=void 0!==n?t.toFixed(n):""+t;let o=i.indexOf(".");return(o=-1===o?i.length:o)>e?i:new Array(1+e-o).join("0")+i}function Jd(t,e){return t[0]+=e[0],t[1]+=e[1],t}function Qd(t,e){const n=e[0],i=e[1],o=n[0],r=n[1],s=i[0],a=i[1],l=s-o,h=a-r,u=0===l&&0===h?0:(l*(t[0]-o)+h*(t[1]-r))/(l*l+h*h||0);let c,d;return u<=0?(c=o,d=r):u>=1?(c=s,d=a):(c=o+u*l,d=r+u*h),[c,d]}function $d(t,e,n){const i=zh(e+180,360)-180,o=Math.abs(3600*i),r=n||0,s=Math.pow(10,r);let a=Math.floor(o/3600),l=Math.floor((o-3600*a)/60),h=o-3600*a-60*l;return(h=Math.ceil(h*s)/s)>=60&&(h=0,l+=1),l>=60&&(l=0,a+=1),a+"\xb0 "+qd(l,2)+"\u2032 "+qd(h,2,r)+"\u2033"+(0==i?"":" "+t.charAt(i<0?1:0))}function tp(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function ep(t,e){const n=Math.cos(e),i=Math.sin(e),o=t[1]*n+t[0]*i;return t[0]=t[0]*n-t[1]*i,t[1]=o,t}function np(t,e){return t[0]*=e,t[1]*=e,t}function ip(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function op(t,e){return Math.sqrt(ip(t,e))}function rp(t,e){return ip(t,Qd(t,e))}function sp(t,e,n,i,o,r){let s=NaN,a=NaN;const l=(n-e)/i;if(1===l)s=t[e],a=t[e+1];else if(2==l)s=(1-o)*t[e]+o*t[e+i],a=(1-o)*t[e+1]+o*t[e+i+1];else if(0!==l){let r=t[e],l=t[e+1],h=0;const u=[0];for(let o=e+i;o<n;o+=i){const e=t[o],n=t[o+1];h+=Math.sqrt((e-r)*(e-r)+(n-l)*(n-l)),u.push(h),r=e,l=n}const c=o*h,d=function(t,e,n){let i,o;const r=nd;let s=0,a=t.length,l=!1;for(;s<a;)(o=+r(t[i=s+(a-s>>1)],e))<0?s=i+1:(a=i,l=!o);return l?s:~s}(u,c);if(d<0){const n=(c-u[-d-2])/(u[-d-1]-u[-d-2]),o=e+(-d-2)*i;s=Hh(t[o],t[o+i],n),a=Hh(t[o+1],t[o+i+1],n)}else s=t[e+d*i],a=t[e+d*i+1]}return r?(r[0]=s,r[1]=a,r):[s,a]}function ap(t,e,n,i,o,r){if(n==e)return null;let s;if(o<t[e+i-1])return r?((s=t.slice(e,e+i))[i-1]=o,s):null;if(t[n-1]<o)return r?((s=t.slice(n-i,n))[i-1]=o,s):null;if(o==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const e=a+l>>1;o<t[(e+1)*i-1]?l=e:a=e+1}const h=t[a*i-1];if(o==h)return t.slice((a-1)*i,(a-1)*i+i);const u=(o-h)/(t[(a+1)*i-1]-h);s=[];for(let c=0;c<i-1;++c)s.push(Hh(t[(a-1)*i+c],t[a*i+c],u));return s.push(o),s}function lp(t,e,n,i){let o=t[e],r=t[e+1],s=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];s+=Math.sqrt((e-o)*(e-o)+(n-r)*(n-r)),o=e,r=n}return s}gl(Zd,ql),Zd.prototype.disposeInternal=function(){this.setTracking(!1),ql.prototype.disposeInternal.call(this)},Zd.prototype.handleProjectionChanged_=function(){const t=this.getProjection();t&&(this.transform_=xu(gu("EPSG:4326"),t),this.position_&&this.set("position",this.transform_(this.position_)))},Zd.prototype.handleTrackingChanged_=function(){if(fc){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},Zd.prototype.positionChange_=function(t){const e=t.coords;this.set("accuracy",e.accuracy),this.set("altitude",null===e.altitude?void 0:e.altitude),this.set("altitudeAccuracy",null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set("heading",null===e.heading?void 0:Bh(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const n=this.transform_(this.position_);this.set("position",n),this.set("speed",null===e.speed?void 0:e.speed);const i=function(t,e,n,i){const o=[];for(let s=0;s<32;++s)sd(o,Kh(t,e,2*Math.PI*s/32,void 0));o.push(o[0],o[1]);const r=new Yd(null);return r.setFlatCoordinates(hd.XY,o,[o.length]),r}(this.position_,e.accuracy);i.applyTransform(this.transform_),this.set("accuracyGeometry",i),this.changed()},Zd.prototype.positionError_=function(t){t.type=Hl.ERROR,this.setTracking(!1),this.dispatchEvent(t)},Zd.prototype.getAccuracy=function(){return this.get("accuracy")},Zd.prototype.getAccuracyGeometry=function(){return this.get("accuracyGeometry")||null},Zd.prototype.getAltitude=function(){return this.get("altitude")},Zd.prototype.getAltitudeAccuracy=function(){return this.get("altitudeAccuracy")},Zd.prototype.getHeading=function(){return this.get("heading")},Zd.prototype.getPosition=function(){return this.get("position")},Zd.prototype.getProjection=function(){return this.get("projection")},Zd.prototype.getSpeed=function(){return this.get("speed")},Zd.prototype.getTracking=function(){return this.get("tracking")},Zd.prototype.getTrackingOptions=function(){return this.get("trackingOptions")},Zd.prototype.setProjection=function(t){this.set("projection",gu(t))},Zd.prototype.setTracking=function(t){this.set("tracking",t)},Zd.prototype.setTrackingOptions=function(t){this.set("trackingOptions",t)};const hp=function(t,e){dd.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};gl(hp,dd),hp.prototype.appendCoordinate=function(t){this.flatCoordinates?sd(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},hp.prototype.clone=function(){const t=new hp(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},hp.prototype.closestPointXY=function(t,e,n,i){return i<sh(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_d(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))},hp.prototype.forEachSegment=function(t){return Gd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},hp.prototype.getCoordinateAtM=function(t,e){return this.layout!=hd.XYM&&this.layout!=hd.XYZM?null:ap(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,void 0!==e&&e)},hp.prototype.getCoordinates=function(){return Cd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},hp.prototype.getCoordinateAt=function(t,e){return sp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},hp.prototype.getLength=function(){return lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},hp.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},hp.prototype.getSimplifiedGeometryInternal=function(t){const e=[];e.length=Sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);const n=new hp(null);return n.setFlatCoordinates(hd.XY,e),n},hp.prototype.getType=function(){return Wh.LINE_STRING},hp.prototype.intersectsExtent=function(t){return Vd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},hp.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bd(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(hd.XY,null)},hp.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var up=hp;function cp(t,e,n){const i=[];let o=t(0),r=t(1),s=e(o),a=e(r);const l=[r,o],h=[a,s],u=[1,0],c={};let d,p,f,g,_,y,m=1e5;for(;--m>0&&u.length>0;)f=u.pop(),o=l.pop(),s=h.pop(),(y=f.toString())in c||(i.push(s[0],s[1]),c[y]=!0),g=u.pop(),r=l.pop(),a=h.pop(),Gh((p=e(d=t(_=(f+g)/2)))[0],p[1],s[0],s[1],a[0],a[1])<n?(i.push(a[0],a[1]),c[y=g.toString()]=!0):(u.push(g,_,_,f),h.push(a,p,p,s),l.push(r,d,d,o));return i}const dp=function(t){const e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Uc({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};dp.prototype.clone=function(){return new dp({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},dp.prototype.getOverflow=function(){return this.overflow_},dp.prototype.getFont=function(){return this.font_},dp.prototype.getMaxAngle=function(){return this.maxAngle_},dp.prototype.getPlacement=function(){return this.placement_},dp.prototype.getOffsetX=function(){return this.offsetX_},dp.prototype.getOffsetY=function(){return this.offsetY_},dp.prototype.getFill=function(){return this.fill_},dp.prototype.getRotateWithView=function(){return this.rotateWithView_},dp.prototype.getRotation=function(){return this.rotation_},dp.prototype.getScale=function(){return this.scale_},dp.prototype.getStroke=function(){return this.stroke_},dp.prototype.getText=function(){return this.text_},dp.prototype.getTextAlign=function(){return this.textAlign_},dp.prototype.getTextBaseline=function(){return this.textBaseline_},dp.prototype.getBackgroundFill=function(){return this.backgroundFill_},dp.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},dp.prototype.getPadding=function(){return this.padding_},dp.prototype.setOverflow=function(t){this.overflow_=t},dp.prototype.setFont=function(t){this.font_=t},dp.prototype.setMaxAngle=function(t){this.maxAngle_=t},dp.prototype.setOffsetX=function(t){this.offsetX_=t},dp.prototype.setOffsetY=function(t){this.offsetY_=t},dp.prototype.setPlacement=function(t){this.placement_=t},dp.prototype.setFill=function(t){this.fill_=t},dp.prototype.setRotation=function(t){this.rotation_=t},dp.prototype.setScale=function(t){this.scale_=t},dp.prototype.setStroke=function(t){this.stroke_=t},dp.prototype.setText=function(t){this.text_=t},dp.prototype.setTextAlign=function(t){this.textAlign_=t},dp.prototype.setTextBaseline=function(t){this.textBaseline_=t},dp.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},dp.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},dp.prototype.setPadding=function(t){this.padding_=t};var pp=dp;const fp=new Kc({color:"rgba(0,0,0,0.2)"}),gp=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],_p=function(t){const e=t||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==e.targetSize?e.targetSize:100,this.maxLines_=void 0!==e.maxLines?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:fp,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==e.showLabels&&(this.lonLabelFormatter_=void 0==e.lonLabelFormatter?$d.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=void 0==e.latLabelFormatter?$d.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=void 0==e.lonLabelPosition?0:e.lonLabelPosition,this.latLabelPosition_=void 0==e.latLabelPosition?1:e.latLabelPosition,this.lonLabelStyle_=void 0!==e.lonLabelStyle?e.lonLabelStyle:new pp({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Uc({color:"rgba(0,0,0,1)"}),stroke:new Kc({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==e.latLabelStyle?e.latLabelStyle:new pp({font:"12px Calibri,sans-serif",textAlign:"end",fill:new Uc({color:"rgba(0,0,0,1)"}),stroke:new Kc({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.setMap(void 0!==e.map?e.map:null)};_p.prototype.addMeridian_=function(t,e,n,i,o,r){const s=this.getMeridian_(t,e,n,i,r);if(kh(s.getExtent(),o)){if(this.meridiansLabels_){const e=this.getMeridianPoint_(s,o,r);this.meridiansLabels_[r]={geom:e,text:this.lonLabelFormatter_(t)}}this.meridians_[r++]=s}return r},_p.prototype.getMeridianPoint_=function(t,e,n){const i=t.getFlatCoordinates(),o=Math.max(e[1],i[1]),r=Math.min(e[3],i[i.length-1]),s=Ah(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,r),a=[i[0],s],l=void 0!==this.meridiansLabels_[n]?this.meridiansLabels_[n].geom:new Fd(null);return l.setCoordinates(a),l},_p.prototype.addParallel_=function(t,e,n,i,o,r){const s=this.getParallel_(t,e,n,i,r);if(kh(s.getExtent(),o)){if(this.parallelsLabels_){const e=this.getParallelPoint_(s,o,r);this.parallelsLabels_[r]={geom:e,text:this.latLabelFormatter_(t)}}this.parallels_[r++]=s}return r},_p.prototype.getParallelPoint_=function(t,e,n){const i=t.getFlatCoordinates(),o=Math.max(e[0],i[0]),r=Math.min(e[2],i[i.length-2]),s=[Ah(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,r),i[1]],a=void 0!==this.parallelsLabels_[n]?this.parallelsLabels_[n].geom:new Fd(null);return a.setCoordinates(s),a},_p.prototype.createGraticule_=function(t,e,n,i){const o=this.getInterval_(n);if(-1==o)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));const r=this.toLonLatTransform_(e);let s=r[0],a=r[1];const l=this.maxLines_;let h,u,c,d,p=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)];const f=(p=Cu(p,this.projection_,"EPSG:4326"))[3],g=p[2],_=p[1],y=p[0];for(d=Ah(s=Math.floor(s/o)*o,this.minLon_,this.maxLon_),u=this.addMeridian_(d,_,f,i,t,0),h=0;d!=this.minLon_&&h++<l;)d=Math.max(d-o,this.minLon_),u=this.addMeridian_(d,_,f,i,t,u);for(d=Ah(s,this.minLon_,this.maxLon_),h=0;d!=this.maxLon_&&h++<l;)d=Math.min(d+o,this.maxLon_),u=this.addMeridian_(d,_,f,i,t,u);for(this.meridians_.length=u,this.meridiansLabels_&&(this.meridiansLabels_.length=u),c=Ah(a=Math.floor(a/o)*o,this.minLat_,this.maxLat_),u=this.addParallel_(c,y,g,i,t,0),h=0;c!=this.minLat_&&h++<l;)c=Math.max(c-o,this.minLat_),u=this.addParallel_(c,y,g,i,t,u);for(c=Ah(a,this.minLat_,this.maxLat_),h=0;c!=this.maxLat_&&h++<l;)c=Math.min(c+o,this.maxLat_),u=this.addParallel_(c,y,g,i,t,u);this.parallels_.length=u,this.parallelsLabels_&&(this.parallelsLabels_.length=u)},_p.prototype.getInterval_=function(t){const e=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1];let i=-1;const o=Math.pow(this.targetSize_*t,2),r=[],s=[];for(let a=0,l=gp.length;a<l;++a){const t=gp[a]/2;if(r[0]=e-t,r[1]=n-t,s[0]=e+t,s[1]=n+t,this.fromLonLatTransform_(r,r),this.fromLonLatTransform_(s,s),Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2)<=o)break;i=gp[a]}return i},_p.prototype.getMap=function(){return this.map_},_p.prototype.getMeridian_=function(t,e,n,i,o){const r=function(t,e,n,i,o){return cp(function(i){return[t,e+(n-e)*i]},bu(gu("EPSG:4326"),i),o)}(t,e,n,this.projection_,i),s=void 0!==this.meridians_[o]?this.meridians_[o]:new up(null);return s.setFlatCoordinates(hd.XY,r),s},_p.prototype.getMeridians=function(){return this.meridians_},_p.prototype.getParallel_=function(t,e,n,i,o){const r=function(t,e,n,i,o){return cp(function(i){return[e+(n-e)*i,t]},bu(gu("EPSG:4326"),i),o)}(t,e,n,this.projection_,i),s=void 0!==this.parallels_[o]?this.parallels_[o]:new up(null);return s.setFlatCoordinates(hd.XY,r),s},_p.prototype.getParallels=function(){return this.parallels_},_p.prototype.handlePostCompose_=function(t){const e=t.vectorContext,n=t.frameState,i=n.extent,o=n.viewState,r=o.center,s=o.projection,a=o.resolution,l=n.pixelRatio,h=a*a/(4*l*l);let u,c,d,p;for((!this.projection_||!vu(this.projection_,s))&&this.updateProjectionInfo_(s),this.createGraticule_(i,r,a,h),e.setFillStrokeStyle(null,this.strokeStyle_),u=0,c=this.meridians_.length;u<c;++u)e.drawGeometry(d=this.meridians_[u]);for(u=0,c=this.parallels_.length;u<c;++u)e.drawGeometry(d=this.parallels_[u]);if(this.meridiansLabels_)for(u=0,c=this.meridiansLabels_.length;u<c;++u)this.lonLabelStyle_.setText((p=this.meridiansLabels_[u]).text),e.setTextStyle(this.lonLabelStyle_),e.drawGeometry(p.geom);if(this.parallelsLabels_)for(u=0,c=this.parallelsLabels_.length;u<c;++u)this.latLabelStyle_.setText((p=this.parallelsLabels_[u]).text),e.setTextStyle(this.latLabelStyle_),e.drawGeometry(p.geom)},_p.prototype.updateProjectionInfo_=function(t){const e=gu("EPSG:4326"),n=t.getWorldExtent(),i=Cu(n,e,t);this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0],this.maxLatP_=i[3],this.maxLonP_=i[2],this.minLatP_=i[1],this.minLonP_=i[0],this.fromLonLatTransform_=bu(e,t),this.toLonLatTransform_=bu(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_(Eh(t.getExtent())),this.projection_=t},_p.prototype.setMap=function(t){this.map_&&(kl(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=Rl(t,"postcompose",this.handlePostCompose_,this),t.render()),this.map_=t};const yp=function(t,e,n,i){zl.call(this),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=i};gl(yp,zl),yp.prototype.changed=function(){this.dispatchEvent(Hl.CHANGE)},yp.prototype.getExtent=function(){return this.extent},yp.prototype.getImage=function(){},yp.prototype.getPixelRatio=function(){return this.pixelRatio_},yp.prototype.getResolution=function(){return this.resolution},yp.prototype.getState=function(){return this.state},yp.prototype.load=function(){};var mp=yp;const vp=function(t,e,n,i,o,r){mp.call(this,t,e,n,mc.IDLE),this.src_=i,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=mc.IDLE,this.imageLoadFunction_=r};gl(vp,mp),vp.prototype.getImage=function(){return this.image_},vp.prototype.handleImageError_=function(){this.state=mc.ERROR,this.unlistenImage_(),this.changed()},vp.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Sh(this.extent)/this.image_.height),this.state=mc.LOADED,this.unlistenImage_(),this.changed()},vp.prototype.load=function(){this.state!=mc.IDLE&&this.state!=mc.ERROR||(this.state=mc.LOADING,this.changed(),this.imageListenerKeys_=[Pl(this.image_,Hl.ERROR,this.handleImageError_,this),Pl(this.image_,Hl.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},vp.prototype.setImage=function(t){this.image_=t},vp.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(kl),this.imageListenerKeys_=null};const xp=function(t,e,n,i,o){this.loader_=void 0!==o?o:null,mp.call(this,t,e,n,void 0!==o?mc.IDLE:mc.LOADED),this.canvas_=i,this.error_=null};gl(xp,mp),xp.prototype.getError=function(){return this.error_},xp.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=mc.ERROR):this.state=mc.LOADED,this.changed()},xp.prototype.load=function(){this.state==mc.IDLE&&(this.state=mc.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},xp.prototype.getImage=function(){return this.canvas_};var bp=xp;function wp(t){return Math.pow(t,3)}function Cp(t){return 1-wp(1-t)}function Ep(t){return 3*t*t-2*t*t*t}function Tp(t){return t}const Sp=function(t,e,n){zl.call(this);const i=n||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={}};gl(Sp,zl),Sp.prototype.changed=function(){this.dispatchEvent(Hl.CHANGE)},Sp.prototype.getKey=function(){return this.key+"/"+this.tileCoord},Sp.prototype.getInterimTile=function(){if(!this.interimTile)return this;let t=this.interimTile;do{if(2==t.getState())return t;t=t.interimTile}while(t);return this},Sp.prototype.refreshInterimChain=function(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)},Sp.prototype.getTileCoord=function(){return this.tileCoord},Sp.prototype.getState=function(){return this.state},Sp.prototype.setState=function(t){this.state=t,this.changed()},Sp.prototype.load=function(){},Sp.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else this.transitionStarts_[t]=n=e;const i=e-n+1e3/60;return i>=this.transition_?1:wp(i/this.transition_)},Sp.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},Sp.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)};var Ip=Sp;const Rp=function(t,e,n,i,o,r){Ip.call(this,t,e,r),this.crossOrigin_=i,this.src_=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.imageListenerKeys_=null,this.tileLoadFunction_=o};function Pp(){const t=Zu(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}gl(Rp,Ip),Rp.prototype.disposeInternal=function(){1==this.state&&(this.unlistenImage_(),this.image_=Pp()),this.interimTile&&this.interimTile.dispose(),this.state=5,this.changed(),Ip.prototype.disposeInternal.call(this)},Rp.prototype.getImage=function(){return this.image_},Rp.prototype.getKey=function(){return this.src_},Rp.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=Pp(),this.changed()},Rp.prototype.handleImageLoad_=function(){this.state=this.image_.naturalWidth&&this.image_.naturalHeight?2:4,this.unlistenImage_(),this.changed()},Rp.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.imageListenerKeys_=[Pl(this.image_,Hl.ERROR,this.handleImageError_,this),Pl(this.image_,Hl.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},Rp.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(kl),this.imageListenerKeys_=null};var Mp=Rp;const kp=function(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};kp.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},kp.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},kp.prototype.end=function(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const o=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/i,this.initialVelocity_>this.minVelocity_},kp.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},kp.prototype.getAngle=function(){return this.angle_};var Lp=kp;const Fp=function(t,e,n){jl.call(this,t),this.map=e,this.frameState=void 0!==n?n:null};gl(Fp,jl);var Dp=Fp;const Op=function(t,e,n,i,o){Dp.call(this,t,e,o),this.originalEvent=n,this.pixel=e.getEventPixel(n),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==i&&i};gl(Op,Dp),Op.prototype.preventDefault=function(){Dp.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},Op.prototype.stopPropagation=function(){Dp.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var Ap=Op,Np={SINGLECLICK:"singleclick",CLICK:Hl.CLICK,DBLCLICK:Hl.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};const Gp=function(t,e,n,i,o){Ap.call(this,t,e,n.originalEvent,i,o),this.pointerEvent=n};gl(Gp,Ap);var Vp=Gp;const jp=function(t,e){this.dispatcher=t,this.mapping_=e};jp.prototype.getEvents=function(){return Object.keys(this.mapping_)},jp.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var Bp=jp;const zp=function(t){Bp.call(this,t,{mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout}),this.pointerMap=t.pointerMap,this.lastTouches=[]};gl(zp,Bp);const Hp=1,Wp="mouse";function Up(t,e){const n=e.cloneEvent(t,t),i=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),i()},n.pointerId=Hp,n.isPrimary=!0,n.pointerType=Wp,n}zp.prototype.isEventSimulatedFromTouch_=function(t){const e=this.lastTouches,n=t.clientX,i=t.clientY;for(let o,r=0,s=e.length;r<s&&(o=e[r]);r++){const t=Math.abs(n-o[0]),e=Math.abs(i-o[1]);if(t<=25&&e<=25)return!0}return!1},zp.prototype.mousedown=function(t){if(!this.isEventSimulatedFromTouch_(t)){Hp.toString()in this.pointerMap&&this.cancel(t);const e=Up(t,this.dispatcher);this.pointerMap[Hp.toString()]=t,this.dispatcher.down(e,t)}},zp.prototype.mousemove=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=Up(t,this.dispatcher);this.dispatcher.move(e,t)}},zp.prototype.mouseup=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=this.pointerMap[Hp.toString()];if(e&&e.button===t.button){const e=Up(t,this.dispatcher);this.dispatcher.up(e,t),this.cleanupMouse()}}},zp.prototype.mouseover=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=Up(t,this.dispatcher);this.dispatcher.enterOver(e,t)}},zp.prototype.mouseout=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=Up(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}},zp.prototype.cancel=function(t){const e=Up(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},zp.prototype.cleanupMouse=function(){delete this.pointerMap[Hp.toString()]};var Yp=zp;const Kp=function(t){Bp.call(this,t,{MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture}),this.pointerMap=t.pointerMap};gl(Kp,Bp);const Xp=["","unavailable","touch","pen","mouse"];Kp.prototype.prepareEvent_=function(t){let e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=Xp[t.pointerType]),e},Kp.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},Kp.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;const e=this.prepareEvent_(t);this.dispatcher.down(e,t)},Kp.prototype.msPointerMove=function(t){const e=this.prepareEvent_(t);this.dispatcher.move(e,t)},Kp.prototype.msPointerUp=function(t){const e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)},Kp.prototype.msPointerOut=function(t){const e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)},Kp.prototype.msPointerOver=function(t){const e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)},Kp.prototype.msPointerCancel=function(t){const e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)},Kp.prototype.msLostPointerCapture=function(t){const e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)},Kp.prototype.msGotPointerCapture=function(t){const e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)};var Zp=Kp;const qp=function(t){Bp.call(this,t,{pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture})};gl(qp,Bp),qp.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)},qp.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)},qp.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)},qp.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)},qp.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)},qp.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)},qp.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},qp.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)};var Jp=qp;const Qp=function(t,e,n){jl.call(this,t),this.originalEvent=e;const i=n||{};this.buttons=this.getButtons_(i),this.pressure=this.getPressure_(i,this.buttons),this.bubbles="bubbles"in i&&i.bubbles,this.cancelable="cancelable"in i&&i.cancelable,this.view="view"in i?i.view:null,this.detail="detail"in i?i.detail:null,this.screenX="screenX"in i?i.screenX:0,this.screenY="screenY"in i?i.screenY:0,this.clientX="clientX"in i?i.clientX:0,this.clientY="clientY"in i?i.clientY:0,this.ctrlKey="ctrlKey"in i&&i.ctrlKey,this.altKey="altKey"in i&&i.altKey,this.shiftKey="shiftKey"in i&&i.shiftKey,this.metaKey="metaKey"in i&&i.metaKey,this.button="button"in i?i.button:0,this.relatedTarget="relatedTarget"in i?i.relatedTarget:null,this.pointerId="pointerId"in i?i.pointerId:0,this.width="width"in i?i.width:0,this.height="height"in i?i.height:0,this.tiltX="tiltX"in i?i.tiltX:0,this.tiltY="tiltY"in i?i.tiltY:0,this.pointerType="pointerType"in i?i.pointerType:"",this.hwTimestamp="hwTimestamp"in i?i.hwTimestamp:0,this.isPrimary="isPrimary"in i&&i.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})};gl(Qp,jl);let $p=!1;Qp.prototype.getButtons_=function(t){let e;if(t.buttons||$p)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},Qp.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},function(){try{const t=new MouseEvent("click",{buttons:1});$p=1===t.buttons}catch(t){}}();var tf=Qp;const ef=function(t,e){Bp.call(this,t,{touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel}),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500};gl(ef,Bp),ef.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},ef.prototype.setPrimaryTouch_=function(t){const e=Object.keys(this.pointerMap).length;(0===e||1===e&&Hp.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},ef.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},ef.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},ef.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},ef.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},ef.prototype.touchToPointer_=function(t,e){const n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.webkitRadiusX||e.radiusX||0,n.height=e.webkitRadiusY||e.radiusY||0,n.pressure=e.webkitForce||e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},ef.prototype.processTouches_=function(t,e){const n=Array.prototype.slice.call(t.changedTouches),i=n.length;function o(){t.preventDefault()}for(let r=0;r<i;++r){const i=this.touchToPointer_(t,n[r]);i.preventDefault=o,e.call(this,t,i)}},ef.prototype.findTouch_=function(t,e){const n=t.length;for(let i=0;i<n;i++)if(t[i].identifier===e)return!0;return!1},ef.prototype.vacuumTouches_=function(t){const e=t.touches,n=Object.keys(this.pointerMap),i=n.length;if(i>=e.length){const o=[];for(let t=0;t<i;++t){const i=n[t],r=this.pointerMap[i];i==Hp||this.findTouch_(e,i-2)||o.push(r.out)}for(let e=0;e<o.length;++e)this.cancelOut_(t,o[e])}},ef.prototype.touchstart=function(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)},ef.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},ef.prototype.touchmove=function(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)},ef.prototype.moveOverOut_=function(t,e){const n=e,i=this.pointerMap[n.pointerId];if(!i)return;const o=i.out,r=i.outTarget;this.dispatcher.move(n,t),o&&r!==n.target&&(o.relatedTarget=n.target,n.relatedTarget=r,o.target=r,n.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(n,t)):(n.target=r,n.relatedTarget=null,this.cancelOut_(t,n))),i.out=n,i.outTarget=n.target},ef.prototype.touchend=function(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)},ef.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},ef.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)},ef.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},ef.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},ef.prototype.dedupSynthMouse_=function(t){const e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){const t=[n.clientX,n.clientY];e.push(t),setTimeout(function(){!function(e,n){const i=e.indexOf(t);i>-1&&e.splice(i,1)}(e)},this.dedupTimeout_)}};var nf=ef;const of=function(t){zl.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()};gl(of,zl);const rf=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];of.prototype.registerSources=function(){if(_c)this.registerSource("native",new Jp(this));else if(yc)this.registerSource("ms",new Zp(this));else{const t=new Yp(this);this.registerSource("mouse",t),gc&&this.registerSource("touch",new nf(this,t))}this.register_()},of.prototype.registerSource=function(t,e){const n=e,i=n.getEvents();i&&(i.forEach((function(t){const e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))}).bind(this)),this.eventSourceList_.push(n))},of.prototype.register_=function(){const t=this.eventSourceList_.length;for(let e=0;e<t;e++)this.addEvents_(this.eventSourceList_[e].getEvents())},of.prototype.unregister_=function(){const t=this.eventSourceList_.length;for(let e=0;e<t;e++)this.removeEvents_(this.eventSourceList_[e].getEvents())},of.prototype.eventHandler_=function(t){const e=this.eventMap_[t.type];e&&e(t)},of.prototype.addEvents_=function(t){t.forEach((function(t){Rl(this.element_,t,this.eventHandler_,this)}).bind(this))},of.prototype.removeEvents_=function(t){t.forEach((function(t){Ml(this.element_,t,this.eventHandler_,this)}).bind(this))},of.prototype.cloneEvent=function(t,e){const n={};for(let i=0,o=rf.length;i<o;i++){const o=rf[i][0];n[o]=t[o]||e[o]||rf[i][1]}return n},of.prototype.down=function(t,e){this.fireEvent("pointerdown",t,e)},of.prototype.move=function(t,e){this.fireEvent("pointermove",t,e)},of.prototype.up=function(t,e){this.fireEvent("pointerup",t,e)},of.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent("pointerenter",t,e)},of.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent("pointerleave",t,e)},of.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent("pointerover",t,e)},of.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent("pointerout",t,e)},of.prototype.cancel=function(t,e){this.fireEvent("pointercancel",t,e)},of.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},of.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},of.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},of.prototype.makeEvent=function(t,e,n){return new tf(t,n,e)},of.prototype.fireEvent=function(t,e,n){const i=this.makeEvent(t,e,n);this.dispatchEvent(i)},of.prototype.fireNativeEvent=function(t){const e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},of.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Yp.prepareEvent(e,this),e)},of.prototype.disposeInternal=function(){this.unregister_(),zl.prototype.disposeInternal.call(this)};var sf=of;const af=function(t,e){zl.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*dc:dc,this.down_=null;const n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new sf(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Rl(this.pointerEventHandler_,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=Rl(this.pointerEventHandler_,"pointermove",this.relayEvent_,this)};gl(af,zl),af.prototype.emulateClick_=function(t){let e=new Vp(Np.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new Vp(Np.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=0;const e=new Vp(Np.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)},af.prototype.updateActivePointers_=function(t){const e=t;e.type==Np.POINTERUP||e.type==Np.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Np.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},af.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);const e=new Vp(Np.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(kl),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},af.prototype.isMouseActionButton_=function(t){return 0===t.button},af.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);const e=new Vp(Np.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new sf(document),this.dragListenerKeys_.push(Rl(this.documentPointerEventHandler_,Np.POINTERMOVE,this.handlePointerMove_,this),Rl(this.documentPointerEventHandler_,Np.POINTERUP,this.handlePointerUp_,this),Rl(this.pointerEventHandler_,Np.POINTERCANCEL,this.handlePointerUp_,this)))},af.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;const e=new Vp(Np.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},af.prototype.relayEvent_=function(t){const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Vp(t.type,this.map_,t,e))},af.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},af.prototype.disposeInternal=function(){this.relayedListenerKey_&&(kl(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(kl(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(kl),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),zl.prototype.disposeInternal.call(this)};var lf=af;const hf=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};hf.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,bl(this.queuedElements_)},hf.prototype.dequeue=function(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n},hf.prototype.enqueue=function(t){th(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},hf.prototype.getCount=function(){return this.elements_.length},hf.prototype.getLeftChildIndex_=function(t){return 2*t+1},hf.prototype.getRightChildIndex_=function(t){return 2*t+2},hf.prototype.getParentIndex_=function(t){return t-1>>1},hf.prototype.heapify_=function(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},hf.prototype.isEmpty=function(){return 0===this.elements_.length},hf.prototype.isKeyQueued=function(t){return t in this.queuedElements_},hf.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},hf.prototype.siftUp_=function(t){const e=this.elements_,n=this.priorities_,i=e.length,o=e[t],r=n[t],s=t;for(;t<i>>1;){const o=this.getLeftChildIndex_(t),r=this.getRightChildIndex_(t),s=r<i&&n[r]<n[o]?r:o;e[t]=e[s],n[t]=n[s],t=s}e[t]=o,n[t]=r,this.siftDown_(s,t)},hf.prototype.siftDown_=function(t,e){const n=this.elements_,i=this.priorities_,o=n[e],r=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>r))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=o,i[e]=r},hf.prototype.reprioritize=function(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const o=e.length;let r,s,a;for(s=0;s<o;++s)(a=t(r=e[s]))==1/0?delete this.queuedElements_[this.keyFunction_(r)]:(n[i]=a,e[i++]=r);e.length=i,n.length=i,this.heapify_()};var uf=hf;const cf=function(t,e){uf.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}};gl(cf,uf),cf.prototype.enqueue=function(t){const e=uf.prototype.enqueue.call(this,t);return e&&Rl(t[0],Hl.CHANGE,this.handleTileChange,this),e},cf.prototype.getTilesLoading=function(){return this.tilesLoading_},cf.prototype.handleTileChange=function(t){const e=t.target,n=e.getState();if(2===n||3===n||4===n||5===n){Ml(e,Hl.CHANGE,this.handleTileChange,this);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}},cf.prototype.loadMoreTiles=function(t,e){let n,i,o,r=0,s=!1;for(;this.tilesLoading_<t&&r<e&&this.getCount()>0;)o=(i=this.dequeue()[0]).getKey(),5===(n=i.getState())?s=!0:0!==n||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,i.load());0===r&&s&&this.tileChangeCallback_()};var df=cf;const pf=42,ff=256;function gf(t){return t}function _f(t,e){return void 0!==t?0:void 0}function yf(t,e){return void 0!==t?t+e:void 0}var mf={ANIMATING:0,INTERACTING:1};const vf=function(t){ql.call(this);const e=xl({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=mu(e.projection,"EPSG:3857"),this.applyOptions_(e)};gl(vf,ql),vf.prototype.applyOptions_=function(t){const e={};e.center=void 0!==t.center?t.center:null;const n=function(t){let e,n,i,o=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28;const s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){const s=t.resolutions;n=s[o],i=void 0!==s[r]?s[r]:s[s.length-1],s=s,e=function(t,e,n){if(void 0!==t){let i=od(s,t,n);i=Ah(i+e,0,s.length-1);const o=Math.floor(i);return i!=o&&o<s.length-1?s[o]/Math.pow(s[o]/s[o+1],i-o):s[o]}}}else{const a=mu(t.projection,"EPSG:3857"),l=a.getExtent(),h=(l?Math.max(Mh(l),Sh(l)):360*Zh[qh.DEGREES]/a.getMetersPerUnit())/ff/Math.pow(2,0),u=h/Math.pow(2,28);void 0!==(n=t.maxResolution)?o=0:n=h/Math.pow(s,o),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(s,r):h/Math.pow(s,r):u),r=o+Math.floor(Math.log(n/i)/Math.log(s)),i=n/Math.pow(s,r-o),e=function(t,e,n){return function(i,o,r){if(void 0!==i){const s=-r/2+.5,a=Math.floor(Math.log(e/i)/Math.log(t)+s);let l=Math.max(a+o,0);return void 0!==n&&(l=Math.min(l,n)),e/Math.pow(t,l)}}}(s,n,r-o)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:s}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;const i=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Ah(t[0],e[0],e[2]),Ah(t[1],e[1],e[3])]:void 0}):gf;var e}(t),o=n.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?function(t){const e=Bh(5);return function(t,n){return void 0!==t?Math.abs(t+n)<=e?0:t+n:void 0}}():!1===e?yf:"number"==typeof e?function(t){const n=2*Math.PI/e;return function(t,e){return void 0!==t?t=Math.floor((t+e)/n+.5)*n:void 0}}():yf}return _f}(t);this.constraints_={center:i,resolution:o,rotation:r},void 0!==t.resolution?e.resolution=t.resolution:void 0!==t.zoom&&(e.resolution=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e.resolution=Ah(Number(this.getResolution()||e.resolution),this.minResolution_,this.maxResolution_))),e.rotation=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},vf.prototype.getUpdatedOptions_=function(t){const e=xl({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),xl({},e,t)},vf.prototype.animate=function(t){let e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){const t=arguments[n-1];return t.center&&this.setCenter(t.center),void 0!==t.zoom&&this.setZoom(t.zoom),void 0!==t.rotation&&this.setRotation(t.rotation),void(e&&setTimeout(function(){e(!0)},0))}let i=Date.now(),o=this.getCenter().slice(),r=this.getResolution(),s=this.getRotation();const a=[];for(let l=0;l<n;++l){const t=arguments[l],n={start:i,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||Ep};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center,o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=r,n.targetResolution=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_,0),r=n.targetResolution):t.resolution&&(n.sourceResolution=r,n.targetResolution=t.resolution,r=n.targetResolution),void 0!==t.rotation){n.sourceRotation=s;const e=zh(t.rotation-s+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=s+e,s=n.targetRotation}n.callback=e,(n=n).sourceCenter&&n.targetCenter&&!tp(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation?i+=n.duration:n.complete=!0,a.push(n)}this.animations_.push(a),this.setHint(mf.ANIMATING,1),this.updateAnimations_()},vf.prototype.getAnimating=function(){return this.hints_[mf.ANIMATING]>0},vf.prototype.getInteracting=function(){return this.hints_[mf.INTERACTING]>0},vf.prototype.cancelAnimations=function(){this.setHint(mf.ANIMATING,-this.hints_[mf.ANIMATING]);for(let t=0,e=this.animations_.length;t<e;++t){const e=this.animations_[t];e[0].callback&&e[0].callback(!1)}this.animations_.length=0},vf.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let o=!0;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r.complete)continue;let s=r.duration>0?(t-r.start)/r.duration:1;s>=1?(r.complete=!0,s=1):o=!1;const a=r.easing(s);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1];this.set("center",[t+a*(r.targetCenter[0]-t),e+a*(r.targetCenter[1]-e)])}if(r.sourceResolution&&r.targetResolution){const t=1===a?r.targetResolution:r.sourceResolution+a*(r.targetResolution-r.sourceResolution);r.anchor&&this.set("center",this.calculateCenterZoom(t,r.anchor)),this.set("resolution",t)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===a?zh(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+a*(r.targetRotation-r.sourceRotation);r.anchor&&this.set("center",this.calculateCenterRotate(t,r.anchor)),this.set("rotation",t)}if(e=!0,!r.complete)break}if(o){this.animations_[n]=null,this.setHint(mf.ANIMATING,-1);const t=i[0].callback;t&&setTimeout(function(){t(!0)},0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))},vf.prototype.calculateCenterRotate=function(t,e){let n;const i=this.getCenter();return void 0!==i&&(ep(n=[i[0]-e[0],i[1]-e[1]],t-this.getRotation()),Jd(n,e)),n},vf.prototype.calculateCenterZoom=function(t,e){let n;const i=this.getCenter(),o=this.getResolution();return void 0!==i&&void 0!==o&&(n=[e[0]-t*(e[0]-i[0])/o,e[1]-t*(e[1]-i[1])/o]),n},vf.prototype.getSizeFromViewport_=function(){const t=[100,100],e='.ol-viewport[data-view="'+yl(this)+'"]',n=document.querySelector(e);if(n){const e=getComputedStyle(n);t[0]=parseInt(e.width,10),t[1]=parseInt(e.height,10)}return t},vf.prototype.constrainCenter=function(t){return this.constraints_.center(t)},vf.prototype.constrainResolution=function(t,e,n){return this.constraints_.resolution(t,e||0,n||0)},vf.prototype.constrainRotation=function(t,e){return this.constraints_.rotation(t,e||0)},vf.prototype.getCenter=function(){return this.get("center")},vf.prototype.getConstraints=function(){return this.constraints_},vf.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},vf.prototype.calculateExtent=function(t){const e=t||this.getSizeFromViewport_(),n=this.getCenter();th(n,1);const i=this.getResolution();th(void 0!==i,2);const o=this.getRotation();return th(void 0!==o,3),Th(n,i,o,e)},vf.prototype.getMaxResolution=function(){return this.maxResolution_},vf.prototype.getMinResolution=function(){return this.minResolution_},vf.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},vf.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},vf.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},vf.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},vf.prototype.getProjection=function(){return this.projection_},vf.prototype.getResolution=function(){return this.get("resolution")},vf.prototype.getResolutions=function(){return this.resolutions_},vf.prototype.getResolutionForExtent=function(t,e){const n=e||this.getSizeFromViewport_(),i=Mh(t)/n[0],o=Sh(t)/n[1];return Math.max(i,o)},vf.prototype.getResolutionForValueFunction=function(t){const e=t||2,n=this.maxResolution_,i=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},vf.prototype.getRotation=function(){return this.get("rotation")},vf.prototype.getValueForResolutionFunction=function(t){const e=t||2,n=this.maxResolution_,i=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/i}},vf.prototype.getState=function(){const t=this.getCenter(),e=this.getProjection(),n=this.getResolution(),i=this.getRotation();return{center:t.slice(),projection:void 0!==e?e:null,resolution:n,rotation:i,zoom:this.getZoom()}},vf.prototype.getZoom=function(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},vf.prototype.getZoomForResolution=function(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const o=od(this.resolutions_,t,1);i=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},vf.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},vf.prototype.fit=function(t,e){const n=e||{};let i,o=n.size;o||(o=this.getSizeFromViewport_()),t instanceof dd?t.getType()===Wh.CIRCLE?(i=Xd(t=t.getExtent())).rotate(this.getRotation(),Eh(t)):i=t:(th(Array.isArray(t),24),th(!Lh(t),25),i=Xd(t));const r=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0===n.constrainResolution||n.constrainResolution,a=void 0!==n.nearest&&n.nearest;let l;l=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;const h=i.getFlatCoordinates(),u=this.getRotation(),c=Math.cos(-u);let d=Math.sin(-u),p=1/0,f=1/0,g=-1/0,_=-1/0;const y=i.getStride();for(let C=0,E=h.length;C<E;C+=y){const t=h[C]*c-h[C+1]*d,e=h[C]*d+h[C+1]*c;p=Math.min(p,t),f=Math.min(f,e),g=Math.max(g,t),_=Math.max(_,e)}let m=this.getResolutionForExtent([p,f,g,_],[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);if(m=isNaN(m)?l:Math.max(m,l),s){let t=this.constrainResolution(m,0,0);!a&&t<m&&(t=this.constrainResolution(t,-1,0)),m=t}let v=(p+g)/2,x=(f+_)/2;const b=[(v+=(r[1]-r[3])/2*m)*c-(x+=(r[0]-r[2])/2*m)*(d=-d),x*c+v*d],w=n.callback?n.callback:Ol;void 0!==n.duration?this.animate({resolution:m,center:b,duration:n.duration,easing:n.easing},w):(this.setResolution(m),this.setCenter(b),setTimeout(w.bind(void 0,!0),0))},vf.prototype.centerOn=function(t,e,n){const i=this.getRotation(),o=Math.cos(-i);let r=Math.sin(-i),s=t[0]*o-t[1]*r,a=t[1]*o+t[0]*r;const l=this.getResolution();this.setCenter([(s+=(e[0]/2-n[0])*l)*o-(a+=(n[1]-e[1]/2)*l)*(r=-r),a*o+s*r])},vf.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},vf.prototype.rotate=function(t,e){if(void 0!==e){const n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)},vf.prototype.setCenter=function(t){this.set("center",t),this.getAnimating()&&this.cancelAnimations()},vf.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},vf.prototype.setResolution=function(t){this.set("resolution",t),this.getAnimating()&&this.cancelAnimations()},vf.prototype.setRotation=function(t){this.set("rotation",t),this.getAnimating()&&this.cancelAnimations()},vf.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))};var xf=vf;const bf=function(t){ql.call(this);const e=xl({},t);e.opacity=void 0!==t.opacity?t.opacity:1,e.visible=void 0===t.visible||t.visible,e.zIndex=void 0!==t.zIndex?t.zIndex:0,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_={layer:this,managed:!0}};gl(bf,ql),bf.prototype.getType=function(){return this.type},bf.prototype.getLayerState=function(){return this.state_.opacity=Ah(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},bf.prototype.getLayersArray=function(t){},bf.prototype.getLayerStatesArray=function(t){},bf.prototype.getExtent=function(){return this.get("extent")},bf.prototype.getMaxResolution=function(){return this.get("maxResolution")},bf.prototype.getMinResolution=function(){return this.get("minResolution")},bf.prototype.getOpacity=function(){return this.get("opacity")},bf.prototype.getSourceState=function(){},bf.prototype.getVisible=function(){return this.get("visible")},bf.prototype.getZIndex=function(){return this.get("zIndex")},bf.prototype.setExtent=function(t){this.set("extent",t)},bf.prototype.setMaxResolution=function(t){this.set("maxResolution",t)},bf.prototype.setMinResolution=function(t){this.set("minResolution",t)},bf.prototype.setOpacity=function(t){this.set("opacity",t)},bf.prototype.setVisible=function(t){this.set("visible",t)},bf.prototype.setZIndex=function(t){this.set("zIndex",t)};var wf=bf;const Cf=function(t){const e=t||{},n=xl({},e);delete n.layers;let i=e.layers;wf.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},Rl(this,Zl("layers"),this.handleLayersChanged_,this),i?Array.isArray(i)?i=new $l(i.slice(),{unique:!0}):(th(i instanceof $l,43),i=i):i=new $l(void 0,{unique:!0}),this.setLayers(i)};gl(Cf,wf),Cf.prototype.handleLayerChange_=function(){this.changed()},Cf.prototype.handleLayersChanged_=function(t){this.layersListenerKeys_.forEach(kl),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Rl(e,"add",this.handleLayersAdd_,this),Rl(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(kl);bl(this.listenerKeys_);const n=e.getArray();for(let i=0,o=n.length;i<o;i++){const t=n[i];this.listenerKeys_[yl(t).toString()]=[Rl(t,"propertychange",this.handleLayerChange_,this),Rl(t,Hl.CHANGE,this.handleLayerChange_,this)]}this.changed()},Cf.prototype.handleLayersAdd_=function(t){const e=t.element,n=yl(e).toString();this.listenerKeys_[n]=[Rl(e,"propertychange",this.handleLayerChange_,this),Rl(e,Hl.CHANGE,this.handleLayerChange_,this)],this.changed()},Cf.prototype.handleLayersRemove_=function(t){const e=yl(t.element).toString();this.listenerKeys_[e].forEach(kl),delete this.listenerKeys_[e],this.changed()},Cf.prototype.getLayers=function(){return this.get("layers")},Cf.prototype.setLayers=function(t){this.set("layers",t)},Cf.prototype.getLayersArray=function(t){const e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},Cf.prototype.getLayerStatesArray=function(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});const i=this.getLayerState();for(let o=n,r=e.length;o<r;o++){const t=e[o];t.opacity*=i.opacity,t.visible=t.visible&&i.visible,t.maxResolution=Math.min(t.maxResolution,i.maxResolution),t.minResolution=Math.max(t.minResolution,i.minResolution),void 0!==i.extent&&(t.extent=void 0!==t.extent?Ih(t.extent,i.extent):i.extent)}return e},Cf.prototype.getSourceState=function(){return"ready"};var Ef=Cf;function Tf(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}const Sf=function(t){ql.call(this);const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers instanceof Ef?t.layers:new Ef({layers:t.layers});let o,r,s;return n.layergroup=i,n.target=t.target,n.view=void 0!==t.view?t.view:new xf,void 0!==t.controls&&(Array.isArray(t.controls)?o=new $l(t.controls.slice()):(th(t.controls instanceof $l,47),o=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new $l(t.interactions.slice()):(th(t.interactions instanceof $l,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?s=new $l(t.overlays.slice()):(th(t.overlays instanceof $l,49),s=t.overlays):s=new $l,{controls:o,interactions:r,keyboardEventTarget:e,overlays:s,values:n}}(t);this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:dc,this.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}).bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(gc?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";const n=[Hl.CLICK,Hl.DBLCLICK,Hl.MOUSEDOWN,Hl.TOUCHSTART,Hl.MSPOINTERDOWN,Np.POINTERDOWN,Hl.MOUSEWHEEL,Hl.WHEEL];for(let i=0,o=n.length;i<o;++i)Rl(this.overlayContainerStopEvent_,n[i],Vl);this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new lf(this,t.moveTolerance);for(const i in Np)Rl(this.mapBrowserEventHandler_,Np[i],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,Rl(this.viewport_,Hl.CONTEXTMENU,this.handleBrowserEvent,this),Rl(this.viewport_,Hl.WHEEL,this.handleBrowserEvent,this),Rl(this.viewport_,Hl.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new $l,this.interactions=e.interactions||new $l,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new df(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Rl(this,Zl("layergroup"),this.handleLayerGroupChanged_,this),Rl(this,Zl("view"),this.handleViewChanged_,this),Rl(this,Zl("size"),this.handleSizeChanged_,this),Rl(this,Zl("target"),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach((function(t){t.setMap(this)}).bind(this)),Rl(this.controls,"add",function(t){t.element.setMap(this)},this),Rl(this.controls,"remove",function(t){t.element.setMap(null)},this),this.interactions.forEach((function(t){t.setMap(this)}).bind(this)),Rl(this.interactions,"add",function(t){t.element.setMap(this)},this),Rl(this.interactions,"remove",function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Rl(this.overlays_,"add",function(t){this.addOverlayInternal_(t.element)},this),Rl(this.overlays_,"remove",function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)};gl(Sf,ql),Sf.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},Sf.prototype.addControl=function(t){this.getControls().push(t)},Sf.prototype.addInteraction=function(t){this.getInteractions().push(t)},Sf.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},Sf.prototype.addOverlay=function(t){this.getOverlays().push(t)},Sf.prototype.addOverlayInternal_=function(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},Sf.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Ml(this.viewport_,Hl.CONTEXTMENU,this.handleBrowserEvent,this),Ml(this.viewport_,Hl.WHEEL,this.handleBrowserEvent,this),Ml(this.viewport_,Hl.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(Hl.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),ql.prototype.disposeInternal.call(this)},Sf.prototype.forEachFeatureAtPixel=function(t,e,n){if(!this.frameState_)return;const i=this.getCoordinateFromPixel(t);return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,null,void 0!==n.layerFilter?n.layerFilter:Fl,null)},Sf.prototype.getFeaturesAtPixel=function(t,e){let n=null;return this.forEachFeatureAtPixel(t,function(t){n||(n=[]),n.push(t)},e),n},Sf.prototype.forEachLayerAtPixel=function(t,e,n){if(!this.frameState_)return;const i=n||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==i.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,null,i.layerFilter||Fl,null)},Sf.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;const n=this.getCoordinateFromPixel(t);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,void 0!==e.layerFilter?e.layerFilter:Fl,null)},Sf.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},Sf.prototype.getEventPixel=function(t){const e=this.viewport_.getBoundingClientRect(),n=t.changedTouches?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},Sf.prototype.getTarget=function(){return this.get("target")},Sf.prototype.getTargetElement=function(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},Sf.prototype.getCoordinateFromPixel=function(t){const e=this.frameState_;return e?Lu(e.pixelToCoordinateTransform,t.slice()):null},Sf.prototype.getControls=function(){return this.controls},Sf.prototype.getOverlays=function(){return this.overlays_},Sf.prototype.getOverlayById=function(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},Sf.prototype.getInteractions=function(){return this.interactions},Sf.prototype.getLayerGroup=function(){return this.get("layergroup")},Sf.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},Sf.prototype.getPixelFromCoordinate=function(t){const e=this.frameState_;return e?Lu(e.coordinateToPixelTransform,t.slice(0,2)):null},Sf.prototype.getRenderer=function(){return this.renderer_},Sf.prototype.getSize=function(){return this.get("size")},Sf.prototype.getView=function(){return this.get("view")},Sf.prototype.getViewport=function(){return this.viewport_},Sf.prototype.getOverlayContainer=function(){return this.overlayContainer_},Sf.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},Sf.prototype.getTilePriority=function(t,e,n,i){const o=this.frameState_;if(!(o&&e in o.wantedTiles))return 1/0;if(!o.wantedTiles[e][t.getKey()])return 1/0;const r=n[0]-o.focus[0],s=n[1]-o.focus[1];return 65536*Math.log(i)+Math.sqrt(r*r+s*s)/i},Sf.prototype.handleBrowserEvent=function(t,e){const n=new Ap(e||t.type,this,t);this.handleMapBrowserEvent(n)},Sf.prototype.handleMapBrowserEvent=function(t){if(!this.frameState_)return;this.focus_=t.coordinate,t.frameState=this.frameState_;const e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getActive()&&!i.handleEvent(t))break}},Sf.prototype.handlePostRender=function(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;e[mf.ANIMATING]&&(n=this.loadTilesWhileAnimating_?8:0,i=2),e[mf.INTERACTING]&&(n=this.loadTilesWhileInteracting_?8:0,i=2)}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}const n=this.postRenderFunctions_;for(let i=0,o=n.length;i<o;++i)n[i](this,t);n.length=0},Sf.prototype.handleSizeChanged_=function(){this.render()},Sf.prototype.handleTargetChanged_=function(){let t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(let t=0,e=this.keyHandlerKeys_.length;t<e;++t)kl(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);const e=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Rl(e,Hl.KEYDOWN,this.handleBrowserEvent,this),Rl(e,Hl.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(Hl.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Ju(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Hl.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},Sf.prototype.handleTileChange_=function(){this.render()},Sf.prototype.handleViewPropertyChanged_=function(){this.render()},Sf.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(kl(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(kl(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.viewport_.setAttribute("data-view",yl(t)),this.viewPropertyListenerKey_=Rl(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Rl(t,Hl.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},Sf.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(kl),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Rl(t,"propertychange",this.render,this),Rl(t,Hl.CHANGE,this.render,this)]),this.render()},Sf.prototype.isRendered=function(){return!!this.frameState_},Sf.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},Sf.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},Sf.prototype.removeControl=function(t){return this.getControls().remove(t)},Sf.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},Sf.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},Sf.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},Sf.prototype.renderFrame_=function(t){let e;const n=this.getSize(),i=this.getView(),o=[1/0,1/0,-1/0,-1/0],r=this.frameState_;let s=null;if(void 0!==n&&function(t){return t[0]>0&&t[1]>0}(n)&&i&&i.isDef()){const r=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=this.getLayerGroup().getLayerStatesArray(),l={};for(let t=0,e=a.length;t<e;++t)l[yl(a[t].layer)]=a[t];e=i.getState();let h=this.focus_;if(!h){const t=e.resolution/this.pixelRatio_;(h=e.center)[0]=Math.round(h[0]/t)*t,h[1]=Math.round(h[1]/t)*t}s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:h,index:this.frameIndex_++,layerStates:l,layerStatesArray:a,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:r,wantedTiles:{}}}s&&(s.extent=Th(e.center,e.resolution,e.rotation,s.size,o)),this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Lh(this.previousExtent_)&&!gh(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Dp("movestart",this,r)),this.previousExtent_=dh(this.previousExtent_)),this.previousExtent_&&!s.viewHints[mf.ANIMATING]&&!s.viewHints[mf.INTERACTING]&&!gh(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Dp("moveend",this,s)),rh(s.extent,this.previousExtent_))),this.dispatchEvent(new Dp("postrender",this,s)),setTimeout(this.handlePostRender.bind(this),0)},Sf.prototype.setLayerGroup=function(t){this.set("layergroup",t)},Sf.prototype.setSize=function(t){this.set("size",t)},Sf.prototype.setTarget=function(t){this.set("target",t)},Sf.prototype.setView=function(t){this.set("view",t)},Sf.prototype.skipFeature=function(t){const e=yl(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},Sf.prototype.updateSize=function(){const t=this.getTargetElement();if(t){const e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},Sf.prototype.unskipFeature=function(t){const e=yl(t).toString();delete this.skippedFeatureUids_[e],this.render()};var If=Sf;const Rf=function(t){ql.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:Ol,t.target&&this.setTarget(t.target)};gl(Rf,ql),Rf.prototype.disposeInternal=function(){Ju(this.element),ql.prototype.disposeInternal.call(this)},Rf.prototype.getMap=function(){return this.map_},Rf.prototype.setMap=function(t){this.map_&&Ju(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)kl(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ol&&this.listenerKeys.push(Rl(t,"postrender",this.render,this)),t.render())},Rf.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t};var Pf=Rf;const Mf=function(t){const e=xl({},t);delete e.source,wf.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),Rl(this,Zl("source"),this.handleSourcePropertyChange_,this),this.setSource(t.source?t.source:null)};function kf(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}gl(Mf,wf),Mf.prototype.getLayersArray=function(t){const e=t||[];return e.push(this),e},Mf.prototype.getLayerStatesArray=function(t){const e=t||[];return e.push(this.getLayerState()),e},Mf.prototype.getSource=function(){return this.get("source")||null},Mf.prototype.getSourceState=function(){const t=this.getSource();return t?t.getState():"undefined"},Mf.prototype.handleSourceChange_=function(){this.changed()},Mf.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(kl(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=Rl(t,Hl.CHANGE,this.handleSourceChange_,this)),this.changed()},Mf.prototype.setMap=function(t){this.mapPrecomposeKey_&&(kl(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(kl(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Rl(t,"precompose",function(t){const e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[yl(this)]=e},this),this.mapRenderKey_=Rl(this,Hl.CHANGE,t.render,t),this.changed())},Mf.prototype.setSource=function(t){this.set("source",t)};var Lf=Mf;const Ff=function(t){const e=t||{};this.ulElement_=document.createElement("UL"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const n=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",o=void 0!==e.collapseLabel?e.collapseLabel:"\xbb";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;const r=void 0!==e.label?e.label:"i";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(s),Rl(a,Hl.CLICK,this.handleClick_,this);const l=n+" ol-unselectable ol-control"+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),h=document.createElement("div");h.className=l,h.appendChild(this.ulElement_),h.appendChild(a),Pf.call(this,{element:h,render:e.render||Df,target:e.target}),this.renderedAttributions_=[],this.renderedVisible_=!0};function Df(t){this.updateElement_(t.frameState)}gl(Ff,Pf),Ff.prototype.getSourceAttributions_=function(t){const e={},n=[],i=t.layerStatesArray,o=t.viewState.resolution;for(let r=0,s=i.length;r<s;++r){const s=i[r];if(!kf(s,o))continue;const a=s.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const h=l(t);if(h)if(Array.isArray(h))for(let t=0,i=h.length;t<i;++t)h[t]in e||(n.push(h[t]),e[h[t]]=!0);else h in e||(n.push(h),e[h]=!0)}return n},Ff.prototype.updateElement_=function(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.getSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ad(e,this.renderedAttributions_)){Qu(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("LI");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}},Ff.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},Ff.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?qu(this.collapseLabel_,this.label_):qu(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},Ff.prototype.getCollapsible=function(){return this.collapsible_},Ff.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},Ff.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},Ff.prototype.getCollapsed=function(){return this.collapsed_};var Of=Ff;const Af=function(t){const e=t||{},n=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=i):(this.label_=i,this.label_.classList.add("ol-compass"));const o=e.tipLabel?e.tipLabel:"Reset rotation",r=document.createElement("button");r.className=n+"-reset",r.setAttribute("type","button"),r.title=o,r.appendChild(this.label_),Rl(r,Hl.CLICK,Af.prototype.handleClick_,this);const s=n+" ol-unselectable ol-control",a=document.createElement("div");a.className=s,a.appendChild(r),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,Pf.call(this,{element:a,render:e.render||Nf,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(vc)};function Nf(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(vc);t||0!==n?t&&0!==n&&this.element.classList.remove(vc):this.element.classList.add(vc)}this.label_.style.msTransform=t,this.label_.style.webkitTransform=t,this.label_.style.transform=t}this.rotation_=n}gl(Af,Pf),Af.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},Af.prototype.resetNorth_=function(){const t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Cp}):t.setRotation(0))};var Gf=Af;const Vf=function(t){const e=t||{},n=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",r=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2212",s=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",a=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=n+"-in",l.setAttribute("type","button"),l.title=s,l.appendChild("string"==typeof o?document.createTextNode(o):o),Rl(l,Hl.CLICK,Vf.prototype.handleClick_.bind(this,i));const h=document.createElement("button");h.className=n+"-out",h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof r?document.createTextNode(r):r),Rl(h,Hl.CLICK,Vf.prototype.handleClick_.bind(this,-i));const u=n+" ol-unselectable ol-control",c=document.createElement("div");c.className=u,c.appendChild(l),c.appendChild(h),Pf.call(this,{element:c,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250};gl(Vf,Pf),Vf.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},Vf.prototype.zoomByDelta_=function(t){const e=this.getMap().getView();if(!e)return;const n=e.getResolution();if(n){const i=e.constrainResolution(n,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,duration:this.duration_,easing:Cp})):e.setResolution(i)}};var jf=Vf;function Bf(t){const e=t||{},n=new $l;return(void 0===e.zoom||e.zoom)&&n.push(new jf(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Gf(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Of(e.attributionOptions)),n}const zf=function(t){ql.call(this),this.map_=null,this.setActive(!0),this.handleEvent=t.handleEvent};function Hf(t,e,n,i){Wf(t,e=t.constrainRotation(e,0),n,i)}function Wf(t,e,n,i){if(void 0!==e){const o=t.getRotation(),r=t.getCenter();void 0!==o&&r&&i>0?t.animate({rotation:e,anchor:n,duration:i,easing:Cp}):t.rotate(e,n)}}function Uf(t,e,n,i,o){Kf(t,e=t.constrainResolution(e,0,o),n,i)}function Yf(t,e,n,i){const o=t.getResolution();let r=t.constrainResolution(o,e,0);if(void 0!==r){const e=t.getResolutions();r=Ah(r,t.getMinResolution()||e[e.length-1],t.getMaxResolution()||e[0])}if(n&&void 0!==r&&r!==o){const e=t.getCenter();let i=t.calculateCenterZoom(r,n);i=t.constrainCenter(i),n=[(r*e[0]-o*i[0])/(r-o),(r*e[1]-o*i[1])/(r-o)]}Kf(t,r,n,i)}function Kf(t,e,n,i){if(e){const o=t.getResolution(),r=t.getCenter();if(void 0!==o&&r&&e!==o&&i)t.animate({resolution:e,anchor:n,duration:i,easing:Cp});else{if(n){const i=t.calculateCenterZoom(e,n);t.setCenter(i)}t.setResolution(e)}}}gl(zf,ql),zf.prototype.getActive=function(){return this.get("active")},zf.prototype.getMap=function(){return this.map_},zf.prototype.setActive=function(t){this.set("active",t)},zf.prototype.setMap=function(t){this.map_=t};var Xf=zf;const Zf=function(t){const e=t||{};this.delta_=e.delta?e.delta:1,Xf.call(this,{handleEvent:qf}),this.duration_=void 0!==e.duration?e.duration:250};function qf(t){let e=!1;if(t.type==Np.DBLCLICK){const n=t.coordinate,i=t.originalEvent.shiftKey?-this.delta_:this.delta_;Yf(t.map.getView(),i,n,this.duration_),t.preventDefault(),e=!0}return!e}gl(Zf,Xf);var Jf=Zf;const Qf=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$f=Fl,tg=function(t){const e=t.originalEvent;return 0==e.button&&!(uc&&cc&&e.ctrlKey)},eg=Dl,ng=function(t){return"pointermove"==t.type},ig=function(t){return t.type==Np.SINGLECLICK},og=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},rg=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},sg=function(t){const e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},ag=function(t){return th(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},lg=function(t){const e=t.pointerEvent;return e.isPrimary&&0===e.button},hg=Ol,ug=Dl,cg=Dl,dg=Ol,pg=function(t){const e=t||{};Xf.call(this,{handleEvent:e.handleEvent||gg}),this.handleDownEvent_=e.handleDownEvent?e.handleDownEvent:cg,this.handleDragEvent_=e.handleDragEvent?e.handleDragEvent:hg,this.handleMoveEvent_=e.handleMoveEvent?e.handleMoveEvent:dg,this.handleUpEvent_=e.handleUpEvent?e.handleUpEvent:ug,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};function fg(t){const e=t.length;let n=0,i=0;for(let o=0;o<e;o++)n+=t[o].clientX,i+=t[o].clientY;return[n/e,i/e]}function gg(t){if(!(t instanceof Vp))return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Np.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==Np.POINTERUP){const e=this.handleUpEvent_(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Np.POINTERDOWN){const n=this.handleDownEvent_(t);this.handlingDownUpSequence=n,e=this.shouldStopEvent(n)}else t.type==Np.POINTERMOVE&&this.handleMoveEvent_(t);return!e}gl(pg,Xf),pg.prototype.updateTrackedPointers_=function(t){if(function(t){const e=t.type;return e===Np.POINTERDOWN||e===Np.POINTERDRAG||e===Np.POINTERUP}(t)){const e=t.pointerEvent,n=e.pointerId.toString();t.type==Np.POINTERUP?delete this.trackedPointers_[n]:t.type==Np.POINTERDOWN?this.trackedPointers_[n]=e:n in this.trackedPointers_&&(this.trackedPointers_[n]=e),this.targetPointers=wl(this.trackedPointers_)}},pg.prototype.shouldStopEvent=function(t){return t};var _g=pg;const yg=function(t){_g.call(this,{handleDownEvent:xg,handleDragEvent:mg,handleUpEvent:vg});const e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.condition_=e.condition?e.condition:og,this.noKinetic_=!1};function mg(t){const e=this.targetPointers,n=fg(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=this.lastCentroid[0]-n[0],i=n[1]-this.lastCentroid[1],o=t.map.getView();let r=[e,i];np(r,o.getResolution()),ep(r,o.getRotation()),Jd(r,o.getCenter()),r=o.constrainCenter(r),o.setCenter(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length}function vg(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenter(),r=e.getPixelFromCoordinate(o),s=e.getCoordinateFromPixel([r[0]-t*Math.cos(i),r[1]-t*Math.sin(i)]);n.animate({center:n.constrainCenter(s),duration:500,easing:Cp})}return n.setHint(mf.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}function xg(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||e.setHint(mf.INTERACTING,1),e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}gl(yg,_g),yg.prototype.shouldStopEvent=Dl;var bg=yg;const wg=function(t){const e=t||{};_g.call(this,{handleDownEvent:Tg,handleDragEvent:Cg,handleUpEvent:Eg}),this.condition_=e.condition?e.condition:Qf,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250};function Cg(t){if(!ag(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===_f)return;const i=e.getSize(),o=t.pixel,r=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;Wf(n,n.getRotation()-t)}this.lastAngle_=r}function Eg(t){if(!ag(t))return!0;const e=t.map.getView();return e.setHint(mf.INTERACTING,-1),Hf(e,e.getRotation(),void 0,this.duration_),!1}function Tg(t){return!(!ag(t)||!tg(t)||!this.condition_(t)||(t.map.getView().setHint(mf.INTERACTING,1),this.lastAngle_=void 0,0))}gl(wg,_g),wg.prototype.shouldStopEvent=Dl;var Sg=wg;const Ig=function(t){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null};gl(Ig,Nl),Ig.prototype.disposeInternal=function(){this.setMap(null)},Ig.prototype.render_=function(){const t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},Ig.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left=t.top=t.width=t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},Ig.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},Ig.prototype.createOrUpdateGeometry=function(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Kd([n])},Ig.prototype.getGeometry=function(){return this.geometry_};var Rg=Ig;const Pg={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},Mg=function(t,e,n){jl.call(this,t),this.coordinate=e,this.mapBrowserEvent=n};gl(Mg,jl);const kg=function(t){_g.call(this,{handleDownEvent:Og,handleDragEvent:Fg,handleUpEvent:Dg});const e=t||{};this.box_=new Rg(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.startPixel_=null,this.condition_=e.condition?e.condition:$f,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:Lg};function Lg(t,e,n){const i=n[0]-e[0],o=n[1]-e[1];return i*i+o*o>=this.minArea_}function Fg(t){ag(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Mg(Pg.BOXDRAG,t.coordinate,t)))}function Dg(t){return!ag(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new Mg(Pg.BOXEND,t.coordinate,t))),!1)}function Og(t){return!(!ag(t)||!tg(t)||!this.condition_(t)||(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Mg(Pg.BOXSTART,t.coordinate,t)),0))}gl(kg,_g),kg.prototype.getGeometry=function(){return this.box_.getGeometry()},kg.prototype.onBoxEnd=Ol;var Ag=kg;const Ng=function(t){const e=t||{},n=e.condition?e.condition:rg;this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out,Ag.call(this,{condition:n,className:e.className||"ol-dragzoom"})};gl(Ng,Ag),Ng.prototype.onBoxEnd=function(){const t=this.getMap(),e=t.getView(),n=t.getSize();let i=this.getGeometry().getExtent();if(this.out_){const r=e.calculateExtent(n),s=(o=[t.getPixelFromCoordinate(wh(i)),t.getPixelFromCoordinate(Ph(i))],function(t,e){for(let n=0,i=e.length;n<i;++n)yh(t,e[n]);return t}(dh(void 0),o));Fh(r,1/e.getResolutionForExtent(s,n)),i=r}var o;const r=e.constrainResolution(e.getResolutionForExtent(i,n));let s=Eh(i);s=e.constrainCenter(s),e.animate({resolution:r,center:s,duration:this.duration_,easing:Cp})};var Gg=Ng,Vg={LEFT:37,UP:38,RIGHT:39,DOWN:40};const jg=function(t){Xf.call(this,{handleEvent:Bg});const e=t||{};this.defaultCondition_=function(t){return og(t)&&sg(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128};function Bg(t){let e=!1;if(t.type==Hl.KEYDOWN){const n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==Vg.DOWN||n==Vg.LEFT||n==Vg.RIGHT||n==Vg.UP)){const i=t.map.getView(),o=i.getResolution()*this.pixelDelta_;let r=0,s=0;n==Vg.DOWN?s=-o:n==Vg.LEFT?r=-o:n==Vg.RIGHT?r=o:s=o;const a=[r,s];ep(a,i.getRotation()),function(t,e,n){const i=t.getCenter();if(i){const o=t.constrainCenter([i[0]+e[0],i[1]+e[1]]);n?t.animate({duration:n,easing:Tp,center:o}):t.setCenter(o)}}(i,a,this.duration_),t.preventDefault(),e=!0}}return!e}gl(jg,Xf);var zg=jg;const Hg=function(t){Xf.call(this,{handleEvent:Wg});const e=t||{};this.condition_=e.condition?e.condition:sg,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100};function Wg(t){let e=!1;if(t.type==Hl.KEYDOWN||t.type==Hl.KEYPRESS){const n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){const i=t.map,o=n=="+".charCodeAt(0)?this.delta_:-this.delta_;Yf(i.getView(),o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}gl(Hg,Xf);var Ug=Hg;const Yg={TRACKPAD:"trackpad",WHEEL:"wheel"},Kg=function(t){Xf.call(this,{handleEvent:Xg});const e=t||{};this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.condition_=e.condition?e.condition:$f,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};function Xg(t){if(!this.condition_(t))return!0;const e=t.type;if(e!==Hl.WHEEL&&e!==Hl.MOUSEWHEEL)return!0;t.preventDefault();const n=t.map,i=t.originalEvent;let o;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Hl.WHEEL?(o=i.deltaY,lc&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=dc),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)):t.type==Hl.MOUSEWHEEL&&(o=-i.wheelDeltaY,hc&&(o/=3)),0===o)return!1;const r=Date.now();if(void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?Yg.TRACKPAD:Yg.WHEEL),this.mode_===Yg.TRACKPAD){const t=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):t.setHint(mf.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);let e=t.getResolution()*Math.pow(2,o/this.trackpadDeltaPerZoom_);const i=t.getMinResolution(),s=t.getMaxResolution();let a=0;if(e<i?(e=Math.max(e,i/this.trackpadZoomBuffer_),a=1):e>s&&(e=Math.min(e,s*this.trackpadZoomBuffer_),a=-1),this.lastAnchor_){const n=t.calculateCenterZoom(e,this.lastAnchor_);t.setCenter(t.constrainCenter(n))}return t.setResolution(e),0===a&&this.constrainResolution_&&t.animate({resolution:t.constrainResolution(e,o>0?-1:1),easing:Cp,anchor:this.lastAnchor_,duration:this.duration_}),a>0?t.animate({resolution:i,easing:Cp,anchor:this.lastAnchor_,duration:500}):a<0&&t.animate({resolution:s,easing:Cp,anchor:this.lastAnchor_,duration:500}),this.startTime_=r,!1}this.delta_+=o;const s=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1}gl(Kg,Xf),Kg.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(mf.INTERACTING,-1)},Kg.prototype.handleWheelZoom_=function(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations(),Yf(e,-Ah(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},Kg.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)};var Zg=Kg;const qg=function(t){_g.call(this,{handleDownEvent:$g,handleDragEvent:Jg,handleUpEvent:Qg});const e=t||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250};function Jg(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=o;const r=t.map,s=r.getView();if(s.getConstraints().rotation===_f)return;const a=r.getViewport().getBoundingClientRect(),l=fg(this.targetPointers);if(l[0]-=a.left,l[1]-=a.top,this.anchor_=r.getCoordinateFromPixel(l),this.rotating_){const t=s.getRotation();r.render(),Wf(s,t+e,this.anchor_)}}function Qg(t){if(this.targetPointers.length<2){const e=t.map.getView();return e.setHint(mf.INTERACTING,-1),this.rotating_&&Hf(e,e.getRotation(),this.anchor_,this.duration_),!1}return!0}function $g(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(mf.INTERACTING,1),!0}return!1}gl(qg,_g),qg.prototype.shouldStopEvent=Dl;var t_=qg;const e_=function(t){_g.call(this,{handleDownEvent:o_,handleDragEvent:n_,handleUpEvent:i_});const e=t||{};this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1};function n_(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],o=n.clientX-i.clientX,r=n.clientY-i.clientY,s=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;const a=t.map,l=a.getView(),h=l.getResolution(),u=l.getMaxResolution(),c=l.getMinResolution();let d=h*e;d>u?(e=u/h,d=u):d<c&&(e=c/h,d=c),1!=e&&(this.lastScaleDelta_=e);const p=a.getViewport().getBoundingClientRect(),f=fg(this.targetPointers);f[0]-=p.left,f[1]-=p.top,this.anchor_=a.getCoordinateFromPixel(f),a.render(),Kf(l,d,this.anchor_)}function i_(t){if(this.targetPointers.length<2){const e=t.map.getView();e.setHint(mf.INTERACTING,-1);const n=e.getResolution();return(this.constrainResolution_||n<e.getMinResolution()||n>e.getMaxResolution())&&Uf(e,n,this.anchor_,this.duration_,this.lastScaleDelta_-1),!1}return!0}function o_(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(mf.INTERACTING,1),!0}return!1}gl(e_,_g),e_.prototype.shouldStopEvent=Dl;var r_=e_;const s_=function(t,e,n,i){jl.call(this,t),this.features=n,this.file=e,this.projection=i};gl(s_,jl);const a_=function(t){const e=t||{};Xf.call(this,{handleEvent:Fl}),this.formatConstructors_=e.formatConstructors?e.formatConstructors:[],this.projection_=e.projection?gu(e.projection):null,this.dropListenKeys_=null,this.source_=e.source||null,this.target=e.target?e.target:null};function l_(t){const e=t.dataTransfer.files;for(let n=0,i=e.length;n<i;++n){const t=e.item(n),i=new FileReader;i.addEventListener(Hl.LOAD,this.handleResult_.bind(this,t)),i.readAsText(t)}}function h_(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function u_(t){if(!ag(t))return;const e=t.map,n=e.getSize(),i=t.pixel,o=i[0]-n[0]/2,r=n[1]/2-i[1],s=Math.atan2(r,o),a=Math.sqrt(o*o+r*r),l=e.getView();if(l.getConstraints().rotation!==_f&&void 0!==this.lastAngle_){const t=s-this.lastAngle_;Wf(l,l.getRotation()-t)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&Kf(l,this.lastMagnitude_*(l.getResolution()/a)),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}function c_(t){if(!ag(t))return!0;const e=t.map.getView();e.setHint(mf.INTERACTING,-1);const n=this.lastScaleDelta_-1;return Hf(e,e.getRotation()),Uf(e,e.getResolution(),void 0,this.duration_,n),this.lastScaleDelta_=0,!1}function d_(t){return!!ag(t)&&!!this.condition_(t)&&(t.map.getView().setHint(mf.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)}gl(a_,Xf),a_.prototype.handleResult_=function(t,e){const n=e.target.result,i=this.getMap();let o=this.projection_;o||(o=i.getView().getProjection());const r=this.formatConstructors_;let s=[];for(let a=0,l=r.length;a<l;++a){const t=new(0,r[a]);if((s=this.tryReadFeatures_(t,n,{featureProjection:o}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new s_("addfeatures",t,s,o))},a_.prototype.registerListeners_=function(){const t=this.getMap();if(t){const e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Rl(e,Hl.DROP,l_,this),Rl(e,Hl.DRAGENTER,h_,this),Rl(e,Hl.DRAGOVER,h_,this),Rl(e,Hl.DROP,h_,this)]}},a_.prototype.setActive=function(t){Xf.prototype.setActive.call(this,t),t?this.registerListeners_():this.unregisterListeners_()},a_.prototype.setMap=function(t){this.unregisterListeners_(),Xf.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},a_.prototype.tryReadFeatures_=function(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}},a_.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(kl),this.dropListenKeys_=null)},gl(function(t){const e=t||{};_g.call(this,{handleDownEvent:d_,handleDragEvent:u_,handleUpEvent:c_}),this.condition_=e.condition?e.condition:rg,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==e.duration?e.duration:400},_g);const p_=function(t,e,n){dd.call(this),this.setCenterAndRadius(t,e||0,n)};gl(p_,dd),p_.prototype.clone=function(){const t=new p_(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},p_.prototype.closestPointXY=function(t,e,n,i){const o=this.flatCoordinates,r=t-o[0],s=e-o[1],a=r*r+s*s;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)n[t]=o[t];else{const t=this.getRadius()/Math.sqrt(a);n[0]=o[0]+t*r,n[1]=o[1]+t*s;for(let e=2;e<this.stride;++e)n[e]=o[e]}return n.length=this.stride,a}return i},p_.prototype.containsXY=function(t,e){const n=this.flatCoordinates,i=t-n[0],o=e-n[1];return i*i+o*o<=this.getRadiusSquared_()},p_.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},p_.prototype.computeExtent=function(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return ch(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},p_.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},p_.prototype.getRadiusSquared_=function(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},p_.prototype.getType=function(){return Wh.CIRCLE},p_.prototype.intersectsExtent=function(t){if(kh(t,this.getExtent())){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||xh(t,this.intersectsCoordinate,this)}return!1},p_.prototype.setCenter=function(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(let o=1;o<e;++o)i[e+o]=t[o];this.setFlatCoordinates(this.layout,i)},p_.prototype.setCenterAndRadius=function(t,e,n){if(t){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let o=xd(i,0,t);i[o++]=i[0]+e;for(let t=1,e=this.stride;t<e;++t)i[o++]=i[t];i.length=o,this.changed()}else this.setFlatCoordinates(hd.XY,null)},p_.prototype.getCoordinates=function(){},p_.prototype.setCoordinates=function(t,e){},p_.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},p_.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()};var f_=p_;const g_=function(t,e){dd.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};gl(g_,dd),g_.prototype.appendLineString=function(t){this.flatCoordinates?sd(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},g_.prototype.clone=function(){const t=new g_(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},g_.prototype.closestPointXY=function(t,e,n,i){return i<sh(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))},g_.prototype.getCoordinateAtM=function(t,e,n){return this.layout!=hd.XYM&&this.layout!=hd.XYZM||0===this.flatCoordinates.length?null:function(t,e,i,o,r,s,a){if(void 0!==n&&n)return ap(t,e,i[i.length-1],o,r,s);let l;if(r<t[o-1])return s?((l=t.slice(0,o))[o-1]=r,l):null;if(t[t.length-1]<r)return s?((l=t.slice(t.length-o))[o-1]=r,l):null;for(let n=0,h=i.length;n<h;++n){const s=i[n];if(e!=s){if(r<t[e+o-1])return null;if(r<=t[s-1])return ap(t,e,s,o,r,!1);e=s}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,void 0!==e&&e)},g_.prototype.getCoordinates=function(){return Ed(this.flatCoordinates,0,this.ends_,this.stride)},g_.prototype.getEnds=function(){return this.ends_},g_.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;const e=new up(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},g_.prototype.getLineStrings=function(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let o=0;for(let r=0,s=e.length;r<s;++r){const s=e[r],a=new up(null);a.setFlatCoordinates(n,t.slice(o,s)),i.push(a),o=s}return i},g_.prototype.getFlatMidpoints=function(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,o=this.stride;for(let r=0,s=i.length;r<s;++r){const s=i[r];sd(t,sp(e,n,s,o,.5)),n=s}return t},g_.prototype.getSimplifiedGeometryInternal=function(t){const e=[],n=[];e.length=function(t,e,n,i,o,r,s,a){for(let l=0,h=n.length;l<h;++l){const h=n[l];s=Sd(t,e,h,i,o,r,s),a.push(s),e=h}return s}(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n);const i=new g_(null);return i.setFlatCoordinates(hd.XY,e,n),i},g_.prototype.getType=function(){return Wh.MULTI_LINE_STRING},g_.prototype.intersectsExtent=function(t){return function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){if(Vd(t,e,n[r],i,o))return!0;e=n[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},g_.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=wd(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}else this.setFlatCoordinates(hd.XY,null,this.ends_)},g_.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.ends_=n,this.changed()},g_.prototype.setLineStrings=function(t){let e=this.getLayout();const n=[],i=[];for(let o=0,r=t.length;o<r;++o){const r=t[o];0===o&&(e=r.getLayout()),sd(n,r.getFlatCoordinates()),i.push(n.length)}this.setFlatCoordinates(e,n,i)};var __=g_;const y_=function(t,e){dd.call(this),this.setCoordinates(t,e)};gl(y_,dd),y_.prototype.appendPoint=function(t){this.flatCoordinates?sd(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},y_.prototype.clone=function(){const t=new y_(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},y_.prototype.closestPointXY=function(t,e,n,i){if(i<sh(this.getExtent(),t,e))return i;const o=this.flatCoordinates,r=this.stride;for(let s=0,a=o.length;s<a;s+=r){const a=Vh(t,e,o[s],o[s+1]);if(a<i){i=a;for(let t=0;t<r;++t)n[t]=o[s+t];n.length=r}}return i},y_.prototype.getCoordinates=function(){return Cd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},y_.prototype.getPoint=function(t){if(t<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=t)return null;const e=new Fd(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),e},y_.prototype.getPoints=function(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let o=0,r=t.length;o<r;o+=n){const r=new Fd(null);r.setFlatCoordinates(e,t.slice(o,o+n)),i.push(r)}return i},y_.prototype.getType=function(){return Wh.MULTI_POINT},y_.prototype.intersectsExtent=function(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,o=e.length;i<o;i+=n)if(hh(t,e[i],e[i+1]))return!0;return!1},y_.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bd(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(hd.XY,null)},y_.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var m_=y_;const v_=function(t,e){dd.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};gl(v_,dd),v_.prototype.appendPolygon=function(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;sd(this.flatCoordinates,t.getFlatCoordinates());for(let i=0,o=(e=t.getEnds().slice()).length;i<o;++i)e[i]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},v_.prototype.clone=function(){const t=new v_(null),e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),n),t},v_.prototype.closestPointXY=function(t,e,n,i){return i<sh(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r];o=yd(t,e,s,i,o),e=s[s.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,o,r,s,a,l,h,u){const c=[NaN,NaN];for(let d=0,p=n.length;d<p;++d){const r=n[d];h=vd(t,e,r,i,o,!0,s,a,l,h,c),e=r[r.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,n,i))},v_.prototype.containsXY=function(t,e){return function(t,e,n,i,o,r){if(0===n.length)return!1;for(let s=0,a=n.length;s<a;++s){const a=n[s];if(Ad(t,e,a,i,o,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},v_.prototype.getArea=function(){return function(t,e,n,i){let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r];o+=fd(t,e,s,i),e=s[s.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},v_.prototype.getCoordinates=function(t){let e;return void 0!==t?Ud(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Td(e,0,this.endss_,this.stride)},v_.prototype.getEndss=function(){return this.endss_},v_.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,n,i){const o=[];let r=[1/0,1/0,-1/0,-1/0];for(let s=0,a=n.length;s<a;++s){const a=n[s];r=fh(t,e,a[0],i),o.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=a[a.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,n,i,o){let r=[];for(let s=0,a=n.length;s<a;++s){const a=n[s];r=Nd(t,e,a,i,o,2*s,r),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},v_.prototype.getInteriorPoints=function(){const t=new m_(null);return t.setFlatCoordinates(hd.XYM,this.getFlatInteriorPoints().slice()),t},v_.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r)if(!Hd(t,0,n[r],i,void 0))return!1;return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ud(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},v_.prototype.getSimplifiedGeometryInternal=function(t){const e=[],n=[];e.length=function(t,e,n,i,o,r,s,a){for(let l=0,h=n.length;l<h;++l){const h=n[l],u=[];s=Pd(t,e,h,i,o,r,s,u),a.push(u),e=h[h.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n);const i=new v_(null);return i.setFlatCoordinates(hd.XY,e,n),i},v_.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let r=0,s=n.length;r<s;++r)n[r]-=e;const o=new Kd(null);return o.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,i),n),o},v_.prototype.getPolygons=function(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let o=0;for(let r=0,s=n.length;r<s;++r){const s=n[r].slice(),a=s[s.length-1];if(0!==o)for(let t=0,e=s.length;t<e;++t)s[t]-=o;const l=new Kd(null);l.setFlatCoordinates(t,e.slice(o,a),s),i.push(l),o=a}return i},v_.prototype.getType=function(){return Wh.MULTI_POLYGON},v_.prototype.intersectsExtent=function(t){return function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r];if(jd(t,e,s,i,o))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},v_.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=function(t,e,n,i,o){const r=o||[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=wd(t,e,n[a],i,r[s]);r[s++]=o,e=o[o.length-1]}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}else this.setFlatCoordinates(hd.XY,null,this.endss_)},v_.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.endss_=n,this.changed()},v_.prototype.setPolygons=function(t){let e=this.getLayout();const n=[],i=[];for(let o=0,r=t.length;o<r;++o){const r=t[o];0===o&&(e=r.getLayout());const s=n.length,a=r.getEnds();for(let t=0,e=a.length;t<e;++t)a[t]+=s;sd(n,r.getFlatCoordinates()),i.push(a)}this.setFlatCoordinates(e,n,i)};var x_=v_;const b_=function(t){const e=t||{},n=xl({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,Lf.call(this,n),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||"vector",this.type="VECTOR"};gl(b_,Lf),b_.prototype.getDeclutter=function(){return this.declutter_},b_.prototype.setDeclutter=function(t){this.declutter_=t},b_.prototype.getRenderBuffer=function(){return this.renderBuffer_},b_.prototype.getRenderOrder=function(){return this.get("renderOrder")},b_.prototype.getStyle=function(){return this.style_},b_.prototype.getStyleFunction=function(){return this.styleFunction_},b_.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},b_.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},b_.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},b_.prototype.setStyle=function(t){this.style_=void 0!==t?t:qc,this.styleFunction_=null===t?void 0:function(t){let e;if("function"==typeof t)e=t;else{let n;Array.isArray(t)?n=t:(th(t instanceof Xc,41),n=[t]),e=function(){return n}}return e}(this.style_),this.changed()},b_.prototype.getRenderMode=function(){return this.renderMode_};var w_=b_,C_="arraybuffer",E_="json",T_="text",S_="xml";function I_(t,e){return[[-1/0,-1/0,1/0,1/0]]}const R_=function(t){ql.call(this),this.projection_=gu(t.projection),this.attributions_=this.adaptAttributions_(t.attributions),this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX};gl(R_,ql),R_.prototype.adaptAttributions_=function(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null},R_.prototype.forEachFeatureAtCoordinate=Ol,R_.prototype.getAttributions=function(){return this.attributions_},R_.prototype.getProjection=function(){return this.projection_},R_.prototype.getResolutions=function(){},R_.prototype.getState=function(){return this.state_},R_.prototype.getWrapX=function(){return this.wrapX_},R_.prototype.refresh=function(){this.changed()},R_.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t),this.changed()},R_.prototype.setState=function(t){this.state_=t,this.changed()};var P_=R_,M_=n("A1R+"),k_=n.n(M_);const L_=function(t){this.rbush_=k_()(t,void 0),this.items_={}};L_.prototype.insert=function(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[yl(e)]=n},L_.prototype.load=function(t,e){const n=new Array(e.length);for(let i=0,o=e.length;i<o;i++){const o=t[i],r=e[i],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:r};n[i]=s,this.items_[yl(r)]=s}this.rbush_.load(n)},L_.prototype.remove=function(t){const e=yl(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},L_.prototype.update=function(t,e){const n=this.items_[yl(e)];gh([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},L_.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},L_.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(t){return t.value})},L_.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},L_.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},L_.prototype.forEach_=function(t,e,n){let i;for(let o=0,r=t.length;o<r;o++)if(i=e.call(n,t[o]))return i;return i},L_.prototype.isEmpty=function(){return Cl(this.items_)},L_.prototype.clear=function(){this.rbush_.clear(),this.items_={}},L_.prototype.getExtent=function(t){const e=this.rbush_.data;return ch(e.minX,e.minY,e.maxX,e.maxY,t)},L_.prototype.concat=function(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[0|e]=t.items_[0|e]};var F_=L_;const D_=function(t,e){jl.call(this,t),this.feature=e};gl(D_,jl);const O_=function(t){const e=t||{};P_.call(this,{attributions:e.attributions,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=Ol,this.format_=e.format,this.overlaps_=void 0==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(th(this.format_,7),this.loader_=function(t,e,n,i){return function(n,o,r){const s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,o,r):t,!0),e.getType()==C_&&(s.responseType="arraybuffer"),s.onload=(function(t){if(!s.status||s.status>=200&&s.status<300){const t=e.getType();let n;t==E_||t==T_?n=s.responseText:t==S_?(n=s.responseXML)||(n=(new DOMParser).parseFromString(s.responseText,"application/xml")):t==C_&&(n=s.response),n?(function(t,e){this.addFeatures(t)}).call(this,e.readFeatures(n,{featureProjection:r}),e.readProjection(n),e.getLastExtent()):i.call(this)}else i.call(this)}).bind(this),s.onerror=(function(){i.call(this)}).bind(this),s.send()}}(this.url_,this.format_,0,Ol)),this.strategy_=void 0!==e.strategy?e.strategy:I_;const n=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,o;this.featuresRtree_=n?new F_:null,this.loadedExtentsRtree_=new F_,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,e.features instanceof $l?o=(i=e.features).getArray():Array.isArray(e.features)&&(o=e.features),n||void 0!==i||(i=new $l(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)};gl(O_,P_),O_.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},O_.prototype.addFeatureInternal=function(t){const e=yl(t).toString();if(!this.addToIndex_(e,t))return;this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new D_("addfeature",t))},O_.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Rl(e,Hl.CHANGE,this.handleFeatureChange_,this),Rl(e,"propertychange",this.handleFeatureChange_,this)]},O_.prototype.addToIndex_=function(t,e){let n=!0;const i=e.getId();return void 0!==i?i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e:(th(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},O_.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},O_.prototype.addFeaturesInternal=function(t){const e=[],n=[],i=[];for(let o=0,r=t.length;o<r;o++){const e=t[o],i=yl(e).toString();this.addToIndex_(i,e)&&n.push(e)}for(let o=0,r=n.length;o<r;o++){const t=n[o],r=yl(t).toString();this.setupChangeEvents_(r,t);const s=t.getGeometry();if(s){const n=s.getExtent();e.push(n),i.push(t)}else this.nullGeometryFeatures_[r]=t}this.featuresRtree_&&this.featuresRtree_.load(e,i);for(let o=0,r=n.length;o<r;o++)this.dispatchEvent(new D_("addfeature",n[o]))},O_.prototype.bindFeaturesCollection_=function(t){let e=!1;Rl(this,"addfeature",function(n){e||(e=!0,t.push(n.feature),e=!1)}),Rl(this,"removefeature",function(n){e||(e=!0,t.remove(n.feature),e=!1)}),Rl(t,"add",function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Rl(t,"remove",function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},O_.prototype.clear=function(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(kl);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};const e=new D_("clear");this.dispatchEvent(e),this.changed()},O_.prototype.forEachFeature=function(t){return this.featuresRtree_?this.featuresRtree_.forEach(t):this.featuresCollection_?this.featuresCollection_.forEach(t):void 0},O_.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0})},O_.prototype.forEachFeatureInExtent=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e):this.featuresCollection_?this.featuresCollection_.forEach(e):void 0},O_.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){const t=e(n);if(t)return t}})},O_.prototype.getFeaturesCollection=function(){return this.featuresCollection_},O_.prototype.getFeatures=function(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Cl(this.nullGeometryFeatures_)||sd(t,wl(this.nullGeometryFeatures_))),t},O_.prototype.getFeaturesAtCoordinate=function(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},O_.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},O_.prototype.getClosestFeatureToCoordinate=function(t,e){const n=t[0],i=t[1];let o=null;const r=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0],l=e||Fl;return this.featuresRtree_.forEachInExtent(a,function(t){if(l(t)){const e=t.getGeometry(),l=s;if((s=e.closestPointXY(n,i,r,s))<l){o=t;const e=Math.sqrt(s);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}}),o},O_.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},O_.prototype.getFeatureById=function(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null},O_.prototype.getFormat=function(){return this.format_},O_.prototype.getOverlaps=function(){return this.overlaps_},O_.prototype.getResolutions=function(){},O_.prototype.getUrl=function(){return this.url_},O_.prototype.handleFeatureChange_=function(t){const e=t.target,n=yl(e).toString(),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const o=e.getId();if(void 0!==o){const t=o.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[t]=e):this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[n]=e);this.changed(),this.dispatchEvent(new D_("changefeature",e))},O_.prototype.hasFeature=function(t){const e=t.getId();return void 0!==e?e in this.idIndex_:yl(t).toString()in this.undefIdIndex_},O_.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Cl(this.nullGeometryFeatures_)},O_.prototype.loadFeatures=function(t,e,n){const i=this.loadedExtentsRtree_,o=this.strategy_(t,e);for(let r=0,s=o.length;r<s;++r){const t=o[r];i.forEachInExtent(t,function(e){return lh(e.extent,t)})||(this.loader_.call(this,t,e,n),i.insert(t,{extent:t.slice()}))}},O_.prototype.removeLoadedExtent=function(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(e){if(gh(e.extent,t))return n=e,!0}),n&&e.remove(n)},O_.prototype.removeFeature=function(t){const e=yl(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},O_.prototype.removeFeatureInternal=function(t){const e=yl(t).toString();this.featureChangeKeys_[e].forEach(kl),delete this.featureChangeKeys_[e];const n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new D_("removefeature",t))},O_.prototype.removeFromIdIndex_=function(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},O_.prototype.setLoader=function(t){this.loader_=t};var A_=O_;const N_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},G_=function(t,e){jl.call(this,t),this.feature=e};gl(G_,jl);const V_=function(t){_g.call(this,{handleDownEvent:B_,handleEvent:j_,handleUpEvent:z_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){let e;return t===Wh.POINT||t===Wh.MULTI_POINT?e=N_.POINT:t===Wh.LINE_STRING||t===Wh.MULTI_LINE_STRING?e=N_.LINE_STRING:t===Wh.POLYGON||t===Wh.MULTI_POLYGON?e=N_.POLYGON:t===Wh.CIRCLE&&(e=N_.CIRCLE),e}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===N_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Fl;let e=t.geometryFunction;if(!e)if(this.type_===Wh.CIRCLE)e=function(t,e){const n=e||new f_([NaN,NaN]),i=ip(t[0],t[1]);return n.setCenterAndRadius(t[0],Math.sqrt(i)),n};else{let t;const n=this.mode_;n===N_.POINT?t=Fd:n===N_.LINE_STRING?t=up:n===N_.POLYGON&&(t=Kd),e=function(e,i){let o=i;return o?o.setCoordinates(n===N_.POLYGON?e[0].length?[e[0].concat([e[0][0]])]:[]:e):o=new t(e),o}}this.geometryFunction_=e,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new w_({source:new A_({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:function(){const t=Jc();return function(e,n){return t[e.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:og,this.freehandCondition_=t.freehand?$f:t.freehandCondition?t.freehandCondition:rg,Rl(this,Zl("active"),this.updateState_,this)};function j_(t){t.originalEvent.type===Hl.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==N_.POINT&&this.freehandCondition_(t);let e=t.type===Np.POINTERMOVE,n=!0;return this.lastDragTime_&&t.type===Np.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Np.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),n=!1):this.freehand_&&t.type===Np.POINTERDOWN?n=!1:e?(n=t.type===Np.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(t):(t.pointerEvent.pointerType==Wp||t.type===Np.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===Np.DBLCLICK&&(n=!1),gg.call(this,t)&&n}function B_(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){this.handlePointerMove_(new Vp(Np.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}).bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function z_(t){let e=!0;return this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_?(this.finishCoordinate_?this.freehand_||this.mode_===N_.CIRCLE?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===N_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}gl(V_,_g),V_.prototype.setMap=function(t){_g.prototype.setMap.call(this,t),this.updateState_()},V_.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,n=t.pixel,i=e[0]-n[0],o=e[1]-n[1],r=i*i+o*o;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},V_.prototype.atFinish_=function(t){let e=!1;if(this.sketchFeature_){let n=!1,i=[this.finishCoordinate_];if(this.mode_===N_.LINE_STRING?n=this.sketchCoords_.length>this.minPoints_:this.mode_===N_.POLYGON&&(n=this.sketchCoords_[0].length>this.minPoints_,i=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),n){const n=t.map;for(let o=0,r=i.length;o<r;o++){const r=i[o],s=n.getPixelFromCoordinate(r),a=t.pixel,l=a[0]-s[0],h=a[1]-s[1],u=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+h*h)<=u){this.finishCoordinate_=r;break}}}}return e},V_.prototype.createOrUpdateSketchPoint_=function(t){const e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new ed(new Fd(e)),this.updateSketchFeatures_())},V_.prototype.startDrawing_=function(t){const e=t.coordinate;this.finishCoordinate_=e,this.mode_===N_.POINT?this.sketchCoords_=e.slice():this.mode_===N_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ed(new up(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new ed,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new G_("drawstart",this.sketchFeature_))},V_.prototype.modifyDrawing_=function(t){let e=t.coordinate;const n=this.sketchFeature_.getGeometry();let i,o,r;if(this.mode_===N_.POINT?o=this.sketchCoords_:this.mode_===N_.POLYGON?(o=(i=this.sketchCoords_[0])[i.length-1],this.atFinish_(t)&&(e=this.finishCoordinate_.slice())):o=(i=this.sketchCoords_)[i.length-1],o[0]=e[0],o[1]=e[1],this.geometryFunction_(this.sketchCoords_,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n instanceof Kd&&this.mode_!==N_.POLYGON){this.sketchLine_||(this.sketchLine_=new ed(new up(null)));const t=n.getLinearRing(0);(r=this.sketchLine_.getGeometry()).setFlatCoordinates(t.getLayout(),t.getFlatCoordinates())}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},V_.prototype.addToDrawing_=function(t){const e=t.coordinate,n=this.sketchFeature_.getGeometry();let i,o;this.mode_===N_.LINE_STRING?(this.finishCoordinate_=e.slice(),(o=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),this.geometryFunction_(o,n)):this.mode_===N_.POLYGON&&((o=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),i&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),i&&this.finishDrawing()},V_.prototype.removeLastPoint=function(){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry();let e,n;this.mode_===N_.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===N_.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),(n=this.sketchLine_.getGeometry()).setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()},V_.prototype.finishDrawing=function(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const n=t.getGeometry();this.mode_===N_.LINE_STRING?(e.pop(),this.geometryFunction_(e,n)):this.mode_===N_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,n),e=n.getCoordinates()),this.type_===Wh.MULTI_POINT?t.setGeometry(new m_([e])):this.type_===Wh.MULTI_LINE_STRING?t.setGeometry(new __([e])):this.type_===Wh.MULTI_POLYGON&&t.setGeometry(new x_([e])),this.dispatchEvent(new G_("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},V_.prototype.abortDrawing_=function(){this.finishCoordinate_=null;const t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},V_.prototype.extend=function(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new G_("drawstart",this.sketchFeature_))},V_.prototype.shouldStopEvent=Dl,V_.prototype.updateSketchFeatures_=function(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},V_.prototype.updateState_=function(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)};const H_=function(t){jl.call(this,"extentchanged"),this.extent=t};gl(H_,jl);const W_=function(t){const e=t||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),_g.call(this,{handleDownEvent:Y_,handleDragEvent:K_,handleEvent:U_,handleUpEvent:X_}),this.extentOverlay_=new w_({source:new A_({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:function(){const t=Jc();return function(e,n){return t[Wh.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new w_({source:new A_({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:function(){const t=Jc();return function(e,n){return t[Wh.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)};function U_(t){return!(t instanceof Vp&&(t.type!=Np.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),gg.call(this,t),1))}function Y_(t){const e=t.pixel,n=t.map,i=this.getExtent();let o=this.snapToVertex_(e,n);const r=function(t){let e=null,n=null;return t[0]==i[0]?e=i[2]:t[0]==i[2]&&(e=i[0]),t[1]==i[1]?n=i[3]:t[1]==i[3]&&(n=i[1]),null!==e&&null!==n?[e,n]:null};if(o&&i){const t=o[0]==i[0]||o[0]==i[2]?o[0]:null,e=o[1]==i[1]||o[1]==i[3]?o[1]:null;null!==t&&null!==e?this.pointerHandler_=Z_(r(o)):null!==t?this.pointerHandler_=q_(r([t,i[1]]),r([t,i[3]])):null!==e&&(this.pointerHandler_=q_(r([i[0],e]),r([i[2],e])))}else o=n.getCoordinateFromPixel(e),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=Z_(o);return!0}function K_(t){if(this.pointerHandler_){const e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0}function X_(t){this.pointerHandler_=null;const e=this.getExtent();return e&&0!==bh(e)||this.setExtent(null),!1}function Z_(t){return function(e){return ih([t,e])}}function q_(t,e){return t[0]==e[0]?function(n){return ih([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return ih([t,[e[0],n[1]]])}:null}gl(W_,_g),W_.prototype.snapToVertex_=function(t,e){const n=e.getCoordinateFromPixel(t),i=function(t,e){return rp(n,t)-rp(n,e)},o=this.getExtent();if(o){const r=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(o);r.sort(i);const s=r[0];let a=Qd(n,s);const l=e.getPixelFromCoordinate(a);if(op(t,l)<=this.pixelTolerance_){const t=e.getPixelFromCoordinate(s[0]),n=e.getPixelFromCoordinate(s[1]),i=ip(l,t),o=ip(l,n),r=Math.sqrt(Math.min(i,o));return this.snappedToVertex_=r<=this.pixelTolerance_,this.snappedToVertex_&&(a=i>o?s[1]:s[0]),a}}return null},W_.prototype.handlePointerMove_=function(t){const e=t.pixel,n=t.map;let i=this.snapToVertex_(e,n);i||(i=n.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(i)},W_.prototype.createOrUpdateExtentFeature_=function(t){let e=this.extentFeature_;return e?e.setGeometry(t?Xd(t):void 0):(e=new ed(t?Xd(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},W_.prototype.createOrUpdatePointerFeature_=function(t){let e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new ed(new Fd(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},W_.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),_g.prototype.setMap.call(this,t)},W_.prototype.getExtent=function(){return this.extent_},W_.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new H_(this.extent_))};const J_={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},Q_=function(t,e,n){jl.call(this,t),this.features=e,this.mapBrowserEvent=n};gl(Q_,jl);const $_=function(t){let e;if(_g.call(this,{handleDownEvent:iy,handleDragEvent:oy,handleEvent:sy,handleUpEvent:ry}),this.condition_=t.condition?t.condition:lg,this.defaultDeleteCondition_=function(t){return function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(t)&&ig(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:$f,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new F_,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new w_({source:new A_({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:function(){const t=Jc();return function(e,n){return t[Wh.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,e=new $l(this.source_.getFeatures()),Rl(this.source_,"addfeature",this.handleSourceAdd_,this),Rl(this.source_,"removefeature",this.handleSourceRemove_,this)):e=t.features,!e)throw new Error("The modify interaction requires features or a source");this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),Rl(this.features_,"add",this.handleFeatureAdd_,this),Rl(this.features_,"remove",this.handleFeatureRemove_,this),this.lastPointerEvent_=null};gl($_,_g);const ty=0,ey=1;function ny(t,e){return t.index-e.index}function iy(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);const e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;const n=this.vertexFeature_;if(n){const i=[],o=n.getGeometry().getCoordinates(),r=ih([o]),s=this.rBush_.getInExtent(r),a={};s.sort(ny);for(let n=0,l=s.length;n<l;++n){const r=s[n],l=r.segment;let h=yl(r.feature);const u=r.depth;if(u&&(h+="-"+u.join("-")),a[h]||(a[h]=new Array(2)),r.geometry.getType()===Wh.CIRCLE&&r.index===ey)tp(ly(e,r),o)&&!a[h][0]&&(this.dragSegments_.push([r,0]),a[h][0]=r);else if(tp(l[0],o)&&!a[h][0])this.dragSegments_.push([r,0]),a[h][0]=r;else if(tp(l[1],o)&&!a[h][1]){if((r.geometry.getType()===Wh.LINE_STRING||r.geometry.getType()===Wh.MULTI_LINE_STRING)&&a[h][0]&&0===a[h][0].index)continue;this.dragSegments_.push([r,1]),a[h][1]=r}else this.insertVertexCondition_(t)&&yl(l)in this.vertexSegments_&&!a[h][0]&&!a[h][1]&&i.push([r,o])}i.length&&this.willModifyFeatures_(t);for(let t=i.length-1;t>=0;--t)this.insertVertex_.apply(this,i[t])}return!!this.vertexFeature_}function oy(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);const e=t.coordinate;for(let n=0,i=this.dragSegments_.length;n<i;++n){const t=this.dragSegments_[n],i=t[0],o=i.depth,r=i.geometry;let s;const a=i.segment,l=t[1];for(;e.length<r.getStride();)e.push(a[l][e.length]);switch(r.getType()){case Wh.POINT:s=e,a[0]=a[1]=e;break;case Wh.MULTI_POINT:(s=r.getCoordinates())[i.index]=e,a[0]=a[1]=e;break;case Wh.LINE_STRING:(s=r.getCoordinates())[i.index+l]=e,a[l]=e;break;case Wh.MULTI_LINE_STRING:case Wh.POLYGON:(s=r.getCoordinates())[o[0]][i.index+l]=e,a[l]=e;break;case Wh.MULTI_POLYGON:(s=r.getCoordinates())[o[1]][o[0]][i.index+l]=e,a[l]=e;break;case Wh.CIRCLE:a[0]=a[1]=e,i.index===ty?(this.changingFeature_=!0,r.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,r.setRadius(op(r.getCenter(),e)),this.changingFeature_=!1)}s&&this.setGeometryCoordinates_(r,s)}this.createOrUpdateVertexFeature_(e)}function ry(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const t=this.dragSegments_[e][0],n=t.geometry;if(n.getType()===Wh.CIRCLE){const e=n.getCenter(),i=t.featureSegments[0],o=t.featureSegments[1];i.segment[0]=i.segment[1]=e,o.segment[0]=o.segment[1]=e,this.rBush_.update(ph(e),i),this.rBush_.update(n.getExtent(),o)}else this.rBush_.update(ih(t.segment),t)}return this.modified_&&(this.dispatchEvent(new Q_(J_.MODIFYEND,this.features_,t)),this.modified_=!1),!1}function sy(t){if(!(t instanceof Vp))return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=Np.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=Np.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==Np.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),gg.call(this,t)&&!e}function ay(t,e){const n=e.geometry;if(n.getType()===Wh.CIRCLE){const i=n;if(e.index===ey){const e=ip(i.getCenter(),t),n=Math.sqrt(e)-i.getRadius();return n*n}}return rp(t,e.segment)}function ly(t,e){const n=e.geometry;return n.getType()===Wh.CIRCLE&&e.index===ey?n.getClosestPoint(t):Qd(t,e.segment)}$_.prototype.addFeature_=function(t){const e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),Rl(t,Hl.CHANGE,this.handleFeatureChange_,this)},$_.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Q_(J_.MODIFYSTART,this.features_,t)))},$_.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Ml(t,Hl.CHANGE,this.handleFeatureChange_,this)},$_.prototype.removeFeatureSegmentData_=function(t){const e=this.rBush_,n=[];e.forEach(function(e){t===e.feature&&n.push(e)});for(let i=n.length-1;i>=0;--i)e.remove(n[i])},$_.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),_g.prototype.setActive.call(this,t)},$_.prototype.setMap=function(t){this.overlay_.setMap(t),_g.prototype.setMap.call(this,t)},$_.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},$_.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},$_.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},$_.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}},$_.prototype.handleFeatureRemove_=function(t){this.removeFeature_(t.element)},$_.prototype.writePointGeometry_=function(t,e){const n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},$_.prototype.writeMultiPointGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i],r={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),r)}},$_.prototype.writeLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length-1;i<o;++i){const o=n.slice(i,i+2),r={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(ih(o),r)}},$_.prototype.writeMultiLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i];for(let n=0,r=o.length-1;n<r;++n){const r=o.slice(n,n+2),s={feature:t,geometry:e,depth:[i],index:n,segment:r};this.rBush_.insert(ih(r),s)}}},$_.prototype.writePolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i];for(let n=0,r=o.length-1;n<r;++n){const r=o.slice(n,n+2),s={feature:t,geometry:e,depth:[i],index:n,segment:r};this.rBush_.insert(ih(r),s)}}},$_.prototype.writeMultiPolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i];for(let n=0,r=o.length;n<r;++n){const r=o[n];for(let o=0,s=r.length-1;o<s;++o){const s=r.slice(o,o+2),a={feature:t,geometry:e,depth:[n,i],index:o,segment:s};this.rBush_.insert(ih(s),a)}}}},$_.prototype.writeCircleGeometry_=function(t,e){const n=e.getCenter(),i={feature:t,geometry:e,index:ty,segment:[n,n]},o={feature:t,geometry:e,index:ey,segment:[n,n]};i.featureSegments=o.featureSegments=[i,o],this.rBush_.insert(ph(n),i),this.rBush_.insert(e.getExtent(),o)},$_.prototype.writeGeometryCollectionGeometry_=function(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i)this.SEGMENT_WRITERS_[n[i].getType()].call(this,t,n[i])},$_.prototype.createOrUpdateVertexFeature_=function(t){let e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new ed(new Fd(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},$_.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},$_.prototype.handlePointerAtPixel_=function(t,e){const n=e.getCoordinateFromPixel(t),i=function(t,e){return ay(n,t)-ay(n,e)},o=oh(ph(n),e.getView().getResolution()*this.pixelTolerance_),r=this.rBush_.getInExtent(o);if(r.length>0){r.sort(i);const o=r[0],s=o.segment;let a=ly(n,o);const l=e.getPixelFromCoordinate(a);let h=op(t,l);if(h<=this.pixelTolerance_){const t={};if(o.geometry.getType()===Wh.CIRCLE&&o.index===ey)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(a);else{const n=e.getPixelFromCoordinate(s[0]),i=e.getPixelFromCoordinate(s[1]),o=ip(l,n),u=ip(l,i);h=Math.sqrt(Math.min(o,u)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(a=o>u?s[1]:s[0]),this.createOrUpdateVertexFeature_(a);for(let e=1,a=r.length;e<a;++e){const n=r[e].segment;if(!(tp(s[0],n[0])&&tp(s[1],n[1])||tp(s[0],n[1])&&tp(s[1],n[0])))break;t[yl(n)]=!0}}return t[yl(s)]=!0,void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},$_.prototype.insertVertex_=function(t,e){const n=t.segment,i=t.feature,o=t.geometry,r=t.depth,s=t.index;let a;for(;e.length<o.getStride();)e.push(0);switch(o.getType()){case Wh.MULTI_LINE_STRING:case Wh.POLYGON:(a=o.getCoordinates())[r[0]].splice(s+1,0,e);break;case Wh.MULTI_POLYGON:(a=o.getCoordinates())[r[1]][r[0]].splice(s+1,0,e);break;case Wh.LINE_STRING:(a=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(o,s,r,1);const h={segment:[n[0],e],feature:i,geometry:o,depth:r,index:s};l.insert(ih(h.segment),h),this.dragSegments_.push([h,1]);const u={segment:[e,n[1]],feature:i,geometry:o,depth:r,index:s+1};l.insert(ih(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},$_.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Np.POINTERDRAG){const t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new Q_(J_.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},$_.prototype.removeVertex_=function(){const t=this.dragSegments_,e={};let n,i,o,r,s,a,l,h,u,c,d,p=!1;for(s=t.length-1;s>=0;--s)d=yl((c=(o=t[s])[0]).feature),c.depth&&(d+="-"+c.depth.join("-")),d in e||(e[d]={}),0===o[1]?(e[d].right=c,e[d].index=c.index):1==o[1]&&(e[d].left=c,e[d].index=c.index+1);for(d in e){switch(u=e[d].right,h=(a=e[d].index)-1,c=void 0!==(l=e[d].left)?l:u,h<0&&(h=0),n=i=(r=c.geometry).getCoordinates(),p=!1,r.getType()){case Wh.MULTI_LINE_STRING:i[c.depth[0]].length>2&&(i[c.depth[0]].splice(a,1),p=!0);break;case Wh.LINE_STRING:i.length>2&&(i.splice(a,1),p=!0);break;case Wh.MULTI_POLYGON:n=n[c.depth[1]];case Wh.POLYGON:(n=n[c.depth[0]]).length>4&&(a==n.length-1&&(a=0),n.splice(a,1),p=!0,0===a&&(n.pop(),n.push(n[0]),h=n.length-1))}if(p){this.setGeometryCoordinates_(r,i);const e=[];if(void 0!==l&&(this.rBush_.remove(l),e.push(l.segment[0])),void 0!==u&&(this.rBush_.remove(u),e.push(u.segment[1])),void 0!==l&&void 0!==u){const t={depth:c.depth,feature:c.feature,geometry:c.geometry,index:h,segment:e};this.rBush_.insert(ih(t.segment),t)}this.updateSegmentIndices_(r,a,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return p},$_.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},$_.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(o){o.geometry===t&&(void 0===n||void 0===o.depth||ad(o.depth,n))&&o.index>e&&(o.index+=i)})};const hy={SELECT:"select"},uy=function(t,e,n,i){jl.call(this,t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i};gl(uy,jl);const cy=function(t){Xf.call(this,{handleEvent:dy});const e=t||{};this.condition_=e.condition?e.condition:ig,this.addCondition_=e.addCondition?e.addCondition:eg,this.removeCondition_=e.removeCondition?e.removeCondition:eg,this.toggleCondition_=e.toggleCondition?e.toggleCondition:rg,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:Fl,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0;const n=new w_({source:new A_({useSpatialIndex:!1,features:e.features,wrapX:e.wrapX}),style:e.style?e.style:function(){const t=Jc();return sd(t[Wh.POLYGON],t[Wh.LINE_STRING]),sd(t[Wh.GEOMETRY_COLLECTION],t[Wh.LINE_STRING]),function(e,n){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0});let i;if(this.featureOverlay_=n,e.layers)if("function"==typeof e.layers)i=e.layers;else{const t=e.layers;i=function(e){return id(t,e)}}else i=Fl;this.layerFilter_=i,this.featureLayerAssociation_={};const o=this.featureOverlay_.getSource().getFeaturesCollection();Rl(o,"add",this.addFeature_,this),Rl(o,"remove",this.removeFeature_,this)};function dy(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),o=!e&&!n&&!i,r=t.map,s=this.featureOverlay_.getSource().getFeaturesCollection(),a=[],l=[];if(o){bl(this.featureLayerAssociation_),r.forEachFeatureAtPixel(t.pixel,(function(t,e){if(this.filter_(t,e))return l.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=s.getLength()-1;t>=0;--t){const e=s.item(t),n=l.indexOf(e);n>-1?l.splice(n,1):(s.remove(e),a.push(e))}0!==l.length&&s.extend(l)}else{r.forEachFeatureAtPixel(t.pixel,(function(t,o){if(this.filter_(t,o))return!e&&!i||id(s.getArray(),t)?(n||i)&&id(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(l.push(t),this.addFeatureLayerAssociation_(t,o)),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)s.remove(a[t]);s.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new uy(hy.SELECT,l,a,t)),ng(t)}gl(cy,Xf),cy.prototype.addFeatureLayerAssociation_=function(t,e){const n=yl(t);this.featureLayerAssociation_[n]=e},cy.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},cy.prototype.getHitTolerance=function(){return this.hitTolerance_},cy.prototype.getLayer=function(t){const e=yl(t);return this.featureLayerAssociation_[e]},cy.prototype.setHitTolerance=function(t){this.hitTolerance_=t},cy.prototype.setMap=function(t){const e=this.getMap(),n=this.featureOverlay_.getSource().getFeaturesCollection();e&&n.forEach(e.unskipFeature.bind(e)),Xf.prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&n.forEach(t.skipFeature.bind(t))},cy.prototype.addFeature_=function(t){const e=this.getMap();e&&e.skipFeature(t.element)},cy.prototype.removeFeature_=function(t){const e=this.getMap();e&&e.unskipFeature(t.element)},cy.prototype.removeFeatureLayerAssociation_=function(t){const e=yl(t);delete this.featureLayerAssociation_[e]};const py=function(t){_g.call(this,{handleEvent:fy,handleDownEvent:Fl,handleUpEvent:gy});const e=t||{};this.source_=e.source?e.source:null,this.vertex_=void 0===e.vertex||e.vertex,this.edge_=void 0===e.edge||e.edge,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.sortByDistance_=(function(t,e){return rp(this.pixelCoordinate_,t.segment)-rp(this.pixelCoordinate_,e.segment)}).bind(this),this.rBush_=new F_,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}};function fy(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),gg.call(this,t)}function gy(t){const e=wl(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}gl(py,_g),py.prototype.addFeature=function(t,e){const n=void 0===e||e,i=yl(t),o=t.getGeometry();if(o){const e=this.SEGMENT_WRITERS_[o.getType()];e&&(this.indexedFeaturesExtents_[i]=o.getExtent([1/0,1/0,-1/0,-1/0]),e.call(this,t,o))}n&&(this.featureChangeListenerKeys_[i]=Rl(t,Hl.CHANGE,this.handleFeatureChange_,this))},py.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},py.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},py.prototype.getFeatures_=function(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},py.prototype.handleFeatureAdd_=function(t){let e;t instanceof D_?e=t.feature:t instanceof Jl&&(e=t.element),this.addFeature(e)},py.prototype.handleFeatureRemove_=function(t){let e;t instanceof D_?e=t.feature:t instanceof Jl&&(e=t.element),this.removeFeature(e)},py.prototype.handleFeatureChange_=function(t){const e=t.target;if(this.handlingDownUpSequence){const t=yl(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)},py.prototype.removeFeature=function(t,e){const n=void 0===e||e,i=yl(t),o=this.indexedFeaturesExtents_[i];if(o){const e=this.rBush_,n=[];e.forEachInExtent(o,function(e){t===e.feature&&n.push(e)});for(let t=n.length-1;t>=0;--t)e.remove(n[t])}n&&(kl(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])},py.prototype.setMap=function(t){const e=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();e&&(n.forEach(kl),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),_g.prototype.setMap.call(this,t),t&&(this.features_?n.push(Rl(this.features_,"add",this.handleFeatureAdd_,this),Rl(this.features_,"remove",this.handleFeatureRemove_,this)):this.source_&&n.push(Rl(this.source_,"addfeature",this.handleFeatureAdd_,this),Rl(this.source_,"removefeature",this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},py.prototype.shouldStopEvent=Dl,py.prototype.snapTo=function(t,e,n){const i=ih([n.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),n.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]);let o=this.rBush_.getInExtent(i);this.vertex_&&!this.edge_&&(o=o.filter(function(t){return t.feature.getGeometry().getType()!==Wh.CIRCLE}));let r,s,a,l,h,u=!1,c=!1,d=null,p=null;if(o.length>0){this.pixelCoordinate_=e,o.sort(this.sortByDistance_);const i=o[0].segment,f=o[0].feature.getGeometry().getType()===Wh.CIRCLE;this.vertex_&&!this.edge_?(s=n.getPixelFromCoordinate(i[0]),a=n.getPixelFromCoordinate(i[1]),l=ip(t,s),h=ip(t,a),(u=(r=Math.sqrt(Math.min(l,h)))<=this.pixelTolerance_)&&(c=!0,p=n.getPixelFromCoordinate(d=l>h?i[1]:i[0]))):this.edge_&&(d=f?function(t,e){const n=e.getRadius(),i=e.getCenter(),o=i[0],r=i[1];let s=t[0]-o;const a=t[1]-r;0===s&&0===a&&(s=1);const l=Math.sqrt(s*s+a*a);return[o+n*s/l,r+n*a/l]}(e,o[0].feature.getGeometry()):Qd(e,i),op(t,p=n.getPixelFromCoordinate(d))<=this.pixelTolerance_&&(c=!0,this.vertex_&&!f&&(s=n.getPixelFromCoordinate(i[0]),a=n.getPixelFromCoordinate(i[1]),l=ip(p,s),h=ip(p,a),(u=(r=Math.sqrt(Math.min(l,h)))<=this.pixelTolerance_)&&(p=n.getPixelFromCoordinate(d=l>h?i[1]:i[0]))))),c&&(p=[Math.round(p[0]),Math.round(p[1])])}return{snapped:c,vertex:d,vertexPixel:p}},py.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},py.prototype.writeCircleGeometry_=function(t,e){const n=function(t,e,n){const i=e||32,o=t.getStride(),r=t.getLayout(),s=new Yd(null,r),a=o*(i+1),l=new Array(a);for(let h=0;h<a;h++)l[h]=0;return s.setFlatCoordinates(r,l,[l.length]),function(t,e,n,i){const o=t.getFlatCoordinates(),r=t.getLayout(),s=t.getStride(),a=t.getEnds(),l=o.length/s-1,h=i||0;for(let u=0;u<=l;++u){const t=u*s,i=h+2*zh(u,l)*Math.PI/l;o[t]=e[0]+n*Math.cos(i),o[t+1]=e[1]+n*Math.sin(i)}t.setFlatCoordinates(r,o,a)}(s,t.getCenter(),t.getRadius(),n),s}(e).getCoordinates()[0];for(let i=0,o=n.length-1;i<o;++i){const e=n.slice(i,i+2),o={feature:t,segment:e};this.rBush_.insert(ih(e),o)}},py.prototype.writeGeometryCollectionGeometry_=function(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i){const e=this.SEGMENT_WRITERS_[n[i].getType()];e&&e.call(this,t,n[i])}},py.prototype.writeLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length-1;i<o;++i){const e=n.slice(i,i+2),o={feature:t,segment:e};this.rBush_.insert(ih(e),o)}},py.prototype.writeMultiLineStringGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const e=n[i];for(let n=0,i=e.length-1;n<i;++n){const i=e.slice(n,n+2),o={feature:t,segment:i};this.rBush_.insert(ih(i),o)}}},py.prototype.writeMultiPointGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const o=n[i],r={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),r)}},py.prototype.writeMultiPolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const e=n[i];for(let n=0,i=e.length;n<i;++n){const i=e[n];for(let e=0,n=i.length-1;e<n;++e){const n=i.slice(e,e+2),o={feature:t,segment:n};this.rBush_.insert(ih(n),o)}}}},py.prototype.writePointGeometry_=function(t,e){const n=e.getCoordinates(),i={feature:t,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},py.prototype.writePolygonGeometry_=function(t,e){const n=e.getCoordinates();for(let i=0,o=n.length;i<o;++i){const e=n[i];for(let n=0,i=e.length-1;n<i;++n){const i=e.slice(n,n+2),o={feature:t,segment:i};this.rBush_.insert(ih(i),o)}}};const _y={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},yy=function(t,e,n){jl.call(this,t),this.features=e,this.coordinate=n};gl(yy,jl);const my=function(t){_g.call(this,{handleDownEvent:vy,handleDragEvent:by,handleMoveEvent:wy,handleUpEvent:xy});const e=t||{};let n;if(this.lastCoordinate_=null,this.features_=void 0!==e.features?e.features:null,e.layers)if("function"==typeof e.layers)n=e.layers;else{const t=e.layers;n=function(e){return id(t,e)}}else n=Fl;this.layerFilter_=n,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.lastFeature_=null,Rl(this,Zl("active"),this.handleActiveChanged_,this)};function vy(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,wy.call(this,t);const e=this.features_||new $l([this.lastFeature_]);return this.dispatchEvent(new yy(_y.TRANSLATESTART,e,t.coordinate)),!0}return!1}function xy(t){if(this.lastCoordinate_){this.lastCoordinate_=null,wy.call(this,t);const e=this.features_||new $l([this.lastFeature_]);return this.dispatchEvent(new yy(_y.TRANSLATEEND,e,t.coordinate)),!0}return!1}function by(t){if(this.lastCoordinate_){const e=t.coordinate,n=e[0]-this.lastCoordinate_[0],i=e[1]-this.lastCoordinate_[1],o=this.features_||new $l([this.lastFeature_]);o.forEach(function(t){const e=t.getGeometry();e.translate(n,i),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new yy(_y.TRANSLATING,o,e))}}function wy(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}function Cy(t){const e=t||{},n=new $l,i=new Lp(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Sg),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Jf({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new bg({kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new t_),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new r_({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new zg),n.push(new Ug({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new Zg({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Gg({duration:e.zoomDuration})),n}gl(my,_g),my.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,(function(t){if(!this.features_||id(this.features_.getArray(),t))return t}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},my.prototype.getHitTolerance=function(){return this.hitTolerance_},my.prototype.setHitTolerance=function(t){this.hitTolerance_=t},my.prototype.setMap=function(t){const e=this.getMap();_g.prototype.setMap.call(this,t),this.updateState_(e)},my.prototype.handleActiveChanged_=function(){this.updateState_(null)},my.prototype.updateState_=function(t){let e=this.getMap();const n=this.getActive();e&&n||!(e=e||t)||e.getViewport().classList.remove("ol-grab","ol-grabbing")};const Ey=function(t,e,n,i,o){jl.call(this,t),this.vectorContext=e,this.frameState=n,this.context=i,this.glContext=o};gl(Ey,jl);var Ty=Ey;const Sy=function(){};Sy.prototype.drawCustom=function(t,e,n){},Sy.prototype.drawGeometry=function(t){},Sy.prototype.setStyle=function(t){},Sy.prototype.drawCircle=function(t,e){},Sy.prototype.drawFeature=function(t,e){},Sy.prototype.drawGeometryCollection=function(t,e){},Sy.prototype.drawLineString=function(t,e){},Sy.prototype.drawMultiLineString=function(t,e){},Sy.prototype.drawMultiPoint=function(t,e){},Sy.prototype.drawMultiPolygon=function(t,e){},Sy.prototype.drawPoint=function(t,e){},Sy.prototype.drawPolygon=function(t,e){},Sy.prototype.drawText=function(t,e){},Sy.prototype.setFillStrokeStyle=function(t,e){},Sy.prototype.setImageStyle=function(t,e){},Sy.prototype.setTextStyle=function(t,e){};var Iy=Sy;const Ry=function(t,e,n,i,o){Iy.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]};gl(Ry,Iy),Ry.prototype.drawImages_=function(t,e,n,i){if(!this.image_)return;const o=Dh(t,e,n,2,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let h=0,u=o.length;h<u;h+=2){let t=o[h]-this.imageAnchorX_,e=o[h+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(t=Math.round(t),e=Math.round(e)),0!==l||1!=this.imageScale_){const n=t+this.imageAnchorX_,i=e+this.imageAnchorY_;Au(s,n,i,this.imageScale_,this.imageScale_,l,-n,-i),r.setTransform.apply(r,s)}r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||r.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(r.globalAlpha=a)},Ry.prototype.drawText_=function(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Dh(t,e,n,i,this.transform_,this.pixelCoordinates_),r=this.context_;let s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const t=o[e]+this.textOffsetX_,n=o[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){const e=Au(this.tmpLocalTransform_,t,n,this.textScale_,this.textScale_,s,-t,-n);r.setTransform.apply(r,e)}this.textStrokeState_&&r.strokeText(this.text_,t,n),this.textFillState_&&r.fillText(this.text_,t,n)}0===s&&1==this.textScale_||r.setTransform(1,0,0,1,0,0)},Ry.prototype.moveToLineTo_=function(t,e,n,i,o){const r=this.context_,s=Dh(t,e,n,i,this.transform_,this.pixelCoordinates_);r.moveTo(s[0],s[1]);let a=s.length;o&&(a-=2);for(let l=2;l<a;l+=2)r.lineTo(s[l],s[l+1]);return o&&r.closePath(),n},Ry.prototype.drawRings_=function(t,e,n,i){for(let o=0,r=n.length;o<r;++o)e=this.moveToLineTo_(t,e,n[o],i,!0);return e},Ry.prototype.drawCircle=function(t){if(kh(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,n){const i=t.getFlatCoordinates();if(i){const o=t.getStride();return Dh(i,0,i.length,o,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],o=Math.sqrt(n*n+i*i),r=this.context_;r.beginPath(),r.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},Ry.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},Ry.prototype.drawGeometry=function(t){switch(t.getType()){case Wh.POINT:this.drawPoint(t);break;case Wh.LINE_STRING:this.drawLineString(t);break;case Wh.POLYGON:this.drawPolygon(t);break;case Wh.MULTI_POINT:this.drawMultiPoint(t);break;case Wh.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Wh.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Wh.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Wh.CIRCLE:this.drawCircle(t)}},Ry.prototype.drawFeature=function(t,e){const n=e.getGeometryFunction()(t);n&&kh(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},Ry.prototype.drawGeometryCollection=function(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},Ry.prototype.drawPoint=function(t){const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},Ry.prototype.drawMultiPoint=function(t){const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},Ry.prototype.drawLineString=function(t){if(kh(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}},Ry.prototype.drawMultiLineString=function(t){const e=t.getExtent();if(kh(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const o=t.getEnds(),r=t.getStride();e.beginPath();for(let t=0,s=o.length;t<s;++t)i=this.moveToLineTo_(n,i,o[t],r,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}},Ry.prototype.drawPolygon=function(t){if(kh(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}},Ry.prototype.drawMultiPolygon=function(t){if(kh(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const o=t.getEndss(),r=t.getStride();e.beginPath();for(let t=0,s=o.length;t<s;++t)i=this.drawRings_(n,i,o[t],r);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}},Ry.prototype.setContextFillState_=function(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},Ry.prototype.setContextStrokeState_=function(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),pc&&(ad(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,pc&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},Ry.prototype.setContextTextState_=function(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:"center";n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=i&&(n.textAlign=e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},Ry.prototype.setFillStrokeStyle=function(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Xu(e||Cc)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),o=e.getLineDashOffset(),r=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit();this.strokeState_={lineCap:void 0!==n?n:"round",lineDash:i||Ec,lineDashOffset:o||0,lineJoin:void 0!==r?r:"round",lineWidth:this.pixelRatio_*(void 0!==s?s:1),miterLimit:void 0!==a?a:10,strokeStyle:Xu(t||Tc)}}else this.strokeState_=null},Ry.prototype.setImageStyle=function(t){if(t){const e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),o=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=o[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=o[0]}else this.image_=null},Ry.prototype.setTextStyle=function(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Xu(t||Cc)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),o=n.getLineDashOffset(),r=n.getLineJoin(),s=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:"round",lineDash:i||Ec,lineDashOffset:o||0,lineJoin:void 0!==r?r:"round",lineWidth:void 0!==s?s:1,miterLimit:void 0!==a?a:10,strokeStyle:Xu(t||Tc)}}else this.textStrokeState_=null;const i=t.getFont(),o=t.getOffsetX(),r=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScale(),h=t.getText(),u=t.getTextAlign(),c=t.getTextBaseline();this.textState_={font:void 0!==i?i:"10px sans-serif",textAlign:void 0!==u?u:"center",textBaseline:void 0!==c?c:"middle"},this.text_=void 0!==h?h:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=this.pixelRatio_*(void 0!==l?l:1)}else this.text_=""};var Py=Ry;const My=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function ky(t,e,n){return e+":"+t+":"+(n?Hu(n):"null")}My.prototype.clear=function(){this.cache_={},this.cacheSize_=0},My.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){let t=0;for(const e in this.cache_)0!=(3&t++)||this.cache_[e].hasListener()||(delete this.cache_[e],--this.cacheSize_)}},My.prototype.get=function(t,e,n){const i=ky(t,e,n);return i in this.cache_?this.cache_[i]:null},My.prototype.set=function(t,e,n,i){const o=ky(t,e,n);this.cache_[o]=i,++this.cacheSize_},My.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};const Ly=new My,Fy=function(t){Nl.call(this),this.map_=t,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]};function Dy(t,e){Ly.expire()}function Oy(t,e){return t.zIndex-e.zIndex}gl(Fy,Nl),Fy.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},Fy.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_},Fy.prototype.calculateMatrices2D=function(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Au(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Nu(ku(i,n))},Fy.prototype.removeLayerRenderers=function(){for(const t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},Fy.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s){let a;const l=e.viewState,h=l.resolution;function u(t,n){const r=yl(t).toString(),s=e.layerStates[yl(n)].managed;if(!(r in e.skippedFeatureUids)||s)return i.call(o,t,s?n:null)}const c=l.projection;let d=t;if(c.canWrapX()){const e=c.getExtent(),n=Mh(e),i=t[0];(i<e[0]||i>e[2])&&(d=[i+n*Math.ceil((e[0]-i)/n),t[1]])}const p=e.layerStatesArray;let f;for(f=p.length-1;f>=0;--f){const i=p[f],l=i.layer;if(kf(i,h)&&r.call(s,l)){const i=this.getLayerRenderer(l);if(l.getSource()&&(a=i.forEachFeatureAtCoordinate(l.getSource().getWrapX()?d:t,e,n,u,o)),a)return a}}},Fy.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,s){},Fy.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,Fl,this,i,o)},Fy.prototype.getLayerRenderer=function(t){const e=yl(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];{let n;for(let e=0,i=this.layerRendererConstructors_.length;e<i;++e){const i=this.layerRendererConstructors_[e];if(i.handles(t)){n=i.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=Rl(n,Hl.CHANGE,this.handleLayerRendererChange_,this),n}},Fy.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},Fy.prototype.getLayerRenderers=function(){return this.layerRenderers_},Fy.prototype.getMap=function(){return this.map_},Fy.prototype.handleLayerRendererChange_=function(){this.map_.render()},Fy.prototype.removeLayerRendererByKey_=function(t){const e=this.layerRenderers_[t];return delete this.layerRenderers_[t],kl(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},Fy.prototype.renderFrame=Ol,Fy.prototype.removeUnusedLayerRenderers_=function(t,e){for(const n in this.layerRenderers_)e&&n in e.layerStates||this.removeLayerRendererByKey_(n).dispose()},Fy.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Dy)},Fy.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(const e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))};var Ay=Fy;const Ny=[],Gy=function(t){Ay.call(this,t);const e=t.getViewport();this.context_=Zu(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className="ol-unselectable",e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]};gl(Gy,Ay),Gy.prototype.dispatchComposeEvent_=function(t,e){const n=this.getMap(),i=this.context_;if(n.hasListener(t)){const o=e.extent,r=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),l=new Py(i,r,o,a,s),h=new Ty(t,l,e,i,null);n.dispatchEvent(h)}},Gy.prototype.getTransform=function(t){const e=t.viewState,n=t.pixelRatio/e.resolution;return Au(this.transform_,this.canvas_.width/2,this.canvas_.height/2,n,-n,-e.rotation,-e.center[0],-e.center[1])},Gy.prototype.renderFrame=function(t){if(!t)return void(this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1));const e=this.context_,n=t.pixelRatio,i=Math.round(t.size[0]*n),o=Math.round(t.size[1]*n);this.canvas_.width!=i||this.canvas_.height!=o?(this.canvas_.width=i,this.canvas_.height=o):e.clearRect(0,0,i,o);const r=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_("precompose",t);const s=t.layerStatesArray;ld(s,Oy),r&&(e.save(),Oc(e,r,i/2,o/2));const a=t.viewState.resolution;let l,h,u,c,d;for(l=0,h=s.length;l<h;++l)c=this.getLayerRenderer(u=(d=s[l]).layer),kf(d,a)&&"ready"==d.sourceState&&c.prepareFrame(t,d)&&c.composeFrame(t,d,e);r&&e.restore(),this.dispatchComposeEvent_("postcompose",t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},Gy.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,s){let a;const l=e.viewState.resolution,h=e.layerStatesArray,u=h.length,c=Lu(e.pixelToCoordinateTransform,t.slice());let d;for(d=u-1;d>=0;--d){const t=h[d],u=t.layer;if(kf(t,l)&&r.call(s,u)&&(a=this.getLayerRenderer(u).forEachLayerAtCoordinate(c,e,n,i,o)))return a}},Gy.prototype.registerLayerRenderers=function(t){Ay.prototype.registerLayerRenderers.call(this,t);for(let e=0,n=t.length;e<n;++e){const n=t[e];id(Ny,n)||Ny.push(n)}};var Vy=Gy;const jy=function(t){Ul.call(this),this.layer_=t};gl(jy,Ul),jy.prototype.forEachFeatureAtCoordinate=Ol,jy.prototype.hasFeatureAtCoordinate=Dl,jy.prototype.createLoadedTileFinder=function(t,e,n){return function(i,o){return t.forEachLoadedTile(e,i,o,function(t){n[i]||(n[i]={}),n[i][t.tileCoord.toString()]=t})}},jy.prototype.getLayer=function(){return this.layer_},jy.prototype.handleImageChange_=function(t){t.target.getState()===mc.LOADED&&this.renderIfReadyAndVisible()},jy.prototype.loadImage=function(t){let e=t.getState();return e!=mc.LOADED&&e!=mc.ERROR&&Rl(t,Hl.CHANGE,this.handleImageChange_,this),e==mc.IDLE&&(t.load(),e=t.getState()),e==mc.LOADED},jy.prototype.renderIfReadyAndVisible=function(){const t=this.getLayer();t.getVisible()&&"ready"==t.getSourceState()&&this.changed()},jy.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){const n=(function(t,e,n){const i=yl(t).toString();i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}).bind(null,e);t.postRenderFunctions.push(n)}},jy.prototype.updateUsedTiles=function(t,e,n,i){const o=yl(e).toString(),r=n.toString();o in t?r in t[o]?t[o][r].extend(i):t[o][r]=i:(t[o]={},t[o][r]=i)},jy.prototype.manageTilePyramid=function(t,e,n,i,o,r,s,a,l,h){const u=yl(e).toString();u in t.wantedTiles||(t.wantedTiles[u]={});const c=t.wantedTiles[u],d=t.tileQueue;let p,f,g,_,y,m;for(m=n.getMinZoom();m<=s;++m)for(f=n.getTileRangeForExtentAndZ(r,m,f),g=n.getResolution(m),_=f.minX;_<=f.maxX;++_)for(y=f.minY;y<=f.maxY;++y)s-m<=a?(0==(p=e.getTile(m,_,y,i,o)).getState()&&(c[p.getKey()]=!0,d.isKeyQueued(p.getKey())||d.enqueue([p,u,n.getTileCoordCenter(p.tileCoord),g])),void 0!==l&&l.call(h,p)):e.useTile(m,_,y,o)};var By=jy;const zy=function(t){By.call(this,t),this.transform_=[1,0,0,1,0,0]};gl(zy,By),zy.prototype.clip=function(t,e,n){const i=e.pixelRatio,o=e.size[0]*i,r=e.size[1]*i,s=e.viewState.rotation,a=Rh(n),l=Ph(n),h=Ch(n),u=wh(n);Lu(e.coordinateToPixelTransform,a),Lu(e.coordinateToPixelTransform,l),Lu(e.coordinateToPixelTransform,h),Lu(e.coordinateToPixelTransform,u),t.save(),Oc(t,-s,o/2,r/2),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(l[0]*i,l[1]*i),t.lineTo(h[0]*i,h[1]*i),t.lineTo(u[0]*i,u[1]*i),t.clip(),Oc(t,s,o/2,r/2)},zy.prototype.dispatchComposeEvent_=function(t,e,n,i){const o=this.getLayer();if(o.hasListener(t)){const r=n.size[0]*n.pixelRatio,s=n.size[1]*n.pixelRatio,a=n.viewState.rotation;Oc(e,-a,r/2,s/2);const l=void 0!==i?i:this.getTransform(n,0),h=new Py(e,n.pixelRatio,n.extent,l,n.viewState.rotation),u=new Ty(t,h,n,e,null);o.dispatchEvent(u),Oc(e,a,r/2,s/2)}},zy.prototype.forEachLayerAtCoordinate=function(t,e,n,i,o){return this.forEachFeatureAtCoordinate(t,e,n,Fl,this)?i.call(o,this.getLayer(),null):void 0},zy.prototype.postCompose=function(t,e,n,i){this.dispatchComposeEvent_("postcompose",t,e,i)},zy.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_("precompose",t,e,n)},zy.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_("render",t,e,n)},zy.prototype.getTransform=function(t,e){const n=t.viewState,i=t.pixelRatio,o=i/n.resolution;return Au(this.transform_,i*t.size[0]/2,i*t.size[1]/2,o,-o,-n.rotation,-n.center[0]+e,-n.center[1])},zy.prototype.composeFrame=function(t,e,n){},zy.prototype.prepareFrame=function(t,e){};var Hy=zy;const Wy=function(t){Hy.call(this,t),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null};gl(Wy,Hy),Wy.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);const i=this.getImage();if(i){const o=e.extent,r=void 0!==o&&!lh(o,t.extent)&&kh(o,t.extent);r&&this.clip(n,t,o);const s=this.getImageTransform(),a=n.globalAlpha;n.globalAlpha=e.opacity;const l=s[5],h=i.width*s[0],u=i.height*s[3];n.drawImage(i,0,0,+i.width,+i.height,Math.round(s[4]),Math.round(l),Math.round(h),Math.round(u)),n.globalAlpha=a,r&&n.restore()}this.postCompose(n,t,e)},Wy.prototype.getImage=function(){},Wy.prototype.getImageTransform=function(){},Wy.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){const r=this.getLayer();return r.getSource().forEachFeatureAtCoordinate(t,e.viewState.resolution,e.viewState.rotation,n,e.skippedFeatureUids,function(t){return i.call(o,t,r)})},Wy.prototype.forEachLayerAtCoordinate=function(t,e,n,i,o){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==Ol)return Hy.prototype.forEachLayerAtCoordinate.apply(this,arguments);{const n=Lu(this.coordinateToCanvasPixelTransform,t.slice());np(n,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Zu(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),n[0],n[1],1,1,0,0,1,1);const r=this.hitCanvasContext_.getImageData(0,0,1,1).data;return r[3]>0?i.call(o,this.getLayer(),r):void 0}}};var Uy=Wy;const Yy=function(t){if(Uy.call(this,t),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,"VECTOR"===t.getType())for(let e=0,n=Ny.length;e<n;++e){const n=Ny[e];if(n!==Yy&&n.handles(t)){this.vectorRenderer_=new n(t);break}}};gl(Yy,Uy),Yy.handles=function(t){return"IMAGE"===t.getType()||"VECTOR"===t.getType()&&"image"===t.getRenderMode()},Yy.create=function(t,e){return new Yy(e)},Yy.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),Uy.prototype.disposeInternal.call(this)},Yy.prototype.getImage=function(){return this.image_?this.image_.getImage():null},Yy.prototype.getImageTransform=function(){return this.imageTransform_},Yy.prototype.prepareFrame=function(t,e){const n=t.pixelRatio,i=t.size,o=t.viewState,r=o.center,s=o.resolution;let a;const l=this.getLayer().getSource(),h=t.viewHints,u=this.vectorRenderer_;let c=t.extent;if(u||void 0===e.extent||(c=Ih(c,e.extent)),!h[mf.ANIMATING]&&!h[mf.INTERACTING]&&!Lh(c)){let i=o.projection,r=this.skippedFeatures_;if(u){const i=u.context,o=xl({},t,{size:[Mh(c)/s,Sh(c)/s],viewState:xl({},t.viewState,{rotation:0})}),l=Object.keys(o.skippedFeatureUids).sort();a=new bp(c,s,n,i.canvas,function(t){!u.prepareFrame(o,e)||!u.replayGroupChanged&&ad(r,l)||(i.canvas.width=o.size[0]*n,i.canvas.height=o.size[1]*n,u.compose(i,o,e),r=l,t())})}else a=l.getImage(c,s,n,i);a&&this.loadImage(a)&&(this.image_=a,this.skippedFeatures_=r)}if(this.image_){const t=(a=this.image_).getExtent(),e=a.getResolution(),o=a.getPixelRatio(),l=n*e/(s*o),h=Au(this.imageTransform_,n*i[0]/2,n*i[1]/2,l,l,0,o*(t[0]-r[0])/e,o*(r[1]-t[3])/e);Au(this.coordinateToCanvasPixelTransform,n*i[0]/2-h[4],n*i[1]/2-h[5],n/s,-n/s,0,-r[0],-r[1]),this.renderedResolution=e*n/o}return!!this.image_},Yy.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,i,o):Uy.prototype.forEachFeatureAtCoordinate.call(this,t,e,n,i,o)};var Ky=Yy;const Xy=function(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i};function Zy(t,e,n,i,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=i,o):new Xy(t,e,n,i)}Xy.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Xy.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Xy.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Xy.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Xy.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Xy.prototype.getHeight=function(){return this.maxY-this.minY+1},Xy.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Xy.prototype.getWidth=function(){return this.maxX-this.minX+1},Xy.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var qy=Xy;const Jy=function(t){Uy.call(this,t),this.context=null===this.context?null:Zu(),this.renderedExtent_=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new qy(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0};gl(Jy,Uy),Jy.handles=function(t){return"TILE"===t.getType()},Jy.create=function(t,e){return new Jy(e)},Jy.prototype.isDrawableTile_=function(t){const e=t.getState(),n=this.getLayer().getUseInterimTilesOnError();return 2==e||4==e||3==e&&!n},Jy.prototype.getTile=function(t,e,n,i,o){const r=this.getLayer();let s=r.getSource().getTile(t,e,n,i,o);return 3==s.getState()&&(r.getUseInterimTilesOnError()?r.getPreload()>0&&(this.newTiles_=!0):s.setState(2)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},Jy.prototype.prepareFrame=function(t,e){const n=t.pixelRatio,i=t.size,o=t.viewState,r=o.projection,s=o.resolution,a=o.center,l=this.getLayer(),h=l.getSource(),u=h.getRevision(),c=h.getTileGridForProjection(r),d=c.getZForResolution(s,this.zDirection),p=c.getResolution(d);let f=Math.round(s/p)||1,g=t.extent;if(void 0!==e.extent&&(g=Ih(g,e.extent)),Lh(g))return!1;const _=c.getTileRangeForExtentAndZ(g,d),y=c.getTileRangeExtent(d,_),m=h.getTilePixelRatio(n),v={};v[d]={};const x=this.createLoadedTileFinder(h,r,v),b=t.viewHints,w=b[mf.ANIMATING]||b[mf.INTERACTING],C=this.tmpExtent,E=this.tmpTileRange_;let T,S,I;for(this.newTiles_=!1,S=_.minX;S<=_.maxX;++S)for(I=_.minY;I<=_.maxY;++I){if(Date.now()-t.time>16&&w)continue;if(T=this.getTile(d,S,I,n,r),this.isDrawableTile_(T)){const e=yl(this);if(2==T.getState()){v[d][T.tileCoord.toString()]=T;const t=T.inTransition(e);this.newTiles_||!t&&-1!==this.renderedTiles.indexOf(T)||(this.newTiles_=!0)}if(1===T.getAlpha(e,t.time))continue}const e=c.getTileCoordChildTileRange(T.tileCoord,E,C);let i=!1;e&&(i=x(d+1,e)),i||c.forEachTileCoordParentTileRange(T.tileCoord,x,null,E,C)}const R=p*n/m*f;if(!(this.renderedResolution&&Date.now()-t.time>16&&w)&&(this.newTiles_||!this.renderedExtent_||!lh(this.renderedExtent_,g)||this.renderedRevision!=u||f!=this.oversampling_||!w&&R!=this.renderedResolution)){const i=this.context;if(i){const t=h.getTilePixelSize(d,n,r),e=Math.round(_.getWidth()*t[0]/f),o=Math.round(_.getHeight()*t[1]/f),s=i.canvas;s.width!=e||s.height!=o?(this.oversampling_=f,s.width=e,s.height=o):(this.renderedExtent_&&!gh(y,this.renderedExtent_)&&i.clearRect(0,0,e,o),f=this.oversampling_)}this.renderedTiles.length=0;const o=Object.keys(v).map(Number);let s,a,l,g,x,b,w,E,R,P,M;for(o.sort(function(t,e){return t===d?1:e===d?-1:t>e?1:t<e?-1:0}),x=0,b=o.length;x<b;++x){l=h.getTilePixelSize(g=o[x],n,r),a=(s=c.getResolution(g))/p,E=m*h.getGutter(r),R=v[g];for(const n in R)w=c.getTileCoordExtent((T=R[n]).getTileCoord(),C),this.drawTileImage(T,t,e,S=(w[0]-y[0])/p*m/f,I=(y[3]-w[3])/p*m/f,P=l[0]*a/f,M=l[1]*a/f,E,d===g),this.renderedTiles.push(T)}this.renderedRevision=u,this.renderedResolution=p*n/m*f,this.renderedExtent_=y}const P=this.renderedResolution/s,M=Au(this.imageTransform_,n*i[0]/2,n*i[1]/2,P,P,0,(this.renderedExtent_[0]-a[0])/this.renderedResolution*n,(a[1]-this.renderedExtent_[3])/this.renderedResolution*n);return Au(this.coordinateToCanvasPixelTransform,n*i[0]/2-M[4],n*i[1]/2-M[5],n/s,-n/s,0,-a[0],-a[1]),this.updateUsedTiles(t.usedTiles,h,d,_),this.manageTilePyramid(t,h,c,n,r,g,d,l.getPreload()),this.scheduleExpireCache(t,h),this.renderedTiles.length>0},Jy.prototype.drawTileImage=function(t,e,n,i,o,r,s,a,l){const h=t.getImage(this.getLayer());if(!h)return;const u=yl(this),c=l?t.getAlpha(u,e.time):1;1!==c||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(i,o,r,s);const d=c!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,o,r,s),d&&this.context.restore(),1!==c?e.animate=!0:l&&t.endTransition(u)},Jy.prototype.getImage=function(){const t=this.context;return t?t.canvas:null},Jy.prototype.getImageTransform=function(){return this.imageTransform_};var Qy=Jy;const $y=function(){};$y.prototype.getReplay=function(t,e){},$y.prototype.isEmpty=function(){};var tm=$y,em={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function nm(t,e,n,i,o,r,s,a){const l=[],h=t[e]>t[n-i],u=o.length;let c,d,p,f=t[e],g=t[e+1],_=t[e+=i],y=t[e+1],m=0,v=Math.sqrt(Math.pow(_-f,2)+Math.pow(y-g,2)),x="",b=0;for(let w=0;w<u;++w){const C=o.charAt(d=h?u-w-1:w),E=r(x=h?C+x:x+C)-b;b+=E;const T=s+E/2;for(;e<n-i&&m+v<T;)f=_,g=y,_=t[e+=i],y=t[e+1],m+=v,v=Math.sqrt(Math.pow(_-f,2)+Math.pow(y-g,2));const S=T-m;let I=Math.atan2(y-g,_-f);if(h&&(I+=I>0?-Math.PI:Math.PI),void 0!==p){let t=I-p;if(t+=t>Math.PI?-2*Math.PI:t<-Math.PI?2*Math.PI:0,Math.abs(t)>a)return null}const R=S/v,P=Hh(f,_,R),M=Hh(g,y,R);p==I?(h&&(c[0]=P,c[1]=M,c[2]=E/2),c[4]=x):(b=E,c=[P,M,E/2,I,x=C],h?l.unshift(c):l.push(c),p=I),s+=E}return l}const im={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},om=[im.FILL],rm=[im.STROKE],sm=[im.BEGIN_PATH],am=[im.CLOSE_PATH];var lm=im;const hm=[em.POLYGON,em.CIRCLE,em.LINE_STRING,em.IMAGE,em.TEXT,em.DEFAULT],um={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},cm=function(t,e,n,i,o,r){Iy.call(this),this.declutterTree=r,this.tolerance=t,this.maxExtent=e,this.overlaps=o,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0};gl(cm,Iy);const dm=[1/0,1/0,-1/0,-1/0],pm=[1,0,0,1,0,0];cm.prototype.replayTextBackground_=function(t,e,n,i,o,r,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},cm.prototype.replayImage_=function(t,e,n,i,o,r,s,a,l,h,u,c,d,p,f,g,_,y){const m=_||y;e-=o*=d,n-=r*=d;const v=f+h>i.width?i.width-h:f,x=a+u>i.height?i.height-u:a,b=g[3]+v*d+g[1],w=g[0]+x*d+g[2],C=e-g[3],E=n-g[0];let T,S,I,R;(m||0!==c)&&(T=[C,E],S=[C+b,E],I=[C+b,E+w],R=[C,E+w]);let P=null;if(0!==c){const t=e+o,i=n+r;P=Au(pm,t,i,1,1,c,-t,-i),dh(dm),yh(dm,Lu(pm,T)),yh(dm,Lu(pm,S)),yh(dm,Lu(pm,I)),yh(dm,Lu(pm,R))}else ch(C,E,C+b,E+w,dm);const M=t.canvas,k=y?y[2]*d/2:0,L=dm[0]-k<=M.width&&dm[2]+k>=0&&dm[1]-k<=M.height&&dm[3]+k>=0;if(p&&(e=Math.round(e),n=Math.round(n)),s){if(!L&&1==s[4])return;_h(s,dm);const o=L?[t,P?P.slice(0):null,l,i,h,u,v,x,e,n,d]:null;o&&m&&o.push(_,y,T,S,I,R),s.push(o)}else L&&(m&&this.replayTextBackground_(t,T,S,I,R,_,y),Nc(t,P,l,i,h,u,v,x,e,n,d))},cm.prototype.applyPixelRatio=function(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},cm.prototype.appendFlatCoordinates=function(t,e,n,i,o,r){let s=this.coordinates.length;const a=this.getBufferedMaxExtent();r&&(e+=i);const l=[t[e],t[e+1]],h=[NaN,NaN];let u,c,d,p=!0;for(u=e+i;u<n;u+=i)h[0]=t[u],h[1]=t[u+1],(d=uh(a,h))!==c?(p&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],p=!1):d===nh.INTERSECTING?(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],p=!1):p=!0,l[0]=h[0],l[1]=h[1],c=d;return(o&&p||u===e+i)&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),s},cm.prototype.drawCustomCoordinates_=function(t,e,n,i,o){for(let r=0,s=n.length;r<s;++r){const s=n[r],a=this.appendFlatCoordinates(t,e,s,i,!1,!1);o.push(a),e=s}return e},cm.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);const i=t.getType(),o=t.getStride(),r=this.coordinates.length;let s,a,l,h,u;if(i==Wh.MULTI_POLYGON){s=(t=t).getOrientedFlatCoordinates(),h=[];const e=t.getEndss();u=0;for(let t=0,n=e.length;t<n;++t){const n=[];u=this.drawCustomCoordinates_(s,u,e[t],o,n),h.push(n)}this.instructions.push([lm.CUSTOM,r,h,t,n,Td])}else i==Wh.POLYGON||i==Wh.MULTI_LINE_STRING?(l=[],s=i==Wh.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(s,0,t.getEnds(),o,l),this.instructions.push([lm.CUSTOM,r,l,t,n,Ed])):i==Wh.LINE_STRING||i==Wh.MULTI_POINT?(s=t.getFlatCoordinates(),a=this.appendFlatCoordinates(s,0,s.length,o,!1,!1),this.instructions.push([lm.CUSTOM,r,a,t,n,Cd])):i==Wh.POINT&&(s=t.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),this.instructions.push([lm.CUSTOM,r,a=this.coordinates.length,t,n]));this.endGeometry(t,e)},cm.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[lm.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[lm.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},cm.prototype.fill_=function(t){if(this.alignFill_){const e=Lu(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Ac)},cm.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],pc&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},cm.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){const n=t[4];if(1==n||n==t.length-5){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(let e=5,n=t.length;e<n;++e){const n=t[e];n&&(n.length>11&&this.replayTextBackground_(n[0],n[13],n[14],n[15],n[16],n[11],n[12]),Nc.apply(void 0,n))}}t.length=5,dh(t)}}},cm.prototype.replay_=function(t,e,n,i,o,r){let s;this.pixelCoordinates_&&ad(e,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=Dh(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),ku(this.renderedTransform_,e));const a=!Cl(n);let l=0;const h=i.length;let u,c,d,p,f,g,_,y,m,v=0,x=0,b=0,w=null,C=null;const E=this.coordinateCache_,T=this.viewRotation_,S={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T},I=this.instructions!=i||this.overlaps?0:200;let R,P,M;for(;l<h;){const e=i[l];switch(e[0]){case lm.BEGIN_GEOMETRY:R=e[1],a&&n[yl(R).toString()]||!R.getGeometry()?l=e[2]:void 0===r||kh(r,R.getGeometry().getExtent())?++l:l=e[2]+1;break;case lm.BEGIN_PATH:x>I&&(this.fill_(t),x=0),b>I&&(t.stroke(),b=0),x||b||(t.beginPath(),p=f=NaN),++l;break;case lm.CIRCLE:const i=s[v=e[1]],h=s[v+1],k=s[v+2]-i,L=s[v+3]-h,F=Math.sqrt(k*k+L*L);t.moveTo(i+F,h),t.arc(i,h,F,0,2*Math.PI,!0),++l;break;case lm.CLOSE_PATH:t.closePath(),++l;break;case lm.CUSTOM:v=e[1],u=e[2];const D=e[4],O=6==e.length?e[5]:void 0;S.geometry=e[3],S.feature=R,l in E||(E[l]=[]);const A=E[l];O?O(s,v,u,2,A):(A[0]=s[v],A[1]=s[v+1],A.length=2),D(A,S),++l;break;case lm.DRAW_IMAGE:v=e[1],u=e[2],m=e[3],c=e[4],d=e[5],y=o?null:e[6];const N=e[7],G=e[8],V=e[9],j=e[10];let B=e[12];const z=e[13],H=e[14],W=e[15];let U,Y,K;for(e.length>16?(U=e[16],Y=e[17],K=e[18]):(U=Sc,Y=K=!1),e[11]&&(B+=T);v<u;v+=2)this.replayImage_(t,s[v],s[v+1],m,c,d,y,N,G,V,j,B,z,H,W,U,Y?w:null,K?C:null);this.renderDeclutter_(y,R),++l;break;case lm.DRAW_CHARS:const X=e[1],Z=e[2],q=e[3];y=o?null:e[4];const J=e[5],Q=e[6],$=e[7],tt=e[8],et=e[9],nt=e[10],it=e[11],ot=e[12],rt=e[13],st=e[14],at=lp(s,X,Z,2),lt=tt(ot);if(J||lt<=at){const e=nm(s,X,Z,2,ot,tt,(at-lt)*um[this.textStates[rt].textAlign],$);if(e){let n,i,o,r,s;if(nt)for(n=0,i=e.length;n<i;++n)r=this.getImage(o=(s=e[n])[4],rt,"",nt),this.replayImage_(t,s[0],s[1],r,c=s[2]+it,d=q*r.height+2*(.5-q)*it-et,y,r.height,1,0,0,s[3],st,!1,r.width,Sc,null,null);if(Q)for(n=0,i=e.length;n<i;++n)r=this.getImage(o=(s=e[n])[4],rt,Q,""),this.replayImage_(t,s[0],s[1],r,c=s[2],d=q*r.height-et,y,r.height,1,0,0,s[3],st,!1,r.width,Sc,null,null)}}this.renderDeclutter_(y,R),++l;break;case lm.END_GEOMETRY:if(void 0!==o){const t=o(R=e[1]);if(t)return t}++l;break;case lm.FILL:I?x++:this.fill_(t),++l;break;case lm.MOVE_TO_LINE_TO:for(u=e[2],_=(M=s[(v=e[1])+1])+.5|0,(g=(P=s[v])+.5|0)===p&&_===f||(t.moveTo(P,M),p=g,f=_),v+=2;v<u;v+=2)g=(P=s[v])+.5|0,_=(M=s[v+1])+.5|0,v!=u-2&&g===p&&_===f||(t.lineTo(P,M),p=g,f=_);++l;break;case lm.SET_FILL_STYLE:w=e,this.alignFill_=e[2],x&&(this.fill_(t),x=0,b&&(t.stroke(),b=0)),t.fillStyle=e[1],++l;break;case lm.SET_STROKE_STYLE:C=e,b&&(t.stroke(),b=0),this.setStrokeStyle_(t,e),++l;break;case lm.STROKE:I?b++:t.stroke(),++l;break;default:++l}}x&&this.fill_(t),b&&t.stroke()},cm.prototype.replay=function(t,e,n,i){this.viewRotation_=n,this.replay_(t,e,i,this.instructions,void 0,void 0)},cm.prototype.replayHitDetection=function(t,e,n,i,o,r){return this.viewRotation_=n,this.replay_(t,e,i,this.hitDetectionInstructions,o,r)},cm.prototype.reverseHitDetectionInstructions=function(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,o,r=-1;for(e=0;e<n;++e)(o=(i=t[e])[0])==lm.END_GEOMETRY?r=e:o==lm.BEGIN_GEOMETRY&&(i[2]=e,rd(this.hitDetectionInstructions,r,e),r=-1)},cm.prototype.setFillStrokeStyle=function(t,e){const n=this.state;if(t){const e=t.getColor();n.fillStyle=Xu(e||Cc)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=Xu(t||Tc);const i=e.getLineCap();n.lineCap=void 0!==i?i:"round";const o=e.getLineDash();n.lineDash=o?o.slice():Ec;const r=e.getLineDashOffset();n.lineDashOffset=r||0;const s=e.getLineJoin();n.lineJoin=void 0!==s?s:"round";const a=e.getWidth();n.lineWidth=void 0!==a?a:1;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},cm.prototype.createFill=function(t,e){const n=t.fillStyle,i=[lm.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},cm.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},cm.prototype.createStroke=function(t){return[lm.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},cm.prototype.updateFillStyle=function(t,e,n){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t,n)),t.currentFillStyle=i)},cm.prototype.updateStrokeStyle=function(t,e){const n=t.strokeStyle,i=t.lineCap,o=t.lineDash,r=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||o!=t.currentLineDash&&!ad(t.currentLineDash,o)||t.currentLineDashOffset!=r||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=o,t.currentLineDashOffset=r,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},cm.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[lm.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},cm.prototype.finish=Ol,cm.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=rh(this.maxExtent),this.maxLineWidth>0)&&oh(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_};var fm=cm;const gm=function(t,e,n,i,o,r){fm.call(this,t,e,n,i,o,r),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0};gl(gm,fm),gm.prototype.drawCoordinates_=function(t,e,n,i){return this.appendFlatCoordinates(t,e,n,i,!1,!1)},gm.prototype.drawPoint=function(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([lm.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([lm.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)},gm.prototype.drawMultiPoint=function(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([lm.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([lm.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)},gm.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},gm.prototype.setImageStyle=function(t,e){const n=t.getAnchor(),i=t.getSize(),o=t.getHitDetectionImage(1),r=t.getImage(1),s=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=o,this.image_=r,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=i[0]};var _m=gm;const ym=function(t,e,n,i,o,r){fm.call(this,t,e,n,i,o,r)};gl(ym,fm),ym.prototype.drawFlatCoordinates_=function(t,e,n,i){const o=this.coordinates.length,r=this.appendFlatCoordinates(t,e,n,i,!1,!1),s=[lm.MOVE_TO_LINE_TO,o,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n},ym.prototype.drawLineString=function(t,e){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([lm.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],sm);const i=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(i,0,i.length,o),this.hitDetectionInstructions.push(rm),this.endGeometry(t,e)},ym.prototype.drawMultiLineString=function(t,e){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([lm.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],sm);const i=t.getEnds(),o=t.getFlatCoordinates(),r=t.getStride();let s=0;for(let a=0,l=i.length;a<l;++a)s=this.drawFlatCoordinates_(o,s,i[a],r);this.hitDetectionInstructions.push(rm),this.endGeometry(t,e)},ym.prototype.finish=function(){const t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(rm),this.reverseHitDetectionInstructions(),this.state=null},ym.prototype.applyStroke=function(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(rm),t.lastStroke=this.coordinates.length),t.lastStroke=0,fm.prototype.applyStroke.call(this,t),this.instructions.push(sm)};var mm=ym;const vm=function(t,e,n,i,o,r){fm.call(this,t,e,n,i,o,r)};gl(vm,fm),vm.prototype.drawFlatCoordinatess_=function(t,e,n,i){const o=this.state,r=void 0!==o.fillStyle,s=void 0!=o.strokeStyle,a=n.length;this.instructions.push(sm),this.hitDetectionInstructions.push(sm);for(let l=0;l<a;++l){const o=n[l],r=this.coordinates.length,a=this.appendFlatCoordinates(t,e,o,i,!0,!s),h=[lm.MOVE_TO_LINE_TO,r,a];this.instructions.push(h),this.hitDetectionInstructions.push(h),s&&(this.instructions.push(am),this.hitDetectionInstructions.push(am)),e=o}return r&&(this.instructions.push(om),this.hitDetectionInstructions.push(om)),s&&(this.instructions.push(rm),this.hitDetectionInstructions.push(rm)),e},vm.prototype.drawCircle=function(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([lm.SET_FILL_STYLE,Hu(Cc)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([lm.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length;this.appendFlatCoordinates(i,0,i.length,o,!1,!1);const s=[lm.CIRCLE,r];this.instructions.push(sm,s),this.hitDetectionInstructions.push(sm,s),this.hitDetectionInstructions.push(om),void 0!==n.fillStyle&&this.instructions.push(om),void 0!==n.strokeStyle&&(this.instructions.push(rm),this.hitDetectionInstructions.push(rm)),this.endGeometry(t,e)},vm.prototype.drawPolygon=function(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([lm.SET_FILL_STYLE,Hu(Cc)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([lm.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const i=t.getEnds(),o=t.getOrientedFlatCoordinates(),r=t.getStride();this.drawFlatCoordinatess_(o,0,i,r),this.endGeometry(t,e)},vm.prototype.drawMultiPolygon=function(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([lm.SET_FILL_STYLE,Hu(Cc)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([lm.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const i=t.getEndss(),o=t.getOrientedFlatCoordinates(),r=t.getStride();let s=0;for(let a=0,l=i.length;a<l;++a)s=this.drawFlatCoordinatess_(o,s,i[a],r);this.endGeometry(t,e)},vm.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Id(e[n],t)}},vm.prototype.setFillStrokeStyles_=function(t){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)};var xm=vm;function bm(t,e,n,i,o){let r,s,a,l,h,u,c,d,p,f,g=n,_=n,y=0,m=0,v=n;for(s=n;s<i;s+=o){const n=e[s],i=e[s+1];void 0!==h&&(p=n-h,f=i-u,l=Math.sqrt(p*p+f*f),void 0!==c&&(m+=a,(r=Math.acos((c*p+d*f)/(a*l)))>t&&(m>y&&(y=m,g=v,_=s),m=0,v=s-o)),a=l,c=p,d=f),h=n,u=i}return(m+=l)>y?[v,s]:[g,_]}const wm=function(t,e,n,i,o,r){fm.call(this,t,e,n,i,o,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Ic.prune()};gl(wm,fm),wm.prototype.drawText=function(t,e){const n=this.textState_;if(""===this.text_||!n||!this.textFillState_&&!this.textStrokeState_)return;let i=this.coordinates.length;const o=t.getType();let r,s,a=null,l=2,h=2;if("line"===n.placement){if(!kh(this.getBufferedMaxExtent(),t.getExtent()))return;let u;if(a=t.getFlatCoordinates(),h=t.getStride(),o==Wh.LINE_STRING)u=[a.length];else if(o==Wh.MULTI_LINE_STRING)u=t.getEnds();else if(o==Wh.POLYGON)u=t.getEnds().slice(0,1);else if(o==Wh.MULTI_POLYGON){const e=t.getEndss();for(u=[],r=0,s=e.length;r<s;++r)u.push(e[r][0])}this.beginGeometry(t,e);const c=n.textAlign;let d,p=0;for(let t=0,e=u.length;t<e;++t){if(void 0==c){const e=bm(n.maxAngle,a,p,u[t],h);p=e[0],d=e[1]}else d=u[t];for(r=p;r<d;r+=h)this.coordinates.push(a[r],a[r+1]);p=u[t],this.drawChars_(i,l=this.coordinates.length,this.declutterGroup_),i=l}this.endGeometry(t,e)}else{const u=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),c=u.width/this.pixelRatio;switch(o){case Wh.POINT:case Wh.MULTI_POINT:l=(a=t.getFlatCoordinates()).length;break;case Wh.LINE_STRING:a=t.getFlatMidpoint();break;case Wh.CIRCLE:a=t.getCenter();break;case Wh.MULTI_LINE_STRING:l=(a=t.getFlatMidpoints()).length;break;case Wh.POLYGON:if(a=t.getFlatInteriorPoint(),!n.overflow&&a[2]/this.resolution<c)return;h=3;break;case Wh.MULTI_POLYGON:const e=t.getFlatInteriorPoints();for(a=[],r=0,s=e.length;r<s;r+=3)(n.overflow||e[r+2]/this.resolution>=c)&&a.push(e[r],e[r+1]);if(0==(l=a.length))return}l=this.appendFlatCoordinates(a,0,l,h,!1,!1),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(u,i,l),this.endGeometry(t,e)}},wm.prototype.getImage=function(t,e,n,i){let o;const r=i+e+t+n+this.pixelRatio;if(!Ic.containsKey(r)){const s=i?this.strokeStates[i]||this.textStrokeState_:null,a=n?this.fillStates[n]||this.textFillState_:null,l=this.textStates[e]||this.textState_,h=l.scale*this.pixelRatio,u=um[l.textAlign||"center"],c=i&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),p=d.length,f=[],g=function(t,e,n){const i=e.length;let o=0;for(let r=0;r<i;++r){const i=Dc(t,e[r]);o=Math.max(o,i),n.push(i)}return o}(l.font,d,f),_=Fc(l.font),y=_*p,m=Zu(Math.ceil((g+c)*h),Math.ceil((y+c)*h));Ic.set(r,o=m.canvas),1!=h&&m.scale(h,h),m.font=l.font,i&&(m.strokeStyle=s.strokeStyle,m.lineWidth=c,m.lineCap=s.lineCap,m.lineJoin=s.lineJoin,m.miterLimit=s.miterLimit,pc&&s.lineDash.length&&(m.setLineDash(s.lineDash),m.lineDashOffset=s.lineDashOffset)),n&&(m.fillStyle=a.fillStyle),m.textBaseline="middle",m.textAlign="center";const v=.5-u,x=u*o.width/h+v*c;let b;if(i)for(b=0;b<p;++b)m.strokeText(d[b],x+v*f[b],.5*(c+_)+b*_);if(n)for(b=0;b<p;++b)m.fillText(d[b],x+v*f[b],.5*(c+_)+b*_)}return Ic.get(r)},wm.prototype.drawTextImage_=function(t,e,n){const i=this.textState_,o=this.textStrokeState_,r=this.pixelRatio,s=um[i.textAlign||"center"],a=um[i.textBaseline],l=o&&o.lineWidth?o.lineWidth:0,h=s*t.width/r+2*(.5-s)*l,u=a*t.height/r+2*(.5-a)*l;this.instructions.push([lm.DRAW_IMAGE,e,n,t,(h-this.textOffsetX_)*r,(u-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,i.padding==Sc?Sc:i.padding.map(function(t){return t*r}),!!i.backgroundFill,!!i.backgroundStroke]),this.hitDetectionInstructions.push([lm.DRAW_IMAGE,e,n,t,(h-this.textOffsetX_)*r,(u-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/r,!0,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])},wm.prototype.drawChars_=function(t,e,n){const i=this.textStrokeState_,o=this.textState_,r=this.textFillState_,s=this.strokeKey_;i&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));const a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:o.font,textAlign:o.textAlign||"center",scale:o.scale});const l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}));const h=this.pixelRatio,u=um[o.textBaseline],c=this.textOffsetY_*h,d=this.text_,p=o.font,f=o.scale,g=i?i.lineWidth*f/2:0;let _=this.widths_[p];_||(this.widths_[p]=_={}),this.instructions.push([lm.DRAW_CHARS,t,e,u,n,o.overflow,l,o.maxAngle,function(t){let e=_[t];return e||(e=_[t]=Dc(p,t)),e*f*h},c,s,g*h,d,a,1]),this.hitDetectionInstructions.push([lm.DRAW_CHARS,t,e,u,n,o.overflow,l,o.maxAngle,function(t){let e=_[t];return e||(e=_[t]=Dc(p,t)),e*f},c,s,g,d,a,1/h])},wm.prototype.setTextStyle=function(t,e){let n,i,o;if(t){this.declutterGroup_=e;const r=t.getFill();r?((i=this.textFillState_)||(i=this.textFillState_={}),i.fillStyle=Xu(r.getColor()||Cc)):i=this.textFillState_=null;const s=t.getStroke();if(s){(o=this.textStrokeState_)||(o=this.textStrokeState_={});const t=s.getLineDash(),e=s.getLineDashOffset(),n=s.getWidth(),i=s.getMiterLimit();o.lineCap=s.getLineCap()||"round",o.lineDash=t?t.slice():Ec,o.lineDashOffset=void 0===e?0:e,o.lineJoin=s.getLineJoin()||"round",o.lineWidth=void 0===n?1:n,o.miterLimit=void 0===i?10:i,o.strokeStyle=Xu(s.getColor()||Tc)}else o=this.textStrokeState_=null;n=this.textState_;const a=t.getFont()||"10px sans-serif";kc(a);const l=t.getScale();n.overflow=t.getOverflow(),n.font=a,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||"middle",n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Sc,n.scale=void 0===l?1:l;const h=t.getOffsetX(),u=t.getOffsetY(),c=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===h?0:h,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===d?0:d,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:yl(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+yl(i.fillStyle):""}else this.text_=""};const Cm={Circle:xm,Default:fm,Image:_m,LineString:mm,Polygon:xm,Text:wm},Em=function(t,e,n,i,o,r,s){tm.call(this),this.declutterTree_=r,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=Zu(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]};gl(Em,tm);const Tm={0:[[!0]]};function Sm(t,e,n){let i;const o=Math.floor(t.length/2);if(e>=o)for(i=o;i<e;i++)t[i][n]=!0;else if(e<o)for(i=e+1;i<o;i++)t[i][n]=!0}Em.prototype.addDeclutter=function(t){let e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},Em.prototype.clip=function(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},Em.prototype.hasReplays=function(t){for(const e in this.replaysByZIndex_){const n=this.replaysByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1},Em.prototype.finish=function(){for(const t in this.replaysByZIndex_){const e=this.replaysByZIndex_[t];for(const t in e)e[t].finish()}},Em.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s){const a=2*(i=Math.round(i))+1,l=Au(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),h=this.hitDetectionContext_;let u;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):h.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(yh(u=[1/0,1/0,-1/0,-1/0],t),oh(u,e*(this.renderBuffer_+i),u));const c=function(t){if(void 0!==Tm[t])return Tm[t];const e=2*t+1,n=new Array(e);for(let s=0;s<e;s++)n[s]=new Array(e);let i=t,o=0,r=0;for(;i>=o;)Sm(n,t+i,t+o),Sm(n,t+o,t+i),Sm(n,t-o,t+i),Sm(n,t-i,t+o),Sm(n,t-i,t-o),Sm(n,t-o,t-i),Sm(n,t+o,t-i),Sm(n,t+i,t-o),2*((r+=1+2*++o)-i)+1>0&&(r+=1-2*(i-=1));return Tm[t]=n,n}(i);let d,p;function f(t){const e=h.getImageData(0,0,a,a).data;for(let n=0;n<a;n++)for(let i=0;i<a;i++)if(c[n][i]&&e[4*(i*a+n)+3]>0){let e;return(!d||p!=em.IMAGE&&p!=em.TEXT||-1!==d.indexOf(t))&&(e=r(t)),e||void h.clearRect(0,0,a,a)}}this.declutterTree_&&(d=this.declutterTree_.all().map(function(t){return t.value}));const g=Object.keys(this.replaysByZIndex_).map(Number);let _,y,m,v,x;for(g.sort(nd),_=g.length-1;_>=0;--_){const t=g[_].toString();for(m=this.replaysByZIndex_[t],y=hm.length-1;y>=0;--y)if(void 0!==(v=m[p=hm[y]]))if(!s||p!=em.IMAGE&&p!=em.TEXT){if(x=v.replayHitDetection(h,l,n,o,f,u))return x}else{const e=s[t];e?e.push(v,l.slice(0)):s[t]=[v,l.slice(0)]}}},Em.prototype.getClipCoords=function(t){const e=this.maxExtent_,n=e[0],i=e[1],o=e[2],r=e[3],s=[n,i,n,r,o,r,o,i];return Dh(s,0,8,2,t,s),s},Em.prototype.getReplay=function(t,e){const n=void 0!==t?t.toString():"0";let i=this.replaysByZIndex_[n];void 0===i&&(this.replaysByZIndex_[n]=i={});let o=i[e];return void 0===o&&(o=new(0,Cm[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[e]=o),o},Em.prototype.getReplays=function(){return this.replaysByZIndex_},Em.prototype.isEmpty=function(){return Cl(this.replaysByZIndex_)},Em.prototype.replay=function(t,e,n,i,o,r){const s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(nd),t.save(),this.clip(t,e);const a=o||hm;let l,h,u,c,d,p;for(l=0,h=s.length;l<h;++l){const o=s[l].toString();for(d=this.replaysByZIndex_[o],u=0,c=a.length;u<c;++u){const s=a[u];if(void 0!==(p=d[s]))if(!r||s!=em.IMAGE&&s!=em.TEXT)p.replay(t,e,n,i);else{const t=r[o];t?t.push(p,e.slice(0)):r[o]=[p,e.slice(0)]}}}t.restore()};var Im=Em;const Rm=.5,Pm={Point:function(t,e,n,i){const o=n.getImage();if(o){if(o.getImageState()!=mc.LOADED)return;const r=t.getReplay(n.getZIndex(),em.IMAGE);r.setImageStyle(o,t.addDeclutter(!1)),r.drawPoint(e,i)}const r=n.getText();if(r){const s=t.getReplay(n.getZIndex(),em.TEXT);s.setTextStyle(r,t.addDeclutter(!!o)),s.drawText(e,i)}},LineString:function(t,e,n,i){const o=n.getStroke();if(o){const r=t.getReplay(n.getZIndex(),em.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawLineString(e,i)}const r=n.getText();if(r){const o=t.getReplay(n.getZIndex(),em.TEXT);o.setTextStyle(r,t.addDeclutter(!1)),o.drawText(e,i)}},Polygon:function(t,e,n,i){const o=n.getFill(),r=n.getStroke();if(o||r){const s=t.getReplay(n.getZIndex(),em.POLYGON);s.setFillStrokeStyle(o,r),s.drawPolygon(e,i)}const s=n.getText();if(s){const o=t.getReplay(n.getZIndex(),em.TEXT);o.setTextStyle(s,t.addDeclutter(!1)),o.drawText(e,i)}},MultiPoint:function(t,e,n,i){const o=n.getImage();if(o){if(o.getImageState()!=mc.LOADED)return;const r=t.getReplay(n.getZIndex(),em.IMAGE);r.setImageStyle(o,t.addDeclutter(!1)),r.drawMultiPoint(e,i)}const r=n.getText();if(r){const s=t.getReplay(n.getZIndex(),em.TEXT);s.setTextStyle(r,t.addDeclutter(!!o)),s.drawText(e,i)}},MultiLineString:function(t,e,n,i){const o=n.getStroke();if(o){const r=t.getReplay(n.getZIndex(),em.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,i)}const r=n.getText();if(r){const o=t.getReplay(n.getZIndex(),em.TEXT);o.setTextStyle(r,t.addDeclutter(!1)),o.drawText(e,i)}},MultiPolygon:function(t,e,n,i){const o=n.getFill(),r=n.getStroke();if(r||o){const s=t.getReplay(n.getZIndex(),em.POLYGON);s.setFillStrokeStyle(o,r),s.drawMultiPolygon(e,i)}const s=n.getText();if(s){const o=t.getReplay(n.getZIndex(),em.TEXT);o.setTextStyle(s,t.addDeclutter(!1)),o.drawText(e,i)}},GeometryCollection:function(t,e,n,i){const o=e.getGeometriesArray();let r,s;for(r=0,s=o.length;r<s;++r)(0,Pm[o[r].getType()])(t,o[r],n,i)},Circle:function(t,e,n,i){const o=n.getFill(),r=n.getStroke();if(o||r){const s=t.getReplay(n.getZIndex(),em.CIRCLE);s.setFillStrokeStyle(o,r),s.drawCircle(e,i)}const s=n.getText();if(s){const o=t.getReplay(n.getZIndex(),em.TEXT);o.setTextStyle(s,t.addDeclutter(!1)),o.drawText(e,i)}}};function Mm(t,e){return yl(t)-yl(e)}function km(t,e){const n=Lm(t,e);return n*n}function Lm(t,e){return Rm*t/e}function Fm(t,e,n,i,o,r){let s=!1;const a=n.getImage();if(a){let t=a.getImageState();t==mc.LOADED||t==mc.ERROR?a.unlistenImageChange(o,r):(t==mc.IDLE&&a.load(),t=a.getImageState(),a.listenImageChange(o,r),s=!0)}return function(t,e,n,i){const o=n.getGeometryFunction()(e);if(!o)return;const r=o.getSimplifiedGeometry(i);n.getRenderer()?function t(e,n,i,o){if(n.getType()!=Wh.GEOMETRY_COLLECTION)e.getReplay(i.getZIndex(),em.DEFAULT).drawCustom(n,o,i.getRenderer());else{const r=n.getGeometries();for(let n=0,s=r.length;n<s;++n)t(e,r[n],i,o)}}(t,r,n,e):(0,Pm[r.getType()])(t,r,n,e)}(t,e,n,i),s}const Dm=function(t){Hy.call(this,t),this.declutterTree_=t.getDeclutter()?k_()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Zu(),Rl(Ic,Hl.CLEAR,this.handleFontsChanged_,this)};gl(Dm,Hy),Dm.handles=function(t){return"VECTOR"===t.getType()},Dm.create=function(t,e){return new Dm(e)},Dm.prototype.disposeInternal=function(){Ml(Ic,Hl.CLEAR,this.handleFontsChanged_,this),Hy.prototype.disposeInternal.call(this)},Dm.prototype.compose=function(t,e,n){const i=e.extent,o=e.pixelRatio,r=n.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,l=s.rotation,h=a.getExtent(),u=this.getLayer().getSource();let c=this.getTransform(e,0);const d=n.extent,p=void 0!==d;p&&this.clip(t,e,d);const f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();const s=this.getLayer();let d,p=0,g=0;const _=1!==n.opacity,y=s.hasListener("render");if(_||y){let e=t.canvas.width,n=t.canvas.height;if(l){const t=Math.round(Math.sqrt(e*e+n*n));p=(t-e)/2,g=(t-n)/2,e=n=t}this.context.canvas.width=e,this.context.canvas.height=n,d=this.context}else d=t;const m=d.globalAlpha;_||(d.globalAlpha=n.opacity),d!=t&&d.translate(p,g);const v=e.size[0]*o,x=e.size[1]*o;if(Oc(d,-l,v/2,x/2),f.replay(d,c,l,r),u.getWrapX()&&a.canWrapX()&&!lh(h,i)){let t=i[0];const n=Mh(h);let o,s=0;for(;t<h[0];)c=this.getTransform(e,o=n*--s),f.replay(d,c,l,r),t+=n;for(s=0,t=i[2];t>h[2];)c=this.getTransform(e,o=n*++s),f.replay(d,c,l,r),t-=n}if(Oc(d,l,v/2,x/2),d!=t){if(y&&this.dispatchRenderEvent(d,e,c),_){const e=t.globalAlpha;t.globalAlpha=n.opacity,t.drawImage(d.canvas,-p,-g),t.globalAlpha=e}else t.drawImage(d.canvas,-p,-g);d.translate(-p,-g)}_||(d.globalAlpha=m)}p&&t.restore()},Dm.prototype.composeFrame=function(t,e,n){const i=this.getTransform(t,0);this.preCompose(n,t,i),this.compose(n,t,e),this.postCompose(n,t,e,i)},Dm.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){if(this.replayGroup_){const r=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,r,s,n,{},function(t){const e=yl(t).toString();if(!(e in l))return l[e]=!0,i.call(o,t,a)},null)}},Dm.prototype.handleFontsChanged_=function(t){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},Dm.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Dm.prototype.prepareFrame=function(t,e){const n=this.getLayer(),i=n.getSource(),o=t.viewHints[mf.ANIMATING],r=t.viewHints[mf.INTERACTING],s=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(!this.dirty_&&!s&&o||!a&&r)return!0;const l=t.extent,h=t.viewState,u=h.projection,c=h.resolution,d=t.pixelRatio,p=n.getRevision(),f=n.getRenderBuffer();let g=n.getRenderOrder();void 0===g&&(g=Mm);const _=oh(l,f*c),y=h.projection.getExtent();if(i.getWrapX()&&h.projection.canWrapX()&&!lh(y,t.extent)){const t=Mh(y),e=Math.max(Mh(_)/2,t);_[0]=y[0]-e,_[2]=y[2]+e}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&lh(this.renderedExtent_,_))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;const m=new Im(Lm(c,d),_,c,d,i.getOverlaps(),this.declutterTree_,n.getRenderBuffer());i.loadFeatures(_,c,u);const v=(function(t){let e;const i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,c)),e){const n=this.renderFeature(t,c,d,e,m);this.dirty_=this.dirty_||n}}).bind(this);if(g){const t=[];i.forEachFeatureInExtent(_,function(e){t.push(e)},this),t.sort(g);for(let e=0,n=t.length;e<n;++e)v(t[e])}else i.forEachFeatureInExtent(_,v,this);return m.finish(),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedExtent_=_,this.replayGroup_=m,this.replayGroupChanged=!0,!0},Dm.prototype.renderFeature=function(t,e,n,i,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let s=0,a=i.length;s<a;++s)r=Fm(o,t,i[s],km(e,n),this.handleStyleImageChange_,this)||r;else r=Fm(o,t,i,km(e,n),this.handleStyleImageChange_,this);return r};var Om=Dm;const Am={image:[em.POLYGON,em.CIRCLE,em.LINE_STRING,em.IMAGE,em.TEXT],hybrid:[em.POLYGON,em.LINE_STRING]},Nm={image:[em.DEFAULT],hybrid:[em.IMAGE,em.TEXT,em.DEFAULT],vector:hm},Gm=function(t){this.context=null,Qy.call(this,t),this.declutterTree_=t.getDeclutter()?k_()(9,void 0):null,this.dirty_=!1,this.tmpTransform_=[1,0,0,1,0,0],this.zDirection="vector"==t.getRenderMode()?1:0,Rl(Ic,Hl.CLEAR,this.handleFontsChanged_,this)};gl(Gm,Qy),Gm.handles=function(t){return"VECTOR_TILE"===t.getType()},Gm.create=function(t,e){return new Gm(e)},Gm.prototype.disposeInternal=function(){Ml(Ic,Hl.CLEAR,this.handleFontsChanged_,this),Qy.prototype.disposeInternal.call(this)},Gm.prototype.getTile=function(t,e,n,i,o){const r=Qy.prototype.getTile.call(this,t,e,n,i,o);return 2===r.getState()&&(this.createReplayGroup_(r,i,o),this.context&&this.renderTileImage_(r,i,o)),r},Gm.prototype.prepareFrame=function(t,e){const n=this.getLayer(),i=n.getRevision();if(this.renderedLayerRevision_!=i){this.renderedTiles.length=0;const t=n.getRenderMode();this.context||"vector"==t||(this.context=Zu()),this.context&&"vector"==t&&(this.context=null)}return this.renderedLayerRevision_=i,Qy.prototype.prepareFrame.apply(this,arguments)},Gm.prototype.createReplayGroup_=function(t,e,n){const i=this.getLayer(),o=i.getRevision(),r=i.getRenderOrder()||null,s=t.getReplayState(i);if(!s.dirty&&s.renderedRevision==o&&s.renderedRenderOrder==r)return;const a=i.getSource(),l=a.getTileGrid(),h=a.getTileGridForProjection(n).getResolution(t.tileCoord[0]),u=t.extent,c={};for(let d=0,p=t.tileKeys.length;d<p;++d){const o=t.getTile(t.tileKeys[d]);if(2!=o.getState())continue;const p=l.getTileCoordExtent(o.tileCoord),f=Ih(u,p),g=gh(p,f)?null:oh(f,i.getRenderBuffer()*h,this.tmpExtent),_=o.getProjection();let y=!1;vu(n,_)||(y=!0,o.setProjection(n)),s.dirty=!1;const m=new Im(0,f,h,e,a.getOverlaps(),this.declutterTree_,i.getRenderBuffer()),v=km(h,e),x=function(t){let e;const n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,h)),e){const n=this.renderFeature(t,v,e,m);this.dirty_=this.dirty_||n,s.dirty=s.dirty||n}},b=o.getFeatures();r&&r!==s.renderedRenderOrder&&b.sort(r);for(let t=0,e=b.length;t<e;++t){const e=b[t];y&&(_.getUnits()==qh.TILE_PIXELS&&(_.setWorldExtent(p),_.setExtent(o.getExtent())),e.getGeometry().transform(_,n)),g&&!kh(g,e.getGeometry().getExtent())||x.call(this,e)}m.finish();for(const t in m.getReplays())c[t]=!0;o.setReplayGroup(i,t.tileCoord.toString(),m)}s.renderedRevision=o,s.renderedRenderOrder=r},Gm.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){const r=e.viewState.resolution,s=e.viewState.rotation;n=void 0==n?0:n;const a=this.getLayer(),l={},h=this.renderedTiles;let u,c,d,p,f;for(d=0,p=h.length;d<p;++d){const e=h[d];if(ah(u=oh(e.extent,n*r,u),t))for(let h=0,u=e.tileKeys.length;h<u;++h){const u=e.getTile(e.tileKeys[h]);2==u.getState()&&(f=u.getReplayGroup(a,e.tileCoord.toString()),c=c||f.forEachFeatureAtCoordinate(t,r,s,n,{},function(t){const e=yl(t).toString();if(!(e in l))return l[e]=!0,i.call(o,t,a)},null))}}return c},Gm.prototype.getReplayTransform_=function(t,e){const n=this.getLayer().getSource().getTileGrid(),i=t.tileCoord,o=n.getResolution(i[0]),r=e.viewState,s=e.pixelRatio,a=r.resolution/s,l=n.getTileCoordExtent(i,this.tmpExtent),h=r.center,u=Rh(l),c=e.size,d=Math.round(s*c[0]/2),p=Math.round(s*c[1]/2);return Au(this.tmpTransform_,d,p,o/a,o/a,r.rotation,(u[0]-h[0])/o,(h[1]-u[1])/o)},Gm.prototype.handleFontsChanged_=function(t){const e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},Gm.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Gm.prototype.postCompose=function(t,e,n){const i=this.getLayer(),o=i.getRenderMode();if("image"!=o){const r=i.getDeclutter()?{}:null,s=i.getSource(),a=Nm[o],l=e.pixelRatio,h=e.viewState.rotation,u=e.size;let c,d;h&&(c=Math.round(l*u[0]/2),d=Math.round(l*u[1]/2),Oc(t,-h,c,d)),r&&this.declutterTree_.clear();const p=this.renderedTiles,f=s.getTileGridForProjection(e.viewState.projection),g=[],_=[];for(let y=p.length-1;y>=0;--y){const s=p[y];if(5==s.getState())continue;const l=s.tileCoord,u=f.getTileCoordExtent(l,this.tmpExtent)[0]-s.extent[0];let c=void 0;for(let d=0,p=s.tileKeys.length;d<p;++d){const p=s.getTile(s.tileKeys[d]);if(2!=p.getState())continue;const f=p.getReplayGroup(i,l.toString());if("vector"!=o&&!f.hasReplays(a))continue;c||(c=this.getTransform(e,u));const y=p.tileCoord[0],m=f.getClipCoords(c);t.save(),t.globalAlpha=n.opacity;for(let e=0,n=g.length;e<n;++e){const n=g[e];y<_[e]&&(t.beginPath(),t.moveTo(m[0],m[1]),t.lineTo(m[2],m[3]),t.lineTo(m[4],m[5]),t.lineTo(m[6],m[7]),t.moveTo(n[6],n[7]),t.lineTo(n[4],n[5]),t.lineTo(n[2],n[3]),t.lineTo(n[0],n[1]),t.clip())}f.replay(t,c,h,{},a,r),t.restore(),g.push(m),_.push(y)}}r&&function(t,e,n){const i=Object.keys(t).map(Number).sort(nd),o={};for(let r=0,s=i.length;r<s;++r){const s=t[i[r].toString()];for(let t=0,i=s.length;t<i;){const i=s[t++],r=s[t++];i.replay(e,r,n,o)}}}(r,t,h),h&&Oc(t,h,c,d)}Qy.prototype.postCompose.apply(this,arguments)},Gm.prototype.renderFeature=function(t,e,n,i){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let r=0,s=n.length;r<s;++r)o=Fm(i,t,n[r],e,this.handleStyleImageChange_,this)||o;else o=Fm(i,t,n,e,this.handleStyleImageChange_,this);return o},Gm.prototype.renderTileImage_=function(t,e,n){const i=this.getLayer(),o=t.getReplayState(i),r=i.getRevision(),s=Am[i.getRenderMode()];if(s&&o.renderedTileRevision!==r){o.renderedTileRevision=r;const a=t.wrappedTileCoord,l=a[0],h=i.getSource(),u=h.getTileGridForProjection(n),c=u.getResolution(l),d=t.getContext(i),p=h.getTilePixelSize(l,e,n);d.canvas.width=p[0],d.canvas.height=p[1];const f=u.getTileCoordExtent(a,this.tmpExtent);for(let n=0,o=t.tileKeys.length;n<o;++n){const o=t.getTile(t.tileKeys[n]);if(2!=o.getState())continue;const r=e/c,a=Ru(this.tmpTransform_);Du(a,r,-r),Ou(a,-f[0],-f[3]),o.getReplayGroup(i,t.tileCoord.toString()).replay(d,a,0,{},s)}}};var Vm=Gm;const jm=function(t){(t=xl({},t)).controls||(t.controls=Bf()),t.interactions||(t.interactions=Cy()),If.call(this,t)};gl(jm,If),jm.prototype.createRenderer=function(){const t=new Vy(this);return t.registerLayerRenderers([Ky,Qy,Om,Vm]),t};var Bm=jm;const zm=function(t){ql.call(this),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.autoPanAnimation=t.autoPanAnimation||{},this.autoPanMargin=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Rl(this,Zl("element"),this.handleElementChanged,this),Rl(this,Zl("map"),this.handleMapChanged,this),Rl(this,Zl("offset"),this.handleOffsetChanged,this),Rl(this,Zl("position"),this.handlePositionChanged,this),Rl(this,Zl("positioning"),this.handlePositioningChanged,this),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(void 0!==t.positioning?t.positioning:"top-left"),void 0!==t.position&&this.setPosition(t.position)};gl(zm,ql),zm.prototype.getElement=function(){return this.get("element")},zm.prototype.getId=function(){return this.id},zm.prototype.getMap=function(){return this.get("map")},zm.prototype.getOffset=function(){return this.get("offset")},zm.prototype.getPosition=function(){return this.get("position")},zm.prototype.getPositioning=function(){return this.get("positioning")},zm.prototype.handleElementChanged=function(){Qu(this.element);const t=this.getElement();t&&this.element.appendChild(t)},zm.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Ju(this.element),kl(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Rl(t,"postrender",this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},zm.prototype.render=function(){this.updatePixelPosition()},zm.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},zm.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get("position")&&this.autoPan&&this.panIntoView()},zm.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},zm.prototype.setElement=function(t){this.set("element",t)},zm.prototype.setMap=function(t){this.set("map",t)},zm.prototype.setOffset=function(t){this.set("offset",t)},zm.prototype.setPosition=function(t){this.set("position",t)},zm.prototype.panIntoView=function(){const t=this.getMap();if(!t||!t.getTargetElement())return;const e=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),i=this.getRect(n,[function(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+(parseInt(n.marginLeft,10)+parseInt(n.marginRight,10))}(n),function(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+(parseInt(n.marginTop,10)+parseInt(n.marginBottom,10))}(n)]),o=this.autoPanMargin;if(!lh(e,i)){const n=i[0]-e[0],r=e[2]-i[2],s=i[1]-e[1],a=e[3]-i[3],l=[0,0];if(n<0?l[0]=n-o:r<0&&(l[0]=Math.abs(r)+o),s<0?l[1]=s-o:a<0&&(l[1]=Math.abs(a)+o),0!==l[0]||0!==l[1]){const e=t.getView().getCenter(),n=t.getPixelFromCoordinate(e),i=[n[0]+l[0],n[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(i),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}},zm.prototype.getRect=function(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},zm.prototype.setPositioning=function(t){this.set("positioning",t)},zm.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},zm.prototype.updatePixelPosition=function(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)},zm.prototype.updateRenderedPosition=function(t,e){const n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let r=i[0],s=i[1];if("bottom-right"==o||"center-right"==o||"top-right"==o){""!==this.rendered.left_&&(this.rendered.left_=n.left="");const i=Math.round(e[0]-t[0]-r)+"px";this.rendered.right_!=i&&(this.rendered.right_=n.right=i)}else{""!==this.rendered.right_&&(this.rendered.right_=n.right=""),"bottom-center"!=o&&"center-center"!=o&&"top-center"!=o||(r-=this.element.offsetWidth/2);const e=Math.round(t[0]+r)+"px";this.rendered.left_!=e&&(this.rendered.left_=n.left=e)}if("bottom-left"==o||"bottom-center"==o||"bottom-right"==o){""!==this.rendered.top_&&(this.rendered.top_=n.top="");const i=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=i&&(this.rendered.bottom_=n.bottom=i)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=n.bottom=""),"center-left"!=o&&"center-center"!=o&&"center-right"!=o||(s-=this.element.offsetHeight/2);const e=Math.round(t[1]+s)+"px";this.rendered.top_!=e&&(this.rendered.top_=n.top=e)}},zm.prototype.getOptions=function(){return this.options};var Hm=zm;function Wm(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function Um(t,e,n){return t+"/"+e+"/"+n}function Ym(t){return Um(t[0],t[1],t[2])}const Km=function(t){wc.call(this,t)};gl(Km,wc),Km.prototype.expireCache=function(t){for(;this.canExpireCache();){const e=this.peekLast(),n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord))break;this.pop().dispose()}},Km.prototype.pruneExceptNewestZ=function(){if(0===this.getCount())return;const t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Ym(e.tileCoord)),e.dispose())},this)};var Xm=Km;const Zm=function(t,e,n,i,o,r,s,a,l,h,u,c,d,p,f){if(Ip.call(this,t,e,{transition:0}),this.context_={},this.replayState_={},this.sourceTiles_=h,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=r,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],r){const g=this.extent=l.getTileCoordExtent(r),_=l.getResolution(f),y=a.getZForResolution(_),m=f!=t[0];let v=0;if(a.forEachTileCoord(g,y,(function(t){let e=Ih(g,a.getTileCoordExtent(t));const n=a.getExtent();if(n&&(e=Ih(e,n,e)),Mh(e)/_>=.5&&Sh(e)/_>=.5){++v;const e=t.toString();let n=h[e];if(!n&&!m){const r=s(t,u,c);n=h[e]=new d(t,void 0==r?4:0,void 0==r?"":r,i,o),this.sourceTileListenerKeys_.push(Rl(n,Hl.CHANGE,p))}!n||m&&2!=n.getState()||(n.consumers++,this.tileKeys.push(e))}}).bind(this)),m&&v==this.tileKeys.length&&this.finishLoading_(),f<=t[0]&&2!=this.state)for(;f>l.getMinZoom();){const p=new Zm(t,e,n,i,o,r,s,a,l,h,u,c,d,Ol,--f);if(2==p.state){this.interimTile=p;break}}}};gl(Zm,Ip),Zm.prototype.disposeInternal=function(){this.state=5,this.changed(),this.interimTile&&this.interimTile.dispose();for(let t=0,e=this.tileKeys.length;t<e;++t){const e=this.tileKeys[t],n=this.getTile(e);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[e],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(kl),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(kl),this.sourceTileListenerKeys_.length=0,Ip.prototype.disposeInternal.call(this)},Zm.prototype.getContext=function(t){const e=yl(t).toString();return e in this.context_||(this.context_[e]=Zu()),this.context_[e]},Zm.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},Zm.prototype.getReplayState=function(t){const e=yl(t).toString();return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},Zm.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},Zm.prototype.getTile=function(t){return this.sourceTiles_[t]},Zm.prototype.load=function(){let t=0;const e={};0==this.state&&this.setState(1),1==this.state&&this.tileKeys.forEach((function(n){const i=this.getTile(n);if(0==i.state&&(i.setLoader(this.loader_),i.load()),1==i.state){const n=Rl(i,Hl.CHANGE,(function(n){const o=i.getState();if(2==o||3==o){const n=yl(i);3==o?e[n]=!0:(--t,delete e[n]),t-Object.keys(e).length==0&&this.finishLoading_()}}).bind(this));this.loadListenerKeys_.push(n),++t}}).bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},Zm.prototype.finishLoading_=function(){let t=this.tileKeys.length,e=0;for(let n=t-1;n>=0;--n){const i=this.getTile(this.tileKeys[n]).getState();2!=i&&--t,4==i&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(kl),this.loadListenerKeys_.length=0,this.setState(2)):this.setState(e==this.tileKeys.length?4:3)};const qm=function(t,e,n,i,o,r){Ip.call(this,t,e,r),this.consumers=0,this.extent_=null,this.format_=i,this.features_=null,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=o,this.url_=n};gl(qm,Ip);const Jm=[0,0,4096,4096];qm.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=5,this.changed(),Ip.prototype.disposeInternal.call(this)},qm.prototype.getExtent=function(){return this.extent_||Jm},qm.prototype.getFormat=function(){return this.format_},qm.prototype.getFeatures=function(){return this.features_},qm.prototype.getKey=function(){return this.url_},qm.prototype.getProjection=function(){return this.projection_},qm.prototype.getReplayGroup=function(t,e){return this.replayGroups_[yl(t)+","+e]},qm.prototype.load=function(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},qm.prototype.onLoad=function(t,e,n){this.setProjection(e),this.setFeatures(t),this.setExtent(n)},qm.prototype.onError=function(){this.setState(3)},qm.prototype.setExtent=function(t){this.extent_=t},qm.prototype.setFeatures=function(t){this.features_=t,this.setState(2)},qm.prototype.setProjection=function(t){this.projection_=t},qm.prototype.setReplayGroup=function(t,e,n){this.replayGroups_[yl(t)+","+e]=n},qm.prototype.setLoader=function(t){this.loader_=t};const Qm=function(){let t;return function(){if(!t){const e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}(),$m=function(t){const e=t||{};this.cssClassName_=void 0!==e.className?e.className:"ol-full-screen";const n=void 0!==e.label?e.label:"\u2922";this.labelNode_="string"==typeof n?document.createTextNode(n):n;const i=void 0!==e.labelActive?e.labelActive:"\xd7";this.labelActiveNode_="string"==typeof i?document.createTextNode(i):i;const o=e.tipLabel?e.tipLabel:"Toggle full-screen",r=document.createElement("button");r.className=this.cssClassName_+"-"+ev(),r.setAttribute("type","button"),r.title=o,r.appendChild(this.labelNode_),Rl(r,Hl.CLICK,this.handleClick_,this);const s=this.cssClassName_+" ol-unselectable ol-control "+(tv()?"":"ol-unsupported"),a=document.createElement("div");a.className=s,a.appendChild(r),Pf.call(this,{element:a,target:e.target}),this.keys_=void 0!==e.keys&&e.keys,this.source_=e.source};function tv(){const t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function ev(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function nv(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}gl($m,Pf),$m.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},$m.prototype.handleFullScreen_=function(){if(!tv())return;const t=this.getMap();if(t)if(ev())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let e;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?(e=e).mozRequestFullScreenWithKeys?e.mozRequestFullScreenWithKeys():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):nv(e):nv(e)}},$m.prototype.handleFullScreenChange_=function(){const t=this.element.firstElementChild,e=this.getMap();ev()?(t.className=this.cssClassName_+"-true",qu(this.labelActiveNode_,this.labelNode_)):(t.className=this.cssClassName_+"-false",qu(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()},$m.prototype.setMap=function(t){Pf.prototype.setMap.call(this,t),t&&this.listenerKeys.push(Rl(document,Qm(),this.handleFullScreenChange_,this))};const iv=function(t){const e=t||{};this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const n=void 0!==e.className?e.className:"ol-overviewmap",i=void 0!==e.tipLabel?e.tipLabel:"Overview map",o=void 0!==e.collapseLabel?e.collapseLabel:"\xab";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;const r=void 0!==e.label?e.label:"\xbb";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(s),Rl(a,Hl.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("DIV"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new Bm({controls:new $l,interactions:new $l,view:e.view});const l=this.ovmap_;e.layers&&e.layers.forEach((function(t){l.addLayer(t)}).bind(this));const h=document.createElement("DIV");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",this.boxOverlay_=new Hm({position:[0,0],positioning:"bottom-left",element:h}),this.ovmap_.addOverlay(this.boxOverlay_);const u=n+" ol-unselectable ol-control"+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),c=document.createElement("div");c.className=u,c.appendChild(this.ovmapDiv_),c.appendChild(a),Pf.call(this,{element:c,render:e.render||ov,target:e.target});const d=this,p=this.boxOverlay_,f=this.boxOverlay_.getElement(),g=function(t){const e=l.getEventCoordinate({clientX:(n=t).clientX-f.offsetWidth/2,clientY:n.clientY+f.offsetHeight/2});var n;p.setPosition(e)},_=function(t){const e=l.getEventCoordinate(t);d.getMap().getView().setCenter(e),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",_)};f.addEventListener("mousedown",function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",_)})};function ov(t){this.validateExtent_(),this.updateBox_()}gl(iv,Pf),iv.prototype.setMap=function(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(Pf.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Rl(t,"propertychange",this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(t.getLayerGroup());const e=t.getView();e&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},iv.prototype.handleMapPropertyChange_=function(t){if("view"===t.key){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}},iv.prototype.bindView_=function(t){Rl(t,Zl("rotation"),this.handleRotationChanged_,this)},iv.prototype.unbindView_=function(t){Ml(t,Zl("rotation"),this.handleRotationChanged_,this)},iv.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},iv.prototype.validateExtent_=function(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView().calculateExtent(n),o=e.getSize(),r=e.getView().calculateExtent(o),s=e.getPixelFromCoordinate(Rh(i)),a=e.getPixelFromCoordinate(Ch(i)),l=Math.abs(s[0]-a[0]),h=Math.abs(s[1]-a[1]),u=o[0],c=o[1];l<.1*u||h<.1*c||l>.75*u||h>.75*c?this.resetExtent_():lh(r,i)||this.recenter_()},iv.prototype.resetExtent_=function(){const t=this.getMap(),e=this.ovmap_,n=t.getSize(),i=t.getView().calculateExtent(n),o=e.getView(),r=Math.log(7.5)/Math.LN2;Fh(i,1/(.1*Math.pow(2,r/2))),o.fit(i)},iv.prototype.recenter_=function(){const t=this.getMap(),e=this.ovmap_,n=t.getView();e.getView().setCenter(n.getCenter())},iv.prototype.updateBox_=function(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView(),o=e.getView(),r=i.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=i.calculateExtent(n),h=o.getResolution(),u=wh(l),c=Ph(l),d=this.calculateCoordinateRotate_(r,u);s.setPosition(d),a&&(a.style.width=Math.abs((u[0]-c[0])/h)+"px",a.style.height=Math.abs((c[1]-u[1])/h)+"px")},iv.prototype.calculateCoordinateRotate_=function(t,e){let n;const i=this.getMap().getView().getCenter();return i&&(ep(n=[e[0]-i[0],e[1]-i[1]],t),Jd(n,i)),n},iv.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},iv.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?qu(this.collapseLabel_,this.label_):qu(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),Pl(t,"postrender",function(t){this.updateBox_()},this))},iv.prototype.getCollapsible=function(){return this.collapsible_},iv.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},iv.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},iv.prototype.getCollapsed=function(){return this.collapsed_},iv.prototype.getOverviewMap=function(){return this.ovmap_};const rv=[1,2,5],sv=function(t){const e=t||{},n=void 0!==e.className?e.className:"ol-scale-line";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=n+"-inner",this.element_=document.createElement("DIV"),this.element_.className=n+" ol-unselectable",this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",Pf.call(this,{element:this.element_,render:e.render||av,target:e.target}),Rl(this,Zl("units"),this.handleUnitsChanged_,this),this.setUnits(e.units||"metric")};function av(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}gl(sv,Pf),sv.prototype.getUnits=function(){return this.get("units")},sv.prototype.handleUnitsChanged_=function(){this.updateElement_()},sv.prototype.setUnits=function(t){this.set("units",t)},sv.prototype.updateElement_=function(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,i=this.getUnits(),o="degrees"==i?qh.DEGREES:qh.METERS;let r=_u(n,t.resolution,e,o);n.getUnits()!=qh.DEGREES&&n.getMetersPerUnit()&&o==qh.METERS&&(r*=n.getMetersPerUnit());let s=this.minWidth_*r,a="";if("degrees"==i){const t=Zh[qh.DEGREES];n.getUnits()==qh.DEGREES?s*=t:r/=t,s<t/60?(a="\u2033",r*=3600):s<t?(a="\u2032",r*=60):a="\xb0"}else"imperial"==i?s<.9144?(a="in",r/=.0254):s<1609.344?(a="ft",r/=.3048):(a="mi",r/=1609.344):"nautical"==i?(r/=1852,a="nm"):"metric"==i?s<.001?(a="\u03bcm",r*=1e6):s<1?(a="mm",r*=1e3):s<1e3?a="m":(a="km",r/=1e3):"us"==i?s<.9144?(a="in",r*=39.37):s<1609.344?(a="ft",r/=.30480061):(a="mi",r/=1609.3472):th(!1,33);let l,h,u=3*Math.floor(Math.log(this.minWidth_*r)/Math.log(10));for(;;){if(l=rv[(u%3+3)%3]*Math.pow(10,Math.floor(u/3)),h=Math.round(l/r),isNaN(h))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(h>=this.minWidth_)break;++u}const c=l+" "+a;this.renderedHTML_!=c&&(this.innerElement_.innerHTML=c,this.renderedHTML_=c),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)};const lv=function(t){const e=t||{};this.currentResolution_=void 0,this.direction_=0,this.heightLimit_=0,this.widthLimit_=0,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;const n=void 0!==e.className?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=n+"-thumb ol-unselectable";const o=document.createElement("div");o.className=n+" ol-unselectable ol-control",o.appendChild(i),this.dragger_=new sf(o),Rl(this.dragger_,"pointerdown",this.handleDraggerStart_,this),Rl(this.dragger_,"pointermove",this.handleDraggerDrag_,this),Rl(this.dragger_,"pointerup",this.handleDraggerEnd_,this),Rl(o,Hl.CLICK,this.handleContainerClick_,this),Rl(i,Hl.CLICK,Vl),Pf.call(this,{element:o,render:e.render||hv})};function hv(t){if(!t.frameState)return;this.sliderInitialized_||this.initSlider_();const e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}gl(lv,Pf),lv.prototype.disposeInternal=function(){this.dragger_.dispose(),Pf.prototype.disposeInternal.call(this)},lv.prototype.setMap=function(t){Pf.prototype.setMap.call(this,t),t&&t.render()},lv.prototype.initSlider_=function(){const t=this.element,e=t.offsetWidth,n=t.offsetHeight,i=t.firstElementChild,o=getComputedStyle(i),r=i.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=i.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);this.thumbSize_=[r,s],e>n?(this.direction_=1,this.widthLimit_=e-r):(this.direction_=0,this.heightLimit_=n-s),this.sliderInitialized_=!0},lv.prototype.handleContainerClick_=function(t){const e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n);e.animate({resolution:e.constrainResolution(i),duration:this.duration_,easing:Cp})},lv.prototype.handleDraggerStart_=function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||(this.getMap().getView().setHint(mf.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)},lv.prototype.handleDraggerDrag_=function(t){if(this.dragging_){const e=this.element.firstElementChild,n=t.clientX-this.previousX_+parseInt(e.style.left,10),i=t.clientY-this.previousY_+parseInt(e.style.top,10),o=this.getRelativePosition_(n,i);this.currentResolution_=this.getResolutionForPosition_(o),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},lv.prototype.handleDraggerEnd_=function(t){if(this.dragging_){const t=this.getMap().getView();t.setHint(mf.INTERACTING,-1),t.animate({resolution:t.constrainResolution(this.currentResolution_),duration:this.duration_,easing:Cp}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},lv.prototype.setThumbPosition_=function(t){const e=this.getPositionForResolution_(t),n=this.element.firstElementChild;1==this.direction_?n.style.left=this.widthLimit_*e+"px":n.style.top=this.heightLimit_*e+"px"},lv.prototype.getRelativePosition_=function(t,e){let n;return Ah(n=1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,0,1)},lv.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},lv.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)};const uv=function(t){const e=t||{};this.extent=e.extent?e.extent:null;const n=void 0!==e.className?e.className:"ol-zoom-extent",i=void 0!==e.label?e.label:"E",o=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=o,r.appendChild("string"==typeof i?document.createTextNode(i):i),Rl(r,Hl.CLICK,this.handleClick_,this);const s=n+" ol-unselectable ol-control",a=document.createElement("div");a.className=s,a.appendChild(r),Pf.call(this,{element:a,target:e.target})};gl(uv,Pf),uv.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},uv.prototype.handleZoomToExtent=function(){const t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)};const cv=function(t){this.source_=t};cv.prototype.getType=function(){},cv.prototype.getSource=function(){return this.source_},cv.prototype.isAnimated=Dl;var dv=cv;const pv=function(t){dv.call(this,t)};gl(pv,dv),pv.prototype.getType=function(){return 35632};var fv=pv;const gv=function(t){dv.call(this,t)};gl(gv,dv),gv.prototype.getType=function(){return 35633};var _v=gv;const yv=new fv("precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n"),mv=new _v("varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n");function vv(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const xv=function(t,e){Iy.call(this),this.tolerance=t,this.maxExtent=e,this.origin=Eh(e),this.projectionMatrix_=[1,0,0,1,0,0],this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0};gl(xv,Iy),xv.prototype.getDeleteResourcesFunction=function(t){},xv.prototype.finish=function(t){},xv.prototype.setUpProgram=function(t,e,n,i){},xv.prototype.shutDownProgram=function(t,e){},xv.prototype.drawReplay=function(t,e,n,i){},xv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){},xv.prototype.drawHitDetectionReplay=function(t,e,n,i,o,r){return o?this.drawHitDetectionReplayOneByOne(t,e,n,i,r):this.drawHitDetectionReplayAll(t,e,n,i)},xv.prototype.drawHitDetectionReplayAll=function(t,e,n,i){return t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,n,!0),i(null)||void 0},xv.prototype.replay=function(t,e,n,i,o,r,s,a,l,h,u){const c=t.getGL();let d,p,f,g,_,y,m,v;this.lineStringReplay&&(d=c.isEnabled(c.STENCIL_TEST),p=c.getParameter(c.STENCIL_FUNC),f=c.getParameter(c.STENCIL_VALUE_MASK),g=c.getParameter(c.STENCIL_REF),_=c.getParameter(c.STENCIL_WRITEMASK),y=c.getParameter(c.STENCIL_FAIL),m=c.getParameter(c.STENCIL_PASS_DEPTH_PASS),v=c.getParameter(c.STENCIL_PASS_DEPTH_FAIL),c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),c.stencilMask(255),c.stencilFunc(c.ALWAYS,1,255),c.stencilOp(c.KEEP,c.KEEP,c.REPLACE),this.lineStringReplay.replay(t,e,n,i,o,r,s,a,l,h,u),c.stencilMask(0),c.stencilFunc(c.NOTEQUAL,1,255)),t.bindBuffer(34962,this.verticesBuffer),t.bindBuffer(34963,this.indicesBuffer);const x=this.setUpProgram(c,t,o,r),b=Ru(this.projectionMatrix_);Du(b,2/(n*o[0]),2/(n*o[1])),Fu(b,-i),Ou(b,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));const w=Ru(this.offsetScaleMatrix_);Du(w,2/o[0],2/o[1]);const C=Ru(this.offsetRotateMatrix_);let E;return 0!==i&&Fu(C,-i),c.uniformMatrix4fv(x.u_projectionMatrix,!1,vv(this.tmpMat4_,b)),c.uniformMatrix4fv(x.u_offsetScaleMatrix,!1,vv(this.tmpMat4_,w)),c.uniformMatrix4fv(x.u_offsetRotateMatrix,!1,vv(this.tmpMat4_,C)),c.uniform1f(x.u_opacity,s),void 0===l?this.drawReplay(c,t,a,!1):E=this.drawHitDetectionReplay(c,t,a,l,h,u),this.shutDownProgram(c,x),this.lineStringReplay&&(d||c.disable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),c.stencilFunc(p,g,f),c.stencilMask(_),c.stencilOp(y,v,m)),E},xv.prototype.drawElements=function(t,e,n,i){t.drawElements(4,i-n,e.hasOESElementIndexUint?5125:5123,n*(e.hasOESElementIndexUint?4:2))};var bv=xv;const wv=[0,0,0,1],Cv=[],Ev=[0,0,0,1],Tv=Number.EPSILON||2.220446049250313e-16,Sv=function(t,e,n,i,o,r){const s=(n-t)*(r-e)-(o-t)*(i-e);return s<=Tv&&s>=-Tv?void 0:s>0},Iv=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:35044};Iv.prototype.getArray=function(){return this.arr_},Iv.prototype.getUsage=function(){return this.usage_};var Rv=Iv;const Pv=function(t,e){bv.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}};gl(Pv,bv),Pv.prototype.drawCoordinates_=function(t,e,n,i){let o,r,s=this.vertices.length,a=this.indices.length,l=s/4;for(o=e,r=n;o<r;o+=i)this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=0,this.vertices[s++]=this.radius_,this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=1,this.vertices[s++]=this.radius_,this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=2,this.vertices[s++]=this.radius_,this.vertices[s++]=t[o],this.vertices[s++]=t[o+1],this.vertices[s++]=3,this.vertices[s++]=this.radius_,this.indices[a++]=l,this.indices[a++]=l+1,this.indices[a++]=l+2,this.indices[a++]=l+2,this.indices[a++]=l+3,this.indices[a++]=l,l+=4},Pv.prototype.drawCircle=function(t,e){const n=t.getRadius(),i=t.getStride();if(n){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=n;let o=t.getFlatCoordinates();o=Oh(o,0,2,i,-this.origin[0],-this.origin[1]),this.drawCoordinates_(o,0,2,i)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){const t=this.styles_[this.styles_.length-1];this.state_.fillColor=t[0],this.state_.strokeColor=t[1],this.state_.lineWidth=t[2],this.state_.changed=!1}},Pv.prototype.finish=function(t){this.verticesBuffer=new Rv(this.vertices),this.indicesBuffer=new Rv(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},Pv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(n)}},Pv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(yv,mv);let r;return this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_fillColor=t.getUniformLocation(e,"u_fillColor"),this.u_strokeColor=t.getUniformLocation(e,"u_strokeColor"),this.u_size=t.getUniformLocation(e,"u_size"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_instruction=t.getAttribLocation(e,"a_instruction"),this.a_radius=t.getAttribLocation(e,"a_radius")}(t,o),this.defaultLocations_=r),e.useProgram(o),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,16,0),t.enableVertexAttribArray(r.a_instruction),t.vertexAttribPointer(r.a_instruction,1,5126,!1,16,8),t.enableVertexAttribArray(r.a_radius),t.vertexAttribPointer(r.a_radius,1,5126,!1,16,12),t.uniform2fv(r.u_size,n),t.uniform1f(r.u_pixelRatio,i),r},Pv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},Pv.prototype.drawReplay=function(t,e,n,i){if(Cl(n)){let n,i,o,r;for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)i=this.styleIndices_[n],this.setFillStyle_(t,(r=this.styles_[n])[0]),this.setStrokeStyle_(t,r[1],r[2]),this.drawElements(t,e,i,o),o=i}else this.drawReplaySkipping_(t,e,n)},Pv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,h,u,c,d;for(a=this.startIndices[1+(d=this.startIndices.length-2)],r=this.styleIndices_.length-1;r>=0;--r)for(this.setFillStyle_(t,(l=this.styles_[r])[0]),this.setStrokeStyle_(t,l[1],l[2]),h=this.styleIndices_[r];d>=0&&this.startIndices[d]>=h;){if(s=this.startIndices[d],void 0===n[c=yl(u=this.startIndicesFeature[d]).toString()]&&u.getGeometry()&&(void 0===o||kh(o,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);const n=i(u);if(n)return n}d--,a=s}},Pv.prototype.drawReplaySkipping_=function(t,e,n){let i,o,r,s,a,l,h,u,c;for(r=o=this.startIndices[1+(u=this.startIndices.length-2)],i=this.styleIndices_.length-1;i>=0;--i){for(this.setFillStyle_(t,(s=this.styles_[i])[0]),this.setStrokeStyle_(t,s[1],s[2]),a=this.styleIndices_[i];u>=0&&this.startIndices[u]>=a;)c=this.startIndices[u],n[h=yl(l=this.startIndicesFeature[u]).toString()]&&(o!==r&&this.drawElements(t,e,o,r),r=c),u--,o=c;o!==r&&this.drawElements(t,e,o,r),o=r=a}},Pv.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},Pv.prototype.setStrokeStyle_=function(t,e,n){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,n)},Pv.prototype.setFillStrokeStyle=function(t,e){let n,i;if(e){const t=e.getLineDash();this.state_.lineDash=t||Cv;const o=e.getLineDashOffset();this.state_.lineDashOffset=o||0,n=(n=e.getColor())instanceof CanvasGradient||n instanceof CanvasPattern?Ev:Uu(n).map(function(t,e){return 3!=e?t/255:t})||Ev,i=void 0!==(i=e.getWidth())?i:1}else n=[0,0,0,0],i=0;let o=t?t.getColor():[0,0,0,0];o=o instanceof CanvasGradient||o instanceof CanvasPattern?wv:Uu(o).map(function(t,e){return 3!=e?t/255:t})||wv,this.state_.strokeColor&&ad(this.state_.strokeColor,n)&&this.state_.fillColor&&ad(this.state_.fillColor,o)&&this.state_.lineWidth===i||(this.state_.changed=!0,this.state_.fillColor=o,this.state_.strokeColor=n,this.state_.lineWidth=i,this.styles_.push([o,n,i]))};var Mv=Pv;const kv=new fv("precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Lv=new _v("varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n"),Fv=function(t,e){this.canvas_=t,this.gl_=e,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=id(rc,"OES_element_index_uint"),this.hasOESElementIndexUint&&e.getExtension("OES_element_index_uint"),Rl(this.canvas_,"webglcontextlost",this.handleWebGLContextLost,this),Rl(this.canvas_,"webglcontextrestored",this.handleWebGLContextRestored,this)};function Dv(t,e,n){const i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(ec,$u,e),void 0!==n&&t.texParameteri(ec,tc,n),i}function Ov(t,e,n,i,o){const r=Dv(t,i,o);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),r}function Av(t,e,n,i){const o=Dv(t,n,i);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),o}gl(Fv,Nl),Fv.prototype.bindBuffer=function(t,e){const n=this.getGL(),i=e.getArray(),o=String(yl(e));if(o in this.bufferCache_)n.bindBuffer(t,this.bufferCache_[o].buffer);else{const r=n.createBuffer();let s;n.bindBuffer(t,r),34962==t?s=new Float32Array(i):34963==t&&(s=this.hasOESElementIndexUint?new Uint32Array(i):new Uint16Array(i)),n.bufferData(t,s,e.getUsage()),this.bufferCache_[o]={buf:e,buffer:r}}},Fv.prototype.deleteBuffer=function(t){const e=this.getGL(),n=String(yl(t)),i=this.bufferCache_[n];e.isContextLost()||e.deleteBuffer(i.buffer),delete this.bufferCache_[n]},Fv.prototype.disposeInternal=function(){Ll(this.canvas_);const t=this.getGL();if(!t.isContextLost()){for(const e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(const e in this.programCache_)t.deleteProgram(this.programCache_[e]);for(const e in this.shaderCache_)t.deleteShader(this.shaderCache_[e]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},Fv.prototype.getCanvas=function(){return this.canvas_},Fv.prototype.getGL=function(){return this.gl_},Fv.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},Fv.prototype.getShader=function(t){const e=String(yl(t));if(e in this.shaderCache_)return this.shaderCache_[e];{const n=this.getGL(),i=n.createShader(t.getType());return n.shaderSource(i,t.getSource()),n.compileShader(i),this.shaderCache_[e]=i,i}},Fv.prototype.getProgram=function(t,e){const n=yl(t)+"/"+yl(e);if(n in this.programCache_)return this.programCache_[n];{const i=this.getGL(),o=i.createProgram();return i.attachShader(o,this.getShader(t)),i.attachShader(o,this.getShader(e)),i.linkProgram(o),this.programCache_[n]=o,o}},Fv.prototype.handleWebGLContextLost=function(){bl(this.bufferCache_),bl(this.shaderCache_),bl(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},Fv.prototype.handleWebGLContextRestored=function(){},Fv.prototype.initHitDetectionFramebuffer_=function(){const t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);const n=Ov(t,1,1),i=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=n,this.hitDetectionRenderbuffer_=i},Fv.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)};var Nv=Fv;const Gv=function(t,e){bv.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0};gl(Gv,bv),Gv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer,i=this.getTextures(!0),o=t.getGL();return function(){if(!o.isContextLost()){let t,e;for(t=0,e=i.length;t<e;++t)o.deleteTexture(i[t])}t.deleteBuffer(e),t.deleteBuffer(n)}},Gv.prototype.drawCoordinates=function(t,e,n,i){const o=this.anchorX,r=this.anchorY,s=this.height,a=this.imageHeight,l=this.imageWidth,h=this.opacity,u=this.originX,c=this.originY,d=this.rotateWithView?1:0,p=-this.rotation,f=this.scale,g=this.width,_=Math.cos(p),y=Math.sin(p);let m,v,x,b,w,C,E=this.indices.length,T=this.vertices.length;for(m=e;m<n;m+=i)C=t[m+1]-this.origin[1],v=T/8,x=-f*o,b=-f*(s-r),this.vertices[T++]=w=t[m]-this.origin[0],this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=u/l,this.vertices[T++]=(c+s)/a,this.vertices[T++]=h,this.vertices[T++]=d,x=f*(g-o),b=-f*(s-r),this.vertices[T++]=w,this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=(u+g)/l,this.vertices[T++]=(c+s)/a,this.vertices[T++]=h,this.vertices[T++]=d,x=f*(g-o),b=f*r,this.vertices[T++]=w,this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=(u+g)/l,this.vertices[T++]=c/a,this.vertices[T++]=h,this.vertices[T++]=d,x=-f*o,b=f*r,this.vertices[T++]=w,this.vertices[T++]=C,this.vertices[T++]=x*_-b*y,this.vertices[T++]=x*y+b*_,this.vertices[T++]=u/l,this.vertices[T++]=c/a,this.vertices[T++]=h,this.vertices[T++]=d,this.indices[E++]=v,this.indices[E++]=v+1,this.indices[E++]=v+2,this.indices[E++]=v,this.indices[E++]=v+2,this.indices[E++]=v+3;return T},Gv.prototype.createTextures=function(t,e,n,i){let o,r,s,a;const l=e.length;for(a=0;a<l;++a)(s=yl(r=e[a]).toString())in n?o=n[s]:(o=Av(i,r,33071,33071),n[s]=o),t[a]=o},Gv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(kv,Lv);let r;return this.defaultLocations?r=this.defaultLocations:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_image=t.getUniformLocation(e,"u_image"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord"),this.a_offsets=t.getAttribLocation(e,"a_offsets"),this.a_opacity=t.getAttribLocation(e,"a_opacity"),this.a_rotateWithView=t.getAttribLocation(e,"a_rotateWithView")}(t,o),this.defaultLocations=r),e.useProgram(o),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,32,0),t.enableVertexAttribArray(r.a_offsets),t.vertexAttribPointer(r.a_offsets,2,5126,!1,32,8),t.enableVertexAttribArray(r.a_texCoord),t.vertexAttribPointer(r.a_texCoord,2,5126,!1,32,16),t.enableVertexAttribArray(r.a_opacity),t.vertexAttribPointer(r.a_opacity,1,5126,!1,32,24),t.enableVertexAttribArray(r.a_rotateWithView),t.vertexAttribPointer(r.a_rotateWithView,1,5126,!1,32,28),r},Gv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},Gv.prototype.drawReplay=function(t,e,n,i){const o=i?this.getHitDetectionTextures():this.getTextures(),r=i?this.hitDetectionGroupIndices:this.groupIndices;if(Cl(n)){let n,i,s;for(n=0,i=o.length,s=0;n<i;++n){t.bindTexture(ec,o[n]);const i=r[n];this.drawElements(t,e,s,i),s=i}}else this.drawReplaySkipping(t,e,n,o,r)},Gv.prototype.drawReplaySkipping=function(t,e,n,i,o){let r,s,a=0;for(r=0,s=i.length;r<s;++r){t.bindTexture(ec,i[r]);const s=r>0?o[r-1]:0,l=o[r];let h=s,u=s;for(;a<this.startIndices.length&&this.startIndices[a]<=l;)void 0!==n[yl(this.startIndicesFeature[a]).toString()]?(h!==u&&this.drawElements(t,e,h,u),u=h=a===this.startIndices.length-1?l:this.startIndices[a+1]):u=a===this.startIndices.length-1?l:this.startIndices[a+1],a++;h!==u&&this.drawElements(t,e,h,u)}},Gv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,h,u,c=this.startIndices.length-1;const d=this.getHitDetectionTextures();for(r=d.length-1;r>=0;--r)for(t.bindTexture(ec,d[r]),s=r>0?this.hitDetectionGroupIndices[r-1]:0,l=this.hitDetectionGroupIndices[r];c>=0&&this.startIndices[c]>=s;){if(a=this.startIndices[c],void 0===n[u=yl(h=this.startIndicesFeature[c]).toString()]&&h.getGeometry()&&(void 0===o||kh(o,h.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,l);const n=i(h);if(n)return n}l=a,c--}},Gv.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},Gv.prototype.getTextures=function(t){},Gv.prototype.getHitDetectionTextures=function(){};var Vv=Gv;const jv=function(t,e){Vv.call(this,t,e),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]};gl(jv,Vv),jv.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const n=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(n,0,n.length,i)},jv.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const n=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(n,0,n.length,i)},jv.prototype.finish=function(t){const e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new Rv(this.vertices),this.indicesBuffer=new Rv(this.indices);const n={};this.createTextures(this.textures_,this.images_,n,e),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,e),this.images_=null,this.hitDetectionImages_=null,Vv.prototype.finish.call(this,t)},jv.prototype.setImageStyle=function(t){const e=t.getAnchor(),n=t.getImage(1),i=t.getImageSize(),o=t.getHitDetectionImage(1),r=t.getOpacity(),s=t.getOrigin(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getSize(),u=t.getScale();let c;0===this.images_.length?this.images_.push(n):yl(c=this.images_[this.images_.length-1])!=yl(n)&&(this.groupIndices.push(this.indices.length),this.images_.push(n)),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(o):yl(c=this.hitDetectionImages_[this.hitDetectionImages_.length-1])!=yl(o)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(o)),this.anchorX=e[0],this.anchorY=e[1],this.height=h[1],this.imageHeight=i[1],this.imageWidth=i[0],this.opacity=r,this.originX=s[0],this.originY=s[1],this.rotation=l,this.rotateWithView=a,this.scale=u,this.width=h[0]},jv.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},jv.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_};var Bv=jv;function zv(t,e,n,i){const o=n-i;return t[e]===t[o]&&t[e+1]===t[o+1]&&(n-e)/i>3&&!!pd(t,e,n,i)}const Hv=new fv("precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Wv=new _v("varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n"),Uv=function(t,e){bv.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}};gl(Uv,bv),Uv.prototype.drawCoordinates_=function(t,e,n,i){let o,r,s=this.vertices.length,a=this.indices.length;const l="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,h="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,u=zv(t,e,n,i);let c,d,p,f,g,_,y=a,m=1;for(o=e,r=n;o<r;o+=i){if(p=s/7,f=g,g=_||[t[o],t[o+1]],o===e){if(_=[t[o+i],t[o+i+1]],n-e==2*i&&ad(g,_))break;if(!u){h&&(s=this.addVertices_([0,0],g,_,7*m*h,s),s=this.addVertices_([0,0],g,_,7*-m*h,s),this.indices[a++]=p+2,this.indices[a++]=p,this.indices[a++]=p+1,this.indices[a++]=p+1,this.indices[a++]=p+3,this.indices[a++]=p+2),s=this.addVertices_([0,0],g,_,3*m*(h||1),s),y=(s=this.addVertices_([0,0],g,_,3*-m*(h||1),s))/7-1;continue}f=[t[n-2*i],t[n-2*i+1]],c=_}else{if(o===n-i){if(u){_=c;break}s=this.addVertices_(f=f||[0,0],g,[0,0],5*m*(h||1),s),s=this.addVertices_(f,g,[0,0],5*-m*(h||1),s),this.indices[a++]=p,this.indices[a++]=y-1,this.indices[a++]=y,this.indices[a++]=y,this.indices[a++]=p+1,this.indices[a++]=p,h&&(s=this.addVertices_(f,g,[0,0],11*m*h,s),s=this.addVertices_(f,g,[0,0],11*-m*h,s),this.indices[a++]=p+2,this.indices[a++]=p,this.indices[a++]=p+1,this.indices[a++]=p+1,this.indices[a++]=p+3,this.indices[a++]=p+2);break}_=[t[o+i],t[o+i+1]]}d=Sv(f[0],f[1],g[0],g[1],_[0],_[1])?-1:1,s=this.addVertices_(f,g,_,13*d*(l||1),s),s=this.addVertices_(f,g,_,17*d*(l||1),s),s=this.addVertices_(f,g,_,19*-d*(l||1),s),o>e&&(this.indices[a++]=p,this.indices[a++]=y-1,this.indices[a++]=y,this.indices[a++]=p+2,this.indices[a++]=p,this.indices[a++]=m*d>0?y:y-1),this.indices[a++]=p,this.indices[a++]=p+2,this.indices[a++]=p+1,y=p+2,m=d,l&&(s=this.addVertices_(f,g,_,23*d*l,s),this.indices[a++]=p+1,this.indices[a++]=p+3,this.indices[a++]=p)}u&&(p=p||s/7,d=zd([f[0],f[1],g[0],g[1],_[0],_[1]],0,6,2)?1:-1,s=this.addVertices_(f,g,_,13*d*(l||1),s),s=this.addVertices_(f,g,_,19*-d*(l||1),s),this.indices[a++]=p,this.indices[a++]=y-1,this.indices[a++]=y,this.indices[a++]=p+1,this.indices[a++]=p,this.indices[a++]=m*d>0?y:y-1)},Uv.prototype.addVertices_=function(t,e,n,i,o){return this.vertices[o++]=t[0],this.vertices[o++]=t[1],this.vertices[o++]=e[0],this.vertices[o++]=e[1],this.vertices[o++]=n[0],this.vertices[o++]=n[1],this.vertices[o++]=i,o},Uv.prototype.isValid_=function(t,e,n,i){const o=n-e;return!(o<2*i||o===2*i&&ad([t[e],t[e+1]],[t[e+i],t[e+i+1]]))},Uv.prototype.drawLineString=function(t,e){let n=t.getFlatCoordinates();const i=t.getStride();this.isValid_(n,0,n.length,i)&&(n=Oh(n,0,n.length,i,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(n,0,n.length,i))},Uv.prototype.drawMultiLineString=function(t,e){const n=this.indices.length,i=t.getEnds();i.unshift(0);const o=t.getFlatCoordinates(),r=t.getStride();let s,a;if(i.length>1)for(s=1,a=i.length;s<a;++s)if(this.isValid_(o,i[s-1],i[s],r)){const t=Oh(o,i[s-1],i[s],r,-this.origin[0],-this.origin[1]);this.drawCoordinates_(t,0,t.length,r)}this.indices.length>n&&(this.startIndices.push(n),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1))},Uv.prototype.drawPolygonCoordinates=function(t,e,n){if(zv(t,0,t.length,n)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,n),e.length){let t,i;for(t=0,i=e.length;t<i;++t)zv(e[t],0,e[t].length,n)||(e[t].push(e[t][0]),e[t].push(e[t][1])),this.drawCoordinates_(e[t],0,e[t].length,n)}},Uv.prototype.setPolygonStyle=function(t,e){const n=void 0===e?this.indices.length:e;this.startIndices.push(n),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1)},Uv.prototype.getCurrentIndex=function(){return this.indices.length},Uv.prototype.finish=function(t){this.verticesBuffer=new Rv(this.vertices),this.indicesBuffer=new Rv(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},Uv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(n)}},Uv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(Hv,Wv);let r;return this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_miterLimit=t.getUniformLocation(e,"u_miterLimit"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_size=t.getUniformLocation(e,"u_size"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.a_lastPos=t.getAttribLocation(e,"a_lastPos"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_nextPos=t.getAttribLocation(e,"a_nextPos"),this.a_direction=t.getAttribLocation(e,"a_direction")}(t,o),this.defaultLocations_=r),e.useProgram(o),t.enableVertexAttribArray(r.a_lastPos),t.vertexAttribPointer(r.a_lastPos,2,5126,!1,28,0),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,28,8),t.enableVertexAttribArray(r.a_nextPos),t.vertexAttribPointer(r.a_nextPos,2,5126,!1,28,16),t.enableVertexAttribArray(r.a_direction),t.vertexAttribPointer(r.a_direction,1,5126,!1,28,24),t.uniform2fv(r.u_size,n),t.uniform1f(r.u_pixelRatio,i),r},Uv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},Uv.prototype.drawReplay=function(t,e,n,i){const o=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Cl(n)){let n,i,o,r;for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)i=this.styleIndices_[n],this.setStrokeStyle_(t,(r=this.styles_[n])[0],r[1],r[2]),this.drawElements(t,e,i,o),t.clear(t.DEPTH_BUFFER_BIT),o=i}else this.drawReplaySkipping_(t,e,n);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(o))},Uv.prototype.drawReplaySkipping_=function(t,e,n){let i,o,r,s,a,l,h,u,c;for(r=o=this.startIndices[1+(u=this.startIndices.length-2)],i=this.styleIndices_.length-1;i>=0;--i){for(this.setStrokeStyle_(t,(s=this.styles_[i])[0],s[1],s[2]),a=this.styleIndices_[i];u>=0&&this.startIndices[u]>=a;)c=this.startIndices[u],n[h=yl(l=this.startIndicesFeature[u]).toString()]&&(o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),r=c),u--,o=c;o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),o=r=a}},Uv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,h,u,c,d;for(a=this.startIndices[1+(d=this.startIndices.length-2)],r=this.styleIndices_.length-1;r>=0;--r)for(this.setStrokeStyle_(t,(l=this.styles_[r])[0],l[1],l[2]),h=this.styleIndices_[r];d>=0&&this.startIndices[d]>=h;){if(s=this.startIndices[d],void 0===n[c=yl(u=this.startIndicesFeature[d]).toString()]&&u.getGeometry()&&(void 0===o||kh(o,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);const n=i(u);if(n)return n}d--,a=s}},Uv.prototype.setStrokeStyle_=function(t,e,n,i){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,n),t.uniform1f(this.defaultLocations_.u_miterLimit,i)},Uv.prototype.setFillStrokeStyle=function(t,e){const n=e.getLineCap();this.state_.lineCap=void 0!==n?n:"round";const i=e.getLineDash();this.state_.lineDash=i||Cv;const o=e.getLineDashOffset();this.state_.lineDashOffset=o||0;const r=e.getLineJoin();this.state_.lineJoin=void 0!==r?r:"round";let s=e.getColor();s=s instanceof CanvasGradient||s instanceof CanvasPattern?Ev:Uu(s).map(function(t,e){return 3!=e?t/255:t})||Ev;let a=e.getWidth();a=void 0!==a?a:1;let l=e.getMiterLimit();l=void 0!==l?l:10,this.state_.strokeColor&&ad(this.state_.strokeColor,s)&&this.state_.lineWidth===a&&this.state_.miterLimit===l||(this.state_.changed=!0,this.state_.strokeColor=s,this.state_.lineWidth=a,this.state_.miterLimit=l,this.styles_.push([s,a,l]))};var Yv=Uv;const Kv=new fv("precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Xv=new _v("\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n"),Zv=function(t){this.circular_=void 0===t||t,this.length_=0};Zv.prototype.insertItem=function(t){const e={prev:void 0,next:void 0,data:t},n=this.head_;if(n){const t=n.next;e.prev=n,e.next=t,n.next=e,t&&(t.prev=e),n===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},Zv.prototype.removeItem=function(){const t=this.head_;if(t){const e=t.next,n=t.prev;e&&(e.prev=n),n&&(n.next=e),this.head_=e||n,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=n?this.head_.prev:this.head_),this.length_--}},Zv.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},Zv.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},Zv.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},Zv.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},Zv.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},Zv.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},Zv.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},Zv.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},Zv.prototype.concat=function(t){if(t.head_){if(this.head_){const e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},Zv.prototype.getLength=function(){return this.length_};var qv=Zv;const Jv=function(t,e){bv.call(this,t,e),this.lineStringReplay=new Yv(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}};gl(Jv,bv),Jv.prototype.drawCoordinates_=function(t,e,n){const i=new qv,o=new F_;this.processFlatCoordinates_(t,n,i,o,!0);const r=this.getMaxCoords_(i);if(e.length){let t,s;const a=[];for(t=0,s=e.length;t<s;++t){const i={list:new qv,maxCoords:void 0,rtree:new F_};a.push(i),this.processFlatCoordinates_(e[t],n,i.list,i.rtree,!1),this.classifyPoints_(i.list,i.rtree,!0),i.maxCoords=this.getMaxCoords_(i.list)}for(a.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),t=0;t<a.length;++t){const e=a[t].list,n=e.firstItem();let s,l=n;do{if(this.getIntersections_(l,o).length){s=!0;break}l=e.nextItem()}while(n!==l);s||this.bridgeHole_(e,a[t].maxCoords[0],i,r[0],o)&&(o.concat(a[t].rtree),this.classifyPoints_(i,o,!1))}}else this.classifyPoints_(i,o,!1);this.triangulate_(i,o)},Jv.prototype.processFlatCoordinates_=function(t,e,n,i,o){const r=zd(t,0,t.length,e);let s,a,l,h,u,c=this.vertices.length/2;const d=[],p=[];if(o===r){for(h=l=this.createPoint_(t[0],t[1],c++),s=e,a=t.length;s<a;s+=e)u=this.createPoint_(t[s],t[s+1],c++),p.push(this.insertItem_(h,u,n)),d.push([Math.min(h.x,u.x),Math.min(h.y,u.y),Math.max(h.x,u.x),Math.max(h.y,u.y)]),h=u;p.push(this.insertItem_(u,l,n)),d.push([Math.min(h.x,u.x),Math.min(h.y,u.y),Math.max(h.x,u.x),Math.max(h.y,u.y)])}else{const i=t.length-e;for(h=l=this.createPoint_(t[i],t[i+1],c++),s=i-e,a=0;s>=a;s-=e)u=this.createPoint_(t[s],t[s+1],c++),p.push(this.insertItem_(h,u,n)),d.push([Math.min(h.x,u.x),Math.min(h.y,u.y),Math.max(h.x,u.x),Math.max(h.y,u.y)]),h=u;p.push(this.insertItem_(u,l,n)),d.push([Math.min(h.x,u.x),Math.min(h.y,u.y),Math.max(h.x,u.x),Math.max(h.y,u.y)])}i.load(d,p)},Jv.prototype.getMaxCoords_=function(t){const e=t.firstItem();let n=e,i=[n.p0.x,n.p0.y];do{(n=t.nextItem()).p0.x>i[0]&&(i=[n.p0.x,n.p0.y])}while(n!==e);return i},Jv.prototype.classifyPoints_=function(t,e,n){let i=t.firstItem(),o=i,r=t.nextItem(),s=!1;do{const a=n?Sv(r.p1.x,r.p1.y,o.p1.x,o.p1.y,o.p0.x,o.p0.y):Sv(o.p0.x,o.p0.y,o.p1.x,o.p1.y,r.p1.x,r.p1.y);void 0===a?(this.removeItem_(o,r,t,e),s=!0,r===i&&(i=t.getNextItem()),r=o,t.prevItem()):o.p1.reflex!==a&&(o.p1.reflex=a,s=!0),o=r,r=t.nextItem()}while(o!==i);return s},Jv.prototype.bridgeHole_=function(t,e,n,i,o){let r=t.firstItem();for(;r.p1.x!==e;)r=t.nextItem();const s=r.p1,a={x:i,y:s.y,i:-1};let l,h,u,c,d=1/0;const p=this.getIntersections_({p0:s,p1:a},o,!0);for(l=0,h=p.length;l<h;++l){const t=p[l],e=this.calculateIntersection_(s,a,t.p0,t.p1,!0),n=Math.abs(s.x-e[0]);n<d&&void 0!==Sv(s.x,s.y,t.p0.x,t.p0.y,t.p1.x,t.p1.y)&&(d=n,c={x:e[0],y:e[1],i:-1},r=t)}if(d===1/0)return!1;if(u=r.p1,d>0){const t=this.getPointsInTriangle_(s,c,r.p1,o);if(t.length){let e=1/0;for(l=0,h=t.length;l<h;++l){const n=t[l],i=Math.atan2(s.y-n.y,a.x-n.x);(i<e||i===e&&n.x<u.x)&&(e=i,u=n)}}}for(r=n.firstItem();r.p1.x!==u.x||r.p1.y!==u.y;)r=n.nextItem();const f={x:s.x,y:s.y,i:s.i,reflex:void 0},g={x:r.p1.x,y:r.p1.y,i:r.p1.i,reflex:void 0};return t.getNextItem().p0=f,this.insertItem_(s,r.p1,t,o),this.insertItem_(g,f,t,o),r.p1=g,t.setFirstItem(),n.concat(t),!0},Jv.prototype.triangulate_=function(t,e){let n=!1,i=this.isSimple_(t,e);for(;t.getLength()>3;)if(i){if(!this.clipEars_(t,e,i,n)&&!this.classifyPoints_(t,e,n)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,i,n)&&!this.classifyPoints_(t,e,n)&&!this.resolveSelfIntersections_(t,e)){if(!(i=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}n=!this.isClockwise_(t),this.classifyPoints_(t,e,n)}if(3===t.getLength()){let e=this.indices.length;this.indices[e++]=t.getPrevItem().p0.i,this.indices[e++]=t.getCurrItem().p0.i,this.indices[e++]=t.getNextItem().p0.i}},Jv.prototype.clipEars_=function(t,e,n,i){let o,r,s,a=this.indices.length,l=t.firstItem(),h=t.getPrevItem(),u=l,c=t.nextItem(),d=t.getNextItem(),p=!1;do{if(o=u.p0,s=c.p1,!1===(r=u.p1).reflex){let f;f=n?0===this.getPointsInTriangle_(o,r,s,e,!0).length:i?this.diagonalIsInside_(d.p1,s,r,o,h.p0):this.diagonalIsInside_(h.p0,o,r,s,d.p1),(n||0===this.getIntersections_({p0:o,p1:s},e).length)&&f&&(n||!1===o.reflex||!1===s.reflex||zd([h.p0.x,h.p0.y,o.x,o.y,r.x,r.y,s.x,s.y,d.p1.x,d.p1.y],0,10,2)===!i)&&(this.indices[a++]=o.i,this.indices[a++]=r.i,this.indices[a++]=s.i,this.removeItem_(u,c,t,e),c===l&&(l=d),p=!0)}h=t.getPrevItem(),u=t.getCurrItem(),c=t.nextItem(),d=t.getNextItem()}while(u!==l&&t.getLength()>3);return p},Jv.prototype.resolveSelfIntersections_=function(t,e,n){const i=t.firstItem();t.nextItem();let o=i,r=t.nextItem(),s=!1;do{const a=this.calculateIntersection_(o.p0,o.p1,r.p0,r.p1,n);if(a){let l=!1,h=this.indices.length;const u=this.vertices.length/2,c=t.prevItem();let d;if(t.removeItem(),e.remove(c),l=c===i,n?(a[0]===o.p0.x&&a[1]===o.p0.y?(t.prevItem(),r.p0=d=o.p0,e.remove(o),l=l||o===i):(o.p1=d=r.p1,e.remove(r),l=l||r===i),t.removeItem()):(d=this.createPoint_(a[0],a[1],u),o.p1=d,r.p0=d,e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o),e.update([Math.min(r.p0.x,r.p1.x),Math.min(r.p0.y,r.p1.y),Math.max(r.p0.x,r.p1.x),Math.max(r.p0.y,r.p1.y)],r)),this.indices[h++]=c.p0.i,this.indices[h++]=c.p1.i,this.indices[h++]=d.i,s=!0,l)break}o=t.getPrevItem(),r=t.nextItem()}while(o!==i);return s},Jv.prototype.isSimple_=function(t,e){const n=t.firstItem();let i=n;do{if(this.getIntersections_(i,e).length)return!1;i=t.nextItem()}while(i!==n);return!0},Jv.prototype.isClockwise_=function(t){const e=2*t.getLength(),n=new Array(e),i=t.firstItem();let o=i,r=0;do{n[r++]=o.p0.x,n[r++]=o.p0.y,o=t.nextItem()}while(o!==i);return zd(n,0,e,2)},Jv.prototype.splitPolygon_=function(t,e){const n=t.firstItem();let i=n;do{const n=this.getIntersections_(i,e);if(n.length){const o=n[0],r=this.vertices.length/2,s=this.calculateIntersection_(i.p0,i.p1,o.p0,o.p1),a=this.createPoint_(s[0],s[1],r),l=new qv,h=new F_;this.insertItem_(a,i.p1,l,h),i.p1=a,e.update([Math.min(i.p0.x,a.x),Math.min(i.p0.y,a.y),Math.max(i.p0.x,a.x),Math.max(i.p0.y,a.y)],i);let u=t.nextItem();for(;u!==o;)this.insertItem_(u.p0,u.p1,l,h),e.remove(u),t.removeItem(),u=t.getCurrItem();this.insertItem_(o.p0,a,l,h),o.p0=a,e.update([Math.min(o.p1.x,a.x),Math.min(o.p1.y,a.y),Math.max(o.p1.x,a.x),Math.max(o.p1.y,a.y)],o),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(l,h,!1),this.triangulate_(l,h);break}i=t.nextItem()}while(i!==n)},Jv.prototype.createPoint_=function(t,e,n){let i=this.vertices.length;return this.vertices[i++]=t,this.vertices[i++]=e,{x:t,y:e,i:n,reflex:void 0}},Jv.prototype.insertItem_=function(t,e,n,i){const o={p0:t,p1:e};return n.insertItem(o),i&&i.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],o),o},Jv.prototype.removeItem_=function(t,e,n,i){n.getCurrItem()===e&&(n.removeItem(),t.p1=e.p1,i.remove(e),i.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},Jv.prototype.getPointsInTriangle_=function(t,e,n,i,o){const r=[],s=i.getInExtent([Math.min(t.x,e.x,n.x),Math.min(t.y,e.y,n.y),Math.max(t.x,e.x,n.x),Math.max(t.y,e.y,n.y)]);for(let a=0,l=s.length;a<l;++a)for(const i in s[a]){const l=s[a][i];"object"!=typeof l||o&&!l.reflex||l.x===t.x&&l.y===t.y||l.x===e.x&&l.y===e.y||l.x===n.x&&l.y===n.y||-1!==r.indexOf(l)||!Od([t.x,t.y,e.x,e.y,n.x,n.y],0,6,2,l.x,l.y)||r.push(l)}return r},Jv.prototype.getIntersections_=function(t,e,n){const i=t.p0,o=t.p1,r=e.getInExtent([Math.min(i.x,o.x),Math.min(i.y,o.y),Math.max(i.x,o.x),Math.max(i.y,o.y)]),s=[];for(let a=0,l=r.length;a<l;++a){const e=r[a];t!==e&&(n||e.p0!==o||e.p1!==i)&&this.calculateIntersection_(i,o,e.p0,e.p1,n)&&s.push(e)}return s},Jv.prototype.calculateIntersection_=function(t,e,n,i,o){const r=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(0!==r){const s=((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x))/r,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/r;if(!o&&s>Tv&&s<1-Tv&&a>Tv&&a<1-Tv||o&&s>=0&&s<=1&&a>=0&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},Jv.prototype.diagonalIsInside_=function(t,e,n,i,o){if(void 0===e.reflex||void 0===i.reflex)return!1;const r=(n.x-i.x)*(e.y-i.y)>(n.y-i.y)*(e.x-i.x),s=(o.x-i.x)*(e.y-i.y)<(o.y-i.y)*(e.x-i.x),a=(t.x-e.x)*(i.y-e.y)>(t.y-e.y)*(i.x-e.x),l=(n.x-e.x)*(i.y-e.y)<(n.y-e.y)*(i.x-e.x);return(i.reflex?s||r:s&&r)&&(e.reflex?l||a:l&&a)},Jv.prototype.drawMultiPolygon=function(t,e){const n=t.getEndss(),i=t.getStride(),o=this.indices.length,r=this.lineStringReplay.getCurrentIndex(),s=t.getFlatCoordinates();let a,l,h,u,c=0;for(a=0,l=n.length;a<l;++a){const t=n[a];if(t.length>0){const e=Oh(s,c,t[0],i,-this.origin[0],-this.origin[1]);if(e.length){const n=[];let o;for(h=1,u=t.length;h<u;++h)t[h]!==t[h-1]&&(o=Oh(s,t[h-1],t[h],i,-this.origin[0],-this.origin[1]),n.push(o));this.lineStringReplay.drawPolygonCoordinates(e,n,i),this.drawCoordinates_(e,n,i)}}c=t[t.length-1]}this.indices.length>o&&(this.startIndices.push(o),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(o),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>r&&this.lineStringReplay.setPolygonStyle(e,r)},Jv.prototype.drawPolygon=function(t,e){const n=t.getEnds(),i=t.getStride();if(n.length>0){const o=t.getFlatCoordinates().map(Number),r=Oh(o,0,n[0],i,-this.origin[0],-this.origin[1]);if(r.length){const t=[];let s,a,l;for(s=1,a=n.length;s<a;++s)n[s]!==n[s-1]&&(l=Oh(o,n[s-1],n[s],i,-this.origin[0],-this.origin[1]),t.push(l));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(r,t,i),this.drawCoordinates_(r,t,i)}}},Jv.prototype.finish=function(t){this.verticesBuffer=new Rv(this.vertices),this.indicesBuffer=new Rv(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},Jv.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,n=this.indicesBuffer,i=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(n),i()}},Jv.prototype.setUpProgram=function(t,e,n,i){const o=e.getProgram(Kv,Xv);let r;return this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.a_position=t.getAttribLocation(e,"a_position")}(t,o),this.defaultLocations_=r),e.useProgram(o),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,5126,!1,8,0),r},Jv.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},Jv.prototype.drawReplay=function(t,e,n,i){const o=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Cl(n)){let n,i,o,r;for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)i=this.styleIndices_[n],this.setFillStyle_(t,r=this.styles_[n]),this.drawElements(t,e,i,o),o=i}else this.drawReplaySkipping_(t,e,n);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(o))},Jv.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,o){let r,s,a,l,h,u,c,d;for(a=this.startIndices[1+(d=this.startIndices.length-2)],r=this.styleIndices_.length-1;r>=0;--r)for(this.setFillStyle_(t,l=this.styles_[r]),h=this.styleIndices_[r];d>=0&&this.startIndices[d]>=h;){if(s=this.startIndices[d],void 0===n[c=yl(u=this.startIndicesFeature[d]).toString()]&&u.getGeometry()&&(void 0===o||kh(o,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);const n=i(u);if(n)return n}d--,a=s}},Jv.prototype.drawReplaySkipping_=function(t,e,n){let i,o,r,s,a,l,h,u,c;for(r=o=this.startIndices[1+(u=this.startIndices.length-2)],i=this.styleIndices_.length-1;i>=0;--i){for(this.setFillStyle_(t,s=this.styles_[i]),a=this.styleIndices_[i];u>=0&&this.startIndices[u]>=a;)c=this.startIndices[u],n[h=yl(l=this.startIndicesFeature[u]).toString()]&&(o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),r=c),u--,o=c;o!==r&&(this.drawElements(t,e,o,r),t.clear(t.DEPTH_BUFFER_BIT)),o=r=a}},Jv.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},Jv.prototype.setFillStrokeStyle=function(t,e){let n=t?t.getColor():[0,0,0,0];if(n=n instanceof CanvasGradient||n instanceof CanvasPattern?wv:Uu(n).map(function(t,e){return 3!=e?t/255:t})||wv,this.state_.fillColor&&ad(n,this.state_.fillColor)||(this.state_.fillColor=n,this.state_.changed=!0,this.styles_.push(n)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{const t=new Kc({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,t)}};var Qv=Jv;const $v=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Zu(t,t),this.canvas_=this.context_.canvas};$v.prototype.get=function(t){return this.entries_[t]||null},$v.prototype.add=function(t,e,n,i,o){for(let r=0,s=this.emptyBlocks_.length;r<s;++r){const s=this.emptyBlocks_[r];if(s.width>=e+this.space_&&s.height>=n+this.space_){const a={offsetX:s.x+this.space_,offsetY:s.y+this.space_,image:this.canvas_};return this.entries_[t]=a,i.call(o,this.context_,s.x+this.space_,s.y+this.space_),this.split_(r,s,e+this.space_,n+this.space_),a}}return null},$v.prototype.split_=function(t,e,n,i){let o,r;e.width-n>e.height-i?this.updateBlocks_(t,o={x:e.x+n,y:e.y,width:e.width-n,height:e.height},r={x:e.x,y:e.y+i,width:n,height:e.height-i}):this.updateBlocks_(t,o={x:e.x+n,y:e.y,width:e.width-n,height:i},r={x:e.x,y:e.y+i,width:e.width,height:e.height-i})},$v.prototype.updateBlocks_=function(t,e,n){const i=[t,1];e.width>0&&e.height>0&&i.push(e),n.width>0&&n.height>0&&i.push(n),this.emptyBlocks_.splice.apply(this.emptyBlocks_,i)};var tx=$v;const ex=function(t){const e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==oc?oc:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new tx(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new tx(this.currentHitSize_,this.space_)]};ex.prototype.getInfo=function(t){const e=this.getInfo_(this.atlases_,t);if(!e)return null;const n=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,n)},ex.prototype.getInfo_=function(t,e){for(let n=0,i=t.length;n<i;++n){const i=t[n].get(e);if(i)return i}return null},ex.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},ex.prototype.add=function(t,e,n,i,o,r){if(e+this.space_>this.maxSize_||n+this.space_>this.maxSize_)return null;const s=this.add_(!1,t,e,n,i,r);if(!s)return null;const a=this.add_(!0,t,e,n,void 0!==o?o:Ol,r);return this.mergeInfos_(s,a)},ex.prototype.add_=function(t,e,n,i,o,r){const s=t?this.hitAtlases_:this.atlases_;let a,l,h,u;for(h=0,u=s.length;h<u;++h){if(l=(a=s[h]).add(e,n,i,o,r))return l;if(!l&&h===u-1){let e;t?(e=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=e):(e=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=e),a=new tx(e,this.space_),s.push(a),++u}}return null};var nx=ex;const ix=function(t,e){Vv.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=Zu(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1};gl(ix,Vv),ix.prototype.drawText=function(t,e){if(this.text_){let n=null;const i=0;let o=2,r=2;switch(t.getType()){case Wh.POINT:case Wh.MULTI_POINT:o=(n=t.getFlatCoordinates()).length,r=t.getStride();break;case Wh.CIRCLE:n=t.getCenter();break;case Wh.LINE_STRING:n=t.getFlatMidpoint();break;case Wh.MULTI_LINE_STRING:o=(n=t.getFlatMidpoints()).length;break;case Wh.POLYGON:n=t.getFlatInteriorPoint();break;case Wh.MULTI_POLYGON:o=(n=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const s=this.currAtlas_,a=this.text_.split("\n"),l=this.getTextSize_(a);let h,u,c,d,p,f,g,_;const y=Math.round(l[0]*this.textAlign_-this.offsetX_),m=Math.round(l[1]*this.textBaseline_-this.offsetY_),v=this.state_.lineWidth/2*this.state_.scale;for(h=0,u=a.length;h<u;++h)for(p=0,f=s.height*h,g=a[h].split(""),c=0,d=g.length;c<d;++c){if(_=s.atlas.getInfo(g[c])){const t=_.image;this.anchorX=y-p,this.anchorY=m-f,this.originX=0===c?_.offsetX-v:_.offsetX,this.originY=_.offsetY,this.height=s.height,this.width=0===c||c===g.length-1?s.width[g[c]]+v:s.width[g[c]],this.imageHeight=t.height,this.imageWidth=t.width,0===this.images_.length?this.images_.push(t):yl(this.images_[this.images_.length-1])!=yl(t)&&(this.groupIndices.push(this.indices.length),this.images_.push(t)),this.drawText_(n,i,o,r)}p+=this.width}}},ix.prototype.getTextSize_=function(t){const e=this,n=this.currAtlas_,i=t.length*n.height;return[t.map(function(t){let i=0;for(let o=0,r=t.length;o<r;++o){const r=t[o];n.width[r]||e.addCharToAtlas_(r),i+=n.width[r]?n.width[r]:0}return i}).reduce(function(t,e){return Math.max(t,e)}),i]},ix.prototype.drawText_=function(t,e,n,i){for(let o=e,r=n;o<r;o+=i)this.drawCoordinates(t,e,n,i)},ix.prototype.addCharToAtlas_=function(t){if(1===t.length){const e=this.currAtlas_,n=this.state_,i=this.measureCanvas_.getContext("2d");i.font=n.font;const o=Math.ceil(i.measureText(t).width*n.scale);e.atlas.add(t,o,e.height,function(e,i,o){e.font=n.font,e.fillStyle=n.fillColor,e.strokeStyle=n.strokeColor,e.lineWidth=n.lineWidth,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.miterLimit=n.miterLimit,e.textAlign="left",e.textBaseline="top",pc&&n.lineDash&&(e.setLineDash(n.lineDash),e.lineDashOffset=n.lineDashOffset),1!==n.scale&&e.setTransform(n.scale,0,0,n.scale,0,0),n.strokeColor&&e.strokeText(t,i,o),n.fillColor&&e.fillText(t,i,o)})&&(e.width[t]=o)}},ix.prototype.finish=function(t){const e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new Rv(this.vertices),this.indicesBuffer=new Rv(this.indices),this.createTextures(this.textures_,this.images_,{},e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,Vv.prototype.finish.call(this,t)},ix.prototype.setTextStyle=function(t){const e=this.state_,n=t.getFill(),i=t.getStroke();if(t&&t.getText()&&(n||i)){if(n){const t=n.getColor();e.fillColor=Xu(t||wv)}else e.fillColor=null;if(i){const t=i.getColor();e.strokeColor=Xu(t||Ev),e.lineWidth=i.getWidth()||1,e.lineCap=i.getLineCap()||"round",e.lineDashOffset=i.getLineDashOffset()||0,e.lineJoin=i.getLineJoin()||"round",e.miterLimit=i.getMiterLimit()||10;const n=i.getLineDash();e.lineDash=n?n.slice():Cv}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||"10px sans-serif",e.scale=t.getScale()||1,this.text_=t.getText();const o=um[t.getTextAlign()],r=um[t.getTextBaseline()];this.textAlign_=void 0===o?.5:o,this.textBaseline_=void 0===r?.5:r,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},ix.prototype.getAtlas_=function(t){let e=[];for(const i in t)(t[i]||0===t[i])&&(Array.isArray(t[i])?e=e.concat(t[i]):e.push(t[i]));const n=this.calculateHash_(e);if(!this.atlases_[n]){const e=this.measureCanvas_.getContext("2d");e.font=t.font;const i=Math.ceil((1.5*e.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[n]={atlas:new nx({space:t.lineWidth+1}),width:{},height:i}}return this.atlases_[n]},ix.prototype.calculateHash_=function(t){let e="";for(let n=0,i=t.length;n<i;++n)e+=t[n];return e},ix.prototype.getTextures=function(t){return this.textures_},ix.prototype.getHitDetectionTextures=function(){return this.textures_};const ox=[1,1],rx={Circle:Mv,Image:Bv,LineString:Yv,Polygon:Qv,Text:ix},sx=function(t,e,n){tm.call(this),this.maxExtent_=e,this.tolerance_=t,this.renderBuffer_=n,this.replaysByZIndex_={}};gl(sx,tm),sx.prototype.addDeclutter=function(t,e){},sx.prototype.getDeleteResourcesFunction=function(t){const e=[];let n;for(n in this.replaysByZIndex_){const i=this.replaysByZIndex_[n];for(const n in i)e.push(i[n].getDeleteResourcesFunction(t))}return function(){const t=e.length;let n;for(let i=0;i<t;i++)n=e[i].apply(this,arguments);return n}},sx.prototype.finish=function(t){let e;for(e in this.replaysByZIndex_){const n=this.replaysByZIndex_[e];for(const e in n)n[e].finish(t)}},sx.prototype.getReplay=function(t,e){const n=void 0!==t?t.toString():"0";let i=this.replaysByZIndex_[n];void 0===i&&(this.replaysByZIndex_[n]=i={});let o=i[e];return void 0===o&&(o=new(0,rx[e])(this.tolerance_,this.maxExtent_),i[e]=o),o},sx.prototype.isEmpty=function(){return Cl(this.replaysByZIndex_)},sx.prototype.replay=function(t,e,n,i,o,r,s,a){const l=Object.keys(this.replaysByZIndex_).map(Number);let h,u,c,d,p,f;for(l.sort(nd),h=0,u=l.length;h<u;++h)for(p=this.replaysByZIndex_[l[h].toString()],c=0,d=hm.length;c<d;++c)void 0!==(f=p[hm[c]])&&f.replay(t,e,n,i,o,r,s,a,void 0,!1)},sx.prototype.replayHitDetection_=function(t,e,n,i,o,r,s,a,l,h,u){const c=Object.keys(this.replaysByZIndex_).map(Number);let d,p,f,g,_,y;for(c.sort(function(t,e){return e-t}),d=0,p=c.length;d<p;++d)for(g=this.replaysByZIndex_[c[d].toString()],f=hm.length-1;f>=0;--f)if(void 0!==(_=g[hm[f]])&&(y=_.replay(t,e,n,i,o,r,s,a,l,h,u)))return y},sx.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s,a,l,h){const u=e.getGL();let c;return u.bindFramebuffer(u.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(c=oh(ph(t),i*this.renderBuffer_)),this.replayHitDetection_(e,t,i,o,ox,s,a,l,function(t){const e=new Uint8Array(4);if(u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e),e[3]>0){const e=h(t);if(e)return e}},!0,c)},sx.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o,r,s,a,l){const h=e.getGL();return h.bindFramebuffer(h.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,i,o,ox,s,a,l,function(t){const e=new Uint8Array(4);return h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,e),e[3]>0},!1)};var ax=sx;const lx=function(t,e,n,i,o,r,s){Iy.call(this),this.context_=t,this.center_=e,this.extent_=r,this.pixelRatio_=s,this.size_=o,this.rotation_=i,this.resolution_=n,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null};gl(lx,Iy),lx.prototype.drawText_=function(t,e){const n=this.context_,i=t.getReplay(0,em.TEXT);i.setTextStyle(this.textStyle_),i.drawText(e,null),i.finish(n),i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),i.getDeleteResourcesFunction(n)()},lx.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},lx.prototype.drawGeometry=function(t){switch(t.getType()){case Wh.POINT:this.drawPoint(t,null);break;case Wh.LINE_STRING:this.drawLineString(t,null);break;case Wh.POLYGON:this.drawPolygon(t,null);break;case Wh.MULTI_POINT:this.drawMultiPoint(t,null);break;case Wh.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case Wh.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case Wh.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case Wh.CIRCLE:this.drawCircle(t,null)}},lx.prototype.drawFeature=function(t,e){const n=e.getGeometryFunction()(t);n&&kh(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},lx.prototype.drawGeometryCollection=function(t,e){const n=t.getGeometriesArray();let i,o;for(i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},lx.prototype.drawPoint=function(t,e){const n=this.context_,i=new ax(1,this.extent_),o=i.getReplay(0,em.IMAGE);o.setImageStyle(this.imageStyle_),o.drawPoint(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},lx.prototype.drawMultiPoint=function(t,e){const n=this.context_,i=new ax(1,this.extent_),o=i.getReplay(0,em.IMAGE);o.setImageStyle(this.imageStyle_),o.drawMultiPoint(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},lx.prototype.drawLineString=function(t,e){const n=this.context_,i=new ax(1,this.extent_),o=i.getReplay(0,em.LINE_STRING);o.setFillStrokeStyle(null,this.strokeStyle_),o.drawLineString(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},lx.prototype.drawMultiLineString=function(t,e){const n=this.context_,i=new ax(1,this.extent_),o=i.getReplay(0,em.LINE_STRING);o.setFillStrokeStyle(null,this.strokeStyle_),o.drawMultiLineString(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},lx.prototype.drawPolygon=function(t,e){const n=this.context_,i=new ax(1,this.extent_),o=i.getReplay(0,em.POLYGON);o.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),o.drawPolygon(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},lx.prototype.drawMultiPolygon=function(t,e){const n=this.context_,i=new ax(1,this.extent_),o=i.getReplay(0,em.POLYGON);o.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),o.drawMultiPolygon(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},lx.prototype.drawCircle=function(t,e){const n=this.context_,i=new ax(1,this.extent_),o=i.getReplay(0,em.CIRCLE);o.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),o.drawCircle(t,e),o.finish(n),o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},lx.prototype.setImageStyle=function(t){this.imageStyle_=t},lx.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},lx.prototype.setTextStyle=function(t){this.textStyle_=t};var hx=lx;const ux=new fv("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"),cx=new _v("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n"),dx=function(t,e){By.call(this,e),this.mapRenderer=t,this.arrayBuffer_=new Rv([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=[1,0,0,1,0,0],this.projectionMatrix=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.defaultLocations_=null};gl(dx,By),dx.prototype.bindFramebuffer=function(t,e){const n=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){const i=(function(t,e,n){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(n))}).bind(null,n,this.framebuffer,this.texture);t.postRenderFunctions.push(i);const o=Ov(n,e,e),r=n.createFramebuffer();n.bindFramebuffer(36160,r),n.framebufferTexture2D(36160,36064,ec,o,0),this.texture=o,this.framebuffer=r,this.framebufferDimension=e}else n.bindFramebuffer(36160,this.framebuffer)},dx.prototype.composeFrame=function(t,e,n){this.dispatchComposeEvent_("precompose",n,t),n.bindBuffer(34962,this.arrayBuffer_);const i=n.getGL(),o=n.getProgram(ux,cx);let r;this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,"u_texCoordMatrix"),this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")}(i,o),this.defaultLocations_=r),n.useProgram(o)&&(i.enableVertexAttribArray(r.a_position),i.vertexAttribPointer(r.a_position,2,5126,!1,16,0),i.enableVertexAttribArray(r.a_texCoord),i.vertexAttribPointer(r.a_texCoord,2,5126,!1,16,8),i.uniform1i(r.u_texture,0)),i.uniformMatrix4fv(r.u_texCoordMatrix,!1,vv(this.tmpMat4_,this.getTexCoordMatrix())),i.uniformMatrix4fv(r.u_projectionMatrix,!1,vv(this.tmpMat4_,this.getProjectionMatrix())),i.uniform1f(r.u_opacity,e.opacity),i.bindTexture(ec,this.getTexture()),i.drawArrays(5,0,4),this.dispatchComposeEvent_("postcompose",n,t)},dx.prototype.dispatchComposeEvent_=function(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const o=n.viewState,r=new hx(e,o.center,o.resolution,o.rotation,n.size,n.extent,n.pixelRatio),s=new Ty(t,r,n,null,e);i.dispatchEvent(s)}},dx.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},dx.prototype.getTexture=function(){return this.texture},dx.prototype.getProjectionMatrix=function(){return this.projectionMatrix},dx.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},dx.prototype.prepareFrame=function(t,e,n){},dx.prototype.forEachLayerAtPixel=function(t,e,n,i){};var px=dx;const fx=function(t,e){px.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null};gl(fx,px),fx.handles=function(t){return"IMAGE"===t.getType()},fx.create=function(t,e){return new fx(t,e)},fx.prototype.createTexture_=function(t){const e=t.getImage();return Av(this.mapRenderer.getGL(),e,33071,33071)},fx.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){const r=this.getLayer();return r.getSource().forEachFeatureAtCoordinate(t,e.viewState.resolution,e.viewState.rotation,n,e.skippedFeatureUids,function(t){return i.call(o,t,r)})},fx.prototype.prepareFrame=function(t,e,n){const i=this.mapRenderer.getGL(),o=t.pixelRatio,r=t.viewState,s=r.center,a=r.resolution,l=r.rotation;let h=this.image_,u=this.texture;const c=this.getLayer().getSource(),d=t.viewHints;let p=t.extent;if(void 0!==e.extent&&(p=Ih(p,e.extent)),!d[mf.ANIMATING]&&!d[mf.INTERACTING]&&!Lh(p)){const e=c.getImage(p,a,o,r.projection);if(e&&this.loadImage(e)&&(h=e,u=this.createTexture_(e),this.texture)){const e=(function(t,e){t.isContextLost()||t.deleteTexture(e)}).bind(null,i,this.texture);t.postRenderFunctions.push(e)}}if(h){const t=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(t.width,t.height,o,s,a,l,h.getExtent()),this.hitTransformationMatrix_=null;const e=this.texCoordMatrix;Ru(e),Du(e,1,-1),Ou(e,0,-1),this.image_=h,this.texture=u}return!!h},fx.prototype.updateProjectionMatrix_=function(t,e,n,i,o,r,s){const a=t*o,l=e*o,h=this.projectionMatrix;Ru(h),Du(h,2*n/a,2*n/l),Fu(h,-r),Ou(h,s[0]-i[0],s[1]-i[1]),Du(h,(s[2]-s[0])/2,(s[3]-s[1])/2),Ou(h,1,1)},fx.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,Fl,this)},fx.prototype.forEachLayerAtPixel=function(t,e,n,i){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==Ol){const o=Lu(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(o,e,0,Fl,this)?n.call(i,this.getLayer(),null):void 0}{const o=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,o));const r=Lu(this.hitTransformationMatrix_,t.slice());if(r[0]<0||r[0]>o[0]||r[1]<0||r[1]>o[1])return;this.hitCanvasContext_||(this.hitCanvasContext_=Zu(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),r[0],r[1],1,1,0,0,1,1);const s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?n.call(i,this.getLayer(),s):void 0}}},fx.prototype.getHitTransformationMatrix_=function(t,e){const n=[1,0,0,1,0,0];Ou(n,-1,-1),Du(n,2/t[0],2/t[1]),Ou(n,0,t[1]),Du(n,1,-1);const i=Nu(this.projectionMatrix.slice()),o=[1,0,0,1,0,0];return Ou(o,0,e[1]),Du(o,1,-1),Du(o,e[0]/2,e[1]/2),Ou(o,1,1),Pu(o,i),Pu(o,n),o};var gx=fx;const _x=function(t){Ay.call(this,t);const e=t.getViewport();this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className="ol-unselectable",e.insertBefore(this.canvas_,e.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=Zu(),this.renderedVisible_=!0,this.gl_=ic(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new Nv(this.canvas_,this.gl_),Rl(this.canvas_,"webglcontextlost",this.handleWebGLContextLost,this),Rl(this.canvas_,"webglcontextrestored",this.handleWebGLContextRestored,this),this.textureCache_=new wc,this.focus_=null,this.tileTextureQueue_=new uf((function(t){const e=t[1],n=t[2],i=e[0]-this.focus_[0],o=e[1]-this.focus_[1];return 65536*Math.log(n)+Math.sqrt(i*i+o*o)/n}).bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=(function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();const t=this.tileTextureQueue_.dequeue();this.bindTileTexture(t[0],t[3],t[4],9729,9729)}return!1}).bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()};gl(_x,Ay),_x.prototype.bindTileTexture=function(t,e,n,i,o){const r=this.getGL(),s=t.getKey();if(this.textureCache_.containsKey(s)){const t=this.textureCache_.get(s);r.bindTexture(ec,t.texture),t.magFilter!=i&&(r.texParameteri(ec,10240,i),t.magFilter=i),t.minFilter!=o&&(r.texParameteri(ec,10241,o),t.minFilter=o)}else{const a=r.createTexture();if(r.bindTexture(ec,a),n>0){const i=this.clipTileContext_.canvas,o=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(i.width=e[0],i.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):o.clearRect(0,0,e[0],e[1]),o.drawImage(t.getImage(),n,n,e[0],e[1],0,0,e[0],e[1]),r.texImage2D(ec,0,6408,6408,5121,i)}else r.texImage2D(ec,0,6408,6408,5121,t.getImage());r.texParameteri(ec,10240,i),r.texParameteri(ec,10241,o),r.texParameteri(ec,$u,33071),r.texParameteri(ec,tc,33071),this.textureCache_.set(s,{texture:a,magFilter:i,minFilter:o})}},_x.prototype.dispatchComposeEvent_=function(t,e){const n=this.getMap();if(n.hasListener(t)){const i=this.context_,o=e.viewState,r=new hx(i,o.center,o.resolution,o.rotation,e.size,e.extent,e.pixelRatio),s=new Ty(t,r,e,null,i);n.dispatchEvent(s)}},_x.prototype.disposeInternal=function(){const t=this.getGL();t.isContextLost()||this.textureCache_.forEach(function(e){e&&t.deleteTexture(e.texture)}),this.context_.dispose(),Ay.prototype.disposeInternal.call(this)},_x.prototype.expireCache_=function(t,e){const n=this.getGL();let i;for(;this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024;){if(i=this.textureCache_.peekLast())n.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},_x.prototype.getContext=function(){return this.context_},_x.prototype.getGL=function(){return this.gl_},_x.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},_x.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;const e=this.getLayerRenderers();for(const n in e)e[n].handleWebGLContextLost()},_x.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},_x.prototype.initializeGL_=function(){const t=this.gl_;t.activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)},_x.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},_x.prototype.renderFrame=function(t){const e=this.getContext(),n=this.getGL();if(n.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_("precompose",t);const i=[],o=t.layerStatesArray;ld(o,Oy);const r=t.viewState.resolution;let s,a,l,h;for(s=0,a=o.length;s<a;++s)kf(h=o[s],r)&&"ready"==h.sourceState&&(l=this.getLayerRenderer(h.layer)).prepareFrame(t,h,e)&&i.push(h);const u=t.size[0]*t.pixelRatio,c=t.size[1]*t.pixelRatio;for(this.canvas_.width==u&&this.canvas_.height==c||(this.canvas_.width=u,this.canvas_.height=c),n.bindFramebuffer(36160,null),n.clearColor(0,0,0,0),n.clear(16384),n.enable(3042),n.viewport(0,0,this.canvas_.width,this.canvas_.height),s=0,a=i.length;s<a;++s)(l=this.getLayerRenderer((h=i[s]).layer)).composeFrame(t,h,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_("postcompose",t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},_x.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,s){let a;if(this.getGL().isContextLost())return!1;const l=e.viewState,h=e.layerStatesArray;let u;for(u=h.length-1;u>=0;--u){const c=h[u],d=c.layer;if(kf(c,l.resolution)&&r.call(s,d)&&(a=this.getLayerRenderer(d).forEachFeatureAtCoordinate(t,e,n,i,o)))return a}},_x.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o){let r=!1;if(this.getGL().isContextLost())return!1;const s=e.viewState,a=e.layerStatesArray;let l;for(l=a.length-1;l>=0;--l){const n=a[l],h=n.layer;if(kf(n,s.resolution)&&i.call(o,h)&&(r=this.getLayerRenderer(h).hasFeatureAtCoordinate(t,e)))return!0}return r},_x.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,s){if(this.getGL().isContextLost())return!1;const a=e.viewState;let l;const h=e.layerStatesArray;let u;for(u=h.length-1;u>=0;--u){const n=h[u],s=n.layer;if(kf(n,a.resolution)&&r.call(o,s)&&(l=this.getLayerRenderer(s).forEachLayerAtPixel(t,e,i,o)))return l}};var yx=_x;const mx=new fv("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"),vx=new _v("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n"),xx=function(t,e){px.call(this,t,e),this.fragmentShader_=mx,this.vertexShader_=vx,this.locations_=null,this.renderArrayBuffer_=new Rv([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]};gl(xx,px),xx.handles=function(t){return"TILE"===t.getType()},xx.create=function(t,e){return new xx(t,e)},xx.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),px.prototype.disposeInternal.call(this)},xx.prototype.createLoadedTileFinder=function(t,e,n){const i=this.mapRenderer;return function(o,r){return t.forEachLoadedTile(e,o,r,function(t){const e=i.isTileTextureLoaded(t);return e&&(n[o]||(n[o]={}),n[o][t.tileCoord.toString()]=t),e})}},xx.prototype.handleWebGLContextLost=function(){px.prototype.handleWebGLContextLost.call(this),this.locations_=null},xx.prototype.prepareFrame=function(t,e,n){const i=this.mapRenderer,o=n.getGL(),r=t.viewState,s=r.projection,a=this.getLayer(),l=a.getSource(),h=l.getTileGridForProjection(s),u=h.getZForResolution(r.resolution),c=h.getResolution(u),d=l.getTilePixelSize(u,t.pixelRatio,s),p=d[0]/Tf(h.getTileSize(u),this.tmpSize_)[0],f=c/p,g=l.getTilePixelRatio(p)*l.getGutter(s),_=r.center,y=t.extent,m=h.getTileRangeForExtentAndZ(y,u);let v;if(this.renderedTileRange_&&this.renderedTileRange_.equals(m)&&this.renderedRevision_==l.getRevision())v=this.renderedFramebufferExtent_;else{const r=m.getSize(),c=(th(0<(D=Math.max(r[0]*d[0],r[1]*d[1])),29),Math.pow(2,Math.ceil(Math.log(D)/Math.LN2))),_=f*c,y=h.getOrigin(u),x=y[0]+m.minX*d[0]*f,b=y[1]+m.minY*d[1]*f;v=[x,b,x+_,b+_],this.bindFramebuffer(t,c),o.viewport(0,0,c,c),o.clearColor(0,0,0,0),o.clear(16384),o.disable(3042);const w=n.getProgram(this.fragmentShader_,this.vertexShader_);n.useProgram(w),this.locations_||(this.locations_=new function(t,e){this.u_tileOffset=t.getUniformLocation(e,"u_tileOffset"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")}(o,w)),n.bindBuffer(34962,this.renderArrayBuffer_),o.enableVertexAttribArray(this.locations_.a_position),o.vertexAttribPointer(this.locations_.a_position,2,5126,!1,16,0),o.enableVertexAttribArray(this.locations_.a_texCoord),o.vertexAttribPointer(this.locations_.a_texCoord,2,5126,!1,16,8),o.uniform1i(this.locations_.u_texture,0);const C={};C[u]={};const E=this.createLoadedTileFinder(l,s,C),T=a.getUseInterimTilesOnError();let S=!0;const I=[1/0,1/0,-1/0,-1/0],R=new qy(0,0,0,0);let P,M,k,L,F,D,O,A;for(D=m.minX;D<=m.maxX;++D)for(O=m.minY;O<=m.maxY;++O)if(L=l.getTile(u,D,O,p,s),void 0===e.extent||kh(A=h.getTileCoordExtent(L.tileCoord,I),e.extent)){if((M=2==(F=L.getState())||4==F||3==F&&!T)||(L=L.getInterimTile()),2==(F=L.getState())){if(i.isTileTextureLoaded(L)){C[u][L.tileCoord.toString()]=L;continue}}else if(4==F||3==F&&!T)continue;S=!1,(k=h.forEachTileCoordParentTileRange(L.tileCoord,E,null,R,I))||(P=h.getTileCoordChildTileRange(L.tileCoord,R,I))&&E(u+1,P)}const N=Object.keys(C).map(Number);N.sort(nd);const G=new Float32Array(4);for(let t=0,e=N.length;t<e;++t){const e=C[N[t]];for(const t in e)A=h.getTileCoordExtent((L=e[t]).tileCoord,I),G[0]=2*(A[2]-A[0])/_,G[1]=2*(A[3]-A[1])/_,G[2]=2*(A[0]-v[0])/_-1,G[3]=2*(A[1]-v[1])/_-1,o.uniform4fv(this.locations_.u_tileOffset,G),i.bindTileTexture(L,d,g*p,9729,9729),o.drawArrays(5,0,4)}S?(this.renderedTileRange_=m,this.renderedFramebufferExtent_=v,this.renderedRevision_=l.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,l,u,m);const x=i.getTileTextureQueue();this.manageTilePyramid(t,l,h,p,s,y,u,a.getPreload(),function(t){2!=t.getState()||i.isTileTextureLoaded(t)||x.isKeyQueued(t.getKey())||x.enqueue([t,h.getTileCoordCenter(t.tileCoord),h.getResolution(t.tileCoord[0]),d,g*p])},this),this.scheduleExpireCache(t,l);const b=this.texCoordMatrix;return Ru(b),Ou(b,(Math.round(_[0]/c)*c-v[0])/(v[2]-v[0]),(Math.round(_[1]/c)*c-v[1])/(v[3]-v[1])),0!==r.rotation&&Fu(b,r.rotation),Du(b,t.size[0]*r.resolution/(v[2]-v[0]),t.size[1]*r.resolution/(v[3]-v[1])),Ou(b,-.5,-.5),!0},xx.prototype.forEachLayerAtPixel=function(t,e,n,i){if(!this.framebuffer)return;const o=Lu(this.texCoordMatrix,[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]].slice()),r=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],s=this.mapRenderer.getContext().getGL();s.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer);const a=new Uint8Array(4);return s.readPixels(r[0],r[1],1,1,s.RGBA,s.UNSIGNED_BYTE,a),a[3]>0?n.call(i,this.getLayer(),a):void 0};var bx=xx;const wx=function(t,e){px.call(this,t,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null};gl(wx,px),wx.handles=function(t){return"VECTOR"===t.getType()},wx.create=function(t,e){return new wx(t,e)},wx.prototype.composeFrame=function(t,e,n){this.layerState_=e;const i=t.viewState,o=this.replayGroup_,r=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();o&&!o.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,r[0]*s,r[1]*s),o.replay(n,i.center,i.resolution,i.rotation,r,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},wx.prototype.disposeInternal=function(){const t=this.replayGroup_;if(t){const e=this.mapRenderer.getContext();t.getDeleteResourcesFunction(e)(),this.replayGroup_=null}px.prototype.disposeInternal.call(this)},wx.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){if(this.replayGroup_&&this.layerState_){const n=this.mapRenderer.getContext(),r=e.viewState,s=this.getLayer(),a={};return this.replayGroup_.forEachFeatureAtCoordinate(t,n,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,this.layerState_.opacity,{},function(t){const e=yl(t).toString();if(!(e in a))return a[e]=!0,i.call(o,t,s)})}},wx.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){const n=this.mapRenderer.getContext(),i=e.viewState;return this.replayGroup_.hasFeatureAtCoordinate(t,n,i.center,i.resolution,i.rotation,e.size,e.pixelRatio,this.layerState_.opacity,e.skippedFeatureUids)}return!1},wx.prototype.forEachLayerAtPixel=function(t,e,n,i){const o=Lu(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(o,e)?n.call(i,this.getLayer(),null):void 0},wx.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},wx.prototype.prepareFrame=function(t,e,n){const i=this.getLayer(),o=i.getSource(),r=t.viewHints[mf.ANIMATING],s=t.viewHints[mf.INTERACTING],a=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!a&&r||!l&&s)return!0;const h=t.extent,u=t.viewState,c=u.projection,d=u.resolution,p=t.pixelRatio,f=i.getRevision(),g=i.getRenderBuffer();let _=i.getRenderOrder();void 0===_&&(_=Mm);const y=oh(h,g*d);if(!this.dirty_&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==_&&lh(this.renderedExtent_,y))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(n)),this.dirty_=!1;const m=new ax(Lm(d,p),y,i.getRenderBuffer());o.loadFeatures(y,d,c);const v=function(t){let e;const n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,d)),e){const n=this.renderFeature(t,d,p,e,m);this.dirty_=this.dirty_||n}};if(_){const t=[];o.forEachFeatureInExtent(y,function(e){t.push(e)},this),t.sort(_),t.forEach(v.bind(this))}else o.forEachFeatureInExtent(y,v,this);return m.finish(n),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=_,this.renderedExtent_=y,this.replayGroup_=m,!0},wx.prototype.renderFeature=function(t,e,n,i,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let s=i.length-1,a=0;s>=a;--s)r=Fm(o,t,i[s],km(e,n),this.handleStyleImageChange_,this)||r;else r=Fm(o,t,i,km(e,n),this.handleStyleImageChange_,this)||r;return r};var Cx=wx;const Ex=function(t){(t=xl({},t)).controls||(t.controls=Bf()),t.interactions||(t.interactions=Cy()),If.call(this,t)};gl(Ex,If),Ex.prototype.createRenderer=function(){const t=new yx(this);return t.registerLayerRenderers([gx,bx,Cx]),t};const Tx=function(t){const e=t||{},n=xl({},e);delete n.preload,delete n.useInterimTilesOnError,Lf.call(this,n),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type="TILE"};gl(Tx,Lf),Tx.prototype.getPreload=function(){return this.get("preload")},Tx.prototype.setPreload=function(t){this.set("preload",t)},Tx.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},Tx.prototype.setUseInterimTilesOnError=function(t){this.set("useInterimTilesOnError",t)};var Sx=Tx;function Ix(t,e,n,i){const o=n-t,r=i-e,s=Math.sqrt(o*o+r*r);return[Math.round(n+o/s),Math.round(i+r/s)]}const Rx=function(t,e,n,i,o){this.sourceProj_=t,this.targetProj_=e;let r={};const s=bu(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return r[e]||(r[e]=s(t)),r[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Mh(i)==Mh(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Mh(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Mh(this.targetProj_.getExtent()):null;const a=Rh(n),l=Ph(n),h=Ch(n),u=wh(n),c=this.transformInv_(a),d=this.transformInv_(l),p=this.transformInv_(h),f=this.transformInv_(u);if(this.addQuad_(a,l,h,u,c,d,p,f,10),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach(function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach((function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}).bind(this))}r={}};Rx.prototype.addTriangle_=function(t,e,n,i,o,r){this.triangles_.push({source:[i,o,r],target:[t,e,n]})},Rx.prototype.addQuad_=function(t,e,n,i,o,r,s,a,l){const h=ih([o,r,s,a]),u=this.sourceWorldWidth_?Mh(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&u>.5&&u<1;let p=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p|=Mh(ih([t,e,n,i]))/this.targetWorldWidth_>.25),!d&&this.sourceProj_.isGlobal()&&u&&(p|=u>.25)),p||!this.maxSourceExtent_||kh(h,this.maxSourceExtent_)){if(!(p||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(l>0))return;p=!0}if(l>0){if(!p){const e=this.transformInv_([(t[0]+n[0])/2,(t[1]+n[1])/2]);let i;i=d?(zh(o[0],c)+zh(s[0],c))/2-zh(e[0],c):(o[0]+s[0])/2-e[0];const r=(o[1]+s[1])/2-e[1];p=i*i+r*r>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const h=[(e[0]+n[0])/2,(e[1]+n[1])/2],u=this.transformInv_(h),c=[(i[0]+t[0])/2,(i[1]+t[1])/2],d=this.transformInv_(c);this.addQuad_(t,e,h,c,o,r,u,d,l-1),this.addQuad_(c,h,n,i,d,u,s,a,l-1)}else{const h=[(t[0]+e[0])/2,(t[1]+e[1])/2],u=this.transformInv_(h),c=[(n[0]+i[0])/2,(n[1]+i[1])/2],d=this.transformInv_(c);this.addQuad_(t,h,c,i,o,u,d,a,l-1),this.addQuad_(h,e,n,c,u,r,s,d,l-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,i,o,s,a),this.addTriangle_(t,e,n,o,r,s)}},Rx.prototype.calculateSourceExtent=function(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,n,i){const o=e.source;yh(t,o[0]),yh(t,o[1]),yh(t,o[2])}),t},Rx.prototype.getTriangles=function(){return this.triangles_};var Px=Rx;const Mx=function(t,e,n,i,o,r,s,a,l,h,u){Ip.call(this,o,0),this.renderEdges_=void 0!==u&&u,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=r||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const c=i.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const f=d?Ih(c,d):c;if(0===bh(f))return void(this.state=4);const g=t.getExtent();g&&(p=p?Ih(p,g):g);const _=i.getResolution(this.wrappedTileCoord_[0]),y=function(t,e,n,i){const o=wu(n,e,t);let r=_u(e,i,n);const s=e.getMetersPerUnit();void 0!==s&&(r*=s);const a=t.getMetersPerUnit();void 0!==a&&(r/=a);const l=t.getExtent();if(!l||ah(l,o)){const e=_u(t,r,o)/r;isFinite(e)&&e>0&&(r/=e)}return r}(t,n,Eh(f),_);if(!isFinite(y)||y<=0)return void(this.state=4);if(this.triangulation_=new Px(t,n,f,p,y*(void 0!==h?h:.5)),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=e.getZForResolution(y);let m=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(m[1]=Ah(m[1],p[1],p[3]),m[3]=Ah(m[3],p[1],p[3])):m=Ih(m,p)),bh(m)){const t=e.getTileRangeForExtentAndZ(m,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=l(this.sourceZ_,e,n,s);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4};gl(Mx,Ip),Mx.prototype.disposeInternal=function(){1==this.state&&this.unlistenSources_(),Ip.prototype.disposeInternal.call(this)},Mx.prototype.getImage=function(){return this.canvas_},Mx.prototype.reproject_=function(){const t=[];if(this.sourceTiles_.forEach((function(e,n,i){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}).bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,i,o,r,s,a,l,h,u){const c=Zu(Math.round(n*t),Math.round(n*e));if(0===l.length)return c.canvas;c.scale(n,n);const d=[1/0,1/0,-1/0,-1/0];l.forEach(function(t,e,n){_h(d,t.extent)});const p=Mh(d),f=Sh(d),g=Zu(Math.round(n*p/i),Math.round(n*f/i)),_=n/i;l.forEach(function(t,e,n){const i=t.extent[0]-d[0],o=-(t.extent[3]-d[3]),r=Mh(t.extent),s=Sh(t.extent);g.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,i*_,o*_,r*_,s*_)});const y=Rh(s);return a.getTriangles().forEach(function(t,e,o){const s=t.source,a=t.target;let l=s[0][0],h=s[0][1],u=s[1][0],p=s[1][1],f=s[2][0],_=s[2][1];const m=(a[0][0]-y[0])/r,v=-(a[0][1]-y[1])/r,x=(a[1][0]-y[0])/r,b=-(a[1][1]-y[1])/r,w=(a[2][0]-y[0])/r,C=-(a[2][1]-y[1])/r,E=l,T=h;l=0,h=0;const S=function(t){const e=t.length;for(let i=0;i<e;i++){let n=i,o=Math.abs(t[i][i]);for(let s=i+1;s<e;s++){const e=Math.abs(t[s][i]);e>o&&(o=e,n=s)}if(0===o)return null;const r=t[n];t[n]=t[i],t[i]=r;for(let s=i+1;s<e;s++){const n=-t[s][i]/t[i][i];for(let o=i;o<e+1;o++)i==o?t[s][o]=0:t[s][o]+=n*t[i][o]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let o=i-1;o>=0;o--)t[o][e]-=t[o][i]*n[i]}return n}([[u-=E,p-=T,0,0,x-m],[f-=E,_-=T,0,0,w-m],[0,0,u,p,b-v],[0,0,f,_,C-v]]);if(!S)return;c.save(),c.beginPath();const I=(m+x+w)/3,R=(v+b+C)/3,P=Ix(I,R,m,v),M=Ix(I,R,x,b),k=Ix(I,R,w,C);c.moveTo(M[0],M[1]),c.lineTo(P[0],P[1]),c.lineTo(k[0],k[1]),c.clip(),c.transform(S[0],S[2],S[1],S[3],m,v),c.translate(d[0]-E,d[3]-T),c.scale(i/n,-i/n),c.drawImage(g.canvas,0,0),c.restore()}),u&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.getTriangles().forEach(function(t,e,n){const i=t.target,o=(i[0][0]-y[0])/r,s=-(i[0][1]-y[1])/r,a=(i[1][0]-y[0])/r,l=-(i[1][1]-y[1])/r,h=(i[2][0]-y[0])/r,u=-(i[2][1]-y[1])/r;c.beginPath(),c.moveTo(a,l),c.lineTo(o,s),c.lineTo(h,u),c.closePath(),c.stroke()}),c.restore()),c.canvas}(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=2}this.changed()},Mx.prototype.load=function(){if(0==this.state){this.state=1,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(e,n,i){const o=e.getState();if(0==o||1==o){t++;const n=Rl(e,Hl.CHANGE,function(i){const o=e.getState();2!=o&&3!=o&&4!=o||(kl(n),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(n)}}).bind(this)),this.sourceTiles_.forEach(function(t,e,n){0==t.getState()&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},Mx.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(kl),this.sourcesListenerKeys_=null};var kx=Mx;function Lx(t,e){const n=/\{z\}/g,i=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(o,function(){return(-s[2]-1).toString()}).replace(r,function(){const t=e.getFullTileRange(s[0]);return th(t,55),(t.getHeight()+s[2]).toString()}):void 0}}function Fx(t,e){const n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Lx(t[o],e);return function(t){return 1===t.length?t[0]:function(e,n,i){if(e){const o=zh(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[o](e,n,i)}}}(i)}function Dx(t,e,n){}const Ox=function(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,th(function(t,e,n){const i=function(t,e){return e-t}||nd;return t.every(function(e,n){if(0===n)return!0;const o=i(t[n-1],e);return!(o>0||0===o)})}(this.resolutions_),17),!t.origins)for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,th(this.origins_.length==this.resolutions_.length,20));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=Rh(n)),th(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,th(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:ff,th(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new qy(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):n&&this.calculateTileRanges_(n)},Ax=[0,0,0];Ox.prototype.forEachTileCoord=function(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let o=i.minX,r=i.maxX;o<=r;++o)for(let t=i.minY,s=i.maxY;t<=s;++t)n([e,o,t])},Ox.prototype.forEachTileCoordParentTileRange=function(t,e,n,i,o){let r,s,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,o);h>=this.minZoom;){if(r=2===this.zoomFactor_?Zy(s=Math.floor(s/2),s,a=Math.floor(a/2),a,i):this.getTileRangeForExtentAndZ(l,h,i),e.call(n,h,r))return!0;--h}return!1},Ox.prototype.getExtent=function(){return this.extent_},Ox.prototype.getMaxZoom=function(){return this.maxZoom},Ox.prototype.getMinZoom=function(){return this.minZoom},Ox.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Ox.prototype.getResolution=function(t){return this.resolutions_[t]},Ox.prototype.getResolutions=function(){return this.resolutions_},Ox.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2];return Zy(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null},Ox.prototype.getTileRangeExtent=function(t,e,n){const i=this.getOrigin(t),o=this.getResolution(t),r=Tf(this.getTileSize(t),this.tmpSize_);return ch(i[0]+e.minX*r[0]*o,i[1]+e.minY*r[1]*o,i[0]+(e.maxX+1)*r[0]*o,i[1]+(e.maxY+1)*r[1]*o,n)},Ox.prototype.getTileRangeForExtentAndZ=function(t,e,n){const i=Ax;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i);const o=i[1],r=i[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,i),Zy(o,i[1],r,i[2],n)},Ox.prototype.getTileCoordCenter=function(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Tf(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]+(t[2]+.5)*i[1]*n]},Ox.prototype.getTileCoordExtent=function(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=Tf(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*o[0]*i,s=n[1]+t[2]*o[1]*i;return ch(r,s,r+o[0]*i,s+o[1]*i,e)},Ox.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},Ox.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,o){const r=this.getZForResolution(n),s=n/this.getResolution(r),a=this.getOrigin(r),l=Tf(this.getTileSize(r),this.tmpSize_),h=i?0:.5,u=Math.floor((t-a[0])/n+(i?.5:0)),c=Math.floor((e-a[1])/n+h);let d=s*u/l[0],p=s*c/l[1];return i?(d=Math.ceil(d)-1,p=Math.ceil(p)-1):(d=Math.floor(d),p=Math.floor(p)),Wm(r,d,p,o)},Ox.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,o){const r=this.getOrigin(n),s=this.getResolution(n),a=Tf(this.getTileSize(n),this.tmpSize_),l=i?0:.5,h=Math.floor((t-r[0])/s+(i?.5:0)),u=Math.floor((e-r[1])/s+l);let c=h/a[0],d=u/a[1];return i?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d)),Wm(n,c,d,o)},Ox.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},Ox.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Ox.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Ox.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Ox.prototype.getZForResolution=function(t,e){return Ah(od(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},Ox.prototype.calculateTileRanges_=function(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n};var Nx=Ox;function Gx(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){const o=eh.TOP_LEFT,r=Vx(t,void 0,void 0);return new Nx({extent:t,origin:function(t,e){let n;return e===eh.BOTTOM_LEFT?n=wh(t):e===eh.BOTTOM_RIGHT?n=Ch(t):e===eh.TOP_LEFT?n=Rh(t):e===eh.TOP_RIGHT?n=Ph(t):th(!1,13),n}(t,o),resolutions:r,tileSize:void 0})}(jx(t))}(t),t.setDefaultTileGrid(e)),e}function Vx(t,e,n){const i=void 0!==e?e:pf,o=Sh(t),r=Mh(t),s=Tf(void 0!==n?n:ff),a=Math.max(r/s[0],o/s[1]),l=i+1,h=new Array(l);for(let u=0;u<l;++u)h[u]=a/Math.pow(2,u);return h}function jx(t){let e=(t=gu(t)).getExtent();if(!e){const n=180*Zh[qh.DEGREES]/t.getMetersPerUnit();e=ch(-n,-n,n,n)}return e}const Bx=function(t){P_.call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new Xm(t.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:t.transition}};gl(Bx,P_),Bx.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},Bx.prototype.expireCache=function(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},Bx.prototype.forEachLoadedTile=function(t,e,n,i){const o=this.getTileCacheForProjection(t);if(!o)return!1;let r,s,a,l=!0;for(let h=n.minX;h<=n.maxX;++h)for(let t=n.minY;t<=n.maxY;++t)s=Um(e,h,t),a=!1,o.containsKey(s)&&(a=2===(r=o.get(s)).getState())&&(a=!1!==i(r)),a||(l=!1);return l},Bx.prototype.getGutter=function(t){return 0},Bx.prototype.getKey=function(){return this.key_},Bx.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},Bx.prototype.getOpaque=function(t){return this.opaque_},Bx.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},Bx.prototype.getTile=function(t,e,n,i,o){},Bx.prototype.getTileGrid=function(){return this.tileGrid},Bx.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Gx(t)},Bx.prototype.getTileCacheForProjection=function(t){const e=this.getProjection();return e&&!vu(e,t)?null:this.tileCache},Bx.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},Bx.prototype.getTilePixelSize=function(t,e,n){const i=this.getTileGridForProjection(n),o=this.getTilePixelRatio(e),r=Tf(i.getTileSize(t),this.tmpSize);return 1==o?r:(s=r,a=o,void 0===(l=this.tmpSize)&&(l=[0,0]),l[0]=s[0]*a+.5|0,l[1]=s[1]*a+.5|0,l);var s,a,l},Bx.prototype.getTileCoordForTileUrlFunction=function(t,e){const n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){const i=e[0],o=t.getTileCoordCenter(e),r=jx(n);if(ah(r,o))return e;{const e=Mh(r),n=Math.ceil((r[0]-o[0])/e);return o[0]+=e*n,t.getTileCoordForCoordAndZ(o,i)}}(i,t,n)),function(t,e){const n=t[0],i=t[1],o=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const r=e.getExtent();let s;return!(s=r?e.getTileRangeForExtentAndZ(r,n):e.getFullTileRange(n))||s.containsXY(i,o)}(t,i)?t:null},Bx.prototype.refresh=function(){this.tileCache.clear(),this.changed()},Bx.prototype.useTile=Ol;const zx=function(t,e){jl.call(this,t),this.tile=e};gl(zx,jl);var Hx=Bx;const Wx=function(t){Hx.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Dx,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}};gl(Wx,Hx),Wx.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},Wx.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},Wx.prototype.getUrls=function(){return this.urls},Wx.prototype.handleTileChange=function(t){const e=t.target,n=yl(e),i=e.getState();let o;1==i?(this.tileLoadingKeys_[n]=!0,o="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=3==i?"tileloaderror":2==i||5==i?"tileloadend":void 0),void 0!=o&&this.dispatchEvent(new zx(o,e))},Wx.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},Wx.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},Wx.prototype.setUrl=function(t){const e=this.urls=function(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),o=n[2].charCodeAt(0);let r;for(r=i;r<=o;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=n=/\{(\d+)-(\d+)\}/.exec(t)){const i=parseInt(n[2],10);for(let o=parseInt(n[1],10);o<=i;o++)e.push(t.replace(n[0],o.toString()));return e}return e.push(t),e}(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Fx(e,this.tileGrid),t)},Wx.prototype.setUrls=function(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Fx(t,this.tileGrid),e)},Wx.prototype.useTile=function(t,e,n){const i=Um(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)};var Ux=Wx;const Yx=function(t){Ux.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Kx,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Mp,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};function Kx(t,e){t.getImage().src=e}gl(Yx,Ux),Yx.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},Yx.prototype.expireCache=function(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection){const t=this.tileCacheForProjection[i];t.expireCache(t==n?e:{})}},Yx.prototype.getGutter=function(t){return this.getProjection()&&t&&!vu(this.getProjection(),t)?0:this.getGutterInternal()},Yx.prototype.getGutterInternal=function(){return 0},Yx.prototype.getOpaque=function(t){return!(this.getProjection()&&t&&!vu(this.getProjection(),t))&&Ux.prototype.getOpaque.call(this,t)},Yx.prototype.getTileGridForProjection=function(t){const e=this.getProjection();if(!this.tileGrid||e&&!vu(e,t)){const e=yl(t).toString();return e in this.tileGridForProjection||(this.tileGridForProjection[e]=Gx(t)),this.tileGridForProjection[e]}return this.tileGrid},Yx.prototype.getTileCacheForProjection=function(t){const e=this.getProjection();if(!e||vu(e,t))return this.tileCache;{const e=yl(t).toString();return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Xm(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}},Yx.prototype.createTile_=function(t,e,n,i,o,r){const s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,o),l=a?this.tileUrlFunction(a,i,o):void 0,h=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=r,Rl(h,Hl.CHANGE,this.handleTileChange,this),h},Yx.prototype.getTile=function(t,e,n,i,o){const r=this.getProjection();if(r&&o&&!vu(r,o)){const s=this.getTileCacheForProjection(o),a=[t,e,n];let l;const h=Ym(a);s.containsKey(h)&&(l=s.get(h));const u=this.getKey();if(l&&l.key==u)return l;{const t=this.getTileGridForProjection(r),e=this.getTileGridForProjection(o),n=this.getTileCoordForTileUrlFunction(a,o),c=new kx(r,t,o,e,a,n,this.getTilePixelRatio(i),this.getGutterInternal(),(function(t,e,n,i){return this.getTileInternal(t,e,n,i,r)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return c.key=u,l?(c.interimTile=l,c.refreshInterimChain(),s.replace(h,c)):s.set(h,c),c}}return this.getTileInternal(t,e,n,i,r||o)},Yx.prototype.getTileInternal=function(t,e,n,i,o){let r=null;const s=Um(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){const l=r;(r=this.createTile_(t,e,n,i,o,a)).interimTile=0==l.getState()?l.interimTile:l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,n,i,o,a),this.tileCache.set(s,r);return r},Yx.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},Yx.prototype.setTileGridForProjection=function(t,e){{const n=gu(t);if(n){const t=yl(n).toString();t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}};var Xx=Yx;const Zx=function(t){const e=t||{},n=void 0!==e.projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function(t){const e={};return xl(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=gu("EPSG:3857").getExtent()),e.resolutions=Vx(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new Nx(e)}({extent:jx(n),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});Xx.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};gl(Zx,Xx);var qx=Zx;const Jx=function(t){const e=t||{};let n;qx.call(this,{attributions:n=void 0!==e.attributions?e.attributions:['&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'],cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",opaque:void 0===e.opaque||e.opaque,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX})};gl(Jx,qx);var Qx=Jx;const $x=function(t,e,n,i,o,r){zl.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==i&&(this.image_.crossOrigin=i),this.canvas_=r?document.createElement("CANVAS"):null,this.color_=r,this.imageListenerKeys_=null,this.imageState_=o,this.size_=n,this.src_=e,this.tainting_=!1,this.imageState_==mc.LOADED&&this.determineTainting_()};gl($x,zl),$x.prototype.determineTainting_=function(){const t=Zu(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},$x.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Hl.CHANGE)},$x.prototype.handleImageError_=function(){this.imageState_=mc.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},$x.prototype.handleImageLoad_=function(){this.imageState_=mc.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},$x.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},$x.prototype.getImageState=function(){return this.imageState_},$x.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){const t=this.size_[0],e=this.size_[1],n=Zu(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},$x.prototype.getSize=function(){return this.size_},$x.prototype.getSrc=function(){return this.src_},$x.prototype.load=function(){if(this.imageState_==mc.IDLE){this.imageState_=mc.LOADING,this.imageListenerKeys_=[Pl(this.image_,Hl.ERROR,this.handleImageError_,this),Pl(this.image_,Hl.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},$x.prototype.replaceColor_=function(){if(this.tainting_||null===this.color_)return;this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;const t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);const e=t.getImageData(0,0,this.image_.width,this.image_.height),n=e.data,i=this.color_[0]/255,o=this.color_[1]/255,r=this.color_[2]/255;for(let s=0,a=n.length;s<a;s+=4)n[s]*=i,n[s+1]*=o,n[s+2]*=r;t.putImageData(e,0,0)},$x.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(kl),this.imageListenerKeys_=null};const tb=function(t){const e=t||{};this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const n=void 0!==e.img?e.img:null,i=void 0!==e.imgSize?e.imgSize:null;let o=e.src;th(!(void 0!==o&&n),4),th(!n||n&&i,5),void 0!==o&&0!==o.length||!n||(o=n.src||yl(n).toString()),th(void 0!==o&&o.length>0,6);const r=void 0!==e.src?mc.IDLE:mc.LOADED;this.color_=void 0!==e.color?Uu(e.color):null,this.iconImage_=function(t,e,n,i,o,r){let s=Ly.get(e,i,r);return s||(s=new $x(t,e,n,i,o,r),Ly.set(e,i,r,s)),s}(n,o,i,this.crossOrigin_,r,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,Vc.call(this,{opacity:void 0!==e.opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,snapToPixel:void 0===e.snapToPixel||e.snapToPixel,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView})};gl(tb,Vc),tb.prototype.clone=function(){return new tb({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},tb.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;let t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},tb.prototype.getColor=function(){return this.color_},tb.prototype.getImage=function(t){return this.iconImage_.getImage(t)},tb.prototype.getImageSize=function(){return this.iconImage_.getSize()},tb.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},tb.prototype.getImageState=function(){return this.iconImage_.getImageState()},tb.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},tb.prototype.getOrigin=function(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},tb.prototype.getSrc=function(){return this.iconImage_.getSrc()},tb.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},tb.prototype.listenImageChange=function(t,e){return Rl(this.iconImage_,Hl.CHANGE,t,e)},tb.prototype.load=function(){this.iconImage_.load()},tb.prototype.unlistenImageChange=function(t,e){Ml(this.iconImage_,Hl.CHANGE,t,e)};var eb=n("1SRF"),nb=function(){function t(t){this.http=t,this.sights=[],this.maxYear=100,this.minYear=0,this.count=0,this.currentYear=0,this.filterType="Total",this.propability=0}return t.prototype.ngAfterViewInit=function(){var t=this;document.getElementById("myRange").oninput=function(e){t.currentYear=parseInt(e.target.value,10),t.filterByDate()},this.vectorSource=new A_({}),this.predictionSource=new A_({}),this.centroidSource=new A_({}),this.currentPredictionSource=new A_({}),this.view=new xf({center:wu([-97.9411111,29.8830556],"EPSG:4326","EPSG:3857"),zoom:4}),this.map=new Bm({target:"map",layers:[new Sx({source:new Qx}),new w_({source:this.centroidSource,style:this.createStyle("orange","orange",5)}),new w_({source:this.currentPredictionSource,style:this.createStyle("red","red",10)}),new w_({source:this.vectorSource}),new w_({source:this.predictionSource,style:this.createStyle("green","green",3)})],view:this.view}),this.http.get("./assets/complete.json").subscribe(function(e){e.forEach(function(t){t.datetime=new Date(t.datetime)}),t.sights=e,t.sights.sort(function(t,e){return t.datetime>e.datetime?1:t.datetime<e.datetime?-1:0}),t.minYear=t.sights[0].datetime.getFullYear(),t.currentYear=t.sights[0].datetime.getFullYear(),t.maxYear=t.sights[t.sights.length-1].datetime.getFullYear(),t.filterByDate(),setInterval(function(){t.checkPropability()},1e3)})},t.prototype.filterByDate=function(){var t,e=this,n=new Date(this.currentYear+"-12-31"),i=[];this.vectorSource.clear(),t=this.sights.filter("Total"===this.filterType?function(t){return t.datetime<=n}:function(t){return t.datetime.getFullYear()===e.currentYear}),this.count=t.length;for(var o=0,r=t;o<r.length;o++){var s=r[o],a=new ed({shape:s.shape,datetime:s.datetime,country:s.country,city:s.city,state:s.state,duration:s.duration,geometry:this.createPoint(s.longitude,s.latitude)});i.push(a)}this.vectorSource.addFeatures(i)},t.prototype.changeType=function(){this.filterType="Total"===this.filterType?"Yearly":"Total",this.filterByDate()},t.prototype.getPrediction=function(t){if(this.centroidSource.clear(),this.predictionSource.clear(),t){t=new Date(t);for(var e=this.sights.filter(function(e){return e.datetime.getDate()===t.getDate()&&e.datetime.getMonth()===t.getMonth()}),n=[],i=0,o=e;i<o.length;i++)n.push([(u=o[i]).longitude,u.latitude]);eb.data(n);for(var r=0,s=eb.clusters().map(function(t){return t.centroid});r<s.length;r++){var a=s[r];this.centroidSource.addFeature(new ed({datetime:t,geometry:this.createPoint(a[0],a[1])}))}for(var l=0,h=e;l<h.length;l++){var u;this.predictionSource.addFeature(new ed({datetime:t,duration:(u=h[l]).duration,geometry:this.createPoint(u.longitude,u.latitude)}))}}},t.prototype.getAvg=function(t,e){var n=t.map(function(t){return t[e]});return n.reduce(function(t,e){return t+e})/n.length},t.prototype.createStyle=function(t,e,n){return new $c({fill:new Uc({color:t}),stroke:new Kc({color:e,width:2}),image:new Hc({radius:n,fill:new Uc({color:t})})})},t.prototype.checkPropability=function(){var t=new Date,e=this.sights.filter(function(e){return e.datetime.getHours()===t.getHours()&&e.datetime.getMinutes()===t.getMinutes()}),n=this.sights.filter(function(e){return e.datetime.getDate()===t.getDate()});if(n.length&&(this.propability=e.length/n.length*100,this.propability<0&&(this.propability=0)),e.length){var i=new function(){};i.latitude=this.getAvg(e,"latitude"),i.longitude=this.getAvg(e,"longitude"),i.duration=this.getAvg(e,"duration");var o=this.createPoint(i.longitude,i.latitude);this.currentPredictionSource.clear(),this.currentPredictionSource.addFeature(new ed({datetime:t,duration:i.duration,geometry:o}))}},t.prototype.createPoint=function(t,e){return new Fd(wu([t,e],"EPSG:4326","EPSG:3857"))},t}(),ib=function(){},ob=void 0,rb=["en",[["a","p"],["AM","PM"],ob],[["AM","PM"],ob,ob],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ob,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ob,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ob,"{1} 'at' {0}",ob],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],sb={},ab=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),lb=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),hb=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),ub=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),cb=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function db(t,e,n){var i=bb(t);return vb(vb([i[3],i[4]],e),n)}function pb(t,e,n){var i=bb(t);return vb(vb([i[5],i[6]],e),n)}function fb(t,e){return vb(bb(t)[10],e)}function gb(t,e){return vb(bb(t)[11],e)}function _b(t,e){return vb(bb(t)[12],e)}function yb(t,e){var n=bb(t),i=n[13][e];if(void 0===i){if(e===cb.CurrencyDecimal)return n[13][cb.Decimal];if(e===cb.CurrencyGroup)return n[13][cb.Group]}return i}function mb(t){if(!t[19])throw new Error('Missing extra locale data for the locale "'+t[0]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function vb(t,e){for(var n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function xb(t){var e=u(t.split(":"),2);return{hours:+e[0],minutes:+e[1]}}function bb(t){var e=t.toLowerCase().replace(/_/g,"-"),n=sb[e];if(n)return n;var i=e.split("-")[0];if(n=sb[i])return n;if("en"===i)return rb;throw new Error('Missing locale data for the locale "'+t+'".')}var wb=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Cb={},Eb=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Tb=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Sb=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Ib=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function Rb(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function Pb(t,e,n,i,o){void 0===n&&(n="-");var r="";(t<0||o&&t<=0)&&(o?t=1-t:(t=-t,r=n));for(var s=String(t);s.length<e;)s="0"+s;return i&&(s=s.substr(s.length-e)),r+s}function Mb(t,e,n,i,o){return void 0===n&&(n=0),void 0===i&&(i=!1),void 0===o&&(o=!1),function(r,s){var a,l=function(t,e){switch(t){case Sb.FullYear:return e.getFullYear();case Sb.Month:return e.getMonth();case Sb.Date:return e.getDate();case Sb.Hours:return e.getHours();case Sb.Minutes:return e.getMinutes();case Sb.Seconds:return e.getSeconds();case Sb.FractionalSeconds:return e.getMilliseconds();case Sb.Day:return e.getDay();default:throw new Error('Unknown DateType value "'+t+'".')}}(t,r);if((n>0||l>-n)&&(l+=n),t===Sb.Hours)0===l&&-12===n&&(l=12);else if(t===Sb.FractionalSeconds)return a=e,Pb(l,3).substr(0,a);var h=yb(s,cb.MinusSign);return Pb(l,e,h,i,o)}}function kb(t,e,n,i){return void 0===n&&(n=lb.Format),void 0===i&&(i=!1),function(o,r){return function(t,e,n,i,o,r){switch(n){case Ib.Months:return pb(e,o,i)[t.getMonth()];case Ib.Days:return db(e,o,i)[t.getDay()];case Ib.DayPeriods:var s=t.getHours(),a=t.getMinutes();if(r){var l,h=function(t){var e=bb(t);return mb(e),(e[19][2]||[]).map(function(t){return"string"==typeof t?xb(t):[xb(t[0]),xb(t[1])]})}(e),u=function(t,e,n){var i=bb(t);return mb(i),vb(vb([i[19][0],i[19][1]],e)||[],n)||[]}(e,o,i);if(h.forEach(function(t,e){if(Array.isArray(t)){var n=t[0],i=t[1],o=i.hours;s>=n.hours&&a>=n.minutes&&(s<o||s===o&&a<i.minutes)&&(l=u[e])}else t.hours===s&&t.minutes===a&&(l=u[e])}),l)return l}return function(t,e,n){var i=bb(t);return vb(vb([i[1],i[2]],e),n)}(e,o,i)[s<12?0:1];case Ib.Eras:return function(t,e){return vb(bb(t)[7],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,r,t,e,n,i)}}function Lb(t){return function(e,n,i){var o=-1*i,r=yb(n,cb.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(t){case Tb.Short:return(o>=0?"+":"")+Pb(s,2,r)+Pb(Math.abs(o%60),2,r);case Tb.ShortGMT:return"GMT"+(o>=0?"+":"")+Pb(s,1,r);case Tb.Long:return"GMT"+(o>=0?"+":"")+Pb(s,2,r)+":"+Pb(Math.abs(o%60),2,r);case Tb.Extended:return 0===i?"Z":(o>=0?"+":"")+Pb(s,2,r)+":"+Pb(Math.abs(o%60),2,r);default:throw new Error('Unknown zone width "'+t+'"')}}}var Fb=0,Db=4;function Ob(t,e){return void 0===e&&(e=!1),function(n,i){var o,r,s,a;if(e){var l=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,h=n.getDate();o=1+Math.floor((h+l)/7)}else{var u=(s=n.getFullYear(),a=new Date(s,Fb,1).getDay(),new Date(s,0,1+(a<=Db?Db:Db+7)-a)),c=(r=n,new Date(r.getFullYear(),r.getMonth(),r.getDate()+(Db-r.getDay()))).getTime()-u.getTime();o=1+Math.round(c/6048e5)}return Pb(o,t,yb(i,cb.MinusSign))}}var Ab={};function Nb(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Gb(t){return t instanceof Date&&!isNaN(t.valueOf())}var Vb=new ct("UseV4Plurals"),jb=function(){},Bb=function(t){function e(e,n){var i=t.call(this)||this;return i.locale=e,i.deprecatedPluralFn=n,i}return o(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return bb(t)[18]}(e||this.locale)(t)){case ab.Zero:return"zero";case ab.One:return"one";case ab.Two:return"two";case ab.Few:return"few";case ab.Many:return"many";default:return"other"}},s([a(0,Tt(Qn)),a(1,St()),a(1,Tt(Vb))],e)}(jb);function zb(t,e){var n,i;e=encodeURIComponent(e);try{for(var o=h(t.split(";")),r=o.next();!r.done;r=o.next()){var s=r.value,a=s.indexOf("="),l=u(-1==a?[s,""]:[s.slice(0,a),s.slice(a+1)],2),c=l[1];if(l[0].trim()===e)return decodeURIComponent(c)}}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}var Hb=function(){function t(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),Wb=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){un()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,i,o){if(null==t.previousIndex){var r=e._viewContainer.createEmbeddedView(e._template,new Hb(null,e._ngForOf,-1,-1),o),s=new Ub(t,r);n.push(s)}else null==o?e._viewContainer.remove(i):(r=e._viewContainer.get(i),e._viewContainer.move(r,o),s=new Ub(t,r),n.push(s))});for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);i=0;for(var o=this._viewContainer.length;i<o;i++){var r=this._viewContainer.get(i);r.context.index=i,r.context.count=o,r.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),Ub=function(t,e){this.record=t,this.view=e},Yb=function(){function t(t,e){this._viewContainer=t,this._context=new Kb,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){Xb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){Xb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),Kb=function(){this.$implicit=null,this.ngIf=null};function Xb(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+wt(e)+"'.")}var Zb=function(){function t(t){this._viewContainerRef=t}return t.prototype.ngOnChanges=function(t){this._shouldRecreateView(t)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)},t.prototype._shouldRecreateView=function(t){var e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)},t.prototype._hasContextShapeChanged=function(t){var e,n,i=Object.keys(t.previousValue||{}),o=Object.keys(t.currentValue||{});if(i.length===o.length){try{for(var r=h(o),s=r.next();!s.done;s=r.next())if(-1===i.indexOf(s.value))return!0}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return!1}return!0},t.prototype._updateExistingContext=function(t){var e,n;try{for(var i=h(Object.keys(t)),o=i.next();!o.done;o=i.next()){var r=o.value;this._viewRef.context[r]=this.ngTemplateOutletContext[r]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t}(),qb=function(){},Jb=new ct("DocumentToken"),Qb="server",$b=new M(function(t){return t.complete()});var tw=null;function ew(){return tw}var nw,iw={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},ow={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};_t.Node&&(nw=_t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var sw,aw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,tw||(tw=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var i;(i=t)[e].apply(i,c(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return iw},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return nw.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(t,e),i},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var i=this.getStyle(t,e)||"";return n?i==n:i.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,i=0;i<n.length;i++){var o=n.item(i);e.set(o.name,o.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,i){t.setAttributeNS(e,n,i)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&rw.hasOwnProperty(e)&&(e=rw[e]))}return ow[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=lw||(lw=document.querySelector("base"))?lw.getAttribute("href"):null;return null==n?null:(e=n,sw||(sw=document.createElement("a")),sw.setAttribute("href",e),"/"===sw.pathname.charAt(0)?sw.pathname:"/"+sw.pathname)},e.prototype.resetBaseElement=function(){lw=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return zb(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],o=0;o<i.length;o++)if(null!=e.getStyle(n,i[o]+"AnimationName")){e._animationPrefix="-"+i[o].toLowerCase()+"-";break}var r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(r).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=r[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return o(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),lw=null,hw=Jb;function uw(){return!!window.history.pushState}var cw=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return o(e,t),e.prototype._init=function(){this.location=ew().getLocation(),this._history=ew().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return ew().getBaseHref(this._doc)},e.prototype.onPopState=function(t){ew().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){ew().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){uw()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){uw()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},s([a(0,Tt(hw)),l("design:paramtypes",[Object])],e)}(ib),dw=new ct("TRANSITION_ID"),pw=[{provide:xe,useFactory:function(t,e,n){return function(){n.get(be).donePromise.then(function(){var n=ew();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[dw,hw,Ot],multi:!0}],fw=function(){function t(){}return t.init=function(){var e;e=new t,sn=e},t.prototype.addToWindow=function(t){_t.getAngularTestability=function(e,n){void 0===n&&(n=!0);var i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},_t.getAllAngularTestabilities=function(){return t.getAllTestabilities()},_t.getAllAngularRootElements=function(){return t.getAllRootElements()},_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(function(t){var e=_t.getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?ew().isShadowRoot(e)?this.findTestabilityInTree(t,ew().getHost(e),!0):this.findTestabilityInTree(t,ew().parentElement(e),!0):null},t}();function gw(t,e){"undefined"!=typeof COMPILED&&COMPILED||((_t.ng=_t.ng||{})[t]=e)}var _w={ApplicationRef:_n,NgZone:Ze};function yw(t){return Pn(t)}var mw=new ct("EventManagerPlugins"),vw=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,i=0;i<n.length;i++){var o=n[i];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error("No event manager plugin found for event "+t)},s([a(0,Tt(mw))],t)}(),xw=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var i=ew().getGlobalEventTarget(this._doc,t);if(!i)throw new Error("Unsupported event target "+i+" for event "+e);return this.addEventListener(i,e,n)},t}(),bw=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),ww=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return o(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var i=n._doc.createElement("style");i.textContent=t,n._styleNodes.add(e.appendChild(i))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return ew().remove(t)})},s([a(0,Tt(hw))],e)}(bw),Cw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ew=/%COMP%/g,Tw="_nghost-%COMP%",Sw="_ngcontent-%COMP%";function Iw(t,e,n){for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?Iw(t,o,n):(o=o.replace(Ew,t),n.push(o))}return n}function Rw(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Pw=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new Mw(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case $t.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Dw(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case $t.Native:case $t.ShadowDom:return new Ow(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=Iw(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),Mw=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Cw[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,i){if(i){e=i+":"+e;var o=Cw[i];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var i=Cw[n];i?t.removeAttributeNS(i,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,i){i&vn.DashCase?t.style.setProperty(e,n,i&vn.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&vn.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){Lw(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Lw(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Rw(n)):this.eventManager.addEventListener(t,e,Rw(n))},t}(),kw="@".charCodeAt(0);function Lw(t,e){if(t.charCodeAt(0)===kw)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Fw,Dw=function(t){function e(e,n,i){var o=t.call(this,e)||this;o.component=i;var r=Iw(i.id,i.styles,[]);return n.addStyles(r),o.contentAttr=Sw.replace(Ew,i.id),o.hostAttr=Tw.replace(Ew,i.id),o}return o(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var i=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,i,this.contentAttr,""),i},e}(Mw),Ow=function(t){function e(e,n,i,o){var r=t.call(this,e)||this;r.sharedStylesHost=n,r.hostEl=i,r.component=o,r.shadowRoot=o.encapsulation===$t.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),r.sharedStylesHost.addHost(r.shadowRoot);for(var s=Iw(o.id,o.styles,[]),a=0;a<s.length;a++){var l=document.createElement("style");l.textContent=s[a],r.shadowRoot.appendChild(l)}return r}return o(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,i){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,i)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(Mw),Aw="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Nw=Aw("addEventListener"),Gw=Aw("removeEventListener"),Vw={},jw="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Aw("BLACK_LISTED_EVENTS")]&&(Fw={});var Bw=function(t){return!!Fw&&Fw.hasOwnProperty(t)},zw=function(t){var e=Vw[t.type];if(e){var n=this[e];if(n){var i=[t];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,i):s.handler.apply(this,i);for(var o=n.slice(),r=0;r<o.length&&!0!==t[jw];r++){var s;(s=o[r]).zone!==Zone.current?s.zone.run(s.handler,this,i):s.handler.apply(this,i)}}}},Hw=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.ngZone=n,i&&function(t){return t===Qb}(i)||o.patchEvent(),o}return o(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[jw]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var i=this,o=n;if(!t[Nw]||Ze.isInAngularZone()&&!Bw(e))t.addEventListener(e,o,!1);else{var r=Vw[e];r||(r=Vw[e]=Aw("ANGULAR"+e+"FALSE"));var s=t[r],a=s&&s.length>0;s||(s=t[r]=[]);var l=Bw(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:o});else{for(var h=!1,u=0;u<s.length;u++)if(s[u].handler===o){h=!0;break}h||s.push({zone:l,handler:o})}a||t[Nw](e,zw,!1)}return function(){return i.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var i=t[Gw];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);var o=Vw[e],r=o&&t[o];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);for(var s=!1,a=0;a<r.length;a++)if(r[a].handler===n){s=!0,r.splice(a,1);break}s?0===r.length&&i.apply(t,[e,zw,!1]):t.removeEventListener.apply(t,[e,n,!1])},s([a(0,Tt(hw)),a(2,St()),a(2,Tt(Se))],e)}(xw),Ww={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Uw=new ct("HammerGestureConfig"),Yw=new ct("HammerLoader"),Kw=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Xw=function(t){function e(e,n,i,o){var r=t.call(this,e)||this;return r._config=n,r.console=i,r.loader=o,r}return o(e,t),e.prototype.supports=function(t){return!(!Ww.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var i=this,o=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var r=!1,s=function(){r=!0};return this.loader().then(function(){if(!window.Hammer)return i.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=function(){});r||(s=i.addEventListener(t,e,n))}).catch(function(){i.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),s=function(){}}),function(){s()}}return o.runOutsideAngular(function(){var r=i._config.buildHammer(t),s=function(t){o.runGuarded(function(){n(t)})};return r.on(e,s),function(){r.off(e,s),"function"==typeof r.destroy&&r.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},s([a(0,Tt(hw)),a(1,Tt(Uw)),a(3,St()),a(3,Tt(Yw))],e)}(xw),Zw=["alt","control","meta","shift"],qw={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Jw=function(t){function e(e){return t.call(this,e)||this}var n;return o(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,i){var o=n.parseEventName(e),r=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return ew().onAndCancel(t,o.domEventName,r)})},e.parseEventName=function(t){var e=t.toLowerCase().split("."),i=e.shift();if(0===e.length||"keydown"!==i&&"keyup"!==i)return null;var o=n._normalizeKey(e.pop()),r="";if(Zw.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),r+=t+".")}),r+=o,0!=e.length||0===o.length)return null;var s={};return s.domEventName=i,s.fullKey=r,s},e.getEventFullKey=function(t){var e="",n=ew().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Zw.forEach(function(i){i!=n&&(0,qw[i])(t)&&(e+=i+".")}),e+=n},e.eventCallback=function(t,e,i){return function(o){n.getEventFullKey(o)===t&&i.runGuarded(function(){return e(o)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},n=s([a(0,Tt(hw))],e)}(xw),Qw=function(){},$w=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return o(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case Ti.NONE:return e;case Ti.HTML:return e instanceof eC?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{hi=hi||new ii(t);var i=e?String(e):"";n=hi.getInertBodyElement(i);var o=5,r=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=r,r=n.innerHTML,n=hi.getInertBodyElement(i)}while(i!==r);var s=new mi,a=s.sanitizeChildren(wi(n)||n);return un()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),a}finally{if(n)for(var l=wi(n)||n;l.firstChild;)l.removeChild(l.firstChild)}}(this._doc,String(e)));case Ti.STYLE:return e instanceof nC?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Ei);return e&&si(e[1])===e[1]||t.match(Ci)&&function(t){for(var e=!0,n=!0,i=0;i<t.length;i++){var o=t.charAt(i);"'"===o&&n?e=!e:'"'===o&&e&&(n=!n)}return e&&n}(t)?t:(un()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case Ti.SCRIPT:if(e instanceof iC)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Ti.URL:return e instanceof rC||e instanceof oC?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),si(String(e)));case Ti.RESOURCE_URL:if(e instanceof rC)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof tC)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new eC(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new nC(t)},e.prototype.bypassSecurityTrustScript=function(t){return new iC(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new oC(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new rC(t)},s([a(0,Tt(hw))],e)}(Qw),tC=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),eC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(tC),nC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"Style"},e}(tC),iC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"Script"},e}(tC),oC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"URL"},e}(tC),rC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(tC),sC=dn(Jn,"browser",[{provide:Se,useValue:"browser"},{provide:Te,useValue:function(){aw.makeCurrent(),fw.init()},multi:!0},{provide:ib,useClass:cw,deps:[hw]},{provide:hw,useFactory:function(){return document},deps:[]}]);function aC(){return new ae}var lC=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:we,useValue:t.appId},{provide:dw,useExisting:we},pw]}},e=s([a(0,St()),a(0,Rt()),a(0,Tt(e))],t)}();"undefined"!=typeof window&&window;var hC=new ct("NgValueAccessor"),uC=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name},t}(),cC=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},s([a(2,St()),a(2,Pt())],t)}();function dC(t,e){return null==t?""+e:("string"==typeof e&&(e="'"+e+"'"),e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}var pC=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._value=t,this._setElementValue(dC(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._select?(this._value=t,this._setElementValue(dC(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype._setSelected=function(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},s([a(2,St()),a(2,Pt())],t)}(),fC=function(){},gC=function(){};function _C(t,e,n,i){return f(n)&&(i=n,n=void 0),i?_C(t,e,n).pipe(Z(function(t){return d(t)?i.apply(void 0,t):i(t)})):new M(function(i){!function t(e,n,i,o,r){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,i,r),s=function(){return a.removeEventListener(n,i,r)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var l=e;e.on(n,i),s=function(){return l.off(n,i)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var h=e;e.addListener(n,i),s=function(){return h.removeListener(n,i)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var u=0,c=e.length;u<c;u++)t(e[u],n,i,o,r)}o.add(s)}(t,e,function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},i,n)})}function yC(t,e){return function(n){return n.lift(new mC(t,e))}}Object;var mC=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new vC(t,this.predicate,this.thisArg))},t}(),vC=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(I);function xC(t){return function(e){return e.lift(new bC(t))}}var bC=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new wC(t),i=K(n,this.notifier);return i&&!i.closed?(n.add(i),e.subscribe(n)):n},t}(),wC=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.complete()},e.prototype.notifyComplete=function(){},e}(X),CC=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error),EC=function(){function t(t){if(this.total=t,this.total<0)throw new CC}return t.prototype.call=function(t,e){return e.subscribe(new TC(t,this.total))},t}(),TC=function(t){function e(e,n){var i=t.call(this,e)||this;return i.total=n,i.count=0,i}return o(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(I);function SC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new IC(t,n))}}var IC=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new RC(t,this.observables,this.project))},t}(),RC=function(t){function e(e,n,i){var o=t.call(this,e)||this;o.observables=n,o.project=i,o.toRespond=[];var r=n.length;o.values=new Array(r);for(var s=0;s<r;s++)o.toRespond.push(s);for(s=0;s<r;s++){var a=n[s];o.add(K(o,a,a,s))}return o}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.values[n]=e;var r=this.toRespond;if(r.length>0){var s=r.indexOf(n);-1!==s&&r.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(X);function PC(t){return parseInt(""+t,10)}function MC(t){return void 0!==t&&null!==t?""+t:""}function kC(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function LC(t){return void 0!==t&&null!==t}var FC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),DC=function(){function t(){this.dismissible=!0,this.type="warning"}return t.ngInjectableDef=ut({factory:function(){return new t},token:t,providedIn:"root"}),t}(),OC=function(){function t(t,e,n){this._renderer=e,this._element=n,this.close=new Xe,this.dismissible=t.dismissible,this.type=t.type}return t.prototype.closeHandler=function(){this.close.emit(null)},t.prototype.ngOnChanges=function(t){var e=t.type;e&&!e.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+e.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+e.currentValue))},t.prototype.ngOnInit=function(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)},t}(),AC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),NC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),GC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),VC=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),jC=function(){function t(t,e,n){this.year=kC(t)?t:null,this.month=kC(e)?e:null,this.day=kC(n)?n:null}return t.from=function(e){return e instanceof t?e:e?new t(e.year,e.month,e.day):null},t.prototype.equals=function(t){return t&&this.year===t.year&&this.month===t.month&&this.day===t.day},t.prototype.before=function(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)},t.prototype.after=function(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)},t}();function BC(t){return new jC(t.getFullYear(),t.getMonth()+1,t.getDate())}function zC(t){var e=new Date(t.year,t.month-1,t.day,12);return isNaN(e.getTime())||e.setFullYear(t.year),e}function HC(){return new UC}var WC=function(){function t(){}return t.ngInjectableDef=ut({factory:HC,token:t,providedIn:"root"}),t}(),UC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDaysPerWeek=function(){return 7},e.prototype.getMonths=function(){return[1,2,3,4,5,6,7,8,9,10,11,12]},e.prototype.getWeeksPerMonth=function(){return 6},e.prototype.getNext=function(t,e,n){void 0===e&&(e="d"),void 0===n&&(n=1);var i=zC(t);switch(e){case"y":return new jC(t.year+n,1,1);case"m":i=new Date(t.year,t.month+n-1,1,12);break;case"d":i.setDate(i.getDate()+n);break;default:return t}return BC(i)},e.prototype.getPrev=function(t,e,n){return void 0===e&&(e="d"),void 0===n&&(n=1),this.getNext(t,e,-n)},e.prototype.getWeekday=function(t){var e=zC(t).getDay();return 0===e?7:e},e.prototype.getWeekNumber=function(t,e){7===e&&(e=0);var n=zC(t[(11-e)%7]);n.setDate(n.getDate()+4-(n.getDay()||7));var i=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((i-n.getTime())/864e5)/7)+1},e.prototype.getToday=function(){return BC(new Date)},e.prototype.isValid=function(t){if(!(t&&kC(t.year)&&kC(t.month)&&kC(t.day)))return!1;if(0===t.year)return!1;var e=zC(t);return!isNaN(e.getTime())&&e.getFullYear()===t.year&&e.getMonth()+1===t.month&&e.getDate()===t.day},e}(WC);function YC(t,e){return!function(t,e){return!t&&!e||!!t&&!!e&&t.equals(e)}(t,e)}function KC(t,e,n){return t&&e&&t.before(e)?e:t&&n&&t.after(n)?n:t}function XC(t,e){var n=e.minDate,i=e.maxDate,o=e.disabled,r=e.markDisabled;return!(!LC(t)||o||r&&r(t,{year:t.year,month:t.month})||n&&t.before(n)||i&&t.after(i))}var ZC=function(){function t(){}return t.prototype.getDayNumerals=function(t){return""+t.day},t.prototype.getWeekNumerals=function(t){return""+t},t.prototype.getYearNumerals=function(t){return""+t},t.ngInjectableDef=ut({factory:function(){return t=Jt(Qn),new qC(t);var t},token:t,providedIn:"root"}),t}(),qC=function(t){function e(e){var n=t.call(this)||this;n._locale=e;var i=db(e,lb.Standalone,hb.Short);return n._weekdaysShort=i.map(function(t,e){return i[(e+1)%7]}),n._monthsShort=pb(e,lb.Standalone,hb.Abbreviated),n._monthsFull=pb(e,lb.Standalone,hb.Wide),n}return o(e,t),e.prototype.getWeekdayShortName=function(t){return this._weekdaysShort[t-1]},e.prototype.getMonthShortName=function(t){return this._monthsShort[t-1]},e.prototype.getMonthFullName=function(t){return this._monthsFull[t-1]},e.prototype.getDayAriaLabel=function(t){return function(t,e,n,i){var o=function(t){if(Gb(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();var e,n=parseFloat(t);if(!isNaN(t-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){var i=u(t.split("-").map(function(t){return+t}),3);return new Date(i[0],i[1]-1,i[2])}if(e=t.match(wb))return function(t){var e=new Date(0),n=0,i=0,o=t[8]?e.setUTCFullYear:e.setFullYear,r=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),o.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));var s=Number(t[4]||0)-n,a=Number(t[5]||0)-i,l=Number(t[6]||0),h=Math.round(1e3*parseFloat("0."+(t[7]||0)));return r.call(e,s,a,l,h),e}(e)}var o=new Date(t);if(!Gb(o))throw new Error('Unable to convert "'+t+'" into a date');return o}(t);e=function t(e,n){var i=function(t){return bb(t)[0]}(e);if(Cb[i]=Cb[i]||{},Cb[i][n])return Cb[i][n];var o="";switch(n){case"shortDate":o=fb(e,ub.Short);break;case"mediumDate":o=fb(e,ub.Medium);break;case"longDate":o=fb(e,ub.Long);break;case"fullDate":o=fb(e,ub.Full);break;case"shortTime":o=gb(e,ub.Short);break;case"mediumTime":o=gb(e,ub.Medium);break;case"longTime":o=gb(e,ub.Long);break;case"fullTime":o=gb(e,ub.Full);break;case"short":var r=t(e,"shortTime"),s=t(e,"shortDate");o=Rb(_b(e,ub.Short),[r,s]);break;case"medium":var a=t(e,"mediumTime"),l=t(e,"mediumDate");o=Rb(_b(e,ub.Medium),[a,l]);break;case"long":var h=t(e,"longTime"),u=t(e,"longDate");o=Rb(_b(e,ub.Long),[h,u]);break;case"full":var c=t(e,"fullTime"),d=t(e,"fullDate");o=Rb(_b(e,ub.Full),[c,d])}return o&&(Cb[i][n]=o),o}(n,e)||e;for(var r,s=[];e;){if(!(r=Eb.exec(e))){s.push(e);break}var a=(s=s.concat(r.slice(1))).pop();if(!a)break;e=a}var l=o.getTimezoneOffset();i&&(l=Nb(i,l),o=function(t,e,n){var i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Nb(e,i)-i))}(o,i));var h="";return s.forEach(function(t){var e=function(t){if(Ab[t])return Ab[t];var e;switch(t){case"G":case"GG":case"GGG":e=kb(Ib.Eras,hb.Abbreviated);break;case"GGGG":e=kb(Ib.Eras,hb.Wide);break;case"GGGGG":e=kb(Ib.Eras,hb.Narrow);break;case"y":e=Mb(Sb.FullYear,1,0,!1,!0);break;case"yy":e=Mb(Sb.FullYear,2,0,!0,!0);break;case"yyy":e=Mb(Sb.FullYear,3,0,!1,!0);break;case"yyyy":e=Mb(Sb.FullYear,4,0,!1,!0);break;case"M":case"L":e=Mb(Sb.Month,1,1);break;case"MM":case"LL":e=Mb(Sb.Month,2,1);break;case"MMM":e=kb(Ib.Months,hb.Abbreviated);break;case"MMMM":e=kb(Ib.Months,hb.Wide);break;case"MMMMM":e=kb(Ib.Months,hb.Narrow);break;case"LLL":e=kb(Ib.Months,hb.Abbreviated,lb.Standalone);break;case"LLLL":e=kb(Ib.Months,hb.Wide,lb.Standalone);break;case"LLLLL":e=kb(Ib.Months,hb.Narrow,lb.Standalone);break;case"w":e=Ob(1);break;case"ww":e=Ob(2);break;case"W":e=Ob(1,!0);break;case"d":e=Mb(Sb.Date,1);break;case"dd":e=Mb(Sb.Date,2);break;case"E":case"EE":case"EEE":e=kb(Ib.Days,hb.Abbreviated);break;case"EEEE":e=kb(Ib.Days,hb.Wide);break;case"EEEEE":e=kb(Ib.Days,hb.Narrow);break;case"EEEEEE":e=kb(Ib.Days,hb.Short);break;case"a":case"aa":case"aaa":e=kb(Ib.DayPeriods,hb.Abbreviated);break;case"aaaa":e=kb(Ib.DayPeriods,hb.Wide);break;case"aaaaa":e=kb(Ib.DayPeriods,hb.Narrow);break;case"b":case"bb":case"bbb":e=kb(Ib.DayPeriods,hb.Abbreviated,lb.Standalone,!0);break;case"bbbb":e=kb(Ib.DayPeriods,hb.Wide,lb.Standalone,!0);break;case"bbbbb":e=kb(Ib.DayPeriods,hb.Narrow,lb.Standalone,!0);break;case"B":case"BB":case"BBB":e=kb(Ib.DayPeriods,hb.Abbreviated,lb.Format,!0);break;case"BBBB":e=kb(Ib.DayPeriods,hb.Wide,lb.Format,!0);break;case"BBBBB":e=kb(Ib.DayPeriods,hb.Narrow,lb.Format,!0);break;case"h":e=Mb(Sb.Hours,1,-12);break;case"hh":e=Mb(Sb.Hours,2,-12);break;case"H":e=Mb(Sb.Hours,1);break;case"HH":e=Mb(Sb.Hours,2);break;case"m":e=Mb(Sb.Minutes,1);break;case"mm":e=Mb(Sb.Minutes,2);break;case"s":e=Mb(Sb.Seconds,1);break;case"ss":e=Mb(Sb.Seconds,2);break;case"S":e=Mb(Sb.FractionalSeconds,1);break;case"SS":e=Mb(Sb.FractionalSeconds,2);break;case"SSS":e=Mb(Sb.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Lb(Tb.Short);break;case"ZZZZZ":e=Lb(Tb.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Lb(Tb.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Lb(Tb.Long);break;default:return null}return Ab[t]=e,e}(t);h+=e?e(o,n,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)},e}(ZC),JC=function(){function t(t,e){this._calendar=t,this._i18n=e,this._model$=new O,this._select$=new O,this._state={disabled:!1,displayMonths:1,firstDayOfWeek:1,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectBoxes:{years:[],months:[]},selectedDate:null}}return Object.defineProperty(t.prototype,"model$",{get:function(){return this._model$.pipe(yC(function(t){return t.months.length>0}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"select$",{get:function(){return this._select$.pipe(yC(function(t){return null!==t}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayTemplateData",{set:function(t){this._state.dayTemplateData!==t&&this._nextState({dayTemplateData:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{set:function(t){this._state.disabled!==t&&this._nextState({disabled:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMonths",{set:function(t){kC(t=PC(t))&&t>0&&this._state.displayMonths!==t&&this._nextState({displayMonths:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{set:function(t){kC(t=PC(t))&&t>=0&&this._state.firstDayOfWeek!==t&&this._nextState({firstDayOfWeek:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusVisible",{set:function(t){this._state.focusVisible===t||this._state.disabled||this._nextState({focusVisible:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDate",{set:function(t){var e=this.toValidDate(t,null);YC(this._state.maxDate,e)&&this._nextState({maxDate:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markDisabled",{set:function(t){this._state.markDisabled!==t&&this._nextState({markDisabled:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minDate",{set:function(t){var e=this.toValidDate(t,null);YC(this._state.minDate,e)&&this._nextState({minDate:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"navigation",{set:function(t){this._state.navigation!==t&&this._nextState({navigation:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outsideDays",{set:function(t){this._state.outsideDays!==t&&this._nextState({outsideDays:t})},enumerable:!0,configurable:!0}),t.prototype.focus=function(t){!this._state.disabled&&this._calendar.isValid(t)&&YC(this._state.focusDate,t)&&this._nextState({focusDate:t})},t.prototype.focusMove=function(t,e){this.focus(this._calendar.getNext(this._state.focusDate,t,e))},t.prototype.focusSelect=function(){XC(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})},t.prototype.open=function(t){var e=this.toValidDate(t,this._calendar.getToday());this._state.disabled||this._nextState({firstDate:e})},t.prototype.select=function(t,e){void 0===e&&(e={});var n=this.toValidDate(t,null);this._state.disabled||(YC(this._state.selectedDate,n)&&this._nextState({selectedDate:n}),e.emitEvent&&XC(n,this._state)&&this._select$.next(n))},t.prototype.toValidDate=function(t,e){var n=jC.from(t);return void 0===e&&(e=this._calendar.getToday()),this._calendar.isValid(n)?n:e},t.prototype._nextState=function(t){var e=this._updateState(t);this._patchContexts(e),this._state=e,this._model$.next(this._state)},t.prototype._patchContexts=function(t){var e=t.months,n=t.displayMonths,i=t.selectedDate,o=t.focusDate,r=t.focusVisible,s=t.disabled,a=t.outsideDays;t.months.forEach(function(t){t.weeks.forEach(function(l){l.days.forEach(function(l){o&&(l.context.focused=o.equals(l.date)&&r),l.tabindex=!s&&l.date.equals(o)&&o.month===t.number?0:-1,!0===s&&(l.context.disabled=!0),void 0!==i&&(l.context.selected=null!==i&&i.equals(l.date)),t.number!==l.date.month&&(l.hidden="hidden"===a||"collapsed"===a||n>1&&l.date.after(e[0].firstDate)&&l.date.before(e[n-1].lastDate))})})})},t.prototype._updateState=function(t){var e,n,i=Object.assign({},this._state,t),o=i.firstDate;if(("minDate"in t||"maxDate"in t)&&(function(t,e){if(e&&t&&e.before(t))throw new Error("'maxDate' "+e+" should be greater than 'minDate' "+t)}(i.minDate,i.maxDate),i.focusDate=KC(i.focusDate,i.minDate,i.maxDate),i.firstDate=KC(i.firstDate,i.minDate,i.maxDate),o=i.focusDate),"disabled"in t&&(i.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(o=i.selectedDate),"focusDate"in t&&(i.focusDate=KC(i.focusDate,i.minDate,i.maxDate),o=i.focusDate,0!==i.months.length&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in t&&(i.firstDate=KC(i.firstDate,i.minDate,i.maxDate),o=i.firstDate),o){var r=function(t,e,n,i,o){var r=n.displayMonths,s=n.months,a=s.splice(0,s.length);return Array.from({length:r},function(n,i){var r=t.getNext(e,"m",i);if(s[i]=null,!o){var l=a.findIndex(function(t){return t.firstDate.equals(r)});-1!==l&&(s[i]=a.splice(l,1)[0])}return r}).forEach(function(e,o){null===s[o]&&(s[o]=function(t,e,n,i,o){void 0===o&&(o={});var r=n.dayTemplateData,s=n.minDate,a=n.maxDate,l=n.firstDayOfWeek,h=n.markDisabled,u=n.outsideDays;o.firstDate=null,o.lastDate=null,o.number=e.month,o.year=e.year,o.weeks=o.weeks||[],o.weekdays=o.weekdays||[],e=function(t,e,n){var i=t.getDaysPerWeek(),o=new jC(e.year,e.month,1),r=t.getWeekday(o)%i;return t.getPrev(o,"d",(i+r-n)%i)}(t,e,l);for(var c=0;c<t.getWeeksPerMonth();c++){var d=o.weeks[c];d||(d=o.weeks[c]={number:0,days:[],collapsed:!0});for(var p=d.days,f=0;f<t.getDaysPerWeek();f++){0===c&&(o.weekdays[f]=t.getWeekday(e));var g=new jC(e.year,e.month,e.day),_=t.getNext(g),y=i.getDayAriaLabel(g),m=!!(s&&g.before(s)||a&&g.after(a));!m&&h&&(m=h(g,{month:o.number,year:o.year}));var v=r?r(g,{month:o.number,year:o.year}):void 0;null===o.firstDate&&g.month===o.number&&(o.firstDate=g),g.month===o.number&&_.month!==o.number&&(o.lastDate=g);var x=p[f];x||(x=p[f]={}),x.date=g,x.context=Object.assign(x.context||{},{$implicit:g,date:g,data:v,currentMonth:o.number,disabled:m,focused:!1,selected:!1}),x.tabindex=-1,x.ariaLabel=y,x.hidden=!1,e=_}d.number=t.getWeekNumber(p.map(function(t){return t.date}),l),d.collapsed="collapsed"===u&&p[0].date.month!==o.number&&p[p.length-1].date.month!==o.number}return o}(t,e,n,i,a.shift()||{}))}),s}(this._calendar,o,i,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t);i.months=r,i.firstDate=r.length>0?r[0].firstDate:void 0,i.lastDate=r.length>0?r[r.length-1].lastDate:void 0,"selectedDate"in t&&!XC(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in t&&(void 0===i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=o);var s=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,a=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;"select"===i.navigation?(("minDate"in t||"maxDate"in t||0===i.selectBoxes.years.length||s)&&(i.selectBoxes.years=function(t,e,n){if(!t)return[];var i=e&&e.year||t.year-10;return Array.from({length:(n&&n.year||t.year+10)-i+1},function(t,e){return i+e})}(i.firstDate,i.minDate,i.maxDate)),("minDate"in t||"maxDate"in t||0===i.selectBoxes.months.length||s)&&(i.selectBoxes.months=function(t,e,n,i){if(!e)return[];var o=t.getMonths(e.year);if(n&&e.year===n.year){var r=o.findIndex(function(t){return t===n.month});o=o.slice(r)}return i&&e.year===i.year&&(r=o.findIndex(function(t){return t===i.month}),o=o.slice(0,r+1)),o}(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},"arrows"!==i.navigation&&"select"!==i.navigation||!(a||s||"minDate"in t||"maxDate"in t||"disabled"in t)||(i.prevDisabled=i.disabled||(e=i.minDate,n=this._calendar.getPrev(i.firstDate,"m"),e&&(n.year===e.year&&n.month<e.month||n.year<e.year&&1===e.month)),i.nextDisabled=i.disabled||function(t,e,n){return n&&t.getNext(i.lastDate,"m").after(n)}(this._calendar,0,i.maxDate))}return i},t}(),QC=function(){var t={Tab:9,Enter:13,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40};return t[t.Tab]="Tab",t[t.Enter]="Enter",t[t.Escape]="Escape",t[t.Space]="Space",t[t.PageUp]="PageUp",t[t.PageDown]="PageDown",t[t.End]="End",t[t.Home]="Home",t[t.ArrowLeft]="ArrowLeft",t[t.ArrowUp]="ArrowUp",t[t.ArrowRight]="ArrowRight",t[t.ArrowDown]="ArrowDown",t}(),$C=function(){function t(t,e){var n=this;this._service=t,this._calendar=e,t.model$.subscribe(function(t){n._minDate=t.minDate,n._maxDate=t.maxDate,n._firstViewDate=t.firstDate,n._lastViewDate=t.lastDate})}return t.prototype.processKey=function(t){if(QC[MC(t.which)]){switch(t.which){case QC.PageUp:this._service.focusMove(t.shiftKey?"y":"m",-1);break;case QC.PageDown:this._service.focusMove(t.shiftKey?"y":"m",1);break;case QC.End:this._service.focus(t.shiftKey?this._maxDate:this._lastViewDate);break;case QC.Home:this._service.focus(t.shiftKey?this._minDate:this._firstViewDate);break;case QC.ArrowLeft:this._service.focusMove("d",-1);break;case QC.ArrowUp:this._service.focusMove("d",-this._calendar.getDaysPerWeek());break;case QC.ArrowRight:this._service.focusMove("d",1);break;case QC.ArrowDown:this._service.focusMove("d",this._calendar.getDaysPerWeek());break;case QC.Enter:case QC.Space:this._service.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}},t}(),tE=function(){var t={PREV:0,NEXT:1};return t[t.PREV]="PREV",t[t.NEXT]="NEXT",t}(),eE=function(){function t(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1}return t.ngInjectableDef=ut({factory:function(){return new t},token:t,providedIn:"root"}),t}();function nE(){return new oE}var iE=function(){function t(){}return t.ngInjectableDef=ut({factory:nE,token:t,providedIn:"root"}),t}(),oE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.fromModel=function(t){return t&&kC(t.year)&&kC(t.month)&&kC(t.day)?{year:t.year,month:t.month,day:t.day}:null},e.prototype.toModel=function(t){return t&&kC(t.year)&&kC(t.month)&&kC(t.day)?{year:t.year,month:t.month,day:t.day}:null},e}(iE),rE=function(){function t(t,e,n,i,o,r,s,a,l){var h=this;this._keyMapService=t,this._service=e,this._calendar=n,this.i18n=i,this._cd=r,this._elementRef=s,this._ngbDateAdapter=a,this._ngZone=l,this.navigate=new Xe,this.select=new Xe,this.onChange=function(t){},this.onTouched=function(){},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate"].forEach(function(t){return h[t]=o[t]}),this._selectSubscription=e.select$.subscribe(function(t){h.select.emit(t)}),this._subscription=e.model$.subscribe(function(t){var e=t.firstDate,n=h.model?h.model.firstDate:null,i=t.selectedDate,o=t.focusDate,s=h.model?h.model.focusDate:null;h.model=t,YC(i,h._controlValue)&&(h._controlValue=i,h.onTouched(),h.onChange(h._ngbDateAdapter.toModel(i))),YC(o,s)&&s&&t.focusVisible&&h.focus(),e.equals(n)||h.navigate.emit({current:n?{year:n.year,month:n.month}:null,next:{year:e.year,month:e.month}}),r.markForCheck()})}return t.prototype.focus=function(){var t=this;this._ngZone.onStable.asObservable().pipe(function(t){return t.lift(new EC(1))}).subscribe(function(){var e=t._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})},t.prototype.navigateTo=function(t){this._service.open(jC.from(t?r({},t,{day:1}):null))},t.prototype.ngOnDestroy=function(){this._subscription.unsubscribe(),this._selectSubscription.unsubscribe()},t.prototype.ngOnInit=function(){var t=this;void 0===this.model&&(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].forEach(function(e){return t._service[e]=t[e]}),this.navigateTo(this.startDate))},t.prototype.ngOnChanges=function(t){var e=this;["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].filter(function(e){return e in t}).forEach(function(t){return e._service[t]=e[t]}),"startDate"in t&&this.navigateTo(this.startDate)},t.prototype.onDateSelect=function(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})},t.prototype.onKeyDown=function(t){this._keyMapService.processKey(t)},t.prototype.onNavigateDateSelect=function(t){this._service.open(t)},t.prototype.onNavigateEvent=function(t){switch(t){case tE.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case tE.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._service.disabled=t},t.prototype.showFocus=function(t){this._service.focusVisible=t},t.prototype.writeValue=function(t){this._controlValue=jC.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)},t}(),sE=function(){function t(t){this.i18n=t,this.select=new Xe}return t.prototype.doSelect=function(t){t.context.disabled||t.hidden||this.select.emit(t.date)},t}(),aE=function(){return function(t){this.i18n=t,this.navigation=tE,this.months=[],this.navigate=new Xe,this.select=new Xe}}(),lE=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function hE(t){var e=t.querySelectorAll(lE);return[e[0],e[e.length-1]]}var uE=function(t,e){var n=_C(t,"focusin").pipe(xC(e),Z(function(t){return t.target}));_C(t,"keydown").pipe(xC(e),yC(function(t){return t.which===QC.Tab}),SC(n)).subscribe(function(e){var n=u(e,2),i=n[0],o=n[1],r=u(hE(t),2),s=r[0],a=r[1];o===s&&i.shiftKey&&(a.focus(),i.preventDefault()),o!==a||i.shiftKey||(s.focus(),i.preventDefault())}),_C(t,"click").pipe(xC(e),SC(n),Z(function(t){return t[1]})).subscribe(function(t){return t.focus()})},cE=function(){function t(t){this.i18n=t}return t.prototype.isMuted=function(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)},t}(),dE=function(){function t(t){this.i18n=t,this.select=new Xe}return t.prototype.changeMonth=function(t){this.select.emit(new jC(this.date.year,PC(t),1))},t.prototype.changeYear=function(t){this.select.emit(new jC(PC(t),this.date.month,1))},t}(),pE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),fE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),gE=function(){function t(){this.backdrop=!0,this.keyboard=!0}return t.ngInjectableDef=ut({factory:function(){return new t},token:t,providedIn:"root"}),t}(),_E=function(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n},yE=function(){},mE=function(){function t(t){this._document=t}return t.prototype.compensate=function(){return this._isPresent()?this._adjustBody(this._getWidth()):yE},t.prototype._adjustBody=function(t){var e=this._document.body,n=e.style.paddingRight,i=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=i+t+"px",function(){return e.style["padding-right"]=n}},t.prototype._isPresent=function(){var t=this._document.body.getBoundingClientRect();return t.left+t.right<window.innerWidth},t.prototype._getWidth=function(){var t=this._document.createElement("div");t.className="modal-scrollbar-measure";var e=this._document.body;e.appendChild(t);var n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n},t.ngInjectableDef=ut({factory:function(){return new t(Jt(Jb))},token:t,providedIn:"root"}),t}(),vE=function(){},xE=function(){function t(){}return t.prototype.close=function(t){},t.prototype.dismiss=function(t){},t}(),bE=function(){function t(t,e,n,i){var o=this;this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,t.instance.dismissEvent.subscribe(function(t){o.dismiss(t)}),this.result=new Promise(function(t,e){o._resolve=t,o._reject=e}),this.result.then(null,function(){})}return Object.defineProperty(t.prototype,"componentInstance",{get:function(){if(this._contentRef.componentRef)return this._contentRef.componentRef.instance},enumerable:!0,configurable:!0}),t.prototype.close=function(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())},t.prototype._dismiss=function(t){this._reject(t),this._removeModalElements()},t.prototype.dismiss=function(t){var e=this;if(this._windowCmptRef)if(this._beforeDismiss){var n=this._beforeDismiss();n&&n.then?n.then(function(n){!1!==n&&e._dismiss(t)},function(){}):!1!==n&&this._dismiss(t)}else this._dismiss(t)},t.prototype._removeModalElements=function(){var t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){var e=this._backdropCmptRef.location.nativeElement;e.parentNode.removeChild(e),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null},t}(),wE=function(){var t={BACKDROP_CLICK:0,ESC:1};return t[t.BACKDROP_CLICK]="BACKDROP_CLICK",t[t.ESC]="ESC",t}(),CE=function(){function t(t,e){this._document=t,this._elRef=e,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Xe}return t.prototype.backdropClick=function(t){!0===this.backdrop&&this._elRef.nativeElement===t.target&&this.dismiss(wE.BACKDROP_CLICK)},t.prototype.escKey=function(t){this.keyboard&&!t.defaultPrevented&&this.dismiss(wE.ESC)},t.prototype.dismiss=function(t){this.dismissEvent.emit(t)},t.prototype.ngOnInit=function(){this._elWithFocus=this._document.activeElement},t.prototype.ngAfterViewInit=function(){if(!this._elRef.nativeElement.contains(document.activeElement)){var t=this._elRef.nativeElement.querySelector("[ngbAutofocus]"),e=hE(this._elRef.nativeElement)[0];(t||e||this._elRef.nativeElement).focus()}},t.prototype.ngOnDestroy=function(){var t=this._document.body,e=this._elWithFocus;(e&&e.focus&&t.contains(e)?e:t).focus(),this._elWithFocus=null},t}(),EE=function(){function t(t,e,n,i,o){var r=this;this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._windowAttributes=["ariaLabelledBy","backdrop","centered","keyboard","size","windowClass"],this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowCmpts=[],this._activeWindowCmptHasChanged=new O,this._activeWindowCmptHasChanged.subscribe(function(){r._windowCmpts.length&&uE(r._windowCmpts[r._windowCmpts.length-1].location.nativeElement,r._activeWindowCmptHasChanged)})}return t.prototype.open=function(t,e,n,i){var o=this,r=LC(i.container)?this._document.querySelector(i.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),a=this._scrollBar.compensate(),l=function(){o._modalRefs.length||s.removeClass(o._document.body,"modal-open")};if(!r)throw new Error('The specified modal container "'+(i.container||"body")+'" was not found in the DOM.');var h=new xE,u=this._getContentRef(t,i.injector||e,n,h),c=!1!==i.backdrop?this._attachBackdrop(t,r):null,d=this._attachWindowComponent(t,r,u),p=new bE(d,u,c,i.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(d),p.result.then(a,a),p.result.then(l,l),h.close=function(t){p.close(t)},h.dismiss=function(t){p.dismiss(t)},this._applyWindowOptions(d.instance,i),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),c&&c.instance&&this._applyBackdropOptions(c.instance,i),p},t.prototype.dismissAll=function(t){this._modalRefs.forEach(function(e){return e.dismiss(t)})},t.prototype.hasOpenModals=function(){return this._modalRefs.length>0},t.prototype._attachBackdrop=function(t,e){var n=t.resolveComponentFactory(vE).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n},t.prototype._attachWindowComponent=function(t,e,n){var i=t.resolveComponentFactory(CE).create(this._injector,n.nodes);return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i},t.prototype._applyWindowOptions=function(t,e){this._windowAttributes.forEach(function(n){LC(e[n])&&(t[n]=e[n])})},t.prototype._applyBackdropOptions=function(t,e){this._backdropAttributes.forEach(function(n){LC(e[n])&&(t[n]=e[n])})},t.prototype._getContentRef=function(t,e,n,i){return n?n instanceof Cn?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i):new _E([])},t.prototype._createFromTemplateRef=function(t,e){var n=t.createEmbeddedView({$implicit:e,close:function(t){e.close(t)},dismiss:function(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new _E([n.rootNodes],n)},t.prototype._createFromString=function(t){var e=this._document.createTextNode(""+t);return new _E([[e]])},t.prototype._createFromComponent=function(t,e,n,i){var o=t.resolveComponentFactory(n),r=Ot.create({providers:[{provide:xE,useValue:i}],parent:e}),s=o.create(r);return this._applicationRef.attachView(s.hostView),new _E([[s.location.nativeElement]],s.hostView,s)},t.prototype._registerModalRef=function(t){var e=this,n=function(){var n=e._modalRefs.indexOf(t);n>-1&&e._modalRefs.splice(n,1)};this._modalRefs.push(t),t.result.then(n,n)},t.prototype._registerWindowCmpt=function(t){var e=this;this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(function(){var n=e._windowCmpts.indexOf(t);n>-1&&(e._windowCmpts.splice(n,1),e._activeWindowCmptHasChanged.next())})},t.ngInjectableDef=ut({factory:function(){return new t(Jt(_n),Jt(Ft),Jt(Jb),Jt(mE),Jt(mn))},token:t,providedIn:"root"}),t}(),TE=function(){function t(t,e,n,i){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=i}return t.prototype.open=function(t,e){void 0===e&&(e={});var n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)},t.prototype.dismissAll=function(t){this._modalStack.dismissAll(t)},t.prototype.hasOpenModals=function(){return this._modalStack.hasOpenModals()},t.ngInjectableDef=ut({factory:function(){return new t(Jt(Ve),Jt(Ft),Jt(EE),Jt(gE))},token:t,providedIn:"root"}),t}(),SE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),IE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),RE=function(){function t(t,e){this._element=t,this._renderer=e,this.placement="top"}return t.prototype.isTitleTemplate=function(){return this.title instanceof Cn},t.prototype.applyPlacement=function(t){this._renderer.removeClass(this._element.nativeElement,"bs-popover-"+this.placement.toString().split("-")[0]),this._renderer.removeClass(this._element.nativeElement,"bs-popover-"+this.placement.toString()),this.placement=t,this._renderer.addClass(this._element.nativeElement,"bs-popover-"+this.placement.toString().split("-")[0]),this._renderer.addClass(this._element.nativeElement,"bs-popover-"+this.placement.toString())},t.prototype.isEventFrom=function(t){return this._element.nativeElement.contains(t.target)},t}(),PE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),ME=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),kE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),LE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),FE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),DE=function(){function t(t,e){this._element=t,this._renderer=e,this.placement="top"}return t.prototype.applyPlacement=function(t){this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString()),this.placement=t,this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString())},t.prototype.isEventFrom=function(t){return this._element.nativeElement.contains(t.target)},t}(),OE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),AE=function(){function t(){this.highlightClass="ngb-highlight"}return t.prototype.ngOnChanges=function(t){var e,n=MC(this.result),i=n.toLowerCase(),o=MC(this.term).toLowerCase(),r=0;this.parts=o.length>0?i.split(new RegExp("("+(e=o,e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))+")")).map(function(t){var e=n.substr(r,t.length);return r+=t.length,e}):[n]},t}(),NE=function(){function t(){this.activeIdx=0,this.focusFirst=!0,this.formatter=MC,this.selectEvent=new Xe,this.activeChangeEvent=new Xe}return t.prototype.hasActive=function(){return this.activeIdx>-1&&this.activeIdx<this.results.length},t.prototype.getActive=function(){return this.results[this.activeIdx]},t.prototype.markActive=function(t){this.activeIdx=t,this._activeChanged()},t.prototype.next=function(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()},t.prototype.prev=function(){this.activeIdx<0?this.activeIdx=this.results.length-1:0===this.activeIdx?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()},t.prototype.resetActive=function(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()},t.prototype.select=function(t){this.selectEvent.emit(t)},t.prototype.ngOnInit=function(){this.resetActive()},t.prototype._activeChanged=function(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)},t}(),GE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),VE=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}(),jE=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{display:block}"],data:{}});function BE(t){return Lr(0,[(t()(),vo(0,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.closeHandler()&&i),i},null,null)),(t()(),vo(1,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),Pr(-1,null,["\xd7"]))],null,null)}function zE(t){return Lr(2,[(t()(),mo(16777216,null,null,1,null,BE)),ar(1,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),Ir(null,0)],function(t,e){t(e,1,0,e.component.dismissible)},null)}var HE=No("ngb-alert",OC,function(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-alert",[["class","alert"],["role","alert"]],[[2,"alert-dismissible",null]],null,null,zE,jE)),ar(1,638976,null,0,OC,[DC,xn,bn],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,Xo(e,1).dismissible)})},{dismissible:"dismissible",type:"type"},{close:"close"},["*"]),WE=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{display:block}.ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday[_ngcontent-%COMP%]{color:#5bc0de;color:var(--info)}.ngb-dp-week[_ngcontent-%COMP%]{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0}.ngb-dp-day[_ngcontent-%COMP%], .ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{width:2rem;height:2rem}.ngb-dp-day[_ngcontent-%COMP%]{cursor:pointer}.ngb-dp-day.disabled[_ngcontent-%COMP%], .ngb-dp-day.hidden[_ngcontent-%COMP%]{cursor:default}"],data:{}});function UE(t){return Lr(0,[(t()(),vo(0,0,null,null,0,"div",[["class","ngb-dp-weekday ngb-dp-showweek"]],null,null,null,null,null))],null,null)}function YE(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"div",[["class","ngb-dp-weekday small"]],null,null,null,null,null)),(t()(),Pr(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.component.i18n.getWeekdayShortName(e.context.$implicit))})}function KE(t){return Lr(0,[(t()(),vo(0,0,null,null,4,"div",[["class","ngb-dp-week ngb-dp-weekdays bg-light"]],null,null,null,null,null)),(t()(),mo(16777216,null,null,1,null,UE)),ar(2,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),mo(16777216,null,null,1,null,YE)),ar(4,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.showWeekNumbers),t(e,4,0,n.month.weekdays)},null)}function XE(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"div",[["class","ngb-dp-week-number small text-muted"]],null,null,null,null,null)),(t()(),Pr(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.i18n.getWeekNumerals(e.parent.parent.context.$implicit.number))})}function ZE(t){return Lr(0,[(t()(),mo(0,null,null,0))],null,null)}function qE(t){return Lr(0,[(t()(),mo(16777216,null,null,1,null,ZE)),ar(1,540672,null,0,Zb,[En],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),(t()(),mo(0,null,null,0))],function(t,e){t(e,1,0,e.parent.context.$implicit.context,e.component.dayTemplate)},null)}function JE(t){return Lr(0,[(t()(),vo(0,0,null,null,2,"div",[["class","ngb-dp-day"],["role","gridcell"]],[[2,"disabled",null],[8,"tabIndex",0],[2,"hidden",null],[1,"aria-label",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.doSelect(t.context.$implicit)&&i),i},null,null)),(t()(),mo(16777216,null,null,1,null,qE)),ar(2,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,!e.context.$implicit.hidden)},function(t,e){t(e,0,0,e.context.$implicit.context.disabled,e.context.$implicit.tabindex,e.context.$implicit.hidden,e.context.$implicit.ariaLabel)})}function QE(t){return Lr(0,[(t()(),vo(0,0,null,null,4,"div",[["class","ngb-dp-week"],["role","row"]],null,null,null,null,null)),(t()(),mo(16777216,null,null,1,null,XE)),ar(2,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),mo(16777216,null,null,1,null,JE)),ar(4,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.showWeekNumbers),t(e,4,0,e.parent.context.$implicit.days)},null)}function $E(t){return Lr(0,[(t()(),mo(16777216,null,null,1,null,QE)),ar(1,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),mo(0,null,null,0))],function(t,e){t(e,1,0,!e.context.$implicit.collapsed)},null)}function tT(t){return Lr(0,[(t()(),mo(16777216,null,null,1,null,KE)),ar(1,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),mo(16777216,null,null,1,null,$E)),ar(3,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.showWeekdays),t(e,3,0,n.month.weeks)},null)}var eT=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}.outside[_nghost-%COMP%]{opacity:.5}"],data:{}});function nT(t){return Lr(2,[(t()(),Pr(0,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.i18n.getDayNumerals(n.date))})}var iT=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron[_ngcontent-%COMP%]{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right[_ngcontent-%COMP%]   .ngb-dp-navigation-chevron[_ngcontent-%COMP%]{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right[_ngcontent-%COMP%]{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn[_ngcontent-%COMP%]{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn[_ngcontent-%COMP%]:focus{outline:auto 1px}.ngb-dp-month-name[_ngcontent-%COMP%]{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],data:{}});function oT(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-datepicker-navigation-select",[["class","ngb-dp-navigation-select"]],null,[[null,"select"]],function(t,e,n){var i=!0;return"select"===e&&(i=!1!==t.component.select.emit(n)&&i),i},pT,uT)),ar(1,49152,null,0,dE,[ZC],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],years:[3,"years"]},{select:"select"})],function(t,e){var n=e.component;t(e,1,0,n.date,n.disabled,n.selectBoxes.months,n.selectBoxes.years)},null)}function rT(t){return Lr(0,[(t()(),vo(0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function sT(t){return Lr(0,[(t()(),vo(0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function aT(t){return Lr(0,[(t()(),mo(16777216,null,null,1,null,rT)),ar(1,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(2,0,null,null,1,"div",[["class","ngb-dp-month-name"]],null,null,null,null,null)),(t()(),Pr(3,null,[" "," "," "])),(t()(),mo(16777216,null,null,1,null,sT)),ar(5,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),mo(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,e.context.index>0),t(e,5,0,e.context.index!==n.months.length-1)},function(t,e){var n=e.component;t(e,3,0,n.i18n.getMonthFullName(e.context.$implicit.number,e.context.$implicit.year),n.i18n.getYearNumerals(e.context.$implicit.year))})}function lT(t){return Lr(0,[(t()(),mo(16777216,null,null,1,null,aT)),ar(1,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null),(t()(),mo(0,null,null,0))],function(t,e){t(e,1,0,e.component.months)},null)}function hT(t){return Lr(2,[(t()(),vo(0,0,null,null,2,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null)),(t()(),vo(1,0,null,null,1,"button",[["aria-label","Previous month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Previous month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==o.navigate.emit(o.navigation.PREV)&&i),i},null,null)),(t()(),vo(2,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null)),(t()(),mo(16777216,null,null,1,null,oT)),ar(4,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),mo(16777216,null,null,1,null,lT)),ar(6,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(7,0,null,null,2,"div",[["class","ngb-dp-arrow right"]],null,null,null,null,null)),(t()(),vo(8,0,null,null,1,"button",[["aria-label","Next month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Next month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==o.navigate.emit(o.navigation.NEXT)&&i),i},null,null)),(t()(),vo(9,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,4,0,n.showSelect),t(e,6,0,!n.showSelect)},function(t,e){var n=e.component;t(e,1,0,n.prevDisabled),t(e,8,0,n.nextDisabled)})}var uT=Hi({encapsulation:0,styles:["[_nghost-%COMP%] > select[_ngcontent-%COMP%]{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}"],data:{}});function cT(t){return Lr(0,[(t()(),vo(0,0,null,null,3,"option",[],[[1,"aria-label",0]],null,null,null,null)),ar(1,147456,null,0,cC,[bn,xn,[8,null]],{value:[0,"value"]},null),ar(2,147456,null,0,pC,[bn,xn,[8,null]],{value:[0,"value"]},null),(t()(),Pr(3,null,["",""]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){var n=e.component;t(e,0,0,n.i18n.getMonthFullName(e.context.$implicit,null==n.date?null:n.date.year)),t(e,3,0,n.i18n.getMonthShortName(e.context.$implicit,null==n.date?null:n.date.year))})}function dT(t){return Lr(0,[(t()(),vo(0,0,null,null,3,"option",[],null,null,null,null,null)),ar(1,147456,null,0,cC,[bn,xn,[8,null]],{value:[0,"value"]},null),ar(2,147456,null,0,pC,[bn,xn,[8,null]],{value:[0,"value"]},null),(t()(),Pr(3,null,["",""]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){t(e,3,0,e.component.i18n.getYearNumerals(e.context.$implicit))})}function pT(t){return Lr(2,[(t()(),vo(0,0,null,null,2,"select",[["aria-label","Select month"],["class","custom-select"],["title","Select month"]],[[8,"disabled",0],[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.changeMonth(n.target.value)&&i),i},null,null)),(t()(),mo(16777216,null,null,1,null,cT)),ar(2,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null),(t()(),vo(3,0,null,null,2,"select",[["aria-label","Select year"],["class","custom-select"],["title","Select year"]],[[8,"disabled",0],[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.changeYear(n.target.value)&&i),i},null,null)),(t()(),mo(16777216,null,null,1,null,dT)),ar(5,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.months),t(e,5,0,n.years)},function(t,e){var n=e.component;t(e,0,0,n.disabled,null==n.date?null:n.date.month),t(e,3,0,n.disabled,null==n.date?null:n.date.year)})}var fT=Hi({encapsulation:0,styles:["[_nghost-%COMP%]{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}.ngb-dp-month[_ngcontent-%COMP%]{pointer-events:none}.ngb-dp-header[_ngcontent-%COMP%]{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem}ngb-datepicker-month-view[_ngcontent-%COMP%]{pointer-events:auto}.ngb-dp-month-name[_ngcontent-%COMP%]{font-size:larger;height:2rem;line-height:2rem;text-align:center}  .ngb-dp-month+.ngb-dp-month>ngb-datepicker-month-view>.ngb-dp-week{padding-left:1rem}  .ngb-dp-month+.ngb-dp-month>.ngb-dp-month-name{padding-left:1rem}  .ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}  .ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}  .ngb-dp-month>ngb-datepicker-month-view>.ngb-dp-week:last-child{padding-bottom:.25rem}.ngb-dp-months[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}"],data:{}});function gT(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"div",[["class","btn-light"],["ngbDatepickerDayView",""]],[[2,"bg-primary",null],[2,"text-white",null],[2,"text-muted",null],[2,"outside",null],[2,"active",null]],null,null,nT,eT)),ar(1,49152,null,0,cE,[ZC],{currentMonth:[0,"currentMonth"],date:[1,"date"],disabled:[2,"disabled"],focused:[3,"focused"],selected:[4,"selected"]},null)],function(t,e){t(e,1,0,e.context.currentMonth,e.context.date,e.context.disabled,e.context.focused,e.context.selected)},function(t,e){t(e,0,0,Xo(e,1).selected,Xo(e,1).selected,Xo(e,1).isMuted(),Xo(e,1).isMuted(),Xo(e,1).focused)})}function _T(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-datepicker-navigation",[],null,[[null,"navigate"],[null,"select"]],function(t,e,n){var i=!0,o=t.component;return"navigate"===e&&(i=!1!==o.onNavigateEvent(n)&&i),"select"===e&&(i=!1!==o.onNavigateDateSelect(n)&&i),i},hT,iT)),ar(1,49152,null,0,aE,[ZC],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],showSelect:[3,"showSelect"],prevDisabled:[4,"prevDisabled"],nextDisabled:[5,"nextDisabled"],selectBoxes:[6,"selectBoxes"]},{navigate:"navigate",select:"select"})],function(t,e){var n=e.component;t(e,1,0,n.model.firstDate,n.model.disabled,n.model.months,"select"===n.model.navigation,n.model.prevDisabled,n.model.nextDisabled,n.model.selectBoxes)},null)}function yT(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"div",[["class","ngb-dp-month-name bg-light"]],null,null,null,null,null)),(t()(),Pr(1,null,[" "," "," "]))],null,function(t,e){var n=e.component;t(e,1,0,n.i18n.getMonthFullName(e.parent.context.$implicit.number,e.parent.context.$implicit.year),n.i18n.getYearNumerals(e.parent.context.$implicit.year))})}function mT(t){return Lr(0,[(t()(),vo(0,0,null,null,4,"div",[["class","ngb-dp-month"]],null,null,null,null,null)),(t()(),mo(16777216,null,null,1,null,yT)),ar(2,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(3,0,null,null,1,"ngb-datepicker-month-view",[["role","grid"]],null,[[null,"select"]],function(t,e,n){var i=!0;return"select"===e&&(i=!1!==t.component.onDateSelect(n)&&i),i},tT,WE)),ar(4,49152,null,0,sE,[ZC],{dayTemplate:[0,"dayTemplate"],month:[1,"month"],showWeekdays:[2,"showWeekdays"],showWeekNumbers:[3,"showWeekNumbers"]},{select:"select"})],function(t,e){var n=e.component;t(e,2,0,"none"===n.navigation||n.displayMonths>1&&"select"===n.navigation),t(e,4,0,n.dayTemplate||Xo(e.parent,0),e.context.$implicit,n.showWeekdays,n.showWeekNumbers)},null)}function vT(t){return Lr(0,[(t()(),mo(0,null,null,0))],null,null)}function xT(t){return Lr(2,[(t()(),mo(0,[["dt",2]],null,0,null,gT)),(t()(),vo(1,0,null,null,2,"div",[["class","ngb-dp-header bg-light"]],null,null,null,null,null)),(t()(),mo(16777216,null,null,1,null,_T)),ar(3,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(4,0,null,null,2,"div",[["class","ngb-dp-months"]],null,[[null,"keydown"],[null,"focusin"],[null,"focusout"]],function(t,e,n){var i=!0,o=t.component;return"keydown"===e&&(i=!1!==o.onKeyDown(n)&&i),"focusin"===e&&(i=!1!==o.showFocus(!0)&&i),"focusout"===e&&(i=!1!==o.showFocus(!1)&&i),i},null,null)),(t()(),mo(16777216,null,null,1,null,mT)),ar(6,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null),(t()(),mo(16777216,null,null,1,null,vT)),ar(8,540672,null,0,Zb,[En],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,3,0,"none"!==n.navigation),t(e,6,0,n.model.months),t(e,8,0,n.footerTemplate)},null)}var bT=No("ngb-datepicker",rE,function(t){return Lr(0,[(t()(),vo(0,0,null,null,4,"ngb-datepicker",[],null,null,null,xT,fT)),lr(5120,null,hC,function(t){return[t]},[rE]),lr(512,null,JC,JC,[WC,ZC]),lr(512,null,$C,$C,[JC,WC]),ar(4,770048,null,0,rE,[$C,JC,WC,ZC,eE,Tn,bn,iE,Ze],null,null)],function(t,e){t(e,4,0)},null)},{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},{navigate:"navigate",select:"select"},[]),wT=Hi({encapsulation:0,styles:[".bs-popover-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:50%;margin-left:-5px}.bs-popover-bottom-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:2em}.bs-popover-bottom-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:auto;right:2em}.bs-popover-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:50%;margin-top:-5px}.bs-popover-left-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:.7em}.bs-popover-left-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:auto;bottom:.7em}"],data:{}});function CT(t){return Lr(0,[(t()(),Pr(0,null,["",""]))],null,function(t,e){t(e,0,0,e.component.title)})}function ET(t){return Lr(0,[(t()(),mo(0,null,null,0))],null,null)}function TT(t){return Lr(0,[(t()(),vo(0,0,null,null,3,"h3",[["class","popover-header"]],null,null,null,null,null)),(t()(),mo(0,[["simpleTitle",2]],null,0,null,CT)),(t()(),mo(16777216,null,null,1,null,ET)),ar(3,540672,null,0,Zb,[En],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,3,0,n.context,n.isTitleTemplate()?n.title:Xo(e,1))},null)}function ST(t){return Lr(2,[(t()(),vo(0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(t()(),mo(16777216,null,null,1,null,TT)),ar(2,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"]},null),(t()(),vo(3,0,null,null,1,"div",[["class","popover-body"]],null,null,null,null,null)),Ir(null,0)],function(t,e){t(e,2,0,null!=e.component.title)},null)}var IT=No("ngb-popover-window",RE,function(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-popover-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,ST,wT)),ar(1,49152,null,0,RE,[bn,xn],null,null)],null,function(t,e){t(e,0,0,"popover bs-popover-"+Xo(e,1).placement.split("-")[0]+" bs-popover-"+Xo(e,1).placement+(Xo(e,1).popoverClass?" "+Xo(e,1).popoverClass:""),Xo(e,1).id)})},{placement:"placement",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},{},["*"]),RT=Hi({encapsulation:0,styles:[".bs-tooltip-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:calc(50% - .4rem)}.bs-tooltip-bottom-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:1em}.bs-tooltip-bottom-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:auto;right:.8rem}.bs-tooltip-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - .4rem)}.bs-tooltip-left-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:.4rem}.bs-tooltip-left-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:auto;bottom:.4rem}"],data:{}});function PT(t){return Lr(2,[(t()(),vo(0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(t()(),vo(1,0,null,null,1,"div",[["class","tooltip-inner"]],null,null,null,null,null)),Ir(null,0)],null,null)}var MT=No("ngb-tooltip-window",DE,function(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-tooltip-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,PT,RT)),ar(1,49152,null,0,DE,[bn,xn],null,null)],null,function(t,e){t(e,0,0,"tooltip show bs-tooltip-"+Xo(e,1).placement.split("-")[0]+" bs-tooltip-"+Xo(e,1).placement+(Xo(e,1).tooltipClass?" "+Xo(e,1).tooltipClass:""),Xo(e,1).id)})},{placement:"placement",id:"id",tooltipClass:"tooltipClass"},{},["*"]),kT=Hi({encapsulation:2,styles:[],data:{}});function LT(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-highlight",[],null,null,null,BT,NT)),ar(1,573440,null,0,AE,[],{result:[0,"result"],term:[1,"term"]},null)],function(t,e){t(e,1,0,e.context.formatter(e.context.result),e.context.term)},null)}function FT(t){return Lr(0,[(t()(),mo(0,null,null,0))],null,null)}function DT(t){return Lr(0,[(t()(),vo(0,0,null,null,3,"button",[["class","dropdown-item"],["role","option"],["type","button"]],[[8,"id",0],[2,"active",null]],[[null,"mouseenter"],[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"mouseenter"===e&&(i=!1!==o.markActive(t.context.index)&&i),"click"===e&&(i=!1!==o.select(t.context.$implicit)&&i),i},null,null)),(t()(),mo(16777216,null,null,2,null,FT)),ar(2,540672,null,0,Zb,[En],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),function(t,e){for(var n=Object.keys(e),i=n.length,o=new Array(i),r=0;r<i;r++){var s=n[r];o[e[s]]=s}return function(t,e,n){for(var i=new Array(n.length),o=0;o<n.length;o++){var r=n[o];i[o]={flags:8,name:r,ns:null,nonMinifiedName:r,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:3,flags:64,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:go(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,0,o)}(0,{result:0,term:1,formatter:2})],function(t,e){var n=e.component;t(e,2,0,t(e,3,0,e.context.$implicit,n.term,n.formatter),n.resultTemplate||Xo(e.parent,0))},function(t,e){var n=e.component;t(e,0,0,n.id+"-"+e.context.index,e.context.index===n.activeIdx)})}function OT(t){return Lr(0,[(t()(),mo(0,[["rt",2]],null,0,null,LT)),(t()(),mo(16777216,null,null,1,null,DT)),ar(2,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.results)},null)}var AT=No("ngb-typeahead-window",NE,function(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-typeahead-window",[["class","dropdown-menu show"],["role","listbox"]],[[8,"id",0]],null,null,OT,kT)),ar(1,114688,null,0,NE,[],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,Xo(e,1).id)})},{id:"id",focusFirst:"focusFirst",results:"results",term:"term",formatter:"formatter",resultTemplate:"resultTemplate"},{selectEvent:"select",activeChangeEvent:"activeChange"},[]),NT=Hi({encapsulation:0,styles:[".ngb-highlight[_ngcontent-%COMP%]{font-weight:700}"],data:{}});function GT(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"span",[],[[8,"className",0]],null,null,null,null)),(t()(),Pr(1,null,["",""]))],null,function(t,e){t(e,0,0,e.component.highlightClass),t(e,1,0,e.parent.context.$implicit)})}function VT(t){return Lr(0,[(t()(),Pr(0,null,["",""]))],null,function(t,e){t(e,0,0,e.parent.context.$implicit)})}function jT(t){return Lr(0,[(t()(),mo(16777216,null,null,1,null,GT)),ar(1,16384,null,0,Yb,[En,Cn],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),mo(0,[["even",2]],null,0,null,VT))],function(t,e){t(e,1,0,e.context.odd,Xo(e,2))},null)}function BT(t){return Lr(2,[(t()(),mo(16777216,null,null,1,null,jT)),ar(1,278528,null,0,Wb,[En,Cn,Yn],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,1,0,e.component.parts)},null)}var zT=Hi({encapsulation:2,styles:[],data:{}});function HT(t){return Lr(0,[],null,null)}var WT=No("ngb-modal-backdrop",vE,function(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-modal-backdrop",[["style","z-index: 1050"]],[[8,"className",0]],null,null,HT,zT)),ar(1,49152,null,0,vE,[],null,null)],null,function(t,e){t(e,0,0,"modal-backdrop fade show"+(Xo(e,1).backdropClass?" "+Xo(e,1).backdropClass:""))})},{backdropClass:"backdropClass"},{},[]),UT=Hi({encapsulation:2,styles:[],data:{}});function YT(t){return Lr(0,[(t()(),vo(0,0,null,null,2,"div",[["role","document"]],[[8,"className",0]],null,null,null,null)),(t()(),vo(1,0,null,null,1,"div",[["class","modal-content"]],null,null,null,null,null)),Ir(null,0)],null,function(t,e){var n=e.component;t(e,0,0,"modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":""))})}var KT=No("ngb-modal-window",CE,function(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"ngb-modal-window",[["role","dialog"],["tabindex","-1"]],[[8,"className",0],[1,"aria-labelledby",0]],[[null,"keyup.esc"],[null,"click"]],function(t,e,n){var i=!0;return"keyup.esc"===e&&(i=!1!==Xo(t,1).escKey(n)&&i),"click"===e&&(i=!1!==Xo(t,1).backdropClick(n)&&i),i},YT,UT)),ar(1,4440064,null,0,CE,[Jb,bn],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,"modal fade show d-block"+(Xo(e,1).windowClass?" "+Xo(e,1).windowClass:""),Xo(e,1).ariaLabelledBy)})},{ariaLabelledBy:"ariaLabelledBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",size:"size",windowClass:"windowClass"},{dismissEvent:"dismiss"},["*"]),XT=function(){},ZT=function(){},qT=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var i=t.slice(0,n),o=i.toLowerCase(),r=t.slice(n+1).trim();e.maybeSetNormalizedName(i,o),e.headers.has(o)?e.headers.get(o).push(r):e.headers.set(o,[r])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var i=t[n],o=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(e.headers.set(o,i),e.maybeSetNormalizedName(n,o))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,c(n)),this.headers.set(e,i);break;case"d":var o=t.value;if(o){var r=this.headers.get(e);if(!r)return;0===(r=r.filter(function(t){return-1===o.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,r)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),JT=function(){function t(){}return t.prototype.encodeKey=function(t){return QT(t)},t.prototype.encodeValue=function(t){return QT(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function QT(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var $T=function(){function t(t){void 0===t&&(t={});var e,n,i,o=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new JT,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,i=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),o=u(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),r=o[0],s=o[1],a=i.get(r)||[];a.push(s),i.set(r,a)}),i)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];o.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var i=t.map.get(e.param)||[],o=i.indexOf(e.value);-1!==o&&i.splice(o,1),i.length>0?t.map.set(e.param,i):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function tS(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function eS(t){return"undefined"!=typeof Blob&&t instanceof Blob}function nS(t){return"undefined"!=typeof FormData&&t instanceof FormData}var iS=function(){function t(t,e,n,i){var o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,o=i):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new qT),this.params){var r=this.params.toString();if(0===r.length)this.urlWithParams=e;else{var s=e.indexOf("?");this.urlWithParams=e+(-1===s?"?":s<e.length-1?"&":"")+r}}else this.params=new $T,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:tS(this.body)||eS(this.body)||nS(this.body)||"string"==typeof this.body?this.body:this.body instanceof $T?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:nS(this.body)?null:eS(this.body)?this.body.type||null:tS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $T?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,l=e.headers||this.headers,h=e.params||this.params;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},l)),e.setParams&&(h=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},h)),new t(n,i,r,{params:h,headers:l,reportProgress:a,responseType:o,withCredentials:s})},t}(),oS=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),rS=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new qT,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),sS=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=oS.ResponseHeader,n}return o(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(rS),aS=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=oS.Response,n.body=void 0!==e.body?e.body:null,n}return o(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(rS),lS=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return o(e,t),e}(rS);function hS(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var uS=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var i,o=this;if(void 0===n&&(n={}),t instanceof iS)i=t;else{var r;r=n.headers instanceof qT?n.headers:new qT(n.headers);var s=void 0;n.params&&(s=n.params instanceof $T?n.params:new $T({fromObject:n.params})),i=new iS(t,e,void 0!==n.body?n.body:null,{headers:r,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,i,o=t[t.length-1];switch(N(o)?t.pop():o=void 0,t.length){case 0:return function(t){return t?function(t){return new M(function(e){return t.schedule(function(){return e.complete()})})}(t):$b}(o);case 1:return o?Q(t,o):(n=t[0],(i=new M(function(t){t.next(n),t.complete()}))._isScalar=!0,i.value=n,i);default:return Q(t,o)}}(i).pipe($(function(t){return o.handler.handle(t)},void 0,1));if(t instanceof iS||"events"===n.observe)return a;var l=a.pipe(yC(function(t){return t instanceof aS}));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(Z(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return l.pipe(Z(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return l.pipe(Z(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return l.pipe(Z(function(t){return t.body}))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new $T).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,hS(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,hS(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,hS(n,e))},t}(),cS=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),dS=new ct("HTTP_INTERCEPTORS"),pS=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),fS=/^\)\]\}',?\n/,gS=function(){},_S=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),yS=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new M(function(n){var i=e.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach(function(t,e){return i.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var o=t.detectContentTypeHeader();null!==o&&i.setRequestHeader("Content-Type",o)}if(t.responseType){var r=t.responseType.toLowerCase();i.responseType="json"!==r?r:"text"}var s=t.serializeBody(),a=null,l=function(){if(null!==a)return a;var e=1223===i.status?204:i.status,n=i.statusText||"OK",o=new qT(i.getAllResponseHeaders()),r=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return a=new sS({headers:o,status:e,statusText:n,url:r})},h=function(){var e=l(),o=e.headers,r=e.status,s=e.statusText,a=e.url,h=null;204!==r&&(h=void 0===i.response?i.responseText:i.response),0===r&&(r=h?200:0);var u=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof h){var c=h;h=h.replace(fS,"");try{h=""!==h?JSON.parse(h):null}catch(t){h=c,u&&(u=!1,h={error:t,text:h})}}u?(n.next(new aS({body:h,headers:o,status:r,statusText:s,url:a||void 0})),n.complete()):n.error(new lS({error:h,headers:o,status:r,statusText:s,url:a||void 0}))},u=function(t){var e=new lS({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error"});n.error(e)},c=!1,d=function(e){c||(n.next(l()),c=!0);var o={type:oS.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(o.total=e.total),"text"===t.responseType&&i.responseText&&(o.partialText=i.responseText),n.next(o)},p=function(t){var e={type:oS.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return i.addEventListener("load",h),i.addEventListener("error",u),t.reportProgress&&(i.addEventListener("progress",d),null!==s&&i.upload&&i.upload.addEventListener("progress",p)),i.send(s),n.next({type:oS.Sent}),function(){i.removeEventListener("error",u),i.removeEventListener("load",h),t.reportProgress&&(i.removeEventListener("progress",d),null!==s&&i.upload&&i.upload.removeEventListener("progress",p)),i.abort()}})},t}(),mS=new ct("XSRF_COOKIE_NAME"),vS=new ct("XSRF_HEADER_NAME"),xS=function(){},bS=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=zb(t,this.cookieName),this.lastCookieString=t),this.lastToken},s([a(0,Tt(Jb)),a(1,Tt(Se)),a(2,Tt(mS))],t)}(),wS=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)},s([a(1,Tt(vS))],t)}(),CS=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(dS,[]);this.chain=e.reduceRight(function(t,e){return new cS(t,e)},this.backend)}return this.chain.handle(t)},t}(),ES=function(){function t(){}var e;return e=t,t.disable=function(){return{ngModule:e,providers:[{provide:wS,useClass:pS}]}},t.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:mS,useValue:t.cookieName}:[],t.headerName?{provide:vS,useValue:t.headerName}:[]]}},t}(),TS=function(){},SS=Hi({encapsulation:0,styles:[[""]],data:{}});function IS(t){return Lr(0,[(t()(),vo(0,0,null,null,8,"div",[["class","prediction"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getPrediction()&&i),i},null,null)),(t()(),vo(1,0,null,null,3,"p",[],null,null,null,null,null)),(t()(),vo(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Pr(-1,null,["Current propability:"])),(t()(),Pr(4,null,[" "," %"])),(t()(),vo(5,0,null,null,3,"p",[["style","text-align: center"]],null,null,null,null,null)),(t()(),vo(6,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Pr(-1,null,["Predict UFO location"])),(t()(),vo(8,0,null,null,0,"input",[["class","form-control"],["type","date"]],[[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.getPrediction(n.target.value)&&i),i},null,null)),(t()(),vo(9,0,null,null,2,"div",[["class","year"]],null,null,null,null,null)),(t()(),vo(10,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Pr(11,null,[" "," "])),(t()(),vo(12,0,null,null,0,"div",[["id","map"]],null,null,null,null,null)),(t()(),vo(13,0,null,null,7,"div",[["class","slidecontainer"]],null,null,null,null,null)),(t()(),vo(14,0,null,null,1,"h2",[["style","text-align: center; margin-top: -15px"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.changeType()&&i),i},null,null)),(t()(),Pr(15,null,[""," count: ",""])),(t()(),vo(16,0,null,null,0,"input",[["class","slider"],["id","myRange"],["type","range"]],[[8,"min",0],[8,"max",0],[8,"value",0]],null,null,null,null)),(t()(),vo(17,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Pr(18,null,["",""])),(t()(),vo(19,0,null,null,1,"span",[["style","float: right"]],null,null,null,null,null)),(t()(),Pr(20,null,["",""]))],null,function(t,e){var n=e.component;t(e,4,0,n.propability.toFixed(2)),t(e,8,0,n.predictionDate),t(e,11,0,n.currentYear),t(e,15,0,n.filterType,n.count),t(e,16,0,_o(1,"",n.minYear,""),_o(1,"",n.maxYear,""),_o(1,"",n.currentYear,"")),t(e,18,0,n.minYear),t(e,20,0,n.maxYear)})}var RS=No("app-root",nb,function(t){return Lr(0,[(t()(),vo(0,0,null,null,1,"app-root",[],null,null,null,IS,SS)),ar(1,4243456,null,0,nb,[uS],null,null)],null,null)},{},{},[]),PS=function(t,e,n){return new Vs(fl,[nb],function(t){return function(t){for(var e={},n=[],i=!1,o=0;o<t.length;o++){var r=t[o];r.token===le&&!0===r.value&&(i=!0),1073741824&r.flags&&n.push(r.token),r.index=o,e[ji(r.token)]=r}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:i}}([Ro(512,Ve,je,[[8,[HE,bT,WT,KT,IT,MT,AT,RS]],[3,Ve],ze]),Ro(5120,Qn,ei,[[3,Qn]]),Ro(4608,jb,Bb,[Qn,[2,Vb]]),Ro(4608,Me,Me,[]),Ro(5120,we,Ce,[]),Ro(5120,Yn,$n,[]),Ro(5120,Kn,ti,[]),Ro(4608,Qw,$w,[Jb]),Ro(6144,Si,null,[Qw]),Ro(4608,Uw,Kw,[]),Ro(5120,mw,function(t,e,n,i,o,r,s,a){return[new Hw(t,e,n),new Jw(i),new Xw(o,r,s,a)]},[Jb,Ze,Se,Jb,Jb,Uw,Re,[2,Yw]]),Ro(4608,vw,vw,[mw,Ze]),Ro(135680,ww,ww,[Jb]),Ro(4608,Pw,Pw,[vw,ww]),Ro(6144,mn,null,[Pw]),Ro(6144,bw,null,[ww]),Ro(4608,on,on,[Ze]),Ro(4608,xS,bS,[Jb,Se,mS]),Ro(4608,wS,wS,[xS,vS]),Ro(5120,dS,function(t){return[t]},[wS]),Ro(4608,_S,_S,[]),Ro(6144,gS,null,[_S]),Ro(4608,yS,yS,[gS]),Ro(6144,ZT,null,[yS]),Ro(4608,XT,CS,[ZT,Ot]),Ro(4608,uS,uS,[XT]),Ro(4608,uC,uC,[]),Ro(4608,TE,TE,[Ve,Ot,EE,gE]),Ro(1073742336,qb,qb,[]),Ro(1024,ae,aC,[]),Ro(1024,xe,function(t){return[(e=t,gw("probe",yw),gw("coreTokens",r({},_w,(e||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return yw})];var e},[[2,cn]]),Ro(512,be,be,[[2,xe]]),Ro(131584,_n,_n,[Ze,Re,Ot,ae,Ve,be]),Ro(1073742336,ni,ni,[_n]),Ro(1073742336,lC,lC,[[3,lC]]),Ro(1073742336,ES,ES,[]),Ro(1073742336,TS,TS,[]),Ro(1073742336,fC,fC,[]),Ro(1073742336,gC,gC,[]),Ro(1073742336,FC,FC,[]),Ro(1073742336,AC,AC,[]),Ro(1073742336,NC,NC,[]),Ro(1073742336,GC,GC,[]),Ro(1073742336,VC,VC,[]),Ro(1073742336,pE,pE,[]),Ro(1073742336,fE,fE,[]),Ro(1073742336,SE,SE,[]),Ro(1073742336,IE,IE,[]),Ro(1073742336,PE,PE,[]),Ro(1073742336,ME,ME,[]),Ro(1073742336,kE,kE,[]),Ro(1073742336,LE,LE,[]),Ro(1073742336,FE,FE,[]),Ro(1073742336,OE,OE,[]),Ro(1073742336,GE,GE,[]),Ro(1073742336,VE,VE,[]),Ro(1073742336,fl,fl,[]),Ro(256,le,!0,[]),Ro(256,mS,"XSRF-TOKEN",[]),Ro(256,vS,"X-XSRF-TOKEN",[])])})}();(function(){if(ln)throw new Error("Cannot enable prod mode after platform setup.");an=!1})(),sC().bootstrapModuleFactory(PS).catch(function(t){return console.error(t)})}},[[0,0]]]);